{"version":3,"file":"teacher.js","sources":["pages/teacher/teacher.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhY2hlci90ZWFjaGVyLnV2dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 主要内容区域（可滚动） -->\r\n    <scroll-view class=\"content-area\" scroll-y=\"true\">\r\n      \r\n      <!-- 头像独立于容器 -->\r\n      <image class=\"teacher-avatar\" :src=\"teacherInfo.avatar\" mode=\"aspectFill\"></image>\r\n      \r\n      <!-- 老师个人信息卡片 -->\r\n      <view class=\"teacher-profile\">\r\n        <!-- 昵称部分 -->\r\n        <view class=\"name-row\">\r\n          <view class=\"teacher-info\">\r\n            <text class=\"teacher-name\">{{teacherInfo.nickname}}</text>\r\n            <!-- 只显示第一个标签（已认证/未认证）放在名字旁边 -->\r\n            <view v-if=\"teacherInfo.tags && teacherInfo.tags.length > 0\" class=\"tag certification-tag\" :class=\"{ 'standard-tag': true }\">\r\n              {{teacherInfo.tags[0]}}\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 标签部分 - 只显示除第一个以外的其他标签 -->\r\n        <view class=\"tags-row\">\r\n          <view class=\"tag\" v-for=\"(tag, index) in teacherInfo.tags.slice(1)\" :key=\"index\">\r\n            {{tag}}\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 学校专业信息 -->\r\n        <view class=\"education-info\">\r\n          {{teacherInfo.school}} | {{teacherInfo.major}} | {{teacherInfo.score}}\r\n        </view>\r\n        \r\n        <!-- 个人简介 -->\r\n        <view class=\"profile-intro\">\r\n          <text class=\"intro-title\">个人简介：</text>\r\n          <text class=\"intro-text\">{{teacherInfo.introduction}}</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 服务部分（独立容器） -->\r\n      <view class=\"services-section\">\r\n        <!-- 标签页导航 -->\r\n        <view class=\"tab-navigation\">\r\n          <view \r\n            class=\"tab-item\" \r\n            :class=\"{ active: activeTab === 'services' }\" \r\n            @click=\"switchTab('services')\"\r\n          >\r\n            服务\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 服务列表内容 -->\r\n        <view class=\"services-container\" v-if=\"activeTab === 'services'\">\r\n          <template v-if=\"services.length > 0\">\r\n            <view class=\"service-card\" v-for=\"(service, index) in services\" :key=\"index\">\r\n              <view class=\"service-card-header\">\r\n                <view class=\"service-image-container\">\r\n                  <image class=\"service-image\" :src=\"service.image\" mode=\"aspectFill\"></image>\r\n                </view>\r\n                <view class=\"service-title-price\">\r\n                  <text class=\"service-title\">{{service.title}}</text>\r\n                  <text class=\"service-price\">¥{{service.price}}</text>\r\n                </view>\r\n              </view>\r\n              <view class=\"service-description-container\">\r\n                <text class=\"service-description\">{{service.description}}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"consult-button-container\">\r\n              <view class=\"consult-button\" @click=\"startConsultation\">立即咨询</view>\r\n            </view>\r\n          </template>\r\n          <view class=\"empty-tip\" v-else>\r\n            该老师暂未开通服务\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n    import { Navigator, MessageRoutes } from '@/router/Router.js'\r\n    import store from '@/store/index.js'\r\n    import { mock } from '@/store/services'\r\n    /**\r\n    * @file 老师详情页\r\n    * @description 展示老师个人信息和服务\r\n    */\r\n    export default {\r\n        data() {\r\n        return {\r\n            teacherId: null,\r\n            teacherInfo: {\r\n            id: null,\r\n            name: '',\r\n            avatar: '',\r\n            school: '',\r\n            major: '',\r\n            is_certified: false,\r\n            tags: [],\r\n            introduction: ''\r\n            },\r\n            activeTab: 'services', // 当前选中的标签页\r\n            services: [], // 服务列表\r\n            isLoading: false // 是否正在加载\r\n        }\r\n        },\r\n    \r\n    async onLoad(options) {\r\n      // 获取老师ID\r\n      this.teacherId = options.id || 1;\r\n      \r\n      // 显示加载状态\r\n      this.isLoading = true;\r\n      \r\n      // 直接加载老师信息和服务数据（单个API调用）\r\n      this.loadTeacherData();\r\n    },\r\n    \r\n    methods: {\r\n      /**\r\n       * @description 切换标签页\r\n       * @param {String} tab - 标签名称\r\n       */\r\n      switchTab(tab) {\r\n        if (this.activeTab !== tab) {\r\n          this.activeTab = tab;\r\n        }\r\n      },\r\n      \r\n      /**\r\n       * @description 加载老师信息和服务列表（合并为一个API调用）\r\n       */\r\n      async loadTeacherData() {\r\n        try {\r\n          // 显示加载提示\r\n          uni.showLoading({\r\n            title: '加载中...'\r\n          });\r\n          \r\n          // 使用合并后的API获取所有数据\r\n          const result = await store.dispatch('teacher/getTeacherInfo', this.teacherId);\r\n          \r\n          if (result.success) {\r\n            // 从store中获取老师信息和服务列表\r\n            this.teacherInfo = store.getters['teacher/teacherInfo'];\r\n            this.services = store.getters['teacher/services'];\r\n          } else {\r\n            throw new Error('获取老师数据失败');\r\n          }\r\n        } catch (error) {\r\n          uni.__f__('error','at pages/teacher/teacher.uvue:155','加载老师数据失败:', error);\r\n          uni.showToast({\r\n            title: '加载失败，请重试',\r\n            icon: 'none'\r\n          });\r\n        } finally {\r\n          uni.hideLoading();\r\n          this.isLoading = false;\r\n        }\r\n      },\r\n      \r\n      /**\r\n       * @description 发起咨询\r\n       */\r\n      startConsultation() {\r\n        this.isLoading = true;\r\n        \r\n        setTimeout(() => {\r\n          this.isLoading = false;\r\n          // 使用router.js中的方法跳转到聊天页面\r\n          Navigator.toChat(this.teacherId);\r\n        }, 800);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  /* 全局样式变量 */\r\n  page {\r\n    --primary-color: #1E90FF;\r\n    --primary-light: #87CEEB;\r\n    --primary-dark: #0073CF;\r\n    --gradient-blue: linear-gradient(135deg, #1E90FF, #00BFFF);\r\n    --gradient-blue-light: linear-gradient(135deg, #87CEEB, #48D1CC);\r\n    --text-primary: #333333;\r\n    --text-secondary: #666666;\r\n    --text-light: #999999;\r\n    --bg-color: #F5F9FC;\r\n    --card-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n    font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\r\n  }\r\n  \r\n  .container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 100vh;\r\n    background-color: var(--bg-color);\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  /* 内容区域 */\r\n  .content-area {\r\n    flex: 1;\r\n  }\r\n  \r\n  /* 老师个人信息区域 */\r\n  .teacher-profile {\r\n    background-color: #ffffff;\r\n    padding: 20px;\r\n    margin: 35px 15px 0 15px;\r\n    border-radius: 16px 16px 0 0;\r\n    box-shadow: var(--card-shadow);\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n  \r\n  /* 头像样式 - 独立于容器 */\r\n  .teacher-avatar {\r\n    width: 100px;\r\n    height: 100px;\r\n    border-radius: 50px;\r\n    border: 4px solid #ffffff;\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n    position: absolute;\r\n    left: 8px;\r\n    top: 8px;\r\n    z-index: 10;\r\n    background-color: #ffffff;\r\n  }\r\n  \r\n  /* 昵称部分 */\r\n  .name-row {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n    margin-top: 25px;\r\n    margin-left: -100px; \r\n  }\r\n  \r\n  .teacher-info {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .teacher-name {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  /* 名字旁边的认证标签 */\r\n  .certification-tag {\r\n    font-size: 12px;\r\n    padding: 2px 8px;\r\n    border-radius: 10px;\r\n    margin-left: 120px;\r\n    margin-top: -20px;\r\n    height: 22px;\r\n  }\r\n  \r\n  /* 标签水平排列，宽度自适应 */\r\n  .tags-row {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    margin-bottom: 15px;\r\n    margin-left: 30px;\r\n    gap: 8px;\r\n    margin-top: 5px;\r\n  }\r\n  \r\n  .tag {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 12px;\r\n    color: var(--text-primary);\r\n    background-color: #f0f0f0;\r\n    padding: 3px 10px;\r\n    border-radius: 12px;\r\n    white-space: nowrap;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .standard-tag {\r\n    color: #ffffff;\r\n    background-image: var(--gradient-blue-light);\r\n    box-shadow: 0 2px 5px rgba(30, 144, 255, 0.2);\r\n  }\r\n  \r\n  .education-info {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    margin-top: 5px;\r\n    margin-bottom: 15px;\r\n    margin-left: 50px;\r\n  }\r\n  \r\n  .profile-intro {\r\n    padding: 12px;\r\n    background-color: rgba(30, 144, 255, 0.05);\r\n    border-radius: 12px;\r\n    border-left: 3px solid var(--primary-color);\r\n  }\r\n  \r\n  .intro-title {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-bottom: 5px;\r\n    display: block;\r\n  }\r\n  \r\n  .intro-text {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    line-height: 1.6;\r\n  }\r\n  \r\n  /* 标签页导航 */\r\n  .tab-navigation {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    background-color: #ffffff;\r\n    padding: 12px 15px;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n    margin: 0 15px;\r\n    border-radius: 16px 16px 0 0;\r\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.03);\r\n  }\r\n  \r\n  .tab-item {\r\n    padding: 10px 10px;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    color: var(--text-secondary);\r\n    position: relative;\r\n    transition: all 0.3s ease;\r\n    min-width: 80px;\r\n    text-align: center;\r\n    margin-left: -280px;\r\n    margin-top: -10px;\r\n  }\r\n  \r\n  .tab-item.active {\r\n    color: var(--primary-color);\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .tab-item.active:after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: 30px;\r\n    height: 3px;\r\n    background-image: var(--gradient-blue);\r\n    border-radius: 3px;\r\n  }\r\n  \r\n  /* 动态和服务容器 */\r\n  .posts-container,\r\n  .services-container {\r\n    padding: 0 15px 30px 15px;\r\n    background-color: #ffffff;\r\n    margin: 0 15px;\r\n    border-radius: 0 0 16px 16px;\r\n    box-shadow: var(--card-shadow);\r\n  }\r\n  \r\n  /* 服务部分样式 */\r\n  .service-card {\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: #ffffff;\r\n    border-radius: 16px;\r\n    padding: 15px;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  }\r\n  \r\n  .service-card-header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .service-image-container {\r\n    width: 70px;\r\n    height: 70px;\r\n    margin-right: 15px;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .service-image {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .service-title-price {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .service-title {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .service-price {\r\n    font-size: 16px;\r\n    color: #FF6347;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .service-description-container {\r\n    width: 100%;\r\n  }\r\n  \r\n  .service-description {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    line-height: 1.5;\r\n  }\r\n  \r\n  .consult-button-container {\r\n    margin-top: 20px;\r\n    padding: 0 15px;\r\n  }\r\n  \r\n  .consult-button {\r\n    width: 100%;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    background-image: var(--gradient-blue);\r\n    color: #ffffff;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    border-radius: 25px;\r\n    text-align: center;\r\n    box-shadow: 0 5px 15px rgba(30, 144, 255, 0.3);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .consult-button:active {\r\n    transform: translateY(2px);\r\n    box-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);\r\n  }\r\n  \r\n  /* 空状态提示 */\r\n  .empty-tip {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 200px;\r\n    color: var(--text-light);\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .empty-tip::before {\r\n    content: '';\r\n    width: 60px;\r\n    height: 60px;\r\n    margin-bottom: 15px;\r\n    background-color: rgba(30, 144, 255, 0.1);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  \r\n  .services-section {\r\n    margin-top: 15px;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n</style>","import MiniProgramPage from 'E:/yanshilu重新来过/前端yanshilu_1/pages/teacher/teacher.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","store","Navigator"],"mappings":";;;;;AA2FI,MAAA,YAAeA,8BAAA;AAAA,EACX,OAAI;AACJ,WAAO;AAAA,MACH,WAAW;AAAA,MACX,aAAa,IAAA,cAAA;AAAA,QACb,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,cAAc;AAAA,QACd,MAAM,CAAE;AAAA,QACR,cAAc;AAAA,OACb;AAAA,MACD,WAAW;AAAA,MACX,UAAU,CAAE;AAAA,MACZ,WAAW;AAAA;AAAA;EAEd;AAAA,EAEC,OAAO,SAAO;;AAElB,WAAK,YAAY,QAAQ,MAAM;AAG/B,WAAK,YAAY;AAGjB,WAAK,gBAAe;AAAA,KACrB;AAAA,EAAA;AAAA,EAED,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,IAKP,UAAU,MAAG,MAAA;AACX,UAAI,KAAK,cAAc,KAAK;AAC1B,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA;AAAA;AAAA,IAKK,kBAAe;;AACnB,YAAI;AAEFC,wBAAAA,MAAI,YAAY;AAAA,YACd,OAAO;AAAA,UACR,CAAA;AAGD,gBAAM,SAAS,MAAMC,kBAAM,SAAS,0BAA0B,KAAK,SAAS;AAE5E,cAAI,OAAO,SAAS;AAElB,iBAAK,cAAcA,YAAAA,MAAM,QAAQ,qBAAqB;AACtD,iBAAK,WAAWA,YAAAA,MAAM,QAAQ,kBAAkB;AAAA,UAChD,OAAK;AACL,kBAAM,IAAI,MAAM,UAAU;AAAA,UAC5B;AAAA,QACA,SAAO,OAAO;AACdD,wBAAG,MAAC,MAAM,SAAQ,qCAAoC,aAAa,KAAK;AACxEA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAA;AAAA,QACH,UAAU;AACRA,wBAAG,MAAC,YAAW;AACf,eAAK,YAAY;AAAA,QACnB;AAAA,OACD;AAAA,IAAA;AAAA;AAAA;AAAA;AAAA,IAKD,oBAAiB;AACf,WAAK,YAAY;AAEjB,iBAAW,MAAA;AACT,aAAK,YAAY;AAEjBE,sBAAAA,UAAU,OAAO,KAAK,SAAS;AAAA,MAChC,GAAE,GAAG;AAAA,IACR;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjLF,GAAG,WAAW,eAAe;"}