{"version":3,"file":"tab-bar.js","sources":["components/tab-bar/tab-bar.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RToveWFuc2hpbHXph43mlrDmnaXov4cv5YmN56uveWFuc2hpbHVfMS9jb21wb25lbnRzL3RhYi1iYXIvdGFiLWJhci51dnVl"],"sourcesContent":["<template>\n\t<view class=\"tab-bar-wrapper\">\n\t\t<view class=\"tab-bar\">\n\t\t\t<view class=\"tab-item\" :class=\"{ active: pageName === 'index' }\" @click=\"switchPage('index')\">\n\t\t\t\t<image class=\"nav-icon\" :src=\"getIconPath('index')\"></image>\n\t\t\t\t<text class=\"tab-text\">首页</text>\n\t\t\t</view>\n\t\t\t<view class=\"tab-item\" :class=\"{ active: pageName === 'message' }\" @click=\"switchPage('message')\">\n\t\t\t\t<image class=\"nav-icon\" :src=\"getIconPath('message')\"></image>\n\t\t\t\t<text class=\"tab-text\">消息</text>\n\t\t\t</view>\n\t\t\t<view class=\"tab-item\" :class=\"{ active: pageName === 'mine' }\" @click=\"switchPage('mine')\">\n\t\t\t\t<image class=\"nav-icon\" :src=\"getIconPath('mine')\"></image>\n\t\t\t\t<text class=\"tab-text\">我的</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\t/**\n\t * @description 底部导航栏组件\n\t */\n\timport { Navigator, IndexRoutes, MessageRoutes, MineRoutes } from '@/router/Router.js';\n\t\n\texport default {\n\t\tprops: {\n\t\t\tpageName: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'index'\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t/**\n\t\t\t\t * @description 页面路径映射\n\t\t\t\t */\n\t\t\t\ttabRoutes: {\n\t\t\t\t\t'index': IndexRoutes.INDEX,\n\t\t\t\t\t'message': MessageRoutes.MESSAGE,\n\t\t\t\t\t'mine': MineRoutes.MINE\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @description 页面图标路径映射\n\t\t\t\t */\n\t\t\t\ticonPaths: {\n\t\t\t\t\t'index': {\n\t\t\t\t\t\tnormal: '/static/image/tab-bar/wechat.png',\n\t\t\t\t\t\tactive: '/static/image/tab-bar/default_avatar.png'\n\t\t\t\t\t},\n\t\t\t\t\t'message': {\n\t\t\t\t\t\tnormal: '/static/image/tab-bar/wechat.png',\n\t\t\t\t\t\tactive: '/static/image/tab-bar/default_avatar.png'\n\t\t\t\t\t},\n\t\t\t\t\t'mine': {\n\t\t\t\t\t\tnormal: '/static/image/tab-bar/wechat.png',\n\t\t\t\t\t\tactive: '/static/image/tab-bar/default_avatar.png'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * @description 获取页面对应的图标路径\n\t\t\t * @param {string} page - 页面名称\n\t\t\t * @returns {string} 图标路径\n\t\t\t */\n\t\t\tgetIconPath(page) {\n\t\t\t\tconst isActive = page === this.pageName;\n\t\t\t\tconst iconConfig = this.iconPaths[page];\n\t\t\t\treturn isActive ? iconConfig.active : iconConfig.normal;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 切换到指定页面\n\t\t\t * @param {string} page - 页面名称\n\t\t\t */\n\t\t\tswitchPage(page) {\n\t\t\t\t// 如果已经在当前页面，不执行操作\n\t\t\t\tif (page === this.pageName) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 跳转前检查目标页面是否存在\n\t\t\t\tif (!this.tabRoutes[page]) {\n\t\t\t\t\tuni.__f__('error','at components/tab-bar/tab-bar.uvue:86','页面不存在:', page);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 获取当前页面栈深度\n\t\t\t\t\tconst pages = getCurrentPages();\n\t\t\t\t\tconst stackDepth = pages.length;\n\t\t\t\t\t\n\t\t\t\t\t// 如果页面栈深度接近上限(8或以上)，使用reLaunch清空页面栈\n\t\t\t\t\t// 微信小程序页面栈上限为10\n\t\t\t\t\tif (stackDepth >= 8) {\n\t\t\t\t\t\tuni.__f__('warn','at components/tab-bar/tab-bar.uvue:98','页面栈接近上限，使用reLaunch清空页面栈');\n\t\t\t\t\t\tswitch(page) {\n\t\t\t\t\t\t\tcase 'index':\n\t\t\t\t\t\t\t\tNavigator.reLaunch(IndexRoutes.INDEX);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'message':\n\t\t\t\t\t\t\t\tNavigator.reLaunch(MessageRoutes.MESSAGE);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'mine':\n\t\t\t\t\t\t\t\tNavigator.reLaunch(MineRoutes.MINE);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tuni.__f__('error','at components/tab-bar/tab-bar.uvue:110','未知的页面类型:', page);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 修改：使用redirectTo而不是switchTab\n\t\t\t\t\t// redirectTo会关闭当前页面，跳转到应用内的某个页面\n\t\t\t\t\tswitch(page) {\n\t\t\t\t\t\tcase 'index':\n\t\t\t\t\t\t\tNavigator.redirectTo(IndexRoutes.INDEX);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'message':\n\t\t\t\t\t\t\tNavigator.redirectTo(MessageRoutes.MESSAGE);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'mine':\n\t\t\t\t\t\t\tNavigator.redirectTo(MineRoutes.MINE);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tuni.__f__('error','at components/tab-bar/tab-bar.uvue:128','未知的页面类型:', page);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tuni.__f__('error','at components/tab-bar/tab-bar.uvue:131','Tab切换失败:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.tab-bar-wrapper {\n\t\twidth: 100%;\n\t\theight: 55px;\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 999;\n\t}\n\t\n\t.tab-bar {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\twidth: 100%;\n\t\theight: 55px;\n\t\tborder-top: 1px solid #eeeeee;\n\t\tbackground-color: #ffffff;\n\t}\n\t\n\t.tab-item {\n\t\tflex: 1;\n\t\theight: 55px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t\n\t.nav-icon {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tmargin-bottom: 3px;\n\t}\n\t\n\t.tab-text {\n\t\tfont-size: 10px;\n\t\tcolor: #999999;\n\t}\n\t\n\t.active .tab-text {\n\t\tcolor: #007aff;\n\t}\n</style> ","import Component from 'E:/yanshilu重新来过/前端yanshilu_1/components/tab-bar/tab-bar.uvue'\nwx.createComponent(Component)"],"names":["defineComponent","IndexRoutes","MessageRoutes","MineRoutes","uni","Navigator"],"mappings":";;;AAyBC,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAO;AAAA,IACN,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAI;AACH,WAAO;AAAA;AAAA;AAAA;AAAA,MAIN,WAAW,IAAA,cAAA;AAAA,QACV,SAASC,cAAW,YAAC;AAAA,QACrB,WAAWC,cAAa,cAAC;AAAA,QACzB,QAAQC,cAAU,WAAC;AAAA,OACnB;AAAA;AAAA;AAAA;AAAA,MAID,WAAW,IAAA,cAAA;AAAA,QACV,SAAS,IAAA,cAAA;AAAA,UACR,QAAQ;AAAA,UACR,QAAQ;AAAA,SACR;AAAA,QACD,WAAW,IAAA,cAAA;AAAA,UACV,QAAQ;AAAA,UACR,QAAQ;AAAA,SACR;AAAA,QACD,QAAQ,IAAA,cAAA;AAAA,UACP,QAAQ;AAAA,UACR,QAAQ;AAAA,SACT;AAAA,OACD;AAAA;EAED;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMR,YAAY,OAAI,MAAA;AACf,YAAM,WAAW,SAAS,KAAK;AAC/B,YAAM,aAAa,KAAK,UAAU,IAAI;AACtC,aAAO,WAAW,WAAW,SAAS,WAAW;AAAA,IACjD;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,WAAW,OAAI,MAAA;AAEd,UAAI,SAAS,KAAK,UAAU;AAC3B,eAAM;AAAA,MACP;AAGA,UAAI,CAAC,KAAK,UAAU,IAAI,GAAG;AAC1BC,sBAAG,MAAC,MAAM,SAAQ,yCAAwC,UAAU,IAAI;AACxE,eAAM;AAAA,MACP;AAEA,UAAI;AAEH,cAAM,QAAQ;AACd,cAAM,aAAa,MAAM;AAIzB,YAAI,cAAc,GAAG;AACpBA,wBAAAA,MAAI,MAAM,QAAO,yCAAwC,yBAAyB;AAClF,kBAAO,MAAI;AAAA,YACV,KAAK;AACJC,4BAAAA,UAAU,SAASJ,0BAAY,KAAK;AACpC;AAAA,YACD,KAAK;AACJI,4BAAAA,UAAU,SAASH,4BAAc,OAAO;AACxC;AAAA,YACD,KAAK;AACJG,4BAAAA,UAAU,SAASF,yBAAW,IAAI;AAClC;AAAA,YACD;AACCC,4BAAG,MAAC,MAAM,SAAQ,0CAAyC,YAAY,IAAI;AAAA,UAC7E;AACA,iBAAM;AAAA,QACP;AAIA,gBAAO,MAAI;AAAA,UACV,KAAK;AACJC,0BAAAA,UAAU,WAAWJ,0BAAY,KAAK;AACtC;AAAA,UACD,KAAK;AACJI,0BAAAA,UAAU,WAAWH,4BAAc,OAAO;AAC1C;AAAA,UACD,KAAK;AACJG,0BAAAA,UAAU,WAAWF,yBAAW,IAAI;AACpC;AAAA,UACD;AACCC,0BAAG,MAAC,MAAM,SAAQ,0CAAyC,YAAY,IAAI;AAAA,QAC7E;AAAA,MACD,SAAS,GAAG;AACXA,sBAAG,MAAC,MAAM,SAAQ,0CAAyC,YAAY,CAAC;AAAA,MACzE;AAAA,IACD;AAAA,EACD;CACD;;;;;;;;;;;;;;;;ACrID,GAAG,gBAAgB,SAAS;"}