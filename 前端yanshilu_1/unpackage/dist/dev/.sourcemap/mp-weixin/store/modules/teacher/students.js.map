{"version":3,"file":"students.js","sources":["store/modules/teacher/students.js"],"sourcesContent":["/**\r\n * @description 教师-学生管理模块 - 处理教师管理学生的功能\r\n */\r\nimport { services } from '../../services';\r\n\r\n// 初始状态\r\nconst state = {\r\n  studentsList: [],\r\n  selectedStudent: null,\r\n  loading: false,\r\n  error: null,\r\n  pagination: {\r\n    total: 0,\r\n    current: 1,\r\n    pageSize: 10\r\n  }\r\n};\r\n\r\n// Getters\r\nconst getters = {\r\n  studentsList: state => state.studentsList,\r\n  selectedStudent: state => state.selectedStudent,\r\n  loading: state => state.loading,\r\n  error: state => state.error,\r\n  pagination: state => state.pagination\r\n};\r\n\r\n// 引入常量类型\r\nconst FETCH_STUDENTS_REQUEST = 'FETCH_STUDENTS_REQUEST';\r\nconst FETCH_STUDENTS_SUCCESS = 'FETCH_STUDENTS_SUCCESS';\r\nconst FETCH_STUDENTS_FAILURE = 'FETCH_STUDENTS_FAILURE';\r\nconst SELECT_STUDENT = 'SELECT_STUDENT';\r\nconst UPDATE_PAGINATION = 'UPDATE_PAGINATION';\r\n\r\n// Mutations\r\nconst mutations = {\r\n  [FETCH_STUDENTS_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [FETCH_STUDENTS_SUCCESS](state, { students, total }) {\r\n    state.studentsList = students;\r\n    state.pagination.total = total;\r\n    state.loading = false;\r\n    state.error = null;\r\n  },\r\n  [FETCH_STUDENTS_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  },\r\n  [SELECT_STUDENT](state, student) {\r\n    state.selectedStudent = student;\r\n  },\r\n  [UPDATE_PAGINATION](state, pagination) {\r\n    state.pagination = { ...state.pagination, ...pagination };\r\n  }\r\n};\r\n\r\n// Actions\r\nconst actions = {\r\n  /**\r\n   * @description 获取教师管理的学生列表\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} params - 查询参数\r\n   * @returns {Promise<Object>} 学生列表\r\n   */\r\n  async fetchStudentsList({ commit, state }, params = {}) {\r\n    const queryParams = {\r\n      page: state.pagination.current,\r\n      pageSize: state.pagination.pageSize,\r\n      ...params\r\n    };\r\n    \r\n    commit(FETCH_STUDENTS_REQUEST);\r\n    \r\n    try {\r\n      const response = await services.teacher.getStudents(queryParams);\r\n      const { students, total } = response.data;\r\n      commit(FETCH_STUDENTS_SUCCESS, { students, total });\r\n      return response.data;\r\n    } catch (error) {\r\n      commit(FETCH_STUDENTS_FAILURE, error.response?.data?.message || '获取学生列表失败');\r\n      return Promise.reject(error);\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 选择学生查看详情\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} student - 学生对象\r\n   */\r\n  selectStudent({ commit }, student) {\r\n    commit(SELECT_STUDENT, student);\r\n  },\r\n  \r\n  /**\r\n   * @description 更新分页信息\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} pagination - 分页信息\r\n   */\r\n  updatePagination({ commit, dispatch }, pagination) {\r\n    commit(UPDATE_PAGINATION, pagination);\r\n    // 如果页码或每页数量发生变化，重新获取数据\r\n    if (pagination.current || pagination.pageSize) {\r\n      dispatch('fetchStudentsList');\r\n    }\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations\r\n}; "],"names":["state","students","services"],"mappings":";;AAMA,MAAM,QAAQ;AAAA,EACZ,cAAc,CAAE;AAAA,EAChB,iBAAiB;AAAA,EACjB,SAAS;AAAA,EACT,OAAO;AAAA,EACP,YAAY;AAAA,IACV,OAAO;AAAA,IACP,SAAS;AAAA,IACT,UAAU;AAAA,EACX;AACH;AAGA,MAAM,UAAU;AAAA,EACd,cAAc,CAAAA,WAASA,OAAM;AAAA,EAC7B,iBAAiB,CAAAA,WAASA,OAAM;AAAA,EAChC,SAAS,CAAAA,WAASA,OAAM;AAAA,EACxB,OAAO,CAAAA,WAASA,OAAM;AAAA,EACtB,YAAY,CAAAA,WAASA,OAAM;AAC7B;AAGA,MAAM,yBAAyB;AAC/B,MAAM,yBAAyB;AAC/B,MAAM,yBAAyB;AAC/B,MAAM,iBAAiB;AACvB,MAAM,oBAAoB;AAG1B,MAAM,YAAY;AAAA,EAChB,CAAC,sBAAsB,EAAEA,QAAO;AAC9B,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,sBAAsB,EAAEA,QAAO,EAAE,UAAAC,WAAU,MAAK,GAAI;AACnD,IAAAD,OAAM,eAAeC;AACrB,IAAAD,OAAM,WAAW,QAAQ;AACzB,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,sBAAsB,EAAEA,QAAO,OAAO;AACrC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,cAAc,EAAEA,QAAO,SAAS;AAC/B,IAAAA,OAAM,kBAAkB;AAAA,EACzB;AAAA,EACD,CAAC,iBAAiB,EAAEA,QAAO,YAAY;AACrC,IAAAA,OAAM,aAAa,EAAE,GAAGA,OAAM,YAAY,GAAG;EAC9C;AACH;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOd,MAAM,kBAAkB,EAAE,QAAQ,OAAAA,OAAK,GAAI,SAAS,CAAA,GAAI;;AACtD,UAAM,cAAc;AAAA,MAClB,MAAMA,OAAM,WAAW;AAAA,MACvB,UAAUA,OAAM,WAAW;AAAA,MAC3B,GAAG;AAAA,IACT;AAEI,WAAO,sBAAsB;AAE7B,QAAI;AACF,YAAM,WAAW,MAAME,qBAAQ,SAAC,QAAQ,YAAY,WAAW;AAC/D,YAAM,EAAE,UAAAD,WAAU,UAAU,SAAS;AACrC,aAAO,wBAAwB,EAAE,UAAAA,WAAU,MAAO,CAAA;AAClD,aAAO,SAAS;AAAA,IACjB,SAAQ,OAAO;AACd,aAAO,0BAAwB,iBAAM,aAAN,mBAAgB,SAAhB,mBAAsB,YAAW,UAAU;AAC1E,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,cAAc,EAAE,OAAQ,GAAE,SAAS;AACjC,WAAO,gBAAgB,OAAO;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,iBAAiB,EAAE,QAAQ,SAAQ,GAAI,YAAY;AACjD,WAAO,mBAAmB,UAAU;AAEpC,QAAI,WAAW,WAAW,WAAW,UAAU;AAC7C,eAAS,mBAAmB;AAAA,IAC7B;AAAA,EACF;AACH;AAEA,MAAe,WAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;"}