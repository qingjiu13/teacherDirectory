{"version":3,"file":"courses.js","sources":["store/modules/student/courses.js"],"sourcesContent":["/**\r\n * @description 学生-课程模块 - 处理学生已选课程功能\r\n */\r\nimport { services } from '../../services';\r\n\r\n// 初始状态\r\nconst state = {\r\n  enrolledCourses: [],\r\n  selectedCourse: null,\r\n  loading: false,\r\n  error: null,\r\n  pagination: {\r\n    total: 0,\r\n    current: 1,\r\n    pageSize: 10\r\n  }\r\n};\r\n\r\n// Getters\r\nconst getters = {\r\n  enrolledCourses: state => state.enrolledCourses,\r\n  selectedCourse: state => state.selectedCourse,\r\n  loading: state => state.loading,\r\n  error: state => state.error,\r\n  pagination: state => state.pagination\r\n};\r\n\r\n// 引入常量类型\r\nconst FETCH_ENROLLED_COURSES_REQUEST = 'FETCH_ENROLLED_COURSES_REQUEST';\r\nconst FETCH_ENROLLED_COURSES_SUCCESS = 'FETCH_ENROLLED_COURSES_SUCCESS';\r\nconst FETCH_ENROLLED_COURSES_FAILURE = 'FETCH_ENROLLED_COURSES_FAILURE';\r\nconst SELECT_COURSE = 'SELECT_COURSE';\r\nconst UPDATE_PAGINATION = 'UPDATE_PAGINATION';\r\n\r\n// Mutations\r\nconst mutations = {\r\n  [FETCH_ENROLLED_COURSES_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [FETCH_ENROLLED_COURSES_SUCCESS](state, { courses, total }) {\r\n    state.enrolledCourses = courses;\r\n    state.pagination.total = total;\r\n    state.loading = false;\r\n    state.error = null;\r\n  },\r\n  [FETCH_ENROLLED_COURSES_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  },\r\n  [SELECT_COURSE](state, course) {\r\n    state.selectedCourse = course;\r\n  },\r\n  [UPDATE_PAGINATION](state, pagination) {\r\n    state.pagination = { ...state.pagination, ...pagination };\r\n  }\r\n};\r\n\r\n// Actions\r\nconst actions = {\r\n  /**\r\n   * @description 获取学生已选课程列表\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} params - 查询参数\r\n   * @returns {Promise<Object>} 课程列表\r\n   */\r\n  async fetchEnrolledCourses({ commit, state }, params = {}) {\r\n    const queryParams = {\r\n      page: state.pagination.current,\r\n      pageSize: state.pagination.pageSize,\r\n      ...params\r\n    };\r\n    \r\n    commit(FETCH_ENROLLED_COURSES_REQUEST);\r\n    \r\n    try {\r\n      const response = await services.student.getEnrolledCourses(queryParams);\r\n      const { courses, total } = response.data;\r\n      commit(FETCH_ENROLLED_COURSES_SUCCESS, { courses, total });\r\n      return response.data;\r\n    } catch (error) {\r\n      commit(FETCH_ENROLLED_COURSES_FAILURE, error.response?.data?.message || '获取已选课程失败');\r\n      return Promise.reject(error);\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 选择课程查看详情\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} course - 课程对象\r\n   */\r\n  selectCourse({ commit }, course) {\r\n    commit(SELECT_COURSE, course);\r\n  },\r\n  \r\n  /**\r\n   * @description 更新分页信息\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} pagination - 分页信息\r\n   */\r\n  updatePagination({ commit, dispatch }, pagination) {\r\n    commit(UPDATE_PAGINATION, pagination);\r\n    // 如果页码或每页数量发生变化，重新获取数据\r\n    if (pagination.current || pagination.pageSize) {\r\n      dispatch('fetchEnrolledCourses');\r\n    }\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations\r\n}; "],"names":["state","courses","services"],"mappings":";;AAMA,MAAM,QAAQ;AAAA,EACZ,iBAAiB,CAAE;AAAA,EACnB,gBAAgB;AAAA,EAChB,SAAS;AAAA,EACT,OAAO;AAAA,EACP,YAAY;AAAA,IACV,OAAO;AAAA,IACP,SAAS;AAAA,IACT,UAAU;AAAA,EACX;AACH;AAGA,MAAM,UAAU;AAAA,EACd,iBAAiB,CAAAA,WAASA,OAAM;AAAA,EAChC,gBAAgB,CAAAA,WAASA,OAAM;AAAA,EAC/B,SAAS,CAAAA,WAASA,OAAM;AAAA,EACxB,OAAO,CAAAA,WAASA,OAAM;AAAA,EACtB,YAAY,CAAAA,WAASA,OAAM;AAC7B;AAGA,MAAM,iCAAiC;AACvC,MAAM,iCAAiC;AACvC,MAAM,iCAAiC;AACvC,MAAM,gBAAgB;AACtB,MAAM,oBAAoB;AAG1B,MAAM,YAAY;AAAA,EAChB,CAAC,8BAA8B,EAAEA,QAAO;AACtC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,8BAA8B,EAAEA,QAAO,EAAE,SAAAC,UAAS,MAAK,GAAI;AAC1D,IAAAD,OAAM,kBAAkBC;AACxB,IAAAD,OAAM,WAAW,QAAQ;AACzB,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,8BAA8B,EAAEA,QAAO,OAAO;AAC7C,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,aAAa,EAAEA,QAAO,QAAQ;AAC7B,IAAAA,OAAM,iBAAiB;AAAA,EACxB;AAAA,EACD,CAAC,iBAAiB,EAAEA,QAAO,YAAY;AACrC,IAAAA,OAAM,aAAa,EAAE,GAAGA,OAAM,YAAY,GAAG;EAC9C;AACH;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOd,MAAM,qBAAqB,EAAE,QAAQ,OAAAA,OAAK,GAAI,SAAS,CAAA,GAAI;;AACzD,UAAM,cAAc;AAAA,MAClB,MAAMA,OAAM,WAAW;AAAA,MACvB,UAAUA,OAAM,WAAW;AAAA,MAC3B,GAAG;AAAA,IACT;AAEI,WAAO,8BAA8B;AAErC,QAAI;AACF,YAAM,WAAW,MAAME,qBAAQ,SAAC,QAAQ,mBAAmB,WAAW;AACtE,YAAM,EAAE,SAAAD,UAAS,UAAU,SAAS;AACpC,aAAO,gCAAgC,EAAE,SAAAA,UAAS,MAAO,CAAA;AACzD,aAAO,SAAS;AAAA,IACjB,SAAQ,OAAO;AACd,aAAO,kCAAgC,iBAAM,aAAN,mBAAgB,SAAhB,mBAAsB,YAAW,UAAU;AAClF,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,aAAa,EAAE,OAAQ,GAAE,QAAQ;AAC/B,WAAO,eAAe,MAAM;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,iBAAiB,EAAE,QAAQ,SAAQ,GAAI,YAAY;AACjD,WAAO,mBAAmB,UAAU;AAEpC,QAAI,WAAW,WAAW,WAAW,UAAU;AAC7C,eAAS,sBAAsB;AAAA,IAChC;AAAA,EACF;AACH;AAEA,MAAe,UAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;"}