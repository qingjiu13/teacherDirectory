{"version":3,"file":"index.js","sources":["store/modules/teacher/index.js"],"sourcesContent":["/**\r\n * @description 教师模块入口文件 - 汇总所有教师特有功能\r\n */\r\nimport { services } from '../../services';\r\nimport students from './students';\r\nimport courses from './courses';\r\nimport statistics from './statistics';\r\nimport schedule from './schedule';\r\n\r\n// 初始状态\r\nconst state = {\r\n  teacherProfile: null,\r\n  loading: false,\r\n  error: null\r\n};\r\n\r\n// Getters\r\nconst getters = {\r\n  teacherProfile: state => state.teacherProfile,\r\n  loading: state => state.loading,\r\n  error: state => state.error\r\n};\r\n\r\n// 引入常量类型\r\nconst FETCH_TEACHER_PROFILE_REQUEST = 'FETCH_TEACHER_PROFILE_REQUEST';\r\nconst FETCH_TEACHER_PROFILE_SUCCESS = 'FETCH_TEACHER_PROFILE_SUCCESS';\r\nconst FETCH_TEACHER_PROFILE_FAILURE = 'FETCH_TEACHER_PROFILE_FAILURE';\r\nconst LOAD_INITIAL_DATA_REQUEST = 'LOAD_INITIAL_DATA_REQUEST';\r\nconst LOAD_INITIAL_DATA_SUCCESS = 'LOAD_INITIAL_DATA_SUCCESS';\r\nconst LOAD_INITIAL_DATA_FAILURE = 'LOAD_INITIAL_DATA_FAILURE';\r\n\r\n// Mutations\r\nconst mutations = {\r\n  [FETCH_TEACHER_PROFILE_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [FETCH_TEACHER_PROFILE_SUCCESS](state, profile) {\r\n    state.teacherProfile = profile;\r\n    state.loading = false;\r\n    state.error = null;\r\n  },\r\n  [FETCH_TEACHER_PROFILE_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  },\r\n  [LOAD_INITIAL_DATA_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [LOAD_INITIAL_DATA_SUCCESS](state) {\r\n    state.loading = false;\r\n  },\r\n  [LOAD_INITIAL_DATA_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  }\r\n};\r\n\r\n// Actions\r\nconst actions = {\r\n  /**\r\n   * @description 获取教师专属信息\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<Object>} 教师信息\r\n   */\r\n  async fetchTeacherProfile({ commit }) {\r\n    commit(FETCH_TEACHER_PROFILE_REQUEST);\r\n    \r\n    try {\r\n      const response = await services.teacher.getTeacherProfile();\r\n      commit(FETCH_TEACHER_PROFILE_SUCCESS, response.data);\r\n      return response.data;\r\n    } catch (error) {\r\n      commit(FETCH_TEACHER_PROFILE_FAILURE, error.response?.data?.message || '获取教师信息失败');\r\n      return Promise.reject(error);\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 加载教师初始数据（登录后调用）\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<Object>} 加载结果\r\n   */\r\n  async loadInitialData({ commit, dispatch }) {\r\n    commit(LOAD_INITIAL_DATA_REQUEST);\r\n    \r\n    try {\r\n      // 并行加载各种教师数据\r\n      await Promise.all([\r\n        dispatch('fetchTeacherProfile'),\r\n        dispatch('students/fetchStudentsList'),\r\n        dispatch('courses/fetchTeacherCourses'),\r\n        dispatch('schedule/fetchTeacherSchedule')\r\n      ]);\r\n      \r\n      commit(LOAD_INITIAL_DATA_SUCCESS);\r\n      return { success: true };\r\n    } catch (error) {\r\n      commit(LOAD_INITIAL_DATA_FAILURE, error.message || '加载教师数据失败');\r\n      return { success: false, error };\r\n    }\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations,\r\n  modules: {\r\n    students,    // 学生管理\r\n    courses,     // 课程管理\r\n    statistics,  // 统计分析\r\n    schedule     // 课程安排\r\n  }\r\n};\r\n"],"names":["state","services","students","courses","statistics","schedule"],"mappings":";;;;;;AAUA,MAAM,QAAQ;AAAA,EACZ,gBAAgB;AAAA,EAChB,SAAS;AAAA,EACT,OAAO;AACT;AAGA,MAAM,UAAU;AAAA,EACd,gBAAgB,CAAAA,WAASA,OAAM;AAAA,EAC/B,SAAS,CAAAA,WAASA,OAAM;AAAA,EACxB,OAAO,CAAAA,WAASA,OAAM;AACxB;AAGA,MAAM,gCAAgC;AACtC,MAAM,gCAAgC;AACtC,MAAM,gCAAgC;AACtC,MAAM,4BAA4B;AAClC,MAAM,4BAA4B;AAClC,MAAM,4BAA4B;AAGlC,MAAM,YAAY;AAAA,EAChB,CAAC,6BAA6B,EAAEA,QAAO;AACrC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,6BAA6B,EAAEA,QAAO,SAAS;AAC9C,IAAAA,OAAM,iBAAiB;AACvB,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,6BAA6B,EAAEA,QAAO,OAAO;AAC5C,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO;AACjC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO;AACjC,IAAAA,OAAM,UAAU;AAAA,EACjB;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO,OAAO;AACxC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AACH;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMd,MAAM,oBAAoB,EAAE,UAAU;;AACpC,WAAO,6BAA6B;AAEpC,QAAI;AACF,YAAM,WAAW,MAAMC,qBAAAA,SAAS,QAAQ,kBAAiB;AACzD,aAAO,+BAA+B,SAAS,IAAI;AACnD,aAAO,SAAS;AAAA,IACjB,SAAQ,OAAO;AACd,aAAO,iCAA+B,iBAAM,aAAN,mBAAgB,SAAhB,mBAAsB,YAAW,UAAU;AACjF,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAM,gBAAgB,EAAE,QAAQ,YAAY;AAC1C,WAAO,yBAAyB;AAEhC,QAAI;AAEF,YAAM,QAAQ,IAAI;AAAA,QAChB,SAAS,qBAAqB;AAAA,QAC9B,SAAS,4BAA4B;AAAA,QACrC,SAAS,6BAA6B;AAAA,QACtC,SAAS,+BAA+B;AAAA,MAChD,CAAO;AAED,aAAO,yBAAyB;AAChC,aAAO,EAAE,SAAS;IACnB,SAAQ,OAAO;AACd,aAAO,2BAA2B,MAAM,WAAW,UAAU;AAC7D,aAAO,EAAE,SAAS,OAAO;IAC1B;AAAA,EACF;AACH;AAEA,MAAe,UAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,SAAS;AAAA,IACX,UAAIC,+BAAQ;AAAA;AAAA,IACZ,SAAIC,8BAAO;AAAA;AAAA,IACX,YAAIC,iCAAU;AAAA;AAAA,IACd,UAAIC,+BAAQ;AAAA;AAAA,EACT;AACH;;"}