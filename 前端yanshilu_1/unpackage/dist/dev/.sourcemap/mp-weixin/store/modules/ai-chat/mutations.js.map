{"version":3,"file":"mutations.js","sources":["store/modules/ai-chat/mutations.js"],"sourcesContent":["/**\r\n * @description AI聊天模块的mutations\r\n */\r\n\r\nexport default {\r\n  /**\r\n   * @description 设置会话列表\r\n   * @param {Object} state - 状态对象\r\n   * @param {Array} conversations - 会话列表\r\n   */\r\n  SET_CONVERSATIONS(state, conversations) {\r\n    state.conversations = conversations;\r\n  },\r\n  \r\n  /**\r\n   * @description 添加新会话\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object} conversation - 会话对象\r\n   */\r\n  ADD_CONVERSATION(state, conversation) {\r\n    state.conversations.unshift(conversation);\r\n  },\r\n  \r\n  /**\r\n   * @description 更新会话\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object} conversation - 会话对象\r\n   */\r\n  UPDATE_CONVERSATION(state, conversation) {\r\n    const index = state.conversations.findIndex(c => c.id === conversation.id);\r\n    if (index !== -1) {\r\n      state.conversations.splice(index, 1, {\r\n        ...state.conversations[index],\r\n        ...conversation\r\n      });\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 删除会话\r\n   * @param {Object} state - 状态对象\r\n   * @param {string} conversationId - 会话ID\r\n   */\r\n  DELETE_CONVERSATION(state, conversationId) {\r\n    state.conversations = state.conversations.filter(c => c.id !== conversationId);\r\n    \r\n    // 如果删除的是当前会话，清空当前会话\r\n    if (state.currentConversationId === conversationId) {\r\n      state.currentConversationId = null;\r\n      state.messages = [];\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 设置当前会话ID\r\n   * @param {Object} state - 状态对象\r\n   * @param {string} conversationId - 会话ID\r\n   */\r\n  SET_CURRENT_CONVERSATION(state, conversationId) {\r\n    state.currentConversationId = conversationId;\r\n  },\r\n  \r\n  /**\r\n   * @description 设置消息列表\r\n   * @param {Object} state - 状态对象\r\n   * @param {Array} messages - 消息列表\r\n   */\r\n  SET_MESSAGES(state, messages) {\r\n    state.messages = messages;\r\n  },\r\n  \r\n  /**\r\n   * @description 添加消息\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object} message - 消息对象\r\n   */\r\n  ADD_MESSAGE(state, message) {\r\n    state.messages.push(message);\r\n    \r\n    // 如果是当前会话，更新会话的最后一条消息\r\n    if (state.currentConversationId) {\r\n      const conversationIndex = state.conversations.findIndex(c => c.id === state.currentConversationId);\r\n      if (conversationIndex !== -1) {\r\n        state.conversations[conversationIndex].lastMessage = message.content;\r\n        state.conversations[conversationIndex].timestamp = message.timestamp;\r\n      }\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 设置加载状态\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object} loadingState - 加载状态\r\n   * @param {boolean} loadingState.conversations - 会话列表加载状态\r\n   * @param {boolean} loadingState.messages - 消息列表加载状态\r\n   * @param {boolean} loadingState.sending - 发送消息加载状态\r\n   */\r\n  SET_LOADING(state, loadingState) {\r\n    state.loading = {\r\n      ...state.loading,\r\n      ...loadingState\r\n    };\r\n  },\r\n  \r\n  /**\r\n   * @description 设置错误\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object|string|null} error - 错误信息\r\n   */\r\n  SET_ERROR(state, error) {\r\n    state.error = error;\r\n  },\r\n  \r\n  /**\r\n   * @description 清除错误\r\n   * @param {Object} state - 状态对象\r\n   */\r\n  CLEAR_ERROR(state) {\r\n    state.error = null;\r\n  },\r\n  \r\n  /**\r\n   * @description 更新聊天配置\r\n   * @param {Object} state - 状态对象\r\n   * @param {Object} config - 配置对象\r\n   */\r\n  UPDATE_CONFIG(state, config) {\r\n    state.config = {\r\n      ...state.config,\r\n      ...config\r\n    };\r\n  }\r\n}; "],"names":[],"mappings":";AAIA,MAAe,YAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,kBAAkB,OAAO,eAAe;AACtC,UAAM,gBAAgB;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,iBAAiB,OAAO,cAAc;AACpC,UAAM,cAAc,QAAQ,YAAY;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,oBAAoB,OAAO,cAAc;AACvC,UAAM,QAAQ,MAAM,cAAc,UAAU,OAAK,EAAE,OAAO,aAAa,EAAE;AACzE,QAAI,UAAU,IAAI;AAChB,YAAM,cAAc,OAAO,OAAO,GAAG;AAAA,QACnC,GAAG,MAAM,cAAc,KAAK;AAAA,QAC5B,GAAG;AAAA,MACX,CAAO;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,oBAAoB,OAAO,gBAAgB;AACzC,UAAM,gBAAgB,MAAM,cAAc,OAAO,OAAK,EAAE,OAAO,cAAc;AAG7E,QAAI,MAAM,0BAA0B,gBAAgB;AAClD,YAAM,wBAAwB;AAC9B,YAAM,WAAW;IAClB;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,yBAAyB,OAAO,gBAAgB;AAC9C,UAAM,wBAAwB;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,aAAa,OAAO,UAAU;AAC5B,UAAM,WAAW;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,YAAY,OAAO,SAAS;AAC1B,UAAM,SAAS,KAAK,OAAO;AAG3B,QAAI,MAAM,uBAAuB;AAC/B,YAAM,oBAAoB,MAAM,cAAc,UAAU,OAAK,EAAE,OAAO,MAAM,qBAAqB;AACjG,UAAI,sBAAsB,IAAI;AAC5B,cAAM,cAAc,iBAAiB,EAAE,cAAc,QAAQ;AAC7D,cAAM,cAAc,iBAAiB,EAAE,YAAY,QAAQ;AAAA,MAC5D;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUD,YAAY,OAAO,cAAc;AAC/B,UAAM,UAAU;AAAA,MACd,GAAG,MAAM;AAAA,MACT,GAAG;AAAA,IACT;AAAA,EACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,UAAU,OAAO,OAAO;AACtB,UAAM,QAAQ;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,YAAY,OAAO;AACjB,UAAM,QAAQ;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,cAAc,OAAO,QAAQ;AAC3B,UAAM,SAAS;AAAA,MACb,GAAG,MAAM;AAAA,MACT,GAAG;AAAA,IACT;AAAA,EACG;AACH;;"}