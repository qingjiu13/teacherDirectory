{"version":3,"file":"index.js","sources":["store/modules/student/index.js"],"sourcesContent":["/**\r\n * @description 学生模块入口文件 - 汇总所有学生特有功能\r\n */\r\nimport { services } from '../../services';\r\nimport courses from './courses';\r\nimport learning from './learning';\r\nimport assignments from './assignments';\r\n\r\n// 初始状态\r\nconst state = {\r\n  studentProfile: null,\r\n  loading: false,\r\n  error: null\r\n};\r\n\r\n// Getters\r\nconst getters = {\r\n  studentProfile: state => state.studentProfile,\r\n  loading: state => state.loading,\r\n  error: state => state.error\r\n};\r\n\r\n// 引入常量类型\r\nconst FETCH_STUDENT_PROFILE_REQUEST = 'FETCH_STUDENT_PROFILE_REQUEST';\r\nconst FETCH_STUDENT_PROFILE_SUCCESS = 'FETCH_STUDENT_PROFILE_SUCCESS';\r\nconst FETCH_STUDENT_PROFILE_FAILURE = 'FETCH_STUDENT_PROFILE_FAILURE';\r\nconst LOAD_INITIAL_DATA_REQUEST = 'LOAD_INITIAL_DATA_REQUEST';\r\nconst LOAD_INITIAL_DATA_SUCCESS = 'LOAD_INITIAL_DATA_SUCCESS';\r\nconst LOAD_INITIAL_DATA_FAILURE = 'LOAD_INITIAL_DATA_FAILURE';\r\n\r\n// Mutations\r\nconst mutations = {\r\n  [FETCH_STUDENT_PROFILE_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [FETCH_STUDENT_PROFILE_SUCCESS](state, profile) {\r\n    state.studentProfile = profile;\r\n    state.loading = false;\r\n    state.error = null;\r\n  },\r\n  [FETCH_STUDENT_PROFILE_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  },\r\n  [LOAD_INITIAL_DATA_REQUEST](state) {\r\n    state.loading = true;\r\n    state.error = null;\r\n  },\r\n  [LOAD_INITIAL_DATA_SUCCESS](state) {\r\n    state.loading = false;\r\n  },\r\n  [LOAD_INITIAL_DATA_FAILURE](state, error) {\r\n    state.loading = false;\r\n    state.error = error;\r\n  }\r\n};\r\n\r\n// Actions\r\nconst actions = {\r\n  /**\r\n   * @description 获取学生专属信息\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<Object>} 学生信息\r\n   */\r\n  async fetchStudentProfile({ commit }) {\r\n    commit(FETCH_STUDENT_PROFILE_REQUEST);\r\n    \r\n    try {\r\n      const response = await services.student.getStudentProfile();\r\n      commit(FETCH_STUDENT_PROFILE_SUCCESS, response.data);\r\n      return response.data;\r\n    } catch (error) {\r\n      commit(FETCH_STUDENT_PROFILE_FAILURE, error.response?.data?.message || '获取学生信息失败');\r\n      return Promise.reject(error);\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 加载学生初始数据（登录后调用）\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<Object>} 加载结果\r\n   */\r\n  async loadInitialData({ commit, dispatch }) {\r\n    commit(LOAD_INITIAL_DATA_REQUEST);\r\n    \r\n    try {\r\n      // 并行加载各种学生数据\r\n      await Promise.all([\r\n        dispatch('fetchStudentProfile'),\r\n        dispatch('courses/fetchEnrolledCourses'),\r\n        dispatch('assignments/fetchPendingAssignments')\r\n      ]);\r\n      \r\n      commit(LOAD_INITIAL_DATA_SUCCESS);\r\n      return { success: true };\r\n    } catch (error) {\r\n      commit(LOAD_INITIAL_DATA_FAILURE, error.message || '加载学生数据失败');\r\n      return { success: false, error };\r\n    }\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations,\r\n  modules: {\r\n    courses,      // 已选课程管理\r\n    learning,     // 学习进度\r\n    assignments   // 作业管理\r\n  }\r\n};"],"names":["state","services","courses","learning","assignments"],"mappings":";;;;;AASA,MAAM,QAAQ;AAAA,EACZ,gBAAgB;AAAA,EAChB,SAAS;AAAA,EACT,OAAO;AACT;AAGA,MAAM,UAAU;AAAA,EACd,gBAAgB,CAAAA,WAASA,OAAM;AAAA,EAC/B,SAAS,CAAAA,WAASA,OAAM;AAAA,EACxB,OAAO,CAAAA,WAASA,OAAM;AACxB;AAGA,MAAM,gCAAgC;AACtC,MAAM,gCAAgC;AACtC,MAAM,gCAAgC;AACtC,MAAM,4BAA4B;AAClC,MAAM,4BAA4B;AAClC,MAAM,4BAA4B;AAGlC,MAAM,YAAY;AAAA,EAChB,CAAC,6BAA6B,EAAEA,QAAO;AACrC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,6BAA6B,EAAEA,QAAO,SAAS;AAC9C,IAAAA,OAAM,iBAAiB;AACvB,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,6BAA6B,EAAEA,QAAO,OAAO;AAC5C,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO;AACjC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO;AACjC,IAAAA,OAAM,UAAU;AAAA,EACjB;AAAA,EACD,CAAC,yBAAyB,EAAEA,QAAO,OAAO;AACxC,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,QAAQ;AAAA,EACf;AACH;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMd,MAAM,oBAAoB,EAAE,UAAU;;AACpC,WAAO,6BAA6B;AAEpC,QAAI;AACF,YAAM,WAAW,MAAMC,qBAAAA,SAAS,QAAQ,kBAAiB;AACzD,aAAO,+BAA+B,SAAS,IAAI;AACnD,aAAO,SAAS;AAAA,IACjB,SAAQ,OAAO;AACd,aAAO,iCAA+B,iBAAM,aAAN,mBAAgB,SAAhB,mBAAsB,YAAW,UAAU;AACjF,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAM,gBAAgB,EAAE,QAAQ,YAAY;AAC1C,WAAO,yBAAyB;AAEhC,QAAI;AAEF,YAAM,QAAQ,IAAI;AAAA,QAChB,SAAS,qBAAqB;AAAA,QAC9B,SAAS,8BAA8B;AAAA,QACvC,SAAS,qCAAqC;AAAA,MACtD,CAAO;AAED,aAAO,yBAAyB;AAChC,aAAO,EAAE,SAAS;IACnB,SAAQ,OAAO;AACd,aAAO,2BAA2B,MAAM,WAAW,UAAU;AAC7D,aAAO,EAAE,SAAS,OAAO;IAC1B;AAAA,EACF;AACH;AAEA,MAAe,UAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,SAAS;AAAA,IACX,SAAIC,8BAAO;AAAA;AAAA,IACX,UAAIC,+BAAQ;AAAA;AAAA,IACZ,aAAIC,kCAAW;AAAA;AAAA,EACZ;AACH;;"}