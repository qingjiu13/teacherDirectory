{"version":3,"file":"index.js","sources":["store/index.js"],"sourcesContent":["import { createSSRApp } from 'vue'\r\nimport { createStore } from 'vuex'\r\n// 导入根级别状态管理\r\nimport rootGetters from './getters'\r\nimport rootMutations from './mutations'\r\nimport rootActions from './actions'\r\n// 导入模块\r\nimport auth from './modules/auth'\r\nimport message from './modules/message'\r\nimport course from './modules/course'\r\nimport order from './modules/order'\r\n\r\n// 不需要显式调用Vue.use(Vuex)，因为我们使用的是组合式API\r\n\r\n/**\r\n * @description Vuex根状态\r\n */\r\nconst state = {\r\n  isLoading: false,\r\n  error: null,\r\n  appVersion: '1.0.0',\r\n  appConfig: {\r\n    theme: uni.getStorageSync('appConfig')?.theme || 'light',\r\n    fontSize: uni.getStorageSync('appConfig')?.fontSize || 'medium',\r\n    language: uni.getStorageSync('appConfig')?.language || 'zh-CN'\r\n  }\r\n}\r\n\r\n/**\r\n * @description 创建Vuex存储实例\r\n * @returns {Object} Vuex存储实例\r\n */\r\nfunction createVuexStore() {\r\n  return createStore({\r\n    state,\r\n    getters: rootGetters,\r\n    mutations: rootMutations,\r\n    actions: rootActions,\r\n    modules: {\r\n      auth,\r\n      message,\r\n      course,\r\n      order\r\n    },\r\n    // 严格模式，防止直接修改状态\r\n    strict: process.env.NODE_ENV !== 'production'\r\n  });\r\n}\r\n\r\n/**\r\n * @description Vuex存储实例\r\n */\r\nconst store = createVuexStore();\r\n\r\n/**\r\n * @description 初始化应用\r\n * 在app.vue中调用这个方法进行初始化\r\n * @returns {Promise<void>} 初始化结果\r\n */\r\nexport const initializeApp = async () => {\r\n  try {\r\n    await store.dispatch('initApp');\r\n    console.log('应用初始化成功');\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('应用初始化失败:', error);\r\n    return { success: false, error };\r\n  }\r\n}\r\n\r\n/**\r\n * @description 获取当前存储状态\r\n * @returns {Object} 当前存储状态\r\n */\r\nexport const getStoreState = () => {\r\n  return store.state;\r\n}\r\n\r\nexport default store"],"names":["uni","createStore","rootGetters","rootMutations","rootActions","auth","message","course","order"],"mappings":";;;;;;;;;;AAiBA,MAAM,QAAQ;AAAA,EACZ,WAAW;AAAA,EACX,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,WAAW;AAAA,IACT,SAAOA,mBAAAA,MAAI,eAAe,WAAW,MAA9BA,mBAAiC,UAAS;AAAA,IACjD,YAAUA,mBAAAA,MAAI,eAAe,WAAW,MAA9BA,mBAAiC,aAAY;AAAA,IACvD,YAAUA,mBAAAA,MAAI,eAAe,WAAW,MAA9BA,mBAAiC,aAAY;AAAA,EACzD;AACF;AAMA,SAAS,kBAAkB;AACzB,SAAOC,0BAAY;AAAA,IACjB;AAAA,IACA,SAASC,cAAA;AAAA,IACT,WAAWC,gBAAA;AAAA,IACX,SAASC,cAAA;AAAA,IACT,SAAS;AAAA,MAAA,MACPC,mBAAA;AAAA,MAAA,SACAC,sBAAA;AAAA,MAAA,QACAC,qBAAA;AAAA,MAAA,OACAC,oBAAA;AAAA,IACF;AAAA;AAAA,IAEA,QAAQ;AAAA,EAAA,CACT;AACH;AAKA,MAAM,QAAQ,gBAAgB;AAOvB,MAAM,gBAAgB,YAAY;AACnC,MAAA;AACI,UAAA,MAAM,SAAS,SAAS;AAC9BR,kBAAAA,MAAA,MAAA,OAAA,wBAAY,SAAS;AACd,WAAA,EAAE,SAAS;WACX,OAAO;AACdA,kBAAA,MAAA,MAAA,SAAA,wBAAc,YAAY,KAAK;AACxB,WAAA,EAAE,SAAS,OAAO;EAC3B;AACF;;"}