{"version":3,"file":"actions.js","sources":["store/actions.js"],"sourcesContent":["/**\r\n * @description 根级别的actions\r\n */\r\n\r\nexport default {\r\n  /**\r\n   * @description 初始化应用\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<void>}\r\n   */\r\n  async initApp({ dispatch, commit }) {\r\n    try {\r\n      commit('SET_LOADING', true);\r\n      \r\n      // 验证登录状态\r\n      await dispatch('auth/checkLoginStatus', null, { root: true });\r\n      \r\n      // 加载应用配置\r\n      await dispatch('loadAppConfig');\r\n      \r\n      // 设置系统主题\r\n      dispatch('setSystemTheme');\r\n      \r\n      commit('SET_LOADING', false);\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message || '应用初始化失败');\r\n      commit('SET_LOADING', false);\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 加载应用配置\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {Promise<void>}\r\n   */\r\n  async loadAppConfig({ commit }) {\r\n    try {\r\n      // 这里可以从本地存储或服务器获取应用配置\r\n      const config = uni.getStorageSync('appConfig') || {\r\n        theme: 'light',\r\n        fontSize: 'medium',\r\n        language: 'zh-CN'\r\n      };\r\n      \r\n      commit('SET_APP_CONFIG', config);\r\n      return { success: true };\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message || '加载应用配置失败');\r\n      return { success: false, error };\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 设置系统主题\r\n   * @param {Object} context - Vuex上下文\r\n   * @returns {void}\r\n   */\r\n  setSystemTheme({ commit, state }) {\r\n    const { theme } = state.appConfig;\r\n    \r\n    // 设置系统主题\r\n    if (theme === 'dark') {\r\n      // 设置深色主题\r\n      // 在实际项目中，这里可能需要设置CSS变量或切换CSS类\r\n      uni.setNavigationBarColor({\r\n        frontColor: '#ffffff',\r\n        backgroundColor: '#333333'\r\n      });\r\n    } else {\r\n      // 设置浅色主题\r\n      uni.setNavigationBarColor({\r\n        frontColor: '#000000',\r\n        backgroundColor: '#ffffff'\r\n      });\r\n    }\r\n  },\r\n  \r\n  /**\r\n   * @description 更新应用配置\r\n   * @param {Object} context - Vuex上下文\r\n   * @param {Object} config - 新的配置\r\n   * @returns {Promise<Object>} 更新结果\r\n   */\r\n  async updateAppConfig({ commit, dispatch, state }, config) {\r\n    try {\r\n      const newConfig = { ...state.appConfig, ...config };\r\n      commit('SET_APP_CONFIG', newConfig);\r\n      \r\n      // 保存到本地存储\r\n      uni.setStorageSync('appConfig', newConfig);\r\n      \r\n      // 如果主题发生变化，重新设置系统主题\r\n      if (config.theme && config.theme !== state.appConfig.theme) {\r\n        dispatch('setSystemTheme');\r\n      }\r\n      \r\n      return { success: true };\r\n    } catch (error) {\r\n      commit('SET_ERROR', error.message || '更新应用配置失败');\r\n      return { success: false, error };\r\n    }\r\n  }\r\n};\r\n"],"names":["uni"],"mappings":";;AAIA,MAAe,cAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,MAAM,QAAQ,EAAE,UAAU,UAAU;AAClC,QAAI;AACF,aAAO,eAAe,IAAI;AAG1B,YAAM,SAAS,yBAAyB,MAAM,EAAE,MAAM,KAAI,CAAE;AAG5D,YAAM,SAAS,eAAe;AAG9B,eAAS,gBAAgB;AAEzB,aAAO,eAAe,KAAK;AAAA,IAC5B,SAAQ,OAAO;AACd,aAAO,aAAa,MAAM,WAAW,SAAS;AAC9C,aAAO,eAAe,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAM,cAAc,EAAE,UAAU;AAC9B,QAAI;AAEF,YAAM,SAASA,cAAAA,MAAI,eAAe,WAAW,KAAK;AAAA,QAChD,OAAO;AAAA,QACP,UAAU;AAAA,QACV,UAAU;AAAA,MAClB;AAEM,aAAO,kBAAkB,MAAM;AAC/B,aAAO,EAAE,SAAS;IACnB,SAAQ,OAAO;AACd,aAAO,aAAa,MAAM,WAAW,UAAU;AAC/C,aAAO,EAAE,SAAS,OAAO;IAC1B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,eAAe,EAAE,QAAQ,SAAS;AAChC,UAAM,EAAE,MAAK,IAAK,MAAM;AAGxB,QAAI,UAAU,QAAQ;AAGpBA,oBAAAA,MAAI,sBAAsB;AAAA,QACxB,YAAY;AAAA,QACZ,iBAAiB;AAAA,MACzB,CAAO;AAAA,IACP,OAAW;AAELA,oBAAAA,MAAI,sBAAsB;AAAA,QACxB,YAAY;AAAA,QACZ,iBAAiB;AAAA,MACzB,CAAO;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,MAAM,gBAAgB,EAAE,QAAQ,UAAU,MAAK,GAAI,QAAQ;AACzD,QAAI;AACF,YAAM,YAAY,EAAE,GAAG,MAAM,WAAW,GAAG,OAAM;AACjD,aAAO,kBAAkB,SAAS;AAGlCA,oBAAAA,MAAI,eAAe,aAAa,SAAS;AAGzC,UAAI,OAAO,SAAS,OAAO,UAAU,MAAM,UAAU,OAAO;AAC1D,iBAAS,gBAAgB;AAAA,MAC1B;AAED,aAAO,EAAE,SAAS;IACnB,SAAQ,OAAO;AACd,aAAO,aAAa,MAAM,WAAW,UAAU;AAC/C,aAAO,EAAE,SAAS,OAAO;IAC1B;AAAA,EACF;AACH;;"}