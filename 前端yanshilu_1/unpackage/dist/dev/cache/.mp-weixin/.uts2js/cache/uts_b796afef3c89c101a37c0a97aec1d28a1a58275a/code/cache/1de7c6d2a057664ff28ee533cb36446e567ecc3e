{"code":"import { defineComponent } from \"vue\";\nlet dropdownInstances = [];\nexport default defineComponent({\n    name: \"ChoiceSelected\",\n    data() {\n        return {\n            isShowChoice: false,\n            dropdownTop: 0,\n            dropdownLeft: 0,\n            dropdownWidth: 0,\n            displayContent: this.defaultText // 使用传入的默认文本\n        };\n    },\n    props: {\n        choiceIndex: {\n            type: Number,\n            default: -1 // 默认-1表示未选择\n        },\n        choiceList: {\n            type: Array,\n            default: () => { return []; }\n        },\n        defaultText: {\n            type: String,\n            default: '请选择'\n        }\n    },\n    created() {\n        // 将当前实例添加到实例数组，便于全局管理\n        dropdownInstances.push(this);\n    },\n    beforeDestroy() {\n        // 移除当前实例\n        const index = dropdownInstances.indexOf(this);\n        if (index > -1) {\n            dropdownInstances.splice(index, 1);\n        }\n    },\n    watch: {\n        choiceIndex(newVal = null) {\n            // 当choiceIndex变化时更新显示内容\n            if (newVal >= 0 && newVal < this.choiceList.length) {\n                this.displayContent = this.choiceList[newVal].choiceItemContent;\n            }\n            else {\n                this.displayContent = this.defaultText;\n            }\n        },\n        defaultText(newVal = null) {\n            // 如果当前没有选择任何选项，更新默认文本\n            if (this.choiceIndex < 0 || this.choiceIndex >= this.choiceList.length) {\n                this.displayContent = newVal;\n            }\n        }\n    },\n    methods: {\n        /**\n         * @description 处理选项点击事件，关闭下拉框并触发选择事件\n         * @param {Number} position - 选中项的索引位置\n         */\n        btnChoiceClick: function (position = null) {\n            var _this = this;\n            _this.isShowChoice = false;\n            _this.$emit(\"onChoiceClick\", position);\n        },\n        /**\n         * @description 切换下拉框的显示与隐藏状态\n         * @param {Event} event - 点击事件对象\n         */\n        btnShowHideClick: function (event = null) {\n            // 阻止事件冒泡\n            event.stopPropagation();\n            var _this = this;\n            if (_this.isShowChoice) {\n                _this.isShowChoice = false;\n            }\n            else {\n                // 关闭其他所有下拉框\n                this.closeOtherDropdowns();\n                // 使用uni.createSelectorQuery获取触发按钮的位置和尺寸\n                const query = uni.createSelectorQuery().in(this);\n                query.select('.drop-down-box, .drop-down-box-selected').boundingClientRect((data = null) => {\n                    if (data) {\n                        _this.dropdownTop = data.top + data.height;\n                        _this.dropdownLeft = data.left;\n                        _this.dropdownWidth = data.width;\n                        _this.isShowChoice = true;\n                    }\n                }).exec();\n            }\n        },\n        /**\n         * @description 关闭其他下拉框，只保留当前实例的下拉框\n         */\n        closeOtherDropdowns() {\n            dropdownInstances.forEach(instance => {\n                if (instance !== this && instance.isShowChoice) {\n                    instance.isShowChoice = false;\n                }\n            });\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu_1/components/combobox/combobox.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.createSelectorQuery"],"map":"{\"version\":3,\"file\":\"combobox.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"combobox.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
