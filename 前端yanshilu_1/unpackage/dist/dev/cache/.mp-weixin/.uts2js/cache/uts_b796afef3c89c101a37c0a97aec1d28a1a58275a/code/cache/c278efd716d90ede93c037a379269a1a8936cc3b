{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nimport { Navigator, MessageRoutes } from '@/router/Router.js';\nimport store from '@/store/index.js';\nimport { mock } from '@/store/services';\n/**\n* @file 老师详情页\n* @description 展示老师个人信息和服务\n*/\nexport default defineComponent({\n    data() {\n        return {\n            teacherId: null,\n            teacherInfo: new UTSJSONObject({\n                id: null,\n                name: '',\n                avatar: '',\n                school: '',\n                major: '',\n                is_certified: false,\n                tags: [],\n                introduction: ''\n            }),\n            activeTab: 'services',\n            services: [],\n            isLoading: false // 是否正在加载\n        };\n    },\n    onLoad(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // 获取老师ID\n            this.teacherId = options.id || 1;\n            // 显示加载状态\n            this.isLoading = true;\n            // 直接加载老师信息和服务数据（单个API调用）\n            this.loadTeacherData();\n        });\n    },\n    methods: new UTSJSONObject({\n        /**\n         * @description 切换标签页\n         * @param {String} tab - 标签名称\n         */\n        switchTab(tab = null) {\n            if (this.activeTab !== tab) {\n                this.activeTab = tab;\n            }\n        },\n        /**\n         * @description 加载老师信息和服务列表（合并为一个API调用）\n         */\n        loadTeacherData() {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    // 显示加载提示\n                    uni.showLoading({\n                        title: '加载中...'\n                    });\n                    // 使用合并后的API获取所有数据\n                    const result = yield store.dispatch('teacher/getTeacherInfo', this.teacherId);\n                    if (result.success) {\n                        // 从store中获取老师信息和服务列表\n                        this.teacherInfo = store.getters['teacher/teacherInfo'];\n                        this.services = store.getters['teacher/services'];\n                    }\n                    else {\n                        throw new Error('获取老师数据失败');\n                    }\n                }\n                catch (error) {\n                    uni.__f__('error', 'at pages/teacher/teacher.uvue:155', '加载老师数据失败:', error);\n                    uni.showToast({\n                        title: '加载失败，请重试',\n                        icon: 'none'\n                    });\n                }\n                finally {\n                    uni.hideLoading();\n                    this.isLoading = false;\n                }\n            });\n        },\n        /**\n         * @description 发起咨询\n         */\n        startConsultation() {\n            this.isLoading = true;\n            setTimeout(() => {\n                this.isLoading = false;\n                // 使用router.js中的方法跳转到聊天页面\n                Navigator.toChat(this.teacherId);\n            }, 800);\n        }\n    })\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu_1/pages/teacher/teacher.uvue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu_1/router/Router.js","E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu_1/store/index.js","E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu_1/store/services/index.js"],"uniExtApis":["uni.showLoading","uni.__f__","uni.showToast","uni.hideLoading"],"map":"{\"version\":3,\"file\":\"teacher.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"teacher.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACI,OAAO,EAAE,SAAS,EAAE,aAAa,EAAE,MAAM,oBAAoB,CAAA;AAC7D,OAAO,KAAK,MAAM,kBAAkB,CAAA;AACpC,OAAO,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAA;AACvC;;;EAGE;AACF,+BAAe;IACX,IAAI;QACJ,OAAO;YACH,SAAS,EAAE,IAAI;YACf,WAAW,oBAAE;gBACb,EAAE,EAAE,IAAI;gBACR,IAAI,EAAE,EAAE;gBACR,MAAM,EAAE,EAAE;gBACV,MAAM,EAAE,EAAE;gBACV,KAAK,EAAE,EAAE;gBACT,YAAY,EAAE,KAAK;gBACnB,IAAI,EAAE,EAAE;gBACR,YAAY,EAAE,EAAE;aACf,CAAA;YACD,SAAS,EAAE,UAAU;YACrB,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,KAAK,CAAC,SAAS;SAC7B,CAAA;IACD,CAAC;IAEC,MAAM,CAAC,OAAO;;YAClB,SAAS;YACT,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,EAAE,IAAI,CAAC,CAAC;YAEjC,SAAS;YACT,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YAEtB,yBAAyB;YACzB,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC;KAAA;IAED,OAAO,oBAAE;QACP;;;WAGG;QACH,SAAS,CAAC,GAAG,OAAA;YACX,IAAI,IAAI,CAAC,SAAS,KAAK,GAAG,EAAE;gBAC1B,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;aACtB;QACH,CAAC;QAED;;WAEG;QACG,eAAe;;gBACnB,IAAI;oBACF,SAAS;oBACT,GAAG,CAAC,WAAW,CAAC;wBACd,KAAK,EAAE,QAAQ;qBAChB,CAAC,CAAC;oBAEH,kBAAkB;oBAClB,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,wBAAwB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;oBAE9E,IAAI,MAAM,CAAC,OAAO,EAAE;wBAClB,qBAAqB;wBACrB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;wBACxD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;qBACnD;yBAAM;wBACL,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC;qBAC7B;iBACF;gBAAC,OAAO,KAAK,EAAE;oBACd,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,mCAAmC,EAAC,WAAW,EAAE,KAAK,CAAC,CAAC;oBAC1E,GAAG,CAAC,SAAS,CAAC;wBACZ,KAAK,EAAE,UAAU;wBACjB,IAAI,EAAE,MAAM;qBACb,CAAC,CAAC;iBACJ;wBAAS;oBACR,GAAG,CAAC,WAAW,EAAE,CAAC;oBAClB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;iBACxB;YACH,CAAC;SAAA;QAED;;WAEG;QACH,iBAAiB;YACf,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YAEtB,UAAU,CAAC;gBACT,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,yBAAyB;gBACzB,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACnC,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC;KACF,CAAA;CACF,EAAA\"}"}
