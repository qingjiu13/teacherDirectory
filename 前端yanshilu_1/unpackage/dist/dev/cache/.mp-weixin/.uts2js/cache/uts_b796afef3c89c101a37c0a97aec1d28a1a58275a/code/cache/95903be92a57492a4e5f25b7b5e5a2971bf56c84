{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\n/**\n * @description 设置页面\n */\nimport { Navigator } from '@/router/Router.js';\nimport { mapGetters, mapActions } from 'vuex';\nexport default defineComponent({\n    data() {\n        return {\n            isLoggedIn: true,\n            switching: false,\n            useMockData: true // 模拟数据开关\n        };\n    },\n    computed: Object.assign({}, mapGetters('user', [\n        'isTeacher',\n        'isStudent',\n        'userRole'\n    ])),\n    onLoad() {\n        // 检查登录状态\n        const token = uni.getStorageSync('token');\n        this.isLoggedIn = !!token;\n        // 检查模拟数据设置\n        this.useMockData = uni.getStorageSync('use_mock_api') === 'true';\n    },\n    methods: Object.assign(Object.assign({}, mapActions('user', [\n        'switchRole',\n        'clearProfile'\n    ])), { \n        /**\n         * @description 处理切换身份\n         */\n        handleSwitchRole() {\n            if (this.switching)\n                return null;\n            // 确定切换的目标角色\n            const newRole = this.isTeacher ? 'student' : 'teacher';\n            uni.showModal({\n                title: '切换身份',\n                content: `确定要切换到${newRole === 'teacher' ? '老师' : '学生'}模式吗？`,\n                success: (res) => { return __awaiter(this, void 0, void 0, function* () {\n                    if (res.confirm) {\n                        try {\n                            this.switching = true;\n                            // 调用Vuex中的switchRole action\n                            // 该action会进一步调用user.api.js中的switchUserRole方法\n                            yield this.switchRole(newRole);\n                            uni.showToast({\n                                title: newRole === 'teacher' ? '已切换为老师模式' : '已切换为学生模式',\n                                icon: 'none'\n                            });\n                            // 返回到\"我的\"页面并刷新\n                            setTimeout(() => {\n                                Navigator.reLaunch('/pages/mine/mine/mine_common');\n                            }, 1500);\n                        }\n                        catch (error) {\n                            uni.__f__('error', 'at pages/mine/settings.uvue:106', '切换角色失败:', error);\n                            uni.showToast({\n                                title: '切换角色失败',\n                                icon: 'none'\n                            });\n                        }\n                        finally {\n                            this.switching = false;\n                        }\n                    }\n                }); }\n            });\n        },\n        /**\n         * @description 处理联系我们\n         */\n        handleContactUs() {\n            uni.showModal({\n                title: '联系我们',\n                content: '客服电话：400-123-4567\\n客服邮箱：support@example.com\\n工作时间：周一至周五 9:00-18:00',\n                showCancel: false\n            });\n        },\n        /**\n         * @description 处理退出登录\n         */\n        handleLogout() {\n            uni.showModal({\n                title: '提示',\n                content: '确定要退出登录吗？',\n                success: (res) => {\n                    if (res.confirm) {\n                        // 清除登录信息\n                        uni.removeStorageSync('token');\n                        uni.removeStorageSync('userInfo');\n                        // 清除其他可能的用户相关数据\n                        // 但保留用户角色和模拟数据设置，避免影响应用其他功能\n                        try {\n                            // 清除用户资料（通过Vuex）\n                            this.clearProfile();\n                            uni.showToast({\n                                title: '已退出登录',\n                                icon: 'success'\n                            });\n                            // 增加延迟确保数据清除\n                            setTimeout(() => {\n                                // 返回到\"我的\"页面\n                                Navigator.reLaunch('/pages/mine/mine/mine_common');\n                            }, 1500);\n                        }\n                        catch (error) {\n                            uni.__f__('error', 'at pages/mine/settings.uvue:160', '退出登录时出错:', error);\n                            uni.showToast({\n                                title: '退出登录时出错',\n                                icon: 'none'\n                            });\n                        }\n                    }\n                }\n            });\n        },\n        /**\n         * @description 切换模拟数据开关\n         */\n        toggleMockData() {\n            // 获取当前模拟数据设置\n            const currentSetting = uni.getStorageSync('use_mock_api') === 'true';\n            // 切换设置\n            this.useMockData = !currentSetting;\n            // 保存设置\n            uni.setStorageSync('use_mock_api', this.useMockData ? 'true' : 'false');\n            uni.showToast({\n                title: this.useMockData ? '已开启模拟数据' : '已关闭模拟数据',\n                icon: 'none'\n            });\n            // 提示需要重启应用\n            setTimeout(() => {\n                uni.showModal({\n                    title: '提示',\n                    content: '设置已更改，建议重启应用以使更改生效',\n                    showCancel: true,\n                    confirmText: '确定'\n                });\n            }, 1000);\n        } })\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu_1/pages/mine/settings.uvue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu_1/router/Router.js","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/vuex/types/index.d.ts"],"uniExtApis":["uni.getStorageSync","uni.showModal","uni.showToast","uni.__f__","uni.removeStorageSync","uni.setStorageSync"],"map":"{\"version\":3,\"file\":\"settings.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"settings.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
