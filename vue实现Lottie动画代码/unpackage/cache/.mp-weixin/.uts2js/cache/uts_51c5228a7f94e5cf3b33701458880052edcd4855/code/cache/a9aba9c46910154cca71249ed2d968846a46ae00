{"code":"import { defineComponent } from \"vue\";\nimport { Navigator, MatchRoutes } from '@/router/Router.js';\nimport { mapGetters, mapState } from 'vuex';\nimport Header from '@/components/navigationTitleBar/header';\nimport LoadingAnimation from '@/components/loading/LoadingAnimation.vue';\n/**\n* @file 老师详情页\n* @description 展示老师个人信息和服务\n*/\nexport default defineComponent({\n    components: {\n        Header,\n        LoadingAnimation\n    },\n    data() {\n        return {\n            teacherId: null,\n            activeTab: 'services',\n            isLoading: false,\n            showServiceDetail: false,\n            currentService: null,\n            isIntroExpanded: false,\n            introMaxLength: 100 // 简介最大显示字数\n        };\n    },\n    computed: Object.assign(Object.assign({}, mapState('user/match', ['matchList'])), { \n        /**\n         * @description 根据ID获取当前教师数据\n         * @returns {Object} 教师详细信息\n         */\n        teacherData() {\n            // 从matchList中过滤出当前教师\n            const teacher = this.matchList.find((t = null) => { return t.id === this.teacherId; });\n            return teacher || new UTSJSONObject({\n                id: null,\n                name: '',\n                avatar: '/static/image/defaultAvatar/teacher-man.png',\n                school: '',\n                major: '',\n                certificate: 0,\n                campusAmbassador: 0,\n                selfIntroduction: '暂无数据',\n                service: []\n            });\n        },\n        /**\n         * @description 获取老师的服务列表\n         * @returns {Array} 服务列表\n         */\n        services() {\n            // 保证始终返回数组，防止undefined\n            return (this.teacherData && Array.isArray(this.teacherData.service)) ? this.teacherData.service : [];\n        },\n        /**\n         * @description 获取显示的简介内容\n         * @returns {String} 显示的简介内容\n         */\n        displayIntroduction() {\n            const intro = this.teacherData.selfIntroduction || '这位老师很懒，还没有填写个人简介。';\n            if (!this.isIntroExpanded && intro.length > this.introMaxLength) {\n                return intro.substring(0, this.introMaxLength) + '...';\n            }\n            return intro;\n        },\n        /**\n         * @description 是否应该显示展开/收起按钮\n         * @returns {Boolean} 是否显示按钮\n         */\n        shouldShowToggleBtn() {\n            const intro = this.teacherData.selfIntroduction || '';\n            return intro.length > this.introMaxLength;\n        } }),\n    onLoad(options) {\n        // 获取老师ID\n        this.teacherId = options.id || '';\n        if (!this.teacherId) {\n            uni.showToast({\n                title: '未获取到教师ID',\n                icon: 'none'\n            });\n            return null;\n        }\n        // 显示加载状态\n        this.isLoading = true;\n        // 模拟获取教师详情\n        setTimeout(() => {\n            // 在实际应用中，这里应该调用API获取教师详情，然后通过commit修改状态\n            // 例如：const teacherDetail = await getTeacherDetail({teacherId: this.teacherId});\n            // this.$store.commit('user/match/SET_TEACHER_DETAIL', {teacherId: this.teacherId, detail: teacherDetail});\n            // 这里我们假设使用现有的教师数据\n            const teacherIndex = this.matchList.findIndex((t = null) => { return t.id === this.teacherId; });\n            if (teacherIndex === -1) {\n                uni.showToast({\n                    title: '未找到该教师信息',\n                    icon: 'none'\n                });\n            }\n            // 加载结束\n            this.isLoading = false;\n        }, 1000);\n    },\n    methods: {\n        /**\n         * @description 返回上一页\n         */\n        handleBack() {\n            Navigator.redirectTo(MatchRoutes.MATCH);\n        },\n        /**\n         * @description 切换标签页\n         * @param {String} tab - 标签名称\n         */\n        switchTab(tab = null) {\n            if (this.activeTab !== tab) {\n                this.activeTab = tab;\n            }\n        },\n        /**\n         * @description 切换个人简介的展开/收起状态\n         */\n        toggleIntroduction() {\n            this.isIntroExpanded = !this.isIntroExpanded;\n        },\n        /**\n         * @description 发起咨询\n         */\n        startConsultation() {\n            this.isLoading = true;\n            // 简单延迟模拟处理过程\n            setTimeout(() => {\n                this.isLoading = false;\n                // 使用router.js中的方法跳转到聊天页面\n                Navigator.toChat(this.teacherId);\n            }, 500);\n        },\n        /**\n         * @description 跳转到服务详情页\n         * @param {String} serviceId - 服务ID\n         */\n        goToServiceDetail(serviceId = null) {\n            // 防御性判断，确保 services 一定是数组\n            const services = Array.isArray(this.services) ? this.services : [];\n            const service = UTS.arrayFind(services, (s = null) => { return s.id === serviceId; });\n            if (service) {\n                this.currentService = service;\n                this.showServiceDetail = true;\n            }\n            else {\n                uni.showToast({\n                    title: '未找到服务信息',\n                    icon: 'none'\n                });\n            }\n        },\n        /**\n         * @description 关闭服务详情浮窗\n         */\n        closeServiceDetail() {\n            this.showServiceDetail = false;\n            this.currentService = null;\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/pagesMine/teacher/teacher.vue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/router/Router.js","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/vuex/types/index.d.ts","E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/components/navigationTitleBar/header.vue.ts","E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/components/loading/LoadingAnimation.vue.ts"],"uniExtApis":["uni.showToast"],"map":"{\"version\":3,\"file\":\"teacher.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"teacher.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
