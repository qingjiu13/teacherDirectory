{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, t as _t, e as _e } from \"vue\";\nimport { computed, ref, onMounted, nextTick, watch } from \"vue\";\nconst ADMIN_ID = 1;\n// 默认头像路径\nexport default /*#__PURE__*/ _defineComponent({\n    __name: 'chat-message-item',\n    props: {\n        message: new UTSJSONObject({ type: Object, required: true }),\n        isSelf: new UTSJSONObject({ type: Boolean, default: false }),\n    },\n    setup(__props) {\n        const DEFAULT_AVATAR = new UTSJSONObject({\n            ai: \"/static/image/defaultAvatar/kefu.png\",\n            student: \"/static/image/defaultAvatar/student-man.png\",\n            teacher: \"/static/image/defaultAvatar/teacher-man.png\",\n            user: \"/static/image/defaultAvatar/student-man.png\",\n        });\n        const props = __props;\n        const isAssistantMsg = computed(() => {\n            return (props.message.senderId == ADMIN_ID || props.message.senderId === \"admin\");\n        });\n        const avatarSrc = computed(() => {\n            // 小助手消息和欢迎语都用固定头像\n            if (isAssistantMsg.value)\n                return DEFAULT_AVATAR.ai;\n            if (props.message.avatar)\n                return props.message.avatar;\n            if (props.message.role === \"teacher\")\n                return DEFAULT_AVATAR.teacher;\n            return DEFAULT_AVATAR.user;\n        });\n        const spacerWidth = ref(48);\n        const nicknameRef = ref(null);\n        const updateSpacer = () => {\n            if (nicknameRef.value && nicknameRef.value.offsetWidth) {\n                spacerWidth.value = 40 + 8 + nicknameRef.value.offsetWidth;\n            }\n            else {\n                spacerWidth.value = 48;\n            }\n        };\n        onMounted(() => {\n            nextTick(updateSpacer);\n        });\n        watch(() => { return props.message.nickname; }, () => { return nextTick(updateSpacer); });\n        const isWelcomeMsg = computed(() => {\n            // 判断是否为小助手欢迎语（可根据id或内容）\n            return (props.message.id === \"welcome\" ||\n                (props.message.senderId == ADMIN_ID &&\n                    typeof props.message.content === \"string\" &&\n                    props.message.content.includes(\"小助手\") &&\n                    props.message.content.includes(\"帮\")));\n        });\n        const isSelfMsg = computed(() => {\n            // 欢迎语强制左侧显示，其余按原逻辑\n            if (isWelcomeMsg.value)\n                return false;\n            return props.isSelf;\n        });\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = _e(new UTSJSONObject({\n                a: __props.message.content && __props.message.content.trim() !== ''\n            }), __props.message.content && __props.message.content.trim() !== '' ? _e(new UTSJSONObject({\n                b: !isSelfMsg.value\n            }), !isSelfMsg.value ? new UTSJSONObject({\n                c: avatarSrc.value\n            }) : new UTSJSONObject({}), new UTSJSONObject({\n                d: _t(__props.message.content),\n                e: isSelfMsg.value\n            }), isSelfMsg.value ? new UTSJSONObject({\n                f: avatarSrc.value\n            }) : new UTSJSONObject({}), new UTSJSONObject({\n                g: isSelfMsg.value ? 1 : '',\n                h: isSelfMsg.value ? 1 : ''\n            })) : new UTSJSONObject({}));\n            return __returned__;\n        };\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/pagesChat/components/chat-message-item/chat-message-item.vue?vue&type=script&setup=true&lang.uts.js.map","references":["E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"chat-message-item.vue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"chat-message-item.vue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
