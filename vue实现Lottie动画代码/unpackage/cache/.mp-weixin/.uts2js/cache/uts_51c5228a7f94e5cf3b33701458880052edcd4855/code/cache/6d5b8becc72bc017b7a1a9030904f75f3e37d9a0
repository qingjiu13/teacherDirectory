{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\n/**\n * @description 设置页面\n */\nimport { Navigator } from '@/router/Router.js';\nimport store from '@/store';\nimport { mapGetters } from 'vuex';\nimport Header from '@/components/navigationTitleBar/header';\nexport default defineComponent({\n    components: {\n        Header\n    },\n    data() {\n        return {\n            isLoggedIn: false,\n            switching: false, // 角色切换中状态\n        };\n    },\n    computed: Object.assign(Object.assign({}, mapGetters(new UTSJSONObject({\n        isTeacher: 'user/baseInfo/isTeacher',\n        userRole: 'user/baseInfo/userRole',\n        profile: 'user/baseInfo/profile'\n    }))), { isStudent() {\n            return !this.isTeacher;\n        } }),\n    onLoad() {\n        // 检查登录状态\n        this.isLoggedIn = store.getters['user/baseInfo/id'] !== '';\n    },\n    methods: {\n        handleBack() {\n            Navigator.toMine();\n        },\n        // 直接调用store的dispatch方法，替代mapActions\n        /**\n         * @description 处理修改个人信息\n         */\n        handleModifyInfo() {\n            Navigator.toModify();\n        },\n        /**\n         * @description 处理切换身份\n         */\n        handleSwitchRole() {\n            if (this.switching)\n                return null;\n            // 确定切换的目标角色\n            const newRole = this.isTeacher ? 'student' : 'teacher';\n            uni.showModal(new UTSJSONObject({\n                title: '切换身份',\n                content: `确定要切换到${newRole === 'teacher' ? '老师' : '学生'}模式吗？`,\n                success: (res) => { return __awaiter(this, void 0, void 0, function* () {\n                    if (res.confirm) {\n                        try {\n                            this.switching = true;\n                            // 使用store.dispatch调用action\n                            yield store.dispatch('user/baseInfo/updateRole', newRole);\n                            uni.showToast({\n                                title: newRole === 'teacher' ? '已切换为老师模式' : '已切换为学生模式',\n                                icon: 'none'\n                            });\n                            // 返回到\"我的\"页面并刷新\n                            setTimeout(() => {\n                                Navigator.reLaunch('/pagesMine/mine/mine_common');\n                            }, 1500);\n                        }\n                        catch (error) {\n                            uni.__f__('error', 'at pagesMine/settings/settings.vue:118', '切换角色失败:', error);\n                            uni.showToast({\n                                title: '切换角色失败',\n                                icon: 'none'\n                            });\n                        }\n                        finally {\n                            this.switching = false;\n                        }\n                    }\n                }); }\n            }));\n        },\n        /**\n         * @description 处理退出登录\n         */\n        handleLogout() {\n            uni.showModal(new UTSJSONObject({\n                title: '提示',\n                content: '确定要退出登录吗？',\n                success: (res) => { return __awaiter(this, void 0, void 0, function* () {\n                    if (res.confirm) {\n                        try {\n                            // 使用store.dispatch调用登出action\n                            yield store.dispatch('user/baseInfo/logout');\n                            uni.showToast({\n                                title: '已退出登录',\n                                icon: 'success'\n                            });\n                            // 增加延迟确保数据清除\n                            setTimeout(() => {\n                                // 返回到\"我的\"页面\n                                Navigator.reLaunch('/pagesMine/mine/mine_common');\n                            }, 1500);\n                        }\n                        catch (error) {\n                            uni.__f__('error', 'at pagesMine/settings/settings.vue:154', '退出登录时出错:', error);\n                            uni.showToast({\n                                title: '退出登录时出错',\n                                icon: 'none'\n                            });\n                        }\n                    }\n                }); }\n            }));\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/pagesMine/settings/settings.vue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/router/Router.js","E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/store/index.js","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/vuex/types/index.d.ts","E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/components/navigationTitleBar/header.vue.ts"],"uniExtApis":["uni.showModal","uni.showToast","uni.__f__"],"map":"{\"version\":3,\"file\":\"settings.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"settings.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
