{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent(new UTSJSONObject({\n    data() {\n        return {\n            courseList: [\n                new UTSJSONObject({\n                    name: \"前端开发基础\",\n                    teacher: \"张老师\",\n                    time: \"2023-12-15 14:00\",\n                    price: 199\n                }),\n                new UTSJSONObject({\n                    name: \"Vue.js实战\",\n                    teacher: \"李老师\",\n                    time: \"2023-12-16 10:00\",\n                    price: 299,\n                }),\n                new UTSJSONObject({\n                    name: \"小程序开发\",\n                    teacher: \"王老师\",\n                    time: \"2023-12-17 15:00\",\n                    price: 249,\n                })\n            ],\n            currentCourseIndex: null,\n            selectedDate: null // 新增用于存储选择的日期\n        };\n    },\n    methods: new UTSJSONObject({\n        handleReserve(index = null) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const course = this.courseList[index];\n                // 第一步：确认预约\n                const confirm = (yield uni.showModal(new UTSJSONObject({\n                    title: '确认预约',\n                    content: `确定要预约《${course.name}》课程吗？`,\n                    confirmText: '确认',\n                    cancelText: '取消'\n                }))).confirm;\n                if (!confirm)\n                    return Promise.resolve(null);\n                // 记录当前课程索引\n                this.currentCourseIndex = index;\n                // 显示日期选择提示\n                uni.showToast({\n                    title: '请选择预约日期',\n                    icon: 'none',\n                    duration: 1500\n                });\n                // 打开日历组件\n                this.$refs.calendar.open();\n            });\n        },\n        onCalendarConfirm(e = null) {\n            return __awaiter(this, void 0, void 0, function* () {\n                this.selectedDate = e.fulldate;\n                // 显示时间选择提示\n                yield uni.showToast({\n                    title: `已选择日期: ${e.fulldate}\\n请选择时间段`,\n                    icon: 'none',\n                    duration: 1500\n                });\n                // 选择日期后继续选择时间段\n                yield this.selectReserveTime();\n            });\n        },\n        selectReserveTime() {\n            return __awaiter(this, void 0, void 0, function* () {\n                const time = (yield new Promise((resolve) => {\n                    uni.showActionSheet({\n                        title: '选择预约时间段',\n                        itemList: ['上午 9:00-11:00', '下午 14:00-16:00', '晚上 19:00-21:00'],\n                        success: (res) => {\n                            const times = ['9:00-11:00', '14:00-16:00', '19:00-21:00'];\n                            resolve({ time: times[res.tapIndex] });\n                        },\n                        fail: () => { return resolve({ time: null }); }\n                    });\n                })).time;\n                if (!time)\n                    return Promise.resolve(null);\n                const course = this.courseList[this.currentCourseIndex];\n                uni.showToast({\n                    title: `已成功预约: ${course.name}\\n日期: ${this.selectedDate}\\n时间: ${time}`,\n                    icon: 'success',\n                    duration: 3000\n                });\n                // 重置状态\n                this.currentCourseIndex = null;\n                this.selectedDate = null;\n            });\n        },\n        getToday() {\n            const today = new Date();\n            return `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\n        }\n    })\n}\n// 根据tab筛选\n));\n// 根据tab筛选\nif (currentTab.value === 1) {\n    filtered = filtered.filter((course = null) => { return course.status === 'ongoing'; });\n}\nelse if (currentTab.value === 2) {\n    filtered = filtered.filter((course = null) => { return course.status === 'upcoming'; });\n}\nelse if (currentTab.value === 3) {\n    filtered = filtered.filter((course = null) => { return course.status === 'completed'; });\n}\n// 根据搜索文本筛选\nif (searchText.value) {\n    filtered = filtered.filter((course = null) => {\n        return course.name.includes(searchText.value) ||\n            course.teacher.includes(searchText.value);\n    });\n}\n// 获取状态文本\nconst getStatusText = (status = null) => {\n    const statusMap = new UTSJSONObject({\n        ongoing: '进行中',\n        upcoming: '即将开始',\n        completed: '已结束'\n    });\n    return statusMap[status] || '';\n};\n// 搜索课程\nconst searchCourse = (e = null) => {\n    searchText.value = e.value;\n};\n// 切换tab\nconst changeTab = (e = null) => {\n    currentTab.value = e.currentIndex;\n};\n// 下拉刷新\nconst onRefresh = () => {\n    setTimeout(() => {\n        uni.stopPullDownRefresh();\n    }, 1000);\n};\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/pages/mine/course/course.vue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.showModal","uni.showToast","uni.showActionSheet","uni.stopPullDownRefresh"],"map":"{\"version\":3,\"file\":\"course.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"course.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACC,iDAAe;IACd,IAAI;QACH,OAAO;YACN,UAAU,EAAE;kCACX;oBACC,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE,KAAK;oBACd,IAAI,EAAE,kBAAkB;oBACxB,KAAK,EAAE,GAAG;iBACV;kCACD;oBACC,IAAI,EAAE,UAAU;oBAChB,OAAO,EAAE,KAAK;oBACd,IAAI,EAAE,kBAAkB;oBACxB,KAAK,EAAE,GAAG;iBAEV;kCACD;oBACC,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE,KAAK;oBACd,IAAI,EAAE,kBAAkB;oBACxB,KAAK,EAAE,GAAG;iBAEV;aACD;YACD,kBAAkB,EAAE,IAAI;YACxB,YAAY,EAAE,IAAI,CAAC,cAAc;SACjC,CAAA;IACF,CAAC;IACD,OAAO,oBAAE;QACF,aAAa,CAAC,KAAK,OAAA;;gBACxB,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBACtC,WAAW;gBACH,MAAA,OAAO,GAAK,CAAA,MAAM,GAAG,CAAC,SAAS,mBAAC;oBACvC,KAAK,EAAE,MAAM;oBACb,OAAO,EAAE,SAAS,MAAM,CAAC,IAAI,OAAO;oBACpC,WAAW,EAAE,IAAI;oBACjB,UAAU,EAAE,IAAI;iBAChB,EAAC,CAAA,QALa,CAKZ;gBAEH,IAAI,CAAC,OAAO;oBAAE,6BAAO;gBAErB,WAAW;gBACX,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;gBAChC,WAAW;gBACX,GAAG,CAAC,SAAS,CAAC;oBACb,KAAK,EAAE,SAAS;oBAChB,IAAI,EAAE,MAAM;oBACZ,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;gBACH,SAAS;gBACT,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC5B,CAAC;SAAA;QAEK,iBAAiB,CAAC,CAAC,OAAA;;gBACxB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,QAAQ,CAAC;gBAC/B,WAAW;gBACX,MAAM,GAAG,CAAC,SAAS,CAAC;oBACnB,KAAK,EAAE,UAAU,CAAC,CAAC,QAAQ,UAAU;oBACrC,IAAI,EAAE,MAAM;oBACZ,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;gBACH,eAAe;gBACf,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAChC,CAAC;SAAA;QAEK,iBAAiB;;gBACd,MAAA,IAAI,GAAK,CAAA,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO;oBAC1C,GAAG,CAAC,eAAe,CAAC;wBACnB,KAAK,EAAE,SAAS;wBAChB,QAAQ,EAAE,CAAC,eAAe,EAAE,gBAAgB,EAAE,gBAAgB,CAAC;wBAC/D,OAAO,EAAE,CAAC,GAAG;4BACZ,MAAM,KAAK,GAAG,CAAC,YAAY,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;4BAC3D,OAAO,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;wBACxC,CAAC;wBACD,IAAI,EAAE,QAAM,OAAA,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAvB,CAAuB;qBACnC,CAAC,CAAC;gBACJ,CAAC,CAAC,CAAA,KAVU,CAUT;gBAEH,IAAI,CAAC,IAAI;oBAAE,6BAAO;gBAElB,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACxD,GAAG,CAAC,SAAS,CAAC;oBACb,KAAK,EAAE,UAAU,MAAM,CAAC,IAAI,SAAS,IAAI,CAAC,YAAY,SAAS,IAAI,EAAE;oBACrE,IAAI,EAAE,SAAS;oBACf,QAAQ,EAAE,IAAI;iBACd,CAAC,CAAC;gBAEH,OAAO;gBACP,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;gBAC/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAC1B,CAAC;SAAA;QAED,QAAQ;YACP,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;YACzB,OAAO,GAAG,KAAK,CAAC,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;QAC9H,CAAC;KACD,CAAA;CACD;AACD,UAAU;GADT;AACD,UAAU;AACV,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;IAC3B,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAM,OAAA,OAAI,OAAA,MAAM,CAAC,MAAM,KAAK,SAAS,EAA3B,CAA2B,CAAC,CAAC;CAClE;KAAM,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;IAClC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAM,OAAA,OAAI,OAAA,MAAM,CAAC,MAAM,KAAK,UAAU,EAA5B,CAA4B,CAAC,CAAC;CACnE;KAAM,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;IAClC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAM,OAAA,OAAI,OAAA,MAAM,CAAC,MAAM,KAAK,WAAW,EAA7B,CAA6B,CAAC,CAAC;CACpE;AAED,WAAW;AACX,IAAI,UAAU,CAAC,KAAK,EAAE;IACrB,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA,MAAM,OAAA;QAChC,OAAA,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC;IADzC,CACyC,CACzC,CAAC;CACF;AAGF,SAAS;AACT,MAAM,aAAa,GAAG,CAAC,MAAM,OAAA;IAC5B,MAAM,SAAS,qBAAG;QACjB,OAAO,EAAE,KAAK;QACd,QAAQ,EAAE,MAAM;QAChB,SAAS,EAAE,KAAK;KAChB,CAAA,CAAC;IACF,OAAO,SAAS,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;AAChC,CAAC,CAAC;AAEF,OAAO;AACP,MAAM,YAAY,GAAG,CAAC,CAAC,OAAA;IACtB,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;AAC5B,CAAC,CAAC;AAEF,QAAQ;AACR,MAAM,SAAS,GAAG,CAAC,CAAC,OAAA;IACnB,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,YAAY,CAAC;AACnC,CAAC,CAAC;AAIF,OAAO;AACP,MAAM,SAAS,GAAG;IACjB,UAAU,CAAC;QACV,GAAG,CAAC,mBAAmB,EAAE,CAAC;IAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;AACV,CAAC,CAAC\"}"}
