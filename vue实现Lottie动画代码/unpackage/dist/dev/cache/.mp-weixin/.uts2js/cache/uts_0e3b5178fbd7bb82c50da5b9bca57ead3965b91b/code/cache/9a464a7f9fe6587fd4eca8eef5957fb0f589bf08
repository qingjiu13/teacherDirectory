{"code":"import { defineComponent } from \"vue\";\n/**\n * Rate 评分\n * @description 评分组件\n * @tutorial https://ext.dcloud.net.cn/plugin?id=33\n * @property {Boolean} \tisFill = [true|false] \t\t星星的类型，是否为实心类型, 默认为实心\n * @property {String} \tcolor \t\t\t\t\t\t未选中状态的星星颜色，默认为 \"#ececec\"\n * @property {String} \tactiveColor \t\t\t\t选中状态的星星颜色，默认为 \"#ffca3e\"\n * @property {String} \tdisabledColor \t\t\t\t禁用状态的星星颜色，默认为 \"#c0c0c0\"\n * @property {Number} \tsize \t\t\t\t\t\t星星的大小\n * @property {Number} \tvalue/v-model \t\t\t\t当前评分\n * @property {Number} \tmax \t\t\t\t\t\t最大评分评分数量，目前一分一颗星\n * @property {Number} \tmargin \t\t\t\t\t\t星星的间距，单位 px\n * @property {Boolean} \tdisabled = [true|false] \t是否为禁用状态，默认为 false\n * @property {Boolean} \treadonly = [true|false] \t是否为只读状态，默认为 false\n * @property {Boolean} \tallowHalf = [true|false] \t是否实现半星，默认为 false\n * @property {Boolean} \ttouchable = [true|false] \t是否支持滑动手势，默认为 true\n * @event {Function} change \t\t\t\t\t\tuniRate 的 value 改变时触发事件，e={value:Number}\n */\nexport default defineComponent({\n    name: \"UniRate\",\n    props: {\n        isFill: new UTSJSONObject({\n            // 星星的类型，是否镂空\n            type: [Boolean, String],\n            default: true\n        }),\n        color: new UTSJSONObject({\n            // 星星未选中的颜色\n            type: String,\n            default: \"#ececec\"\n        }),\n        activeColor: new UTSJSONObject({\n            // 星星选中状态颜色\n            type: String,\n            default: \"#ffca3e\"\n        }),\n        disabledColor: new UTSJSONObject({\n            // 星星禁用状态颜色\n            type: String,\n            default: \"#c0c0c0\"\n        }),\n        size: new UTSJSONObject({\n            // 星星的大小\n            type: [Number, String],\n            default: 24\n        }),\n        value: new UTSJSONObject({\n            // 当前评分\n            type: [Number, String],\n            default: 0\n        }),\n        modelValue: new UTSJSONObject({\n            // 当前评分\n            type: [Number, String],\n            default: 0\n        }),\n        max: new UTSJSONObject({\n            // 最大评分\n            type: [Number, String],\n            default: 5\n        }),\n        margin: new UTSJSONObject({\n            // 星星的间距\n            type: [Number, String],\n            default: 0\n        }),\n        disabled: new UTSJSONObject({\n            // 是否可点击\n            type: [Boolean, String],\n            default: false\n        }),\n        readonly: new UTSJSONObject({\n            // 是否只读\n            type: [Boolean, String],\n            default: false\n        }),\n        allowHalf: new UTSJSONObject({\n            // 是否显示半星\n            type: [Boolean, String],\n            default: false\n        }),\n        touchable: new UTSJSONObject({\n            // 是否支持滑动手势\n            type: [Boolean, String],\n            default: true\n        })\n    },\n    data() {\n        return {\n            valueSync: \"\",\n            userMouseFristMove: true,\n            userRated: false,\n            userLastRate: 1\n        };\n    },\n    watch: {\n        value(newVal = null) {\n            this.valueSync = Number(newVal);\n        },\n        modelValue(newVal = null) {\n            this.valueSync = Number(newVal);\n        },\n    },\n    computed: new UTSJSONObject({\n        stars() {\n            const value = this.valueSync ? this.valueSync : 0;\n            const starList = [];\n            const floorValue = Math.floor(value);\n            const ceilValue = Math.ceil(value);\n            for (let i = 0; i < this.max; i++) {\n                if (floorValue > i) {\n                    starList.push({\n                        activeWitch: \"100%\"\n                    });\n                }\n                else if (ceilValue - 1 === i) {\n                    starList.push({\n                        activeWitch: (value - floorValue) * 100 + \"%\"\n                    });\n                }\n                else {\n                    starList.push({\n                        activeWitch: \"0\"\n                    });\n                }\n            }\n            return starList;\n        },\n        marginNumber() {\n            return Number(this.margin);\n        }\n    }),\n    created() {\n        this.valueSync = Number(this.value || this.modelValue);\n        this._rateBoxLeft = 0;\n        this._oldValue = null;\n    },\n    mounted() {\n        setTimeout(() => {\n            this._getSize();\n        }, 100);\n    },\n    methods: new UTSJSONObject({\n        touchstart(e = null) {\n            if (this.readonly || this.disabled)\n                return null;\n            const _a = e.changedTouches[0], clientX = _a.clientX, screenX = _a.screenX;\n            // TODO 做一下兼容，只有 Nvue 下才有 screenX，其他平台式 clientX\n            this._getRateCount(clientX || screenX);\n        },\n        touchmove(e = null) {\n            if (this.readonly || this.disabled || !this.touchable)\n                return null;\n            const _a = e.changedTouches[0], clientX = _a.clientX, screenX = _a.screenX;\n            this._getRateCount(clientX || screenX);\n        },\n        /**\n         * 兼容 PC @tian\n         */\n        mousedown(e = null) {\n        },\n        mousemove(e = null) {\n        },\n        mouseleave(e = null) {\n        },\n        /**\n         * 获取星星个数\n         */\n        _getRateCount(clientX = null) {\n            this._getSize();\n            const size = Number(this.size);\n            if (isNaN(size)) {\n                return new Error('size 属性只能设置为数字');\n            }\n            const rateMoveRange = clientX - this._rateBoxLeft;\n            let index = parseInt(rateMoveRange / (size + this.marginNumber));\n            index = index < 0 ? 0 : index;\n            index = index > this.max ? this.max : index;\n            const range = parseInt(rateMoveRange - (size + this.marginNumber) * index);\n            let value = 0;\n            if (this._oldValue === index && !this.PC)\n                return null;\n            this._oldValue = index;\n            if (this.allowHalf) {\n                if (range > (size / 2)) {\n                    value = index + 1;\n                }\n                else {\n                    value = index + 0.5;\n                }\n            }\n            else {\n                value = index + 1;\n            }\n            value = Math.max(0.5, Math.min(value, this.max));\n            this.valueSync = value;\n            this._onChange();\n        },\n        /**\n         * 触发动态修改\n         */\n        _onChange() {\n            this.$emit(\"input\", this.valueSync);\n            this.$emit(\"update:modelValue\", this.valueSync);\n            this.$emit(\"change\", new UTSJSONObject({\n                value: this.valueSync\n            }));\n        },\n        /**\n         * 获取星星距离屏幕左侧距离\n         */\n        _getSize() {\n            uni.createSelectorQuery()\n                .in(this)\n                .select('.uni-rate')\n                .boundingClientRect()\n                .exec(ret => {\n                if (ret) {\n                    this._rateBoxLeft = ret[0].left;\n                }\n            });\n        }\n    })\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/node_modules/@dcloudio/uni-ui/lib/uni-rate/uni-rate.vue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.createSelectorQuery"],"map":"{\"version\":3,\"file\":\"uni-rate.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"uni-rate.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
