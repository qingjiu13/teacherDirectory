{"code":"import { defineComponent } from \"vue\";\n// 导入路由管理器\nimport { Navigator, AIRoutes } from '@/router/Router.js';\n/**\n * @description 可拖动卡通图标组件\n */\nexport default defineComponent({\n    name: 'AICartoon',\n    data() {\n        // 内联配置，不依赖外部文件\n        const config = new UTSJSONObject({\n            // 图标图片路径\n            iconPath: '/static/image/tab-bar/default_avatar.png',\n            // 初始位置\n            initialLeft: 20,\n            initialTop: 100,\n            // 图标大小\n            size: 60,\n            // 动画效果\n            animation: new UTSJSONObject({\n                duration: 2,\n                distance: 10 // 浮动距离（像素）\n            })\n        });\n        return {\n            config: config,\n            iconPath: config.iconPath,\n            iconLeft: config.initialLeft,\n            iconTop: config.initialTop,\n            startX: 0,\n            startY: 0,\n            isMoving: false,\n            isDragging: false\n        };\n    },\n    mounted() {\n        // 添加全局鼠标事件监听（web端）\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mousemove', this.handleMouseMove);\n            window.addEventListener('mouseup', this.handleMouseUp);\n        }\n    },\n    beforeDestroy() {\n        // 移除全局鼠标事件监听（web端）\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mousemove', this.handleMouseMove);\n            window.removeEventListener('mouseup', this.handleMouseUp);\n        }\n    },\n    methods: new UTSJSONObject({\n        /**\n         * @description 处理触摸开始事件\n         * @param {Object} e - 触摸事件对象\n         */\n        handleTouchStart(e = null) {\n            this.startX = e.touches[0].clientX;\n            this.startY = e.touches[0].clientY;\n            this.isMoving = false;\n        },\n        /**\n         * @description 处理触摸移动事件\n         * @param {Object} e - 触摸事件对象\n         */\n        handleTouchMove(e = null) {\n            const moveX = e.touches[0].clientX - this.startX;\n            const moveY = e.touches[0].clientY - this.startY;\n            if (Math.abs(moveX) > 5 || Math.abs(moveY) > 5) {\n                this.isMoving = true;\n            }\n            // 确保 iconLeft 和 iconTop 不为空\n            const newLeft = (this.iconLeft || 0) + moveX;\n            const newTop = (this.iconTop || 0) + moveY;\n            this.updatePosition(newLeft, newTop);\n            this.startX = e.touches[0].clientX;\n            this.startY = e.touches[0].clientY;\n        },\n        /**\n         * @description 处理触摸结束事件\n         */\n        handleTouchEnd() {\n            // 触摸结束可以添加额外逻辑\n        },\n        /**\n         * @description 处理鼠标按下事件（web端支持）\n         * @param {MouseEvent} e - 鼠标事件对象\n         */\n        handleMouseDown(e = null) {\n            this.startX = e.clientX;\n            this.startY = e.clientY;\n            this.isMoving = false;\n            this.isDragging = true;\n            // 阻止默认事件，防止文本选择等\n            e.preventDefault();\n        },\n        /**\n         * @description 处理鼠标移动事件（web端支持）\n         * @param {MouseEvent} e - 鼠标事件对象\n         */\n        handleMouseMove(e = null) {\n            if (!this.isDragging)\n                return null;\n            const moveX = e.clientX - this.startX;\n            const moveY = e.clientY - this.startY;\n            if (Math.abs(moveX) > 5 || Math.abs(moveY) > 5) {\n                this.isMoving = true;\n            }\n            // 确保 iconLeft 和 iconTop 不为空\n            const newLeft = (this.iconLeft || 0) + moveX;\n            const newTop = (this.iconTop || 0) + moveY;\n            this.updatePosition(newLeft, newTop);\n            this.startX = e.clientX;\n            this.startY = e.clientY;\n        },\n        /**\n         * @description 处理鼠标松开事件（web端支持）\n         */\n        handleMouseUp() {\n            this.isDragging = false;\n        },\n        /**\n         * @description 更新图标位置并进行边界检测\n         * @param {number} newLeft - 新的左侧位置\n         * @param {number} newTop - 新的顶部位置\n         */\n        updatePosition(newLeft = null, newTop = null) {\n            this.iconLeft = newLeft;\n            this.iconTop = newTop;\n            // 边界检测，防止图标拖出屏幕\n            // 使用新的 API 获取窗口信息\n            const windowInfo = uni.getWindowInfo();\n            const screenWidth = windowInfo.windowWidth;\n            const screenHeight = windowInfo.windowHeight;\n            const iconSize = this.config.size || 60; // 提供默认值防止null\n            if (this.iconLeft < 0)\n                this.iconLeft = 0;\n            if (this.iconLeft > screenWidth - iconSize)\n                this.iconLeft = screenWidth - iconSize;\n            if (this.iconTop < 0)\n                this.iconTop = 0;\n            if (this.iconTop > screenHeight - iconSize)\n                this.iconTop = screenHeight - iconSize;\n        },\n        /**\n         * @description 处理图标点击事件\n         */\n        handleIconClick() {\n            if (!this.isMoving) {\n                // 执行跳转逻辑到AI助手页面，使用统一路由管理\n                Navigator.toAIServer();\n            }\n            this.isMoving = false;\n        }\n    })\n});\n//# sourceMappingURL=E:/yanshilu%E9%87%8D%E6%96%B0%E6%9D%A5%E8%BF%87/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/components/AI-cartoon/AI-cartoon.vue?vue&type=script&lang.uts.js.map","references":["E:/yanshilu重新来过/vue实现Lottie动画代码/router/Router.js"],"uniExtApis":["uni.getWindowInfo"],"map":"{\"version\":3,\"file\":\"AI-cartoon.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"AI-cartoon.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";AACA,UAAU;AACV,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAEzD;;GAEG;AACH,+BAAe;IACb,IAAI,EAAE,WAAW;IACjB,IAAI;QACF,eAAe;QACf,MAAM,MAAM,qBAAG;YACb,SAAS;YACT,QAAQ,EAAE,0CAA0C;YACpD,OAAO;YACP,WAAW,EAAE,EAAE;YACf,UAAU,EAAE,GAAG;YACf,OAAO;YACP,IAAI,EAAE,EAAE;YACR,OAAO;YACP,SAAS,oBAAE;gBACT,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,EAAE,CAAE,WAAW;aAC1B,CAAA;SACF,CAAA,CAAC;QAEF,OAAO;YACL,MAAM,EAAE,MAAM;YACd,QAAQ,EAAE,MAAM,CAAC,QAAQ;YACzB,QAAQ,EAAE,MAAM,CAAC,WAAW;YAC5B,OAAO,EAAE,MAAM,CAAC,UAAU;YAC1B,MAAM,EAAE,CAAC;YACT,MAAM,EAAE,CAAC;YACT,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,KAAK;SAClB,CAAA;IACH,CAAC;IACD,OAAO;QACL,mBAAmB;QACnB,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;YACjC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAC3D,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SACxD;IACH,CAAC;IACD,aAAa;QACX,mBAAmB;QACnB,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;YACjC,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAC9D,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SAC3D;IACH,CAAC;IACD,OAAO,oBAAE;QACP;;;WAGG;QACH,gBAAgB,CAAC,CAAC,OAAA;YAChB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACnC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,CAAC;QAED;;;WAGG;QACH,eAAe,CAAC,CAAC,OAAA;YACf,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;YACjD,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;YAEjD,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACtB;YAED,4BAA4B;YAC5B,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;YAC7C,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;YAE3C,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAErC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;QACrC,CAAC;QAED;;WAEG;QACH,cAAc;YACZ,eAAe;QACjB,CAAC;QAED;;;WAGG;QACH,eAAe,CAAC,CAAC,OAAA;YACf,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YAEvB,iBAAiB;YACjB,CAAC,CAAC,cAAc,EAAE,CAAC;QACrB,CAAC;QAED;;;WAGG;QACH,eAAe,CAAC,CAAC,OAAA;YACf,IAAI,CAAC,IAAI,CAAC,UAAU;gBAAE,YAAO;YAE7B,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;YACtC,MAAM,KAAK,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;YAEtC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;aACtB;YAED,4BAA4B;YAC5B,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;YAC7C,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;YAE3C,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAErC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC;QAC1B,CAAC;QAED;;WAEG;QACH,aAAa;YACX,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC;QAED;;;;WAIG;QACH,cAAc,CAAC,OAAO,OAAA,EAAE,MAAM,OAAA;YAC5B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YAEtB,gBAAgB;YAChB,kBAAkB;YAClB,MAAM,UAAU,GAAG,GAAG,CAAC,aAAa,EAAE,CAAC;YACvC,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC;YAC3C,MAAM,YAAY,GAAG,UAAU,CAAC,YAAY,CAAC;YAC7C,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,cAAc;YAEvD,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC;gBAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;YACzC,IAAI,IAAI,CAAC,QAAQ,GAAG,WAAW,GAAG,QAAQ;gBAAE,IAAI,CAAC,QAAQ,GAAG,WAAW,GAAG,QAAQ,CAAC;YACnF,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC;gBAAE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YACvC,IAAI,IAAI,CAAC,OAAO,GAAG,YAAY,GAAG,QAAQ;gBAAE,IAAI,CAAC,OAAO,GAAG,YAAY,GAAG,QAAQ,CAAC;QACrF,CAAC;QAED;;WAEG;QACH,eAAe;YACb,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAClB,yBAAyB;gBACzB,SAAS,CAAC,UAAU,EAAE,CAAC;aACxB;YACD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,CAAC;KACF,CAAA;CACF,EAAA\"}"}
