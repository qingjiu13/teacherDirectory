{"code":"import { defineComponent } from \"vue\";\n/**\n * @description 订单管理页面（通用）\n */\nimport { Navigator, MineRoutes } from '@/router/Router.js';\nexport default defineComponent(new UTSJSONObject({\n    data() {\n        return {\n            userRole: 'teacher',\n            userName: '',\n            userData: new UTSJSONObject({}),\n            isLoggedIn: false,\n            // Tab栏配置\n            currentTab: 0,\n            tabs: ['待支付', '已完成', '已取消'],\n            teacherTabs: ['待确认', '进行中', '已完成'],\n            // 学生订单列表\n            orders: [\n                new UTSJSONObject({\n                    id: '1001',\n                    time: '2024-03-20 14:30',\n                    status: '待支付',\n                    title: '课程A - 一对一辅导',\n                    price: '299.00'\n                }),\n                new UTSJSONObject({\n                    id: '1002',\n                    time: '2024-03-19 10:15',\n                    status: '已完成',\n                    title: '课程B - 小组课程',\n                    price: '199.00'\n                }),\n                new UTSJSONObject({\n                    id: '1003',\n                    time: '2024-03-18 16:45',\n                    status: '已取消',\n                    title: '课程C - 专项训练',\n                    price: '399.00'\n                })\n            ],\n            // 教师订单列表\n            teacherOrders: [\n                new UTSJSONObject({\n                    id: '2001',\n                    time: '2024-03-21 15:30',\n                    status: '待确认',\n                    title: '高数辅导 - 一对一',\n                    price: '350.00',\n                    studentName: '张三'\n                }),\n                new UTSJSONObject({\n                    id: '2002',\n                    time: '2024-03-20 09:00',\n                    status: '进行中',\n                    title: '英语口语 - 一对一',\n                    price: '280.00',\n                    studentName: '李四'\n                }),\n                new UTSJSONObject({\n                    id: '2003',\n                    time: '2024-03-15 16:30',\n                    status: '已完成',\n                    title: '物理辅导 - 一对一',\n                    price: '320.00',\n                    studentName: '王五'\n                })\n            ],\n            // 弹窗控制\n            showCancelModal: false,\n            showPayModal: false,\n            showDetailModal: false,\n            showDeleteModal: false,\n            showConfirmOrderModal: false,\n            // 当前操作的订单\n            currentOrder: null,\n            // 支付方式\n            isPaymentDropdownOpen: false,\n            selectedPayment: 0,\n            paymentMethods: [\n                new UTSJSONObject({\n                    name: '支付宝支付',\n                    icon: '支',\n                    type: 'alipay'\n                }),\n                new UTSJSONObject({\n                    name: '微信支付',\n                    icon: '微',\n                    type: 'wechat'\n                }),\n                new UTSJSONObject({\n                    name: '银行卡支付',\n                    icon: '卡',\n                    type: 'bank'\n                })\n            ]\n        };\n    },\n    computed: new UTSJSONObject({\n        /**\n         * @description 根据用户角色返回不同的Tab标签\n         */\n        currentTabs() {\n            return this.userRole === 'teacher' ? this.teacherTabs : this.tabs;\n        }\n    }),\n    onLoad() {\n        // 初始化数据\n    },\n    onShow() {\n        // 使用 nextTick 确保数据更新\n        this.$nextTick(() => {\n            this.loadUserData();\n            const storedUserRole = uni.getStorageSync('userRole');\n        });\n    },\n    methods: new UTSJSONObject({\n        /**\n         * @description 加载用户数据\n         */\n        loadUserData() {\n            // 检查登录状态\n            const token = uni.getStorageSync('token');\n            this.isLoggedIn = !!token;\n            if (this.isLoggedIn) {\n                // 获取用户信息\n                const userInfo = uni.getStorageSync('userInfo');\n                if (userInfo) {\n                    try {\n                        this.userData = typeof userInfo === 'string' ? UTS.JSON.parse(userInfo) : userInfo;\n                        this.userName = this.userData.nickname || '用户';\n                        // 如果存储中有用户角色，使用存储的角色\n                        if (this.userData.role) {\n                            this.userRole = this.userData.role;\n                            // 同步更新到storage\n                            uni.setStorageSync('userRole', this.userData.role);\n                        }\n                    }\n                    catch (e) {\n                        uni.__f__('error', 'at pages/mine/order/order_common.vue:350', '解析用户信息失败:', e);\n                    }\n                }\n            }\n            else {\n                this.userData = new UTSJSONObject({});\n                this.userName = '';\n                // 未登录时默认显示学生界面\n                this.userRole = 'student';\n            }\n        },\n        /**\n         * @description 加载订单数据\n         */\n        loadOrderData() {\n            // 这里可以根据角色从API加载不同的订单数据\n            // 目前使用模拟数据\n            uni.__f__('log', 'at pages/mine/order/order_common.vue:367', `加载${this.userRole}角色的订单数据`);\n        },\n        /**\n         * @description 切换标签页\n         * @param {Number} index 标签索引\n         */\n        switchTab(index = null) {\n            this.currentTab = index;\n            // 这里可以根据tab切换加载不同的订单数据\n        },\n        /**\n         * @description 取消订单\n         * @param {Object} order 订单对象\n         */\n        cancelOrder(order = null) {\n            this.currentOrder = order;\n            this.showCancelModal = true;\n        },\n        /**\n         * @description 确认取消订单\n         */\n        confirmCancel() {\n            // 这里实现取消订单的具体逻辑\n            uni.showToast({\n                title: '订单已取消',\n                icon: 'success'\n            });\n            this.showCancelModal = false;\n            // 可以在这里更新订单状态或重新加载订单列表\n        },\n        /**\n         * @description 支付订单\n         * @param {Object} order 订单对象\n         */\n        payOrder(order = null) {\n            this.currentOrder = order;\n            this.showPayModal = true;\n        },\n        /**\n         * @description 切换支付方式下拉菜单\n         */\n        togglePaymentDropdown() {\n            this.isPaymentDropdownOpen = !this.isPaymentDropdownOpen;\n        },\n        /**\n         * @description 选择支付方式\n         * @param {Number} index 支付方式索引\n         */\n        selectPayment(index = null) {\n            this.selectedPayment = index;\n            setTimeout(() => {\n                this.isPaymentDropdownOpen = false;\n            }, 200);\n        },\n        /**\n         * @description 确认支付\n         */\n        confirmPay() {\n            const payMethod = this.paymentMethods[this.selectedPayment].name;\n            uni.showToast({\n                title: `${payMethod}支付成功`,\n                icon: 'success'\n            });\n            this.showPayModal = false;\n            this.isPaymentDropdownOpen = false;\n        },\n        /**\n         * @description 查看订单详情\n         * @param {Object} order 订单对象\n         */\n        viewDetail(order = null) {\n            this.currentOrder = order;\n            this.showDetailModal = true;\n        },\n        /**\n         * @description 关闭详情弹窗\n         */\n        closeDetailModal() {\n            this.showDetailModal = false;\n            this.currentOrder = null;\n        },\n        /**\n         * @description 删除订单\n         * @param {Object} order 订单对象\n         */\n        deleteOrder(order = null) {\n            this.currentOrder = order;\n            this.showDeleteModal = true;\n        },\n        /**\n         * @description 确认删除订单\n         */\n        confirmDelete() {\n            uni.showToast({\n                title: '删除成功',\n                icon: 'success'\n            });\n            this.showDeleteModal = false;\n            // 这里可以添加实际的删除逻辑\n        },\n        /**\n         * @description 跳转到评价页面\n         * @param {Object} order 订单对象\n         */\n        goToAppraise(order = null) {\n            // 跳转到评价页面\n            Navigator.toAppraise(order.id);\n        },\n        /**\n         * @description 教师确认订单\n         * @param {Object} order 订单对象\n         */\n        confirmOrder(order = null) {\n            this.currentOrder = order;\n            this.showConfirmOrderModal = true;\n        },\n        /**\n         * @description 教师确认接受订单操作\n         */\n        confirmOrderAction() {\n            uni.showToast({\n                title: '已接受订单',\n                icon: 'success'\n            });\n            this.showConfirmOrderModal = false;\n            // 这里可以添加实际的接受订单逻辑\n        }\n    })\n}));\n//# sourceMappingURL=E:/yanshilu%E9%87%8D%E6%96%B0%E6%9D%A5%E8%BF%87/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/pages/mine/order/order_common.vue?vue&type=script&lang.uts.js.map","references":["E:/yanshilu重新来过/vue实现Lottie动画代码/router/Router.js"],"uniExtApis":["uni.getStorageSync","uni.setStorageSync","uni.__f__","uni.showToast"],"map":"{\"version\":3,\"file\":\"order_common.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"order_common.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
