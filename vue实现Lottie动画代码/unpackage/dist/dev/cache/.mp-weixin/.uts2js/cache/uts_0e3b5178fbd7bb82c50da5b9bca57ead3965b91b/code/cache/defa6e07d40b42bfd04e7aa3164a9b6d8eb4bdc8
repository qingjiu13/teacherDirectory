{"code":"import { defineComponent as _defineComponent } from 'vue';\nimport { gei as _gei, sei as _sei } from \"vue\";\nimport { ref, onMounted, onUnmounted, watch } from 'vue';\n/**\n * 这个组件：\n *  - 监听 uni.onKeyboardHeightChange 事件，把 paddingBottom 设为键盘高度\n *  - 暴露一个 openWhenReady(ref) 方法：如果键盘已打开，立即调用 ref.openDropdown()\n *    否则先缓存，待键盘实际弹起后再执行\n */\nexport default /*#__PURE__*/ _defineComponent(new UTSJSONObject({\n    __name: 'KeyboardWatcher',\n    setup(__props, _a) {\n        var __expose = _a.expose;\n        const keyboardHeight = ref(0);\n        const isKeyboardOpen = ref(false);\n        const pending = [];\n        function onKbChange(e = null) {\n            var _a;\n            const h = ((_a = e.detail) === null || _a === void 0 ? void 0 : _a.height) || 0;\n            keyboardHeight.value = h;\n            isKeyboardOpen.value = h > 0;\n        }\n        onMounted(() => {\n            uni.onKeyboardHeightChange(onKbChange);\n        });\n        onUnmounted(() => {\n            uni.offKeyboardHeightChange(onKbChange);\n        });\n        // 对外接口：在父组件里用 `ref=\"container\"` 拿到这个组件实例后，可以这样调用：\n        //   container.openWhenReady(this.$refs.schoolDropdown)\n        function openWhenReady(dropdownRef = null) {\n            if (!dropdownRef || typeof dropdownRef.openDropdown !== 'function')\n                return null;\n            if (isKeyboardOpen.value) {\n                // 如果键盘已经弹起，直接打开\n                dropdownRef.openDropdown();\n            }\n            else {\n                // 否则缓存，等键盘弹起再打开\n                pending.push(dropdownRef);\n            }\n        }\n        // 监听 keyboardHeight 从 0 变为 >0，然后一次性打开所有 pending 队列\n        watch(isKeyboardOpen, val => {\n            if (val && pending.length) {\n                pending.forEach(ref => { return ref.openDropdown(); });\n                pending.length = 0;\n            }\n        });\n        __expose(new UTSJSONObject({ openWhenReady }));\n        return (_ctx = null, _cache = null) => {\n            const __returned__ = {\n                a: _sei(_gei(_ctx, ''), 'view'),\n                b: keyboardHeight.value + 'px'\n            };\n            return __returned__;\n        };\n    }\n}));\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/vue%E5%AE%9E%E7%8E%B0Lottie%E5%8A%A8%E7%94%BB%E4%BB%A3%E7%A0%81/components/keyboard-watcher/KeyboardWatcher.vue?vue&type=script&setup=true&lang.uts.js.map","references":["E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@vue/runtime-core/dist/runtime-core.d.ts"],"uniExtApis":["uni.onKeyboardHeightChange","uni.offKeyboardHeightChange"],"map":"{\"version\":3,\"file\":\"KeyboardWatcher.vue?vue&type=script&setup=true&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"KeyboardWatcher.vue?vue&type=script&setup=true&lang.uts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,eAAe,IAAI,gBAAgB,EAAE,MAAM,KAAK,CAAA;AACzD,OAAO,EAAE,GAAG,IAAI,IAAI,EAAE,GAAG,IAAI,IAAI,EAAE,MAAM,KAAK,CAAA;AAE9C,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,WAAW,EAAE,KAAK,EAAE,MAAM,KAAK,CAAA;AAEtD;;;;;GAKG;AAGL,eAAe,aAAa,CAAA,gBAAgB,mBAAC;IAC3C,MAAM,EAAE,iBAAiB;IACzB,KAAK,CAAC,OAAO,EAAE,EAAoB;YAAV,QAAQ,YAAA;QAEjC,MAAM,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;QAC7B,MAAM,cAAc,GAAG,GAAG,CAAC,KAAK,CAAC,CAAA;QACjC,MAAM,OAAO,GAAG,EAAE,CAAA;QAElB,SAAS,UAAU,CAAC,CAAC,OAAA;;YACnB,MAAM,CAAC,GAAG,CAAA,MAAA,CAAC,CAAC,MAAM,0CAAE,MAAM,KAAI,CAAC,CAAA;YAC/B,cAAc,CAAC,KAAK,GAAG,CAAC,CAAA;YACxB,cAAc,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAA;QAC9B,CAAC;QAED,SAAS,CAAC;YACR,GAAG,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAA;QACxC,CAAC,CAAC,CAAA;QACF,WAAW,CAAC;YACV,GAAG,CAAC,uBAAuB,CAAC,UAAU,CAAC,CAAA;QACzC,CAAC,CAAC,CAAA;QAEF,kDAAkD;QAClD,uDAAuD;QACvD,SAAS,aAAa,CAAC,WAAW,OAAA;YAChC,IAAI,CAAC,WAAW,IAAI,OAAO,WAAW,CAAC,YAAY,KAAK,UAAU;gBAAE,YAAM;YAC1E,IAAI,cAAc,CAAC,KAAK,EAAE;gBACxB,gBAAgB;gBAChB,WAAW,CAAC,YAAY,EAAE,CAAA;aAC3B;iBAAM;gBACL,gBAAgB;gBAChB,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;aAC1B;QACH,CAAC;QAED,mDAAmD;QACnD,KAAK,CAAC,cAAc,EAAE,GAAG;YACvB,IAAI,GAAG,IAAI,OAAO,CAAC,MAAM,EAAE;gBACzB,OAAO,CAAC,OAAO,CAAC,GAAG,MAAI,OAAA,GAAG,CAAC,YAAY,EAAE,EAAlB,CAAkB,CAAC,CAAA;gBAC1C,OAAO,CAAC,MAAM,GAAG,CAAC,CAAA;aACnB;QACH,CAAC,CAAC,CAAA;QAEF,QAAQ,mBAAC,EAAE,aAAa,EAAE,EAAC,CAAA;QAG7B,OAAO,CAAC,IAAI,OAAA,EAAE,MAAM,OAAA;YAClB,MAAM,YAAY,GAAG;gBACrB,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,MAAM,CAAC;gBAC/B,CAAC,EAAE,cAAc,CAAC,KAAK,GAAG,IAAI;aAC/B,CAAA;YACC,OAAO,YAAY,CAAA;QACrB,CAAC,CAAA;IACD,CAAC;CAEA,EAAC,CAAA\"}"}
