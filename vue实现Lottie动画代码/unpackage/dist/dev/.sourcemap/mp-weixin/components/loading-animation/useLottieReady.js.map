{"version":3,"file":"useLottieReady.js","sources":["components/loading-animation/useLottieReady.js"],"sourcesContent":["// useLottieReady.js\r\nimport { ref, onMounted, watch } from 'vue'\r\n\r\n/**\r\n * Lottie动画加载状态钩子\r\n * @param {import('vue').Ref} cLottieRef - Lottie组件引用\r\n * @returns {{isReady: import('vue').Ref<boolean>}} 动画加载状态\r\n */\r\nexport function useLottieReady(cLottieRef) {\r\n  const isReady = ref(false)\r\n\r\n  /**\r\n   * 绑定Lottie数据加载完成事件\r\n   */\r\n  const attachHandler = () => {\r\n    if (!cLottieRef.value) return\r\n    \r\n    // 兼容新版API\r\n    if (typeof cLottieRef.value.on === 'function') {\r\n      cLottieRef.value.on('dataReady', () => {\r\n        isReady.value = true\r\n        console.log('Lottie 动画已加载完成')\r\n      })\r\n    }\r\n    // 兼容旧版API\r\n    else if (typeof cLottieRef.value.$on === 'function') {\r\n      cLottieRef.value.$on('dataReady', () => {\r\n        isReady.value = true\r\n        console.log('Lottie 动画已加载完成')\r\n      })\r\n    }\r\n  }\r\n\r\n  onMounted(() => {\r\n    attachHandler()\r\n  })\r\n\r\n  // 防止加载太快没绑定到，watch 观察也处理一下\r\n  watch(cLottieRef, (newVal) => {\r\n    if (newVal) {\r\n      attachHandler()\r\n    }\r\n  })\r\n\r\n  return {\r\n    isReady\r\n  }\r\n}\r\n"],"names":["ref","uni","onMounted","watch"],"mappings":";;AAQO,SAAS,eAAe,YAAY;AACzC,QAAM,UAAUA,cAAG,IAAC,KAAK;AAKzB,QAAM,gBAAgB,MAAM;AAC1B,QAAI,CAAC,WAAW;AAAO;AAGvB,QAAI,OAAO,WAAW,MAAM,OAAO,YAAY;AAC7C,iBAAW,MAAM,GAAG,aAAa,MAAM;AACrC,gBAAQ,QAAQ;AAChBC,sBAAAA,MAAA,MAAA,OAAA,wDAAY,gBAAgB;AAAA,MACpC,CAAO;AAAA,IACF,WAEQ,OAAO,WAAW,MAAM,QAAQ,YAAY;AACnD,iBAAW,MAAM,IAAI,aAAa,MAAM;AACtC,gBAAQ,QAAQ;AAChBA,sBAAAA,MAAA,MAAA,OAAA,wDAAY,gBAAgB;AAAA,MACpC,CAAO;AAAA,IACF;AAAA,EACF;AAEDC,gBAAAA,UAAU,MAAM;AACd,kBAAe;AAAA,EACnB,CAAG;AAGDC,sBAAM,YAAY,CAAC,WAAW;AAC5B,QAAI,QAAQ;AACV,oBAAe;AAAA,IAChB;AAAA,EACL,CAAG;AAED,SAAO;AAAA,IACL;AAAA,EACD;AACH;;"}