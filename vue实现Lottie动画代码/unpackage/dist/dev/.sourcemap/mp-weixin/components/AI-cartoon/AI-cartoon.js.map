{"version":3,"file":"AI-cartoon.js","sources":["components/AI-cartoon/AI-cartoon.vue","../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovZ2l0aHViL3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL2NvbXBvbmVudHMvQUktY2FydG9vbi9BSS1jYXJ0b29uLnZ1ZQ"],"sourcesContent":["<template>\r\n  <!-- 可拖动的卡通图标组件 -->\r\n  <view \r\n    class=\"cartoon-icon\" \r\n    :style=\"{\r\n      left: iconLeft + 'px', \r\n      top: iconTop + 'px',\r\n      width: config.size + 'px',\r\n      height: config.size + 'px',\r\n      '--animation-duration': config.animation.duration + 's',\r\n      '--float-distance': '-' + config.animation.distance + 'px'\r\n    }\"\r\n    @touchstart=\"handleTouchStart\"\r\n    @touchmove=\"handleTouchMove\"\r\n    @touchend=\"handleTouchEnd\"\r\n    @mousedown=\"handleMouseDown\"\r\n    @click=\"handleIconClick\"\r\n  >\r\n    <image class=\"icon-image\" :src=\"iconPath\" mode=\"aspectFit\"></image>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n// 导入路由管理器\r\nimport { Navigator, AIRoutes } from '@/router/Router.js';\r\n\r\n/**\r\n * @description 可拖动卡通图标组件\r\n */\r\nexport default {\r\n  name: 'AICartoon',\r\n  data() {\r\n    // 内联配置，不依赖外部文件\r\n    const config = {\r\n      // 图标图片路径\r\n      iconPath: '/static/image/tab-bar/default_avatar.png',\r\n      // 初始位置\r\n      initialLeft: 20,\r\n      initialTop: 100,\r\n      // 图标大小\r\n      size: 60,\r\n      // 动画效果\r\n      animation: {\r\n        duration: 2,  // 秒\r\n        distance: 10  // 浮动距离（像素）\r\n      }\r\n    };\r\n    \r\n    return {\r\n      config: config,\r\n      iconPath: config.iconPath,\r\n      iconLeft: config.initialLeft,\r\n      iconTop: config.initialTop,\r\n      startX: 0,\r\n      startY: 0,\r\n      isMoving: false,\r\n      isDragging: false\r\n    }\r\n  },\r\n  mounted() {\r\n    // 添加全局鼠标事件监听（web端）\r\n    if (typeof window !== 'undefined') {\r\n      window.addEventListener('mousemove', this.handleMouseMove);\r\n      window.addEventListener('mouseup', this.handleMouseUp);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // 移除全局鼠标事件监听（web端）\r\n    if (typeof window !== 'undefined') {\r\n      window.removeEventListener('mousemove', this.handleMouseMove);\r\n      window.removeEventListener('mouseup', this.handleMouseUp);\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description 处理触摸开始事件\r\n     * @param {Object} e - 触摸事件对象\r\n     */\r\n    handleTouchStart(e) {\r\n      this.startX = e.touches[0].clientX;\r\n      this.startY = e.touches[0].clientY;\r\n      this.isMoving = false;\r\n    },\r\n    \r\n    /**\r\n     * @description 处理触摸移动事件\r\n     * @param {Object} e - 触摸事件对象\r\n     */\r\n    handleTouchMove(e) {\r\n      const moveX = e.touches[0].clientX - this.startX;\r\n      const moveY = e.touches[0].clientY - this.startY;\r\n      \r\n      if (Math.abs(moveX) > 5 || Math.abs(moveY) > 5) {\r\n        this.isMoving = true;\r\n      }\r\n      \r\n      // 确保 iconLeft 和 iconTop 不为空\r\n      const newLeft = (this.iconLeft || 0) + moveX;\r\n      const newTop = (this.iconTop || 0) + moveY;\r\n      \r\n      this.updatePosition(newLeft, newTop);\r\n      \r\n      this.startX = e.touches[0].clientX;\r\n      this.startY = e.touches[0].clientY;\r\n    },\r\n    \r\n    /**\r\n     * @description 处理触摸结束事件\r\n     */\r\n    handleTouchEnd() {\r\n      // 触摸结束可以添加额外逻辑\r\n    },\r\n    \r\n    /**\r\n     * @description 处理鼠标按下事件（web端支持）\r\n     * @param {MouseEvent} e - 鼠标事件对象\r\n     */\r\n    handleMouseDown(e) {\r\n      this.startX = e.clientX;\r\n      this.startY = e.clientY;\r\n      this.isMoving = false;\r\n      this.isDragging = true;\r\n      \r\n      // 阻止默认事件，防止文本选择等\r\n      e.preventDefault();\r\n    },\r\n    \r\n    /**\r\n     * @description 处理鼠标移动事件（web端支持）\r\n     * @param {MouseEvent} e - 鼠标事件对象\r\n     */\r\n    handleMouseMove(e) {\r\n      if (!this.isDragging) return;\r\n      \r\n      const moveX = e.clientX - this.startX;\r\n      const moveY = e.clientY - this.startY;\r\n      \r\n      if (Math.abs(moveX) > 5 || Math.abs(moveY) > 5) {\r\n        this.isMoving = true;\r\n      }\r\n      \r\n      // 确保 iconLeft 和 iconTop 不为空\r\n      const newLeft = (this.iconLeft || 0) + moveX;\r\n      const newTop = (this.iconTop || 0) + moveY;\r\n      \r\n      this.updatePosition(newLeft, newTop);\r\n      \r\n      this.startX = e.clientX;\r\n      this.startY = e.clientY;\r\n    },\r\n    \r\n    /**\r\n     * @description 处理鼠标松开事件（web端支持）\r\n     */\r\n    handleMouseUp() {\r\n      this.isDragging = false;\r\n    },\r\n    \r\n    /**\r\n     * @description 更新图标位置并进行边界检测\r\n     * @param {number} newLeft - 新的左侧位置\r\n     * @param {number} newTop - 新的顶部位置\r\n     */\r\n    updatePosition(newLeft, newTop) {\r\n      this.iconLeft = newLeft;\r\n      this.iconTop = newTop;\r\n      \r\n      // 边界检测，防止图标拖出屏幕\r\n      // 使用新的 API 获取窗口信息\r\n      const windowInfo = uni.getWindowInfo();\r\n      const screenWidth = windowInfo.windowWidth;\r\n      const screenHeight = windowInfo.windowHeight;\r\n      const iconSize = this.config.size || 60; // 提供默认值防止null\r\n      \r\n      if (this.iconLeft < 0) this.iconLeft = 0;\r\n      if (this.iconLeft > screenWidth - iconSize) this.iconLeft = screenWidth - iconSize;\r\n      if (this.iconTop < 0) this.iconTop = 0;\r\n      if (this.iconTop > screenHeight - iconSize) this.iconTop = screenHeight - iconSize;\r\n    },\r\n    \r\n    /**\r\n     * @description 处理图标点击事件\r\n     */\r\n    handleIconClick() {\r\n      if (!this.isMoving) {\r\n        // 执行跳转逻辑到AI助手页面，使用统一路由管理\r\n        Navigator.toAIServer();\r\n      }\r\n      this.isMoving = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.cartoon-icon {\r\n  position: fixed;\r\n  z-index: 9999;\r\n  pointer-events: auto; /* 确保可以接收点击事件 */\r\n  touch-action: none; /* 防止触摸事件的默认行为影响拖动 */\r\n}\r\n\r\n.icon-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%; /* 使图标为圆形 */\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* 添加阴影效果 */\r\n  animation: float var(--animation-duration, 2s) ease-in-out infinite; /* 添加浮动动画 */\r\n  user-select: none; /* 防止文本选择 */\r\n  -webkit-user-drag: none; /* 防止元素被拖动 */\r\n}\r\n\r\n@keyframes float {\r\n  0% {\r\n    transform: translateY(0px);\r\n  }\r\n  50% {\r\n    transform: translateY(calc(var(--float-distance, -10px)));\r\n  }\r\n  100% {\r\n    transform: translateY(0px);\r\n  }\r\n}\r\n</style>\r\n","import Component from 'D:/github/teacherDirectory/vue实现Lottie动画代码/components/AI-cartoon/AI-cartoon.vue'\nwx.createComponent(Component)"],"names":["defineComponent","uni","Navigator"],"mappings":"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"}