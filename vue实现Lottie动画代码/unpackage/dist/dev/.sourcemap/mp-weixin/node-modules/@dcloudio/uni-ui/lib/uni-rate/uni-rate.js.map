{"version":3,"file":"uni-rate.js","sources":["node_modules/@dcloudio/uni-ui/lib/uni-rate/uni-rate.vue","../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovZ2l0aHViL3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdW5pLXVpL2xpYi91bmktcmF0ZS91bmktcmF0ZS52dWU"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<view ref=\"uni-rate\" class=\"uni-rate\">\r\n\t\t\t<view class=\"uni-rate__icon\" :class=\"{'uni-cursor-not-allowed': disabled}\"\r\n\t\t\t\t:style=\"{ 'margin-right': marginNumber + 'px' }\" v-for=\"(star, index) in stars\" :key=\"index\"\r\n\t\t\t\t@touchstart.stop=\"touchstart\" @touchmove.stop=\"touchmove\" @mousedown.stop=\"mousedown\"\r\n\t\t\t\t@mousemove.stop=\"mousemove\" @mouseleave=\"mouseleave\">\r\n\t\t\t\t<uni-icons :color=\"color\" :size=\"size\" :type=\"isFill ? 'star-filled' : 'star'\" />\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<view :style=\"{ width: star.activeWitch}\" class=\"uni-rate__icon-on\">\r\n\t\t\t\t\t<uni-icons :color=\"disabled?disabledColor:activeColor\" :size=\"size\" type=\"star-filled\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\r\n\r\n\r\n\t/**\r\n\t * Rate 评分\r\n\t * @description 评分组件\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=33\r\n\t * @property {Boolean} \tisFill = [true|false] \t\t星星的类型，是否为实心类型, 默认为实心\r\n\t * @property {String} \tcolor \t\t\t\t\t\t未选中状态的星星颜色，默认为 \"#ececec\"\r\n\t * @property {String} \tactiveColor \t\t\t\t选中状态的星星颜色，默认为 \"#ffca3e\"\r\n\t * @property {String} \tdisabledColor \t\t\t\t禁用状态的星星颜色，默认为 \"#c0c0c0\"\r\n\t * @property {Number} \tsize \t\t\t\t\t\t星星的大小\r\n\t * @property {Number} \tvalue/v-model \t\t\t\t当前评分\r\n\t * @property {Number} \tmax \t\t\t\t\t\t最大评分评分数量，目前一分一颗星\r\n\t * @property {Number} \tmargin \t\t\t\t\t\t星星的间距，单位 px\r\n\t * @property {Boolean} \tdisabled = [true|false] \t是否为禁用状态，默认为 false\r\n\t * @property {Boolean} \treadonly = [true|false] \t是否为只读状态，默认为 false\r\n\t * @property {Boolean} \tallowHalf = [true|false] \t是否实现半星，默认为 false\r\n\t * @property {Boolean} \ttouchable = [true|false] \t是否支持滑动手势，默认为 true\r\n\t * @event {Function} change \t\t\t\t\t\tuniRate 的 value 改变时触发事件，e={value:Number}\r\n\t */\r\n\r\n\texport default {\r\n\t\tname: \"UniRate\",\r\n\t\tprops: {\r\n\t\t\tisFill: {\r\n\t\t\t\t// 星星的类型，是否镂空\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\t// 星星未选中的颜色\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"#ececec\"\r\n\t\t\t},\r\n\t\t\tactiveColor: {\r\n\t\t\t\t// 星星选中状态颜色\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"#ffca3e\"\r\n\t\t\t},\r\n\t\t\tdisabledColor: {\r\n\t\t\t\t// 星星禁用状态颜色\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"#c0c0c0\"\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\t// 星星的大小\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 24\r\n\t\t\t},\r\n\t\t\tvalue: {\r\n\t\t\t\t// 当前评分\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmodelValue: {\r\n\t\t\t\t// 当前评分\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmax: {\r\n\t\t\t\t// 最大评分\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 5\r\n\t\t\t},\r\n\t\t\tmargin: {\r\n\t\t\t\t// 星星的间距\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tdisabled: {\r\n\t\t\t\t// 是否可点击\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\treadonly: {\r\n\t\t\t\t// 是否只读\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tallowHalf: {\r\n\t\t\t\t// 是否显示半星\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\ttouchable: {\r\n\t\t\t\t// 是否支持滑动手势\r\n\t\t\t\ttype: [Boolean, String],\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvalueSync: \"\",\r\n\t\t\t\tuserMouseFristMove: true,\r\n\t\t\t\tuserRated: false,\r\n\t\t\t\tuserLastRate: 1\r\n\t\t\t};\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tvalue(newVal) {\r\n\t\t\t\tthis.valueSync = Number(newVal);\r\n\t\t\t},\r\n\t\t\tmodelValue(newVal) {\r\n\t\t\t\tthis.valueSync = Number(newVal);\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tstars() {\r\n\t\t\t\tconst value = this.valueSync ? this.valueSync : 0;\r\n\t\t\t\tconst starList = [];\r\n\t\t\t\tconst floorValue = Math.floor(value);\r\n\t\t\t\tconst ceilValue = Math.ceil(value);\r\n\t\t\t\tfor (let i = 0; i < this.max; i++) {\r\n\t\t\t\t\tif (floorValue > i) {\r\n\t\t\t\t\t\tstarList.push({\r\n\t\t\t\t\t\t\tactiveWitch: \"100%\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (ceilValue - 1 === i) {\r\n\t\t\t\t\t\tstarList.push({\r\n\t\t\t\t\t\t\tactiveWitch: (value - floorValue) * 100 + \"%\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstarList.push({\r\n\t\t\t\t\t\t\tactiveWitch: \"0\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn starList;\r\n\t\t\t},\r\n\r\n\t\t\tmarginNumber() {\r\n\t\t\t\treturn Number(this.margin)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.valueSync = Number(this.value || this.modelValue);\r\n\t\t\tthis._rateBoxLeft = 0\r\n\t\t\tthis._oldValue = null\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._getSize()\r\n\t\t\t}, 100)\r\n\r\n\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttouchstart(e) {\r\n\r\n\r\n\r\n\t\t\t\tif (this.readonly || this.disabled) return\r\n\t\t\t\tconst {\r\n\t\t\t\t\tclientX,\r\n\t\t\t\t\tscreenX\r\n\t\t\t\t} = e.changedTouches[0]\r\n\t\t\t\t// TODO 做一下兼容，只有 Nvue 下才有 screenX，其他平台式 clientX\r\n\t\t\t\tthis._getRateCount(clientX || screenX)\r\n\t\t\t},\r\n\t\t\ttouchmove(e) {\r\n\r\n\r\n\r\n\t\t\t\tif (this.readonly || this.disabled || !this.touchable) return\r\n\t\t\t\tconst {\r\n\t\t\t\t\tclientX,\r\n\t\t\t\t\tscreenX\r\n\t\t\t\t} = e.changedTouches[0]\r\n\t\t\t\tthis._getRateCount(clientX || screenX)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 兼容 PC @tian\r\n\t\t\t */\r\n\r\n\t\t\tmousedown(e) {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t},\r\n\t\t\tmousemove(e) {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t},\r\n\t\t\tmouseleave(e) {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取星星个数\r\n\t\t\t */\r\n\t\t\t_getRateCount(clientX) {\r\n\t\t\t\tthis._getSize()\r\n\t\t\t\tconst size = Number(this.size)\r\n\t\t\t\tif (isNaN(size)) {\r\n\t\t\t\t\treturn new Error('size 属性只能设置为数字')\r\n\t\t\t\t}\r\n\t\t\t\tconst rateMoveRange = clientX - this._rateBoxLeft\r\n\t\t\t\tlet index = parseInt(rateMoveRange / (size + this.marginNumber))\r\n\t\t\t\tindex = index < 0 ? 0 : index;\r\n\t\t\t\tindex = index > this.max ? this.max : index;\r\n\t\t\t\tconst range = parseInt(rateMoveRange - (size + this.marginNumber) * index);\r\n\t\t\t\tlet value = 0;\r\n\t\t\t\tif (this._oldValue === index && !this.PC) return;\r\n\t\t\t\tthis._oldValue = index;\r\n\t\t\t\tif (this.allowHalf) {\r\n\t\t\t\t\tif (range > (size / 2)) {\r\n\t\t\t\t\t\tvalue = index + 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = index + 0.5\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = index + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = Math.max(0.5, Math.min(value, this.max))\r\n\t\t\t\tthis.valueSync = value\r\n\t\t\t\tthis._onChange()\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触发动态修改\r\n\t\t\t */\r\n\t\t\t_onChange() {\r\n\r\n\t\t\t\tthis.$emit(\"input\", this.valueSync);\r\n\t\t\t\tthis.$emit(\"update:modelValue\", this.valueSync);\r\n\t\t\t\tthis.$emit(\"change\", {\r\n\t\t\t\t\tvalue: this.valueSync\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取星星距离屏幕左侧距离\r\n\t\t\t */\r\n\t\t\t_getSize() {\r\n\r\n\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t.in(this)\r\n\t\t\t\t\t.select('.uni-rate')\r\n\t\t\t\t\t.boundingClientRect()\r\n\t\t\t\t\t.exec(ret => {\r\n\t\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\t\tthis._rateBoxLeft = ret[0].left\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.uni-rate {\r\n\r\n\t\tdisplay: flex;\r\n\r\n\t\tline-height: 1;\r\n\t\tfont-size: 0;\r\n\t\tflex-direction: row;\r\n\r\n\r\n\r\n\t}\r\n\r\n\t.uni-rate__icon {\r\n\t\tposition: relative;\r\n\t\tline-height: 1;\r\n\t\tfont-size: 0;\r\n\t}\r\n\r\n\t.uni-rate__icon-on {\r\n\t\toverflow: hidden;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tline-height: 1;\r\n\t\ttext-align: left;\r\n\t}\r\n\r\n\t.uni-cursor-not-allowed {\r\n\r\n\r\n\r\n\t}\r\n</style>\r\n","import Component from 'D:/github/teacherDirectory/vue实现Lottie动画代码/node_modules/@dcloudio/uni-ui/lib/uni-rate/uni-rate.vue'\nwx.createComponent(Component)"],"names":["defineComponent","uni"],"mappings":"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","x_google_ignoreList":[0]}