{"version":3,"file":"MessageList.js","sources":["components/ai-chat/MessageList.vue"],"sourcesContent":["<template>\r\n\t<view class=\"message-section\">\r\n\t\t<scroll-view \r\n\t\t\tscroll-y=\"true\" \r\n\t\t\tclass=\"message-scroll\" \r\n\t\t\t:scroll-into-view=\"autoScrollId\"\r\n\t\t\t@scrolltoupper=\"onScrollToUpper\"\r\n\t\t\t@scroll=\"onScroll\"\r\n\t\t\tref=\"messageScroll\">\r\n\t\t\t\r\n\t\t\t<view v-if=\"messages.length === 0\" class=\"empty-message\">\r\n\t\t\t\t<text class=\"empty-message-text\">{{emptyText}}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view v-else class=\"message-list\">\r\n\t\t\t\t<view v-for=\"(msg, index) in messages\" \r\n\t\t\t\t\t:key=\"index\" \r\n\t\t\t\t\t:id=\"'msg-' + index\">\r\n\t\t\t\t\t<message-item \r\n\t\t\t\t\t\t:type=\"msg.type\"\r\n\t\t\t\t\t\t:content=\"msg.content\"\r\n\t\t\t\t\t\t:status=\"msg.status\"\r\n\t\t\t\t\t\t:streaming=\"msg.streaming\"\r\n\t\t\t\t\t\t:ai-title=\"aiTitle\"\r\n\t\t\t\t\t\t@retry=\"$emit('retryMessage', index)\">\r\n\t\t\t\t\t</message-item>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport MessageItem from './MessageItem';\r\n\t\r\n\t/**\r\n\t * @description 消息列表组件\r\n\t * @property {Array} messages - 消息列表数组\r\n\t * @property {String} emptyText - 空消息提示文本\r\n\t * @property {String} aiTitle - AI消息标题\r\n\t * @property {String} autoScrollId - 自动滚动到的元素ID\r\n\t * @event {Function} scrollToUpper - 滚动到顶部时触发\r\n\t * @event {Function} scroll - 滚动时触发\r\n\t * @event {Function} retryMessage - 重试发送消息\r\n\t */\r\n\texport default {\r\n\t\tname: \"MessageList\",\r\n\t\tcomponents: {\r\n\t\t\tMessageItem\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tmessages: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => []\r\n\t\t\t},\r\n\t\t\temptyText: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '您可以开始提问了...'\r\n\t\t\t},\r\n\t\t\taiTitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '研师录AI'\r\n\t\t\t},\r\n\t\t\tautoScrollId: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description 处理滚动到顶部事件\r\n\t\t\t * @param {Object} e - 事件对象\r\n\t\t\t */\r\n\t\t\tonScrollToUpper(e) {\r\n\t\t\t\tthis.$emit('scrollToUpper', e);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理滚动事件\r\n\t\t\t * @param {Object} e - 事件对象\r\n\t\t\t */\r\n\t\t\tonScroll(e) {\r\n\t\t\t\tthis.$emit('scroll', e);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 滚动到底部\r\n\t\t\t */\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tif (this.messages.length > 0) {\r\n\t\t\t\t\tthis.$emit('updateAutoScrollId', 'msg-' + (this.messages.length - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.message-section {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.message-scroll {\r\n\t\theight: 100%;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\t\r\n\t.empty-message {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.empty-message-text {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.message-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n</style> "],"names":["defineComponent"],"mappings":";;AAiCC,MAAO,cAAiB,MAAA;AAYxB,MAAA,YAAeA,8BAAA;AAAA,EACd,MAAM;AAAA,EACN,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AAAA,IACN,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS,MAAA;AAAM,eAAA,CAAA;AAAA,MAAC;AAAA,IAChB;AAAA,IACD,WAAW;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,SAAS;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,cAAc;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,IAKR,gBAAgB,IAAC,MAAA;AAChB,WAAK,MAAM,iBAAiB,CAAC;AAAA,IAC7B;AAAA;AAAA;AAAA;AAAA;AAAA,IAMD,SAAS,IAAC,MAAA;AACT,WAAK,MAAM,UAAU,CAAC;AAAA,IACtB;AAAA;AAAA;AAAA;AAAA,IAKD,iBAAc;AACb,UAAI,KAAK,SAAS,SAAS,GAAG;AAC7B,aAAK,MAAM,sBAAsB,UAAU,KAAK,SAAS,SAAS,EAAE;AAAA,MACrE;AAAA,IACD;AAAA,EACD;CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}