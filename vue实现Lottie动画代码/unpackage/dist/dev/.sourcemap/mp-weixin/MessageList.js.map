{"version":3,"file":"MessageList.js","sources":["pages_AI_Login_Match/AI/ai-chat/MessageList.vue"],"sourcesContent":["<template>\r\n\t<view class=\"message-section\">\r\n\t\t<scroll-view \r\n\t\t\tscroll-y=\"true\" \r\n\t\t\tclass=\"message-scroll\" \r\n\t\t\t:scroll-into-view=\"autoScrollId\"\r\n\t\t\t@scrolltoupper=\"onScrollToUpper\"\r\n\t\t\t@scroll=\"onScroll\"\r\n\t\t\tref=\"messageScroll\">\r\n\t\t\t\r\n\t\t\t<view v-if=\"messages.length === 0\" class=\"empty-message\">\r\n\t\t\t\t<view class=\"empty-message-content\">\r\n\t\t\t\t\t<image src=\"../../static/AIchat/welcomeImage.png\" class=\"empty-message-image\" mode=\"widthFix\" />\r\n\t\t\t\t\t<text class=\"empty-message-title\">欢迎使用研师录AI助手</text>\r\n\t\t\t\t\t<text class=\"empty-message-desc\">请选择您的所在学校和专业，然后开始提问~</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view v-else class=\"message-list\">\r\n\t\t\t\t<view v-for=\"(msg, index) in messages\" \r\n\t\t\t\t\t:key=\"index\" \r\n\t\t\t\t\t:id=\"'msg-' + index\">\r\n\t\t\t\t\t<message-item \r\n\t\t\t\t\t\t:role=\"msg.role\"\r\n\t\t\t\t\t\t:content=\"msg.content\"\r\n\t\t\t\t\t\t:status=\"msg.status\"\r\n\t\t\t\t\t\t:streaming=\"msg.streaming\"\r\n\t\t\t\t\t\t:ai-title=\"aiTitle\"\r\n\t\t\t\t\t\t:user-avatar=\"userAvatar\"\r\n\t\t\t\t\t\t:ai-avatar=\"aiAvatar\"\r\n\t\t\t\t\t\t@retry=\"$emit('retryMessage', index)\">\r\n\t\t\t\t\t</message-item>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport MessageItem from './MessageItem';\r\n\timport { mapState } from 'vuex';\r\n\t\r\n\t/**\r\n\t * @description 消息列表组件\r\n\t * @property {Array} messages - 消息列表数组\r\n\t * @property {String} emptyText - 空消息提示文本\r\n\t * @property {String} aiTitle - AI消息标题\r\n\t * @property {String} autoScrollId - 自动滚动到的元素ID\r\n\t * @event {Function} scrollToUpper - 滚动到顶部时触发\r\n\t * @event {Function} scroll - 滚动时触发\r\n\t * @event {Function} retryMessage - 重试发送消息\r\n\t */\r\n\texport default {\r\n\t\tname: \"MessageList\",\r\n\t\tcomponents: {\r\n\t\t\tMessageItem\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tmessages: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => []\r\n\t\t\t},\r\n\t\t\temptyText: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '您可以开始提问了...'\r\n\t\t\t},\r\n\t\t\taiTitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '研师录AI'\r\n\t\t\t},\r\n\t\t\tautoScrollId: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tuserAvatar: state => state.user.baseInfo.avatar\r\n\t\t\t}),\r\n\t\t\taiAvatar() {\r\n\t\t\t\treturn '../../static/AIchat/welcomeImage.png';\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description 处理滚动到顶部事件\r\n\t\t\t * @param {Object} e - 事件对象\r\n\t\t\t */\r\n\t\t\tonScrollToUpper(e) {\r\n\t\t\t\tthis.$emit('scrollToUpper', e);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理滚动事件\r\n\t\t\t * @param {Object} e - 事件对象\r\n\t\t\t */\r\n\t\t\tonScroll(e) {\r\n\t\t\t\tthis.$emit('scroll', e);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 滚动到底部\r\n\t\t\t */\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tif (this.messages.length > 0) {\r\n\t\t\t\t\tthis.$emit('updateAutoScrollId', 'msg-' + (this.messages.length - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.message-section {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.message-scroll {\r\n\t\theight: 100%;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\t\r\n\t.empty-message {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t/* 新增空消息内容样式 */\r\n\t.empty-message-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.empty-message-image {\r\n\t\twidth: 180rpx;\r\n\t\theight: 180rpx;\r\n\t\tmargin-bottom: 32rpx;\r\n\t}\r\n\t.empty-message-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 12rpx;\r\n\t}\r\n\t.empty-message-desc {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #888;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.message-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.ai-avatar {\r\n\t\tleft: 10rpx;\r\n\t\ttop: 0;\r\n\t}\r\n\t.user-avatar {\r\n\t\tright: 10rpx;\r\n\t\ttop: 0;\r\n\t}\r\n</style> "],"names":["MessageItem","_sfc_main","defineComponent","mapState","state","e"],"mappings":"mFAuCQA,EAAiB,IAAA,mDAaxBC,EAAeC,kBAAA,CACd,KAAM,cACN,WAAY,CACX,YAAAF,CACA,EACD,MAAO,CACN,SAAU,CACT,KAAM,MACN,QAAS,IAAM,CAAA,CACf,EACD,UAAW,CACV,KAAM,OACN,QAAS,aACT,EACD,QAAS,CACR,KAAM,OACN,QAAS,OACT,EACD,aAAc,CACb,KAAM,OACN,QAAS,EACV,CACA,EACD,SAAQ,OAAA,OAAA,OAAA,OAAA,GACJG,EAAAA,SAAS,IAAA,cAAA,CACX,WAAY,CAAAC,SAASA,EAAM,KAAK,SAAS,MACzC,CAAA,CAAA,CAAC,GACF,UAAQ,CACP,MAAO,sCACR,EACA,EACD,QAAS,CAKR,gBAAgBC,EAAC,KAAA,CAChB,KAAK,MAAM,gBAAiBA,CAAC,CAC7B,EAMD,SAASA,EAAC,KAAA,CACT,KAAK,MAAM,SAAUA,CAAC,CACtB,EAKD,gBAAc,CACT,KAAK,SAAS,OAAS,GAC1B,KAAK,MAAM,qBAAsB,QAAU,KAAK,SAAS,OAAS,EAAE,CAEtE,CACD,EACD"}