{"version":3,"file":"MessageList.js","sources":["pages_AI_Login_Match/AI/ai-chat/MessageList.vue"],"sourcesContent":["<template>\n\t<view class=\"message-section\">\n\t\t<scroll-view \n\t\t\tscroll-y=\"true\" \n\t\t\tclass=\"message-scroll\" \n\t\t\t:scroll-into-view=\"autoScrollId\"\n\t\t\t@scrolltoupper=\"onScrollToUpper\"\n\t\t\t@scroll=\"onScroll\"\n\t\t\tref=\"messageScroll\">\n\t\t\t\n\t\t\t<view v-if=\"messages.length === 0\" class=\"empty-message\">\n\t\t\t\t<view class=\"empty-message-content\">\n\t\t\t\t\t<image src=\"../../static/AIchat/welcomeImage.png\" class=\"empty-message-image\" mode=\"widthFix\" />\n\t\t\t\t\t<text class=\"empty-message-title\">欢迎使用研师录AI助手</text>\n\t\t\t\t\t<text class=\"empty-message-desc\">请选择您的所在学校和专业，然后开始提问~</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view v-else class=\"message-list\">\n\t\t\t\t<view v-for=\"(msg, index) in messages\" \n\t\t\t\t\t:key=\"index\" \n\t\t\t\t\t:id=\"'msg-' + index\">\n\t\t\t\t\t<message-item \n\t\t\t\t\t\t:role=\"msg.role\"\n\t\t\t\t\t\t:content=\"msg.content\"\n\t\t\t\t\t\t:status=\"msg.status\"\n\t\t\t\t\t\t:streaming=\"msg.streaming\"\n\t\t\t\t\t\t:ai-title=\"aiTitle\"\n\t\t\t\t\t\t:user-avatar=\"userAvatar\"\n\t\t\t\t\t\t:ai-avatar=\"aiAvatar\"\n\t\t\t\t\t\t@retry=\"$emit('retryMessage', index)\">\n\t\t\t\t\t</message-item>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport MessageItem from './MessageItem';\n\timport { mapState } from 'vuex';\n\t\n\t/**\n\t * @description 消息列表组件\n\t * @property {Array} messages - 消息列表数组\n\t * @property {String} emptyText - 空消息提示文本\n\t * @property {String} aiTitle - AI消息标题\n\t * @property {String} autoScrollId - 自动滚动到的元素ID\n\t * @event {Function} scrollToUpper - 滚动到顶部时触发\n\t * @event {Function} scroll - 滚动时触发\n\t * @event {Function} retryMessage - 重试发送消息\n\t */\n\texport default {\n\t\tname: \"MessageList\",\n\t\tcomponents: {\n\t\t\tMessageItem\n\t\t},\n\t\tprops: {\n\t\t\tmessages: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: () => []\n\t\t\t},\n\t\t\temptyText: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: '您可以开始提问了...'\n\t\t\t},\n\t\t\taiTitle: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: '研师录AI'\n\t\t\t},\n\t\t\tautoScrollId: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapState({\n\t\t\t\tuserAvatar: state => state.user.baseInfo.avatar\n\t\t\t}),\n\t\t\taiAvatar() {\n\t\t\t\treturn '../../static/AIchat/welcomeImage.png';\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * @description 处理滚动到顶部事件\n\t\t\t * @param {Object} e - 事件对象\n\t\t\t */\n\t\t\tonScrollToUpper(e) {\n\t\t\t\tthis.$emit('scrollToUpper', e);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理滚动事件\n\t\t\t * @param {Object} e - 事件对象\n\t\t\t */\n\t\t\tonScroll(e) {\n\t\t\t\tthis.$emit('scroll', e);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 滚动到底部\n\t\t\t */\n\t\t\tscrollToBottom() {\n\t\t\t\tif (this.messages.length > 0) {\n\t\t\t\t\tthis.$emit('updateAutoScrollId', 'msg-' + (this.messages.length - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.message-section {\n\t\tflex: 1;\n\t\twidth: 100%;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\tmargin-bottom: 20rpx;\n\t\toverflow: hidden;\n\t\tposition: relative;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\t\n\t.message-scroll {\n\t\theight: 100%;\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.empty-message {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t/* 新增空消息内容样式 */\n\t.empty-message-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.empty-message-image {\n\t\twidth: 180rpx;\n\t\theight: 180rpx;\n\t\tmargin-bottom: 32rpx;\n\t}\n\t.empty-message-title {\n\t\tfont-size: 32rpx;\n\t\tcolor: #333;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 12rpx;\n\t}\n\t.empty-message-desc {\n\t\tfont-size: 26rpx;\n\t\tcolor: #888;\n\t\ttext-align: center;\n\t}\n\t\n\t.message-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t.ai-avatar {\n\t\tleft: 10rpx;\n\t\ttop: 0;\n\t}\n\t.user-avatar {\n\t\tright: 10rpx;\n\t\ttop: 0;\n\t}\n</style> "],"names":["MessageItem","_sfc_main","defineComponent","mapState","state","e"],"mappings":"mFAuCQA,EAAiB,IAAA,mDAaxBC,EAAeC,kBAAA,CACd,KAAM,cACN,WAAY,CACX,YAAAF,CACA,EACD,MAAO,CACN,SAAU,CACT,KAAM,MACN,QAAS,IAAM,CAAA,CACf,EACD,UAAW,CACV,KAAM,OACN,QAAS,aACT,EACD,QAAS,CACR,KAAM,OACN,QAAS,OACT,EACD,aAAc,CACb,KAAM,OACN,QAAS,EACV,CACA,EACD,SAAQ,OAAA,OAAA,OAAA,OAAA,GACJG,EAAAA,SAAS,IAAA,cAAA,CACX,WAAY,CAAAC,SAASA,EAAM,KAAK,SAAS,MACzC,CAAA,CAAA,CAAC,GACF,UAAQ,CACP,MAAO,sCACR,EACA,EACD,QAAS,CAKR,gBAAgBC,EAAC,KAAA,CAChB,KAAK,MAAM,gBAAiBA,CAAC,CAC7B,EAMD,SAASA,EAAC,KAAA,CACT,KAAK,MAAM,SAAUA,CAAC,CACtB,EAKD,gBAAc,CACT,KAAK,SAAS,OAAS,GAC1B,KAAK,MAAM,qBAAsB,QAAU,KAAK,SAAS,OAAS,EAAE,CAEtE,CACD,EACD"}