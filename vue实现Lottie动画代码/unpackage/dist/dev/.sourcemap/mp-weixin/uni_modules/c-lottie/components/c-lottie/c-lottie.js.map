<<<<<<< HEAD
{"version":3,"file":"c-lottie.js","sources":["uni_modules/c-lottie/components/c-lottie/c-lottie.vue","../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovZ2l0aHViL3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL3VuaV9tb2R1bGVzL2MtbG90dGllL2NvbXBvbmVudHMvYy1sb3R0aWUvYy1sb3R0aWUudnVl"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t<view class=\"c-lottie\" :style=\"{width,height}\">\r\n\t\t<canvas class=\"canvas\" :id=\"myCanvasId\" type=\"2d\"></canvas>\r\n\t</view>\r\n\r\n</template>\r\n<script lang=\"uts\">\r\n\t/**\r\n\t * c-lottie Lottie组件\r\n\t * @property {String} canvasId 画布id\r\n\t * @property {String} width 图像宽度 默认750rpx 单位rpx/px\r\n\t * @property {String} height 图像高度 默认750rpx 单位rpx/px\r\n\t * @property {String} src Lottie文件地址 小程序只支持网络地址\r\n\t * @property {String} data Lottie文件data\r\n\t * @property {Boolean} autoPlay 是否自动播放 默认true\r\n\t * @property {Boolean} loop 是否循环播放 默认值为 true\r\n\t * @property {String} renderer 渲染模式 默认值为canvas 可选值 svg|canvas 小程序不支持\r\n\t * @property {Boolean} isOnChange 是否开启播放进度监听 默认false false时不触发EnterFrame\r\n\t * @event {Function()} Complete 监听动画播放完成\r\n\t * @event {Function()} LoopComplete 监听当前循环播放完成\r\n\t * @event {Function()} EnterFrame 监听动画播放进度\r\n\t * @event {Function()} SegmentStart 监听开始播放一个动画片段\r\n\t * @event {Function()} dataReady 当动画的所有部分都已加载时触发\r\n\t * @event {Function()} dataFailed 当部分动画无法加载时触发\r\n\t * 组件内方法统一使用 call(funName, args) 调用player实例方法 详见文档\r\n\t * */\r\n\timport uuid from './js/uuid.js'\r\n\r\n\timport lottie from 'lottie-miniprogram'\r\n\r\n\r\n\r\n\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tcanvasId: {\r\n\t\t\t\ttype: String\r\n\t\t\t},\r\n\t\t\twidth: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '750rpx'\r\n\t\t\t},\r\n\t\t\theight: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '750rpx'\r\n\t\t\t},\r\n\t\t\tsrc: {\r\n\t\t\t\ttype: String,\r\n\t\t\t},\r\n\t\t\tdata: {\r\n\t\t\t\ttype: String,\r\n\t\t\t},\r\n\t\t\tautoPlay: { //是否自动播放\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tloop: { //是否循环播放 默认值为 true\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\trenderer: { //渲染模式 默认值为canvas 可选值 svg\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'canvas',\r\n\t\t\t},\r\n\t\t\tisOnChange: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\temits: ['Complete', 'LoopComplete', 'EnterFrame', 'SegmentStart','dataReady','dataFailed'],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfun: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmyCanvasId() {\r\n\t\t\t\tif (!this.canvasId) {\r\n\t\t\t\t\treturn 'c' + uuid(18)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.canvasId\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlottieData() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmyCanvasId: this.myCanvasId,\r\n\t\t\t\t\twidth: this.width,\r\n\t\t\t\t\theight: this.height,\r\n\t\t\t\t\tsrc: this.src,\r\n\t\t\t\t\tdata: this.data,\r\n\t\t\t\t\tautoPlay: this.autoPlay,\r\n\t\t\t\t\tloop: this.loop,\r\n\t\t\t\t\trenderer: this.renderer,\r\n\t\t\t\t\tisOnChange: this.isOnChange\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tlottieData() {\r\n\r\n\t\t\t\tthis.render()\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcall(name, args) {\r\n\t\t\t\tthis.fun = {name,args}\r\n\r\n\t\t\t\tthis.callPlayer(this.fun)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tgetContext() {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tpixelRatio\r\n\t\t\t\t\t} = uni.getSystemInfoSync()\r\n\t\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t\t.select(`#${this.myCanvasId}`)\r\n\t\t\t\t\t\t.fields({\r\n\t\t\t\t\t\t\tnode: true,\r\n\t\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\t\theight\r\n\t\t\t\t\t\t\t} = res[0]\r\n\t\t\t\t\t\t\tconst canvas = res[0].node\r\n\t\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\t\tcanvas,\r\n\t\t\t\t\t\t\t\twidth,\r\n\t\t\t\t\t\t\t\theight,\r\n\t\t\t\t\t\t\t\tpixelRatio\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync render() {\r\n\t\t\t\tif (this.player) {\r\n\t\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:149',player);\r\n\t\t\t\t\t// call('stop')\r\n\t\t\t\t\tthis.call('destroy', this.player)\r\n\t\t\t\t}\r\n\t\t\t\tlet {\r\n\t\t\t\t\tcanvas,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tpixelRatio\r\n\t\t\t\t} = await this.getContext()\r\n\t\t\t\tthis.myCanvas = canvas\r\n\t\t\t\tthis.context = canvas.getContext('2d')\r\n\t\t\t\t//避免出现锯齿问题\r\n\t\t\t\tthis.context.scale(pixelRatio, pixelRatio)\r\n\t\t\t\tcanvas.width = width * pixelRatio\r\n\t\t\t\tcanvas.height = height * pixelRatio\r\n\t\t\t\tlottie.setup(this.myCanvas)\r\n\t\t\t\tthis.player = lottie.loadAnimation({\r\n\t\t\t\t\tloop: this.loop,\r\n\t\t\t\t\tautoplay: this.autoPlay,\r\n\t\t\t\t\t// 动画json的本地数据\r\n\t\t\t\t\tanimationData: this.data,\r\n\t\t\t\t\t//远程动画。一定要把json格式的文件放到服务器中，并且注意域名是合法的\r\n\t\t\t\t\tpath: this.src,\r\n\t\t\t\t\trendererSettings: {\r\n\t\t\t\t\t\tcontext:this.context,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\tthis.player.addEventListener('data_ready',(val)=>{ //当动画的所有部分都已加载时\r\n\t\t\t\t\tthis.$emit('dataReady', val)\r\n\t\t\t\t})\r\n\t\t\t\tthis.player.addEventListener('data_failed',(val)=>{ //当部分动画无法加载时\r\n\t\t\t\t\tthis.$emit('dataFailed', val)\r\n\t\t\t\t})\r\n\t\t\t\tthis.player.onComplete = (val) => { //动画播放完成触发\r\n\t\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:184','动画播放完成触发',val);\r\n\t\t\t\t\tthis.$emit('Complete', val)\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.onLoopComplete = (val) => { //当前循环播放完成触发\r\n\t\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:188','当前循环播放完成触发',val);\r\n\t\t\t\t\tthis.$emit('LoopComplete', val)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isOnChange) {\r\n\t\t\t\t\tthis.player.onEnterFrame = (val) => { //播放动画的时候触发\r\n\t\t\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:193','播放动画的时候触发',val);\r\n\t\t\t\t\t\tthis.$emit('EnterFrame', val)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.onSegmentStart = (val) => { //开始播放一个动画片段的时候触发\r\n\t\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:198','开始播放一个动画片段的时候触发',val);\r\n\t\t\t\t\tthis.$emit('SegmentStart', val)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tcallPlayer(val) {\r\n\t\t\t\tif (!val.name) return;\r\n\t\t\t\tlet {name,args} = val\r\n\t\t\t\t// uni.__f__('log','at uni_modules/c-lottie/components/c-lottie/c-lottie.vue:206',name, args);\r\n\t\t\t\tif (Array.isArray(args)) {\r\n\t\t\t\t\tthis.player[name](...args)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.player[name](args)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t\tthis.render()\r\n\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\t// 组件卸载销毁实例\r\n\t\t\tthis.call('destroy')\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.c-lottie {\r\n\t\t// width: v-bind(width);\r\n\t\t// height: v-bind(height);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t.canvas {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'D:/github/teacherDirectory/vue实现Lottie动画代码/uni_modules/c-lottie/components/c-lottie/c-lottie.vue'\nwx.createComponent(Component)"],"names":["defineComponent","uuid","uni","lottie"],"mappings":"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"}
=======
{"version":3,"file":"c-lottie.js","sources":["../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RToveWFuc2hpbHXph43mlrDmnaXov4cvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL3VuaV9tb2R1bGVzL2MtbG90dGllL2NvbXBvbmVudHMvYy1sb3R0aWUvYy1sb3R0aWUudnVl"],"sourcesContent":["import Component from 'E:/yanshilu重新来过/vue实现Lottie动画代码/uni_modules/c-lottie/components/c-lottie/c-lottie.vue'\nwx.createComponent(Component)"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,GAAG,gBAAgB,SAAS;"}
>>>>>>> a2bf9657a39810a133593f8de99b785a81f8875d
