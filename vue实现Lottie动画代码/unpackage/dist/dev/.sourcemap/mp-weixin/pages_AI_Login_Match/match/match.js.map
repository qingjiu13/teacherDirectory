{"version":3,"file":"match.js","sources":["pages_AI_Login_Match/match/match.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNfQUlfTG9naW5fTWF0Y2hcbWF0Y2hcbWF0Y2gudnVl"],"sourcesContent":["<template>\r\n  <view class=\"background-image\">\r\n    <image\r\n      class=\"background-image-img\"\r\n      src=\"/static/image/bgPicture/background1.png\"\r\n      mode=\"aspectFill\" alt=\"背景图\"\r\n    />\r\n  </view>\r\n  <view class=\"background-image\">\r\n    <image\r\n      class=\"background-image-img\"\r\n      src=\"/static/image/bgPicture/background.png\"\r\n      mode=\"aspectFill\" alt=\"背景图\"\r\n    />\r\n  </view>\r\n  <Header :title=\"'精准匹配'\" @back=\"handleBack\" />\r\n  <view class=\"page\">\r\n    <!-- 搜索框 -->\r\n    <view class=\"search-wrapper\">\r\n      <input\r\n        v-model=\"searchText\"\r\n        placeholder=\"请输入搜索内容\"\r\n        class=\"search-input\"\r\n      />\r\n    </view>\r\n\r\n    <!-- 选项容器 -->\r\n    <view class=\"container-select\">\r\n      <view\r\n        v-for=\"item in options\"\r\n        :key=\"item.key\"\r\n        class=\"select-item\"\r\n        :class=\"{active: isActive(item.key)}\"\r\n        @click=\"onOptionClick(item.key)\">\r\n        <view class=\"select-item-content\" :class=\"{active: isActive(item.key)}\">\r\n          <text class=\"label-text\" :class=\"{active: isActive(item.key)}\">{{ item.label }}</text>\r\n          <text v-if=\"filterSummary[item.key]\" class=\"selected-text\">{{ filterSummary[item.key] }}</text>\r\n        </view>\r\n        <image\r\n          :src=\"'/static/image/arrow/arrow_down.svg'\"\r\n          class=\"arrow-icon\"\r\n          :class=\"{'arrow-icon-rotate': currentOption === item.key}\"\r\n        />\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 筛选弹层 -->\r\n    <view v-if=\"showPopup\" class=\"filter-mask\" @click.stop=\"onPopupClose\">\r\n\r\n      <!-- 学校筛选弹层 -->\r\n      <view \r\n        v-if=\"currentOption === 'school'\" \r\n        class=\"filter-popup\"\r\n        @click.stop\r\n      >\r\n        <view class=\"popup-header\">\r\n          <text class=\"popup-title\">学校</text>\r\n        </view>\r\n        <view class=\"popup-content\">\r\n          <view class=\"form-row\">\r\n            <view class=\"input-wrapper\">\r\n              <input\r\n                v-model=\"schoolInput\"\r\n                placeholder=\"请输入学校名称\"\r\n                class=\"search-input\"\r\n                @input=\"onSchoolInput\"\r\n                @click.stop\r\n              />\r\n              <view v-if=\"schoolInput\" class=\"clear-icon\" @click.stop=\"resetSchoolFilter\">×</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"scroll-container\">\r\n            <scroll-view class=\"result-list\" scroll-y=\"true\">\r\n              <view\r\n                v-for=\"(school, idx) in filteredSchoolList\"\r\n                :key=\"school\"\r\n                class=\"result-item\"\r\n                :class=\"{active: idx === formData.targetSchoolIndex}\"\r\n                @click=\"selectSchoolTemp(idx, school)\"\r\n              >\r\n                {{ school }}\r\n              </view>\r\n            </scroll-view>\r\n          </view>\r\n          <view class=\"save-button-container\">\r\n            <button class=\"save-button\" @click.stop=\"confirmSchoolFilter\">\r\n              <image class=\"save-button-image\" src=\"../static/match/submit.png\" mode=\"aspectFill\" alt=\"确定图标\"></image>\r\n              <text class=\"save-button-text\">确定</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n  \r\n      <!-- 专业课筛选弹层 -->\r\n      <view \r\n        v-if=\"currentOption === 'professional'\" \r\n        class=\"filter-popup\"\r\n        @click.stop\r\n      >\r\n        <view class=\"popup-header\">\r\n          <text class=\"popup-title\">专业课</text>\r\n        </view>\r\n        <view class=\"popup-content\">\r\n          <view class=\"form-row\">\r\n            <view class=\"input-wrapper\">\r\n              <input\r\n                v-model=\"majorInput\"\r\n                :placeholder=\"formData.targetSchool ? '请输入专业名称' : '请先选择学校'\"\r\n                class=\"search-input\"\r\n                :disabled=\"!formData.targetSchool\"\r\n                @input=\"onMajorInput\"\r\n                @click.stop\r\n              />\r\n              <view v-if=\"majorInput\" class=\"clear-icon\" @click.stop=\"resetProfessionalFilter\">×</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"scroll-container\">\r\n            <scroll-view class=\"result-list\" scroll-y=\"true\">\r\n              <view\r\n                v-for=\"(major, idx) in filteredMajorList\"\r\n                :key=\"major\"\r\n                class=\"result-item\"\r\n                :class=\"{active: idx === formData.targetMajorIndex}\"\r\n                @click=\"selectMajorTemp(idx, major)\"\r\n              >\r\n                {{ major }}\r\n              </view>\r\n            </scroll-view>\r\n          </view>\r\n          <view class=\"save-button-container\">\r\n            <button class=\"save-button\" @click.stop=\"confirmProfessionalFilter\">\r\n              <image class=\"save-button-image\" src=\"../static/match/submit.png\" mode=\"aspectFill\" alt=\"确定图标\"></image>\r\n              <text class=\"save-button-text\">确定</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n  \r\n      <!-- 非专业课筛选弹层 -->\r\n      <view \r\n        v-if=\"currentOption === 'nonProfessional'\" \r\n        class=\"filter-popup non-professional-popup\" \r\n        @click.stop\r\n      >\r\n        <view class=\"popup-header\">\r\n          <text class=\"popup-title\">非专业课</text>\r\n        </view>\r\n        <view class=\"popup-content\">\r\n          <!-- 水平排列四个选项 -->\r\n          <view class=\"nonpro-tabs\">\r\n            <view\r\n              v-for=\"tab in nonProTabs\"\r\n              :key=\"tab.key\"\r\n              :class=\"['tab-item', activeNonProTab === tab.key ? 'active' : '']\"\r\n              @click.stop=\"selectNonProTab(tab.key)\"\r\n            >\r\n              {{ tab.label }}\r\n            </view>\r\n          </view>\r\n\r\n          <!-- 选中的内容区域 -->\r\n          <view class=\"filter-section\">\r\n              <text class=\"filter-label\">{{ tabLabelMap[activeNonProTab] }}</text>\r\n              <view class=\"option-buttons\">\r\n                <view \r\n                  v-for=\"(option, index) in getChoiceList(activeNonProTab)\" \r\n                  :key=\"index\"\r\n                  class=\"option-button\"\r\n                  :class=\"{'option-button-active': index === getChoiceIndex(activeNonProTab)}\"\r\n                  @click.stop=\"handleChoiceSelect(activeNonProTab, index)\"\r\n                >\r\n                  {{ option }}\r\n                </view>\r\n              </view>\r\n          </view>\r\n          \r\n          <view class=\"save-button-container\">\r\n            <button class=\"save-button\" @click.stop=\"confirmNonProfessionalFilter\">\r\n              <image class=\"save-button-image\" src=\"../static/match/submit.png\" mode=\"aspectFill\" alt=\"确定图标\"></image>\r\n              <text class=\"save-button-text\">确定</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n  \r\n      <!-- 排序方式筛选弹层 -->\r\n      <view \r\n        v-if=\"currentOption === 'sort'\" \r\n        class=\"filter-popup sort-popup\"\r\n        @click.stop\r\n      >\r\n        <view class=\"popup-header\">\r\n          <text class=\"popup-title\">排序方式</text>\r\n        </view>\r\n        <view class=\"popup-content\">\r\n          <view class=\"filter-section\">\r\n            <text class=\"filter-label\">选择排序方式</text>\r\n            <view class=\"option-buttons\">\r\n              <view \r\n                v-for=\"(option, index) in sortOptions\" \r\n                :key=\"index\"\r\n                class=\"option-button\"\r\n                :class=\"{'option-button-active': index === formData.sortIndex}\"\r\n                @click.stop=\"handleSortSelect(index)\"\r\n              >\r\n                {{ option }}\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"save-button-container\">\r\n            <button class=\"save-button\" @click.stop=\"confirmSortFilter\">\r\n              <image class=\"save-button-image\" src=\"../static/match/submit.png\" mode=\"aspectFill\" alt=\"确定图标\"></image>\r\n              <text class=\"save-button-text\">确定</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 内容区 -->\r\n    <view class=\"container-match\">\r\n      <!-- 老师卡片列表 -->\r\n      <scroll-view class=\"card-list\" scroll-y=\"true\" id=\"step2\" @scrolltolower=\"loadMoreTeachers\">\r\n        <view class=\"teacher-card\" v-for=\"(teacher, index) in matchTeachers\" :key=\"teacher.id || index\">\r\n          <view class=\"teacher-card-outer\">\r\n            <view class=\"teacher-card-outer-gradient\">\r\n              <view class=\"teacher-card-inner\">\r\n                <view class=\"card-left\">\r\n                  <image class=\"teacher-avatar\" :src=\"teacher.avatar || '/static/image/defaultAvatar/teacher-man.png'\" mode=\"aspectFill\" @tap=\"viewTeacherDetail(teacher.id)\"></image>\r\n                </view>\r\n                <view class=\"card-middle\">\r\n                  <!-- 顶部：昵称和认证标签同一行 -->\r\n                  <view class=\"card-middle-top-row\">\r\n                    <view class=\"teacher-name\">{{ teacher.name }}</view>\r\n                    <view class=\"teacher-tags-inline\">\r\n                      <!--\r\n                        认证状态图标\r\n                        @已认证 static/image/certify/certified.png\r\n                        @未认证 static/image/certify/uncertified.png\r\n                      -->\r\n                      <image\r\n                        class=\"certify-icon\"\r\n                        :src=\"teacher.certificate ? '/static/image/certify/certified.png' : '/static/image/certify/uncertified.png'\"\r\n                        :alt=\"teacher.certificate ? '已认证' : '未认证'\"\r\n                      />\r\n                    </view>\r\n                  </view>\r\n                  <!-- 学校单独一行 -->\r\n                  <view class=\"teacher-info\">{{ teacher.school }}</view>\r\n                  <!-- 专业和评分同一行 -->\r\n                  <view class=\"teacher-major-score\">\r\n                    <view class=\"teacher-major\">{{ teacher.major }}</view>\r\n                  </view>\r\n                </view>\r\n                <view class=\"price-tag-container card-right-center\" v-if=\"oneToOneMatchPrice(matchTeachers)[teacher.id]\">\r\n                  <view class=\"price-tag middle-text\">￥</view>\r\n                  <view class=\"price-tag\">{{ oneToOneMatchPrice(matchTeachers)[teacher.id].hourlyPrice }}元/小时</view>\r\n                  <view class=\"price-tag small-text\">起</view>\r\n                </view>\r\n                <view class=\"card-right\">\r\n                  <button class=\"communicate-btn\" @click.stop=\"handleCommunicate(teacher.id)\">\r\n                    <image class=\"communicate-icon\" src=\"/pages_AI_Login_Match/static/match/communicate.png\" mode=\"aspectFill\" alt=\"沟通图标\"></image>\r\n                    <text class=\"communicate-text\">马上沟通</text>\r\n                  </button>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"empty-state\" v-if=\"matchTeachers.length === 0 && !isLoading\">\r\n          <text>暂无匹配的老师信息</text>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\nimport { ref, reactive, computed, onMounted} from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { Navigator } from '@/router/Router.js'\r\nimport GraduateStore from '/pages_AI_Login_Match/components/combobox/graduate_school_major.js'\r\nimport Header from '@/components/navigationTitleBar/header'\r\n\r\n\r\n// 初始化 store\r\nconst store = useStore()\r\n\r\n// 搜索文本\r\nconst searchText = ref('')\r\n\r\n// 选项列表\r\nconst options = [\r\n  { key: 'school', label: '学校' },\r\n  { key: 'professional', label: '专业课' },\r\n  { key: 'nonProfessional', label: '非专业课' },\r\n  { key: 'sort', label: '排序方式' }\r\n]\r\n\r\n// 当前激活的选项\r\nconst currentOption = ref('')\r\n// 弹层显示控制\r\nconst showPopup = ref(false)\r\n\r\n// 加载状态\r\nconst isLoading = ref(false)\r\n\r\n// 非专业课相关配置\r\nconst activeNonProTab = ref('')\r\n\r\n/**\r\n * 非专业课四个tab选项\r\n * @type {Array}\r\n */\r\nconst nonProTabs = [\r\n  { key: 'math', label: '数学' },\r\n  { key: 'english', label: '英语' },\r\n  { key: 'politics', label: '政治' },\r\n  { key: 'other', label: '其他' }\r\n]\r\n\r\n/**\r\n * tab key到中文描述的映射\r\n * @type {Object}\r\n */\r\nconst tabLabelMap = {\r\n  math: '考研数学',\r\n  english: '考研英语',\r\n  politics: '考研政治',\r\n  other: '其他科目'\r\n}\r\n\r\n// 从store中获取匹配的老师列表\r\nconst matchTeachers = computed(() => {\r\n  return store.state.user.match.matchList || []\r\n})\r\n\r\n// 分页相关状态\r\nconst currentPage = computed(() => store.state.user.match.currentPage)\r\nconst hasMore = computed(() => store.state.user.match.hasMore)\r\n\r\n// 表单数据\r\nconst formData = reactive({\r\n  targetSchoolIndex: -1,\r\n  targetMajorIndex: -1,\r\n  targetSchool: '',\r\n  targetMajor: '',\r\n  \r\n  // 非专业课筛选数据\r\n  mathIndex: -1,\r\n  englishIndex: -1,\r\n  politicsIndex: -1,\r\n  otherIndex: -1,\r\n  \r\n  // 排序方式\r\n  sortIndex: -1,\r\n})\r\n\r\n// 学校和专业列表数据\r\nconst targetSchoolList = ref([])\r\nconst targetMajorList = ref([])\r\nconst graduateStore = ref(null)\r\n\r\n// 下拉选项列表\r\nconst mathOptions = ref(['数学一', '数学二', '数学三'])\r\nconst englishOptions = ref(['英语一', '英语二'])\r\nconst politicsOptions = ref(['政治必修', '政治选修'])\r\nconst otherOptions = ref(['经济学', '管理学', '教育学', '历史学'])\r\nconst sortOptions = ref(['综合评分从高到低', '价格从低到高', '价格从高到低', '最新发布'])\r\n\r\n// 新增响应式变量\r\nconst schoolInput = ref('')\r\nconst majorInput = ref('')\r\n\r\n// 筛选结果列表\r\nconst filteredSchoolList = ref([])\r\nconst filteredMajorList = ref([])\r\n\r\n/**\r\n * 获取教师一对一课程的每小时价格\r\n * @param {Array} matchTeachers - 匹配的教师列表\r\n * @returns {Object} - 包含每小时价格信息的对象\r\n */\r\nconst oneToOneMatchPrice = (matchTeachers) => {\r\n  const result = {};\r\n  \r\n  if (!matchTeachers || !Array.isArray(matchTeachers)) {\r\n    return result;\r\n  }\r\n  \r\n  matchTeachers.forEach(teacher => {\r\n    const oneToOneService = teacher.service?.find(\r\n      service => service.type?.typename === '一对一课程'\r\n    );\r\n    \r\n    if (oneToOneService) {\r\n      const priceValue = parseFloat(oneToOneService.price.replace(/[^0-9.]/g, ''));\r\n      const hourValue = parseFloat(\r\n        oneToOneService.type.fulllength.hours.replace(/[^0-9.]/g, '')\r\n      );\r\n      const minuteValue = parseFloat(\r\n        oneToOneService.type.fulllength.minutes.replace(/[^0-9.]/g, '')\r\n      );\r\n      \r\n      const totalHours = hourValue + (minuteValue / 60);\r\n      \r\n      if (totalHours > 0) {\r\n        result[teacher.id] = {\r\n          name: teacher.name,\r\n          hourlyPrice: (priceValue / totalHours).toFixed(2)\r\n        };\r\n      }\r\n    }\r\n  });\r\n  \r\n  return result;\r\n};\r\n\r\n/**\r\n * 判断选项是否处于活跃状态\r\n * @param {String} key - 选项键名\r\n * @returns {Boolean} 是否处于活跃状态\r\n */\r\nconst isActive = (key) => {\r\n  if (key === 'school') {\r\n    return !!store.state.user.match.schoolList\r\n  }\r\n  \r\n  if (key === 'professional') {\r\n    return !!store.state.user.match.professionalList\r\n  }\r\n  \r\n  if (key === 'nonProfessional') {\r\n    const nonProfList = store.state.user.match.nonProfessionalList\r\n    return !!(nonProfList.math || nonProfList.english || nonProfList.politics || nonProfList.other)\r\n  }\r\n  \r\n  if (key === 'sort') {\r\n    return !!store.state.user.match.sortMode\r\n  }\r\n  \r\n  return currentOption.value === key\r\n}\r\n\r\n/**\r\n * 点击选项\r\n * @param {String} key - 选项键名\r\n */\r\nconst onOptionClick = (key) => {\r\n  if (currentOption.value === key && showPopup.value) {\r\n    showPopup.value = false\r\n    currentOption.value = ''\r\n    return\r\n  }\r\n  \r\n  currentOption.value = key\r\n  showPopup.value = true\r\n  \r\n  syncStateToForm(key)\r\n}\r\n\r\n/**\r\n * 从Vuex状态同步特定筛选项的数据到表单\r\n * @param {String} key - 筛选项键名\r\n */\r\nconst syncStateToForm = (key) => {\r\n  if (key === 'school') {\r\n    const schoolList = store.state.user.match.schoolList\r\n    schoolInput.value = schoolList || ''\r\n    if (schoolList) {\r\n      formData.targetSchool = schoolList\r\n      const idx = filteredSchoolList.value.findIndex(s => s === schoolList)\r\n      if (idx >= 0) {\r\n        formData.targetSchoolIndex = idx\r\n      }\r\n    }\r\n    updateFilteredSchoolList()\r\n  }\r\n  \r\n  if (key === 'professional') {\r\n    const professionalList = store.state.user.match.professionalList\r\n    majorInput.value = professionalList || ''\r\n    if (professionalList) {\r\n      formData.targetMajor = professionalList\r\n      const idx = filteredMajorList.value.findIndex(m => m === professionalList)\r\n      if (idx >= 0) {\r\n        formData.targetMajorIndex = idx\r\n      }\r\n    }\r\n    updateFilteredMajorList()\r\n  }\r\n  \r\n  if (key === 'nonProfessional') {\r\n    const nonProfList = store.state.user.match.nonProfessionalList\r\n    \r\n    if (nonProfList.math) {\r\n      const idx = mathOptions.value.findIndex(opt => opt === nonProfList.math)\r\n      if (idx >= 0) {\r\n        formData.mathIndex = idx\r\n        activeNonProTab.value = 'math'\r\n      }\r\n    } else if (nonProfList.english) {\r\n      const idx = englishOptions.value.findIndex(opt => opt === nonProfList.english)\r\n      if (idx >= 0) {\r\n        formData.englishIndex = idx\r\n        activeNonProTab.value = 'english'\r\n      }\r\n    } else if (nonProfList.politics) {\r\n      const idx = politicsOptions.value.findIndex(opt => opt === nonProfList.politics)\r\n      if (idx >= 0) {\r\n        formData.politicsIndex = idx\r\n        activeNonProTab.value = 'politics'\r\n      }\r\n    } else if (nonProfList.other) {\r\n      const idx = otherOptions.value.findIndex(opt => opt === nonProfList.other)\r\n      if (idx >= 0) {\r\n        formData.otherIndex = idx\r\n        activeNonProTab.value = 'other'\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (key === 'sort') {\r\n    const sortMode = store.state.user.match.sortMode\r\n    if (sortMode) {\r\n      const idx = sortOptions.value.findIndex(opt => opt === sortMode)\r\n      if (idx >= 0) {\r\n        formData.sortIndex = idx\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 关闭弹层\r\n */\r\nconst onPopupClose = () => {\r\n  showPopup.value = false\r\n  currentOption.value = ''\r\n}\r\n\r\n/**\r\n * 处理学校变更，更新专业列表\r\n * @param {String} school - 变更后的学校名称\r\n */\r\nconst handleSchoolChange = async (school) => {\r\n  if (!school) {\r\n    resetMajorSelection()\r\n    return\r\n  }\r\n  \r\n  GraduateStore.actions.selectSchool({\r\n    commit: (mutation, payload) => {\r\n      GraduateStore.mutations[mutation](graduateStore.value, payload)\r\n    }\r\n  }, school)\r\n  \r\n  if (graduateStore.value.schools[school]) {\r\n    const majorsCount = graduateStore.value.schools[school].length\r\n    targetMajorList.value = graduateStore.value.schools[school].slice(0, 100)\r\n    \r\n    if (store.state.user.match.professionalList) {\r\n      const savedMajor = store.state.user.match.professionalList\r\n      const majorIndex = targetMajorList.value.findIndex(\r\n        major => major === savedMajor\r\n      )\r\n      \r\n      if (majorIndex >= 0) {\r\n        formData.targetMajorIndex = majorIndex\r\n        formData.targetMajor = savedMajor\r\n      } else {\r\n        resetMajorSelection()\r\n        store.dispatch('user/match/updateProfessionalList', '')\r\n      }\r\n    }\r\n  } else {\r\n    resetMajorSelection()\r\n  }\r\n}\r\n\r\n/**\r\n * 初始化研究生学校专业数据\r\n */\r\nconst initGraduateData = async () => {\r\n  try {\r\n    graduateStore.value = JSON.parse(JSON.stringify(GraduateStore.state))\r\n    GraduateStore.mutations.initSchoolFuse(graduateStore.value)\r\n    const schools = Object.keys(graduateStore.value.schools).slice(0, 50)\r\n    targetSchoolList.value = schools\r\n  } catch (error) {\r\n    targetSchoolList.value = [\"北京大学\", \"清华大学\", \"复旦大学\"]\r\n  }\r\n}\r\n\r\n/**\r\n * 处理学校输入\r\n * @param {Event} e\r\n */\r\nconst onSchoolInput = (e) => {\r\n  const keyword = e.detail.value || schoolInput.value\r\n  \r\n  GraduateStore.mutations.setSchoolKeyword(graduateStore.value, keyword)\r\n  \r\n  if (!keyword) {\r\n    formData.targetSchoolIndex = -1\r\n    formData.targetSchool = ''\r\n    \r\n    majorInput.value = ''\r\n    formData.targetMajorIndex = -1\r\n    formData.targetMajor = ''\r\n  } \r\n  updateFilteredSchoolList()\r\n}\r\n\r\n/**\r\n * 处理专业输入\r\n * @param {Event} e\r\n */\r\nconst onMajorInput = (e) => {\r\n  if (!formData.targetSchool) return\r\n  \r\n  const keyword = e.detail.value || majorInput.value\r\n  \r\n  // 确保关键词正确设置到GraduateStore中\r\n  GraduateStore.mutations.setMajorKeyword(graduateStore.value, keyword)\r\n  \r\n  if (!keyword) {\r\n    formData.targetMajorIndex = -1\r\n    formData.targetMajor = ''\r\n  }\r\n  updateFilteredMajorList(keyword)\r\n}\r\n\r\n/**\r\n * 更新学校搜索结果\r\n */\r\nconst updateFilteredSchoolList = () => {\r\n  filteredSchoolList.value = GraduateStore.getters.filteredSchoolList(graduateStore.value)\r\n}\r\n\r\n/**\r\n * 更新专业搜索结果\r\n * @param {String} forceKeyword - 强制使用的关键词（如果提供）\r\n */\r\nconst updateFilteredMajorList = (forceKeyword) => {\r\n  if (!formData.targetSchool) {\r\n    filteredMajorList.value = []\r\n    return\r\n  }\r\n  \r\n  GraduateStore.mutations.setSelectedSchool(graduateStore.value, formData.targetSchool)\r\n  \r\n  // 使用强制关键词或从状态获取关键词\r\n  const currentKeyword = forceKeyword !== undefined ? forceKeyword : graduateStore.value.majorKeyword || ''\r\n  \r\n  // 如果关键词被意外清空，重新设置\r\n  if (forceKeyword && forceKeyword !== graduateStore.value.majorKeyword) {\r\n    GraduateStore.mutations.setMajorKeyword(graduateStore.value, forceKeyword)\r\n  }\r\n  \r\n  // 获取原始专业列表\r\n  let originalMajorList = []\r\n  if (currentKeyword) {\r\n    // 使用关键词搜索\r\n    // 临时设置关键词到graduate_store确保搜索正确\r\n    const originalKeyword = graduateStore.value.majorKeyword\r\n    GraduateStore.mutations.setMajorKeyword(graduateStore.value, currentKeyword)\r\n    \r\n    // 使用Fuse.js搜索功能获取匹配结果\r\n    originalMajorList = GraduateStore.getters.filteredMajorList(graduateStore.value)\r\n    \r\n    // 确保原始的关键词还原\r\n    if (originalKeyword !== currentKeyword) {\r\n      GraduateStore.mutations.setMajorKeyword(graduateStore.value, originalKeyword)\r\n    }\r\n  } else {\r\n    // 无关键词时，获取所有专业\r\n    originalMajorList = graduateStore.value.schools[formData.targetSchool]?.slice(0, 100) || []\r\n  }\r\n  \r\n  filteredMajorList.value = originalMajorList\r\n  \r\n  if (!currentKeyword) {\r\n    customSortMajorList()\r\n  } else {\r\n    ensureSelectedMajorVisible()\r\n  }\r\n}\r\n\r\n/**\r\n * 确保选中的专业在列表中可见\r\n */\r\nconst ensureSelectedMajorVisible = () => {\r\n  if (!formData.targetMajor || !filteredMajorList.value.length) {\r\n    return\r\n  }\r\n  \r\n  const index = filteredMajorList.value.findIndex(major => major === formData.targetMajor)\r\n  \r\n  if (index === -1) {\r\n    filteredMajorList.value.unshift(formData.targetMajor)\r\n  } \r\n  else if (index > 0) {\r\n    const selectedMajor = filteredMajorList.value.splice(index, 1)[0]\r\n    filteredMajorList.value.unshift(selectedMajor)\r\n  }\r\n}\r\n\r\n/**\r\n * 自定义专业列表排序\r\n */\r\nconst customSortMajorList = () => {\r\n  if (!filteredMajorList.value || filteredMajorList.value.length === 0) {\r\n    return\r\n  }\r\n  \r\n  // 修改排序逻辑\r\n  filteredMajorList.value.sort((a, b) => {\r\n    // 选中项置顶\r\n    if (a === formData.targetMajor) return -1\r\n    if (b === formData.targetMajor) return 1\r\n    \r\n    // 计算机相关专业优先显示（如果当前学校是同济大学）\r\n    if (formData.targetSchool === '同济大学') {\r\n      const aHasComputer = a.includes('计算') || a.includes('软件') || a.includes('信息') || a.includes('通信')\r\n      const bHasComputer = b.includes('计算') || b.includes('软件') || b.includes('信息') || b.includes('通信')\r\n      \r\n      if (aHasComputer && !bHasComputer) return -1\r\n      if (!aHasComputer && bHasComputer) return 1\r\n    }\r\n    \r\n    // 按拼音首字母排序\r\n    return a.localeCompare(b, 'zh-CN')\r\n  })\r\n}\r\n\r\n/**\r\n * 选择学校（临时）\r\n */\r\nconst selectSchoolTemp = (idx, school) => {\r\n  formData.targetSchoolIndex = idx\r\n  formData.targetSchool = school\r\n  schoolInput.value = school\r\n}\r\n\r\n/**\r\n * 确认学校筛选\r\n */\r\nconst confirmSchoolFilter = () => {\r\n  // 直接使用 commit 修改状态\r\n  store.commit('user/match/SET_SCHOOL_LIST', formData.targetSchool)\r\n  \r\n  // 如果选择了学校，触发学校变更处理\r\n  if (formData.targetSchool) {\r\n    handleSchoolChange(formData.targetSchool)\r\n  } else {\r\n    // 如果清空学校，重置专业相关数据\r\n    majorInput.value = ''\r\n    formData.targetMajorIndex = -1\r\n    formData.targetMajor = ''\r\n    updateFilteredMajorList()\r\n  }\r\n  \r\n  applyFilters()\r\n  showPopup.value = false\r\n  currentOption.value = ''\r\n}\r\n\r\n/**\r\n * 选择专业（临时）\r\n */\r\nconst selectMajorTemp = (idx, major) => {\r\n  formData.targetMajorIndex = idx\r\n  formData.targetMajor = major\r\n  majorInput.value = major\r\n  \r\n  // 临时选择专业时不清空关键词，保持搜索结果\r\n  // GraduateStore.mutations.setMajorKeyword(graduateStore.value, '')\r\n}\r\n\r\n/**\r\n * 确认专业筛选前的预处理\r\n */\r\nconst prepareProfessionalFilter = () => {\r\n  // 如果有输入关键词但没有选中专业，尝试使用关键词匹配第一个专业\r\n  if (!formData.targetMajor && majorInput.value && filteredMajorList.value.length > 0) {\r\n    // 获取当前搜索框的关键词\r\n    const keyword = majorInput.value\r\n    \r\n    // 直接使用关键词进行搜索，不改变store状态\r\n    let searchResults = []\r\n    \r\n    if (keyword) {\r\n      // 临时设置关键词进行搜索\r\n      const originalKeyword = graduateStore.value.majorKeyword\r\n      GraduateStore.mutations.setMajorKeyword(graduateStore.value, keyword)\r\n      \r\n      // 执行搜索\r\n      searchResults = GraduateStore.getters.filteredMajorList(graduateStore.value)\r\n      \r\n      // 恢复原始关键词\r\n      GraduateStore.mutations.setMajorKeyword(graduateStore.value, originalKeyword)\r\n    }\r\n    \r\n    if (searchResults.length > 0) {\r\n      // 使用搜索结果中的第一项（最匹配的结果）\r\n      formData.targetMajor = searchResults[0]\r\n    } else {\r\n      // 如果搜索无结果，使用当前过滤列表的第一项\r\n      formData.targetMajor = filteredMajorList.value[0]\r\n    }\r\n    formData.targetMajorIndex = 0\r\n    majorInput.value = formData.targetMajor\r\n  }\r\n  \r\n  return formData.targetMajor\r\n}\r\n\r\n/**\r\n * 确认专业筛选\r\n */\r\nconst confirmProfessionalFilter = () => {\r\n  // 使用预处理函数处理关键词匹配和专业选择\r\n  const selectedMajor = prepareProfessionalFilter()\r\n  \r\n  if (selectedMajor) {\r\n    formData.mathIndex = -1\r\n    formData.englishIndex = -1\r\n    formData.politicsIndex = -1\r\n    formData.otherIndex = -1\r\n    \r\n    // 直接使用 commit 修改状态\r\n    store.commit('user/match/SET_NON_PROFESSIONAL_LIST', {\r\n      math: '',\r\n      english: '',\r\n      politics: '',\r\n      other: ''\r\n    })\r\n  }\r\n  \r\n  // 直接使用 commit 修改状态\r\n  store.commit('user/match/SET_PROFESSIONAL_LIST', selectedMajor)\r\n  \r\n  // 清空关键词，以便下次打开时显示完整列表\r\n  if (graduateStore.value) {\r\n    GraduateStore.mutations.setMajorKeyword(graduateStore.value, '')\r\n  }\r\n  \r\n  applyFilters()\r\n  showPopup.value = false\r\n  currentOption.value = ''\r\n}\r\n\r\n/**\r\n * 获取当前tab对应的选中索引\r\n */\r\nconst getChoiceIndex = (key) => {\r\n  switch (key) {\r\n    case 'math': return formData.mathIndex\r\n    case 'english': return formData.englishIndex\r\n    case 'politics': return formData.politicsIndex\r\n    case 'other': return formData.otherIndex\r\n    default: return -1\r\n  }\r\n}\r\n\r\n/**\r\n * 处理下拉框选项选择\r\n */\r\nconst handleChoiceSelect = (key, index) => {\r\n  // 检查是否点击了已选中的选项\r\n  if ((key === 'math' && formData.mathIndex === index) ||\r\n      (key === 'english' && formData.englishIndex === index) ||\r\n      (key === 'politics' && formData.politicsIndex === index) ||\r\n      (key === 'other' && formData.otherIndex === index)) {\r\n    // 如果点击的是已选中的选项，则取消选择\r\n    formData.mathIndex = -1\r\n    formData.englishIndex = -1\r\n    formData.politicsIndex = -1\r\n    formData.otherIndex = -1\r\n    return\r\n  }\r\n  \r\n  // 如果点击的是未选中的选项，则清空其他选择，选中当前选项\r\n  formData.mathIndex = -1\r\n  formData.englishIndex = -1\r\n  formData.politicsIndex = -1\r\n  formData.otherIndex = -1\r\n  \r\n  switch (key) {\r\n    case 'math': formData.mathIndex = index; break\r\n    case 'english': formData.englishIndex = index; break\r\n    case 'politics': formData.politicsIndex = index; break\r\n    case 'other': formData.otherIndex = index; break\r\n  }\r\n}\r\n\r\n/**\r\n * 确认非专业课筛选\r\n */\r\nconst confirmNonProfessionalFilter = () => {\r\n  const updateObj = {\r\n    math: formData.mathIndex >= 0 ? mathOptions.value[formData.mathIndex] : '',\r\n    english: formData.englishIndex >= 0 ? englishOptions.value[formData.englishIndex] : '',\r\n    politics: formData.politicsIndex >= 0 ? politicsOptions.value[formData.politicsIndex] : '',\r\n    other: formData.otherIndex >= 0 ? otherOptions.value[formData.otherIndex] : ''\r\n  }\r\n  \r\n  // 直接使用 commit 修改状态\r\n  store.commit('user/match/SET_NON_PROFESSIONAL_LIST', updateObj)\r\n  \r\n  if (formData.mathIndex >= 0 || formData.englishIndex >= 0 || formData.politicsIndex >= 0 || formData.otherIndex >= 0) {\r\n    formData.targetMajorIndex = -1\r\n    formData.targetMajor = ''\r\n    \r\n    // 直接使用 commit 修改状态\r\n    store.commit('user/match/SET_PROFESSIONAL_LIST', '')\r\n  }\r\n  \r\n  applyFilters()\r\n  showPopup.value = false\r\n  currentOption.value = ''\r\n}\r\n\r\n/**\r\n * 临时选择排序方式\r\n */\r\nconst handleSortSelect = (index) => {\r\n  // 如果点击了已选中的排序选项，则取消选择\r\n  if (formData.sortIndex === index) {\r\n    formData.sortIndex = -1\r\n  } else {\r\n    formData.sortIndex = index\r\n  }\r\n}\r\n\r\n/**\r\n * 确认排序方式筛选\r\n */\r\nconst confirmSortFilter = () => {\r\n  const sortValue = formData.sortIndex >= 0 ? sortOptions.value[formData.sortIndex] : ''\r\n  // 直接使用 commit 修改状态\r\n  store.commit('user/match/SET_SORT_MODE', sortValue)\r\n  \r\n  applyFilters()\r\n  showPopup.value = false\r\n  currentOption.value = ''\r\n}\r\n\r\n/**\r\n * 查看老师详情\r\n */\r\nconst viewTeacherDetail = (teacherId) => {\r\n  Navigator.toTeacher(teacherId)\r\n}\r\n\r\n/**\r\n * 处理沟通按钮点击\r\n */\r\nconst handleCommunicate = (teacherId) => {\r\n  Navigator.toChat(teacherId)\r\n}\r\n\r\n/**\r\n * 加载更多老师数据\r\n */\r\nconst loadMoreTeachers = () => {\r\n  if (isLoading.value || !hasMore.value) return\r\n  isLoading.value = true\r\n  \r\n  // 获取下一页数据\r\n  const payload = {\r\n    loadMore: true,\r\n    schoolList: store.state.user.match.schoolList,\r\n    professionalList: store.state.user.match.professionalList,\r\n    nonProfessionalList: store.state.user.match.nonProfessionalList,\r\n    sortMode: store.state.user.match.sortMode,\r\n    currentPage: currentPage.value + 1,\r\n    pageSize: store.state.user.match.pageSize\r\n  }\r\n  \r\n  // 模拟获取数据\r\n  setTimeout(() => {\r\n    // 增加页码\r\n    store.commit('user/match/SET_PAGINATION', {\r\n      currentPage: payload.currentPage,\r\n      hasMore: true // 假设还有更多数据\r\n    })\r\n    \r\n    isLoading.value = false\r\n  }, 1000)\r\n}\r\n\r\n/**\r\n * 重置专业选择\r\n */\r\nconst resetMajorSelection = () => {\r\n  formData.targetMajorIndex = -1\r\n  formData.targetMajor = ''\r\n}\r\n\r\n/**\r\n * 选择非专业课Tab\r\n */\r\nconst selectNonProTab = (key) => {\r\n  activeNonProTab.value = key\r\n}\r\n\r\n/**\r\n * 获取当前tab对应的选项列表\r\n */\r\nconst getChoiceList = (key) => {\r\n  switch (key) {\r\n    case 'math': return mathOptions.value\r\n    case 'english': return englishOptions.value\r\n    case 'politics': return politicsOptions.value\r\n    case 'other': return otherOptions.value\r\n    default: return []\r\n  }\r\n}\r\n\r\n/**\r\n * 应用所有筛选条件\r\n */\r\nconst applyFilters = () => {\r\n  isLoading.value = true\r\n  \r\n  // 构建筛选参数\r\n  const payload = {\r\n    schoolList: store.state.user.match.schoolList,\r\n    professionalList: store.state.user.match.professionalList,\r\n    nonProfessionalList: store.state.user.match.nonProfessionalList,\r\n    sortMode: store.state.user.match.sortMode,\r\n    currentPage: 1 // 重置为第一页\r\n  }\r\n  \r\n  // 重置分页\r\n  store.commit('user/match/SET_PAGINATION', {\r\n    currentPage: payload.currentPage,\r\n    hasMore: true // 假设还有更多数据\r\n  })\r\n  \r\n  // 模拟数据加载\r\n  setTimeout(() => {\r\n    isLoading.value = false\r\n  }, 1000)\r\n}\r\n\r\n// 筛选条件摘要\r\nconst filterSummary = computed(() => {\r\n  const summary = {}\r\n  \r\n  summary.school = store.state.user.match.schoolList || ''\r\n  summary.professional = store.state.user.match.professionalList || ''\r\n  \r\n  const nonProfList = store.state.user.match.nonProfessionalList\r\n  const nonProfItems = []\r\n  if (nonProfList.math) nonProfItems.push(nonProfList.math)\r\n  if (nonProfList.english) nonProfItems.push(nonProfList.english)\r\n  if (nonProfList.politics) nonProfItems.push(nonProfList.politics)\r\n  if (nonProfList.other) nonProfItems.push(nonProfList.other)\r\n  summary.nonProfessional = nonProfItems.join(', ')\r\n  \r\n  summary.sort = store.state.user.match.sortMode || ''\r\n  \r\n  return summary\r\n})\r\n\r\n/**\r\n * 重置学校筛选\r\n */\r\nconst resetSchoolFilter = () => {\r\n  schoolInput.value = ''\r\n  formData.targetSchoolIndex = -1\r\n  formData.targetSchool = ''\r\n  \r\n  majorInput.value = ''\r\n  formData.targetMajorIndex = -1\r\n  formData.targetMajor = ''\r\n  \r\n  updateFilteredSchoolList()\r\n}\r\n\r\n/**\r\n * 重置专业课筛选\r\n */\r\nconst resetProfessionalFilter = () => {\r\n  majorInput.value = ''\r\n  formData.targetMajorIndex = -1\r\n  formData.targetMajor = ''\r\n  \r\n  // 直接使用 commit 修改状态\r\n  store.commit('user/match/SET_PROFESSIONAL_LIST', '')\r\n  \r\n  if (formData.targetSchool && graduateStore.value) {\r\n    GraduateStore.mutations.setMajorKeyword(graduateStore.value, '')\r\n  }\r\n  \r\n  updateFilteredMajorList()\r\n}\r\n\r\n\r\nconst handleBack = () => {\r\n  Navigator.toIndex()\r\n}\r\n// 初始化\r\nonMounted(() => {\r\n  initGraduateData().then(() => {\r\n    updateFilteredSchoolList()\r\n    updateFilteredMajorList()\r\n    \r\n    // 如果已有选中的学校，初始化对应的专业列表\r\n    const selectedSchool = store.state.user.match.schoolList\r\n    if (selectedSchool && graduateStore.value?.schools[selectedSchool]) {\r\n      const majors = graduateStore.value.schools[selectedSchool].slice(0, 100)\r\n      targetMajorList.value = majors\r\n    }\r\n  })\r\n  \r\n  // 模拟初始数据加载\r\n  isLoading.value = true\r\n  setTimeout(() => {\r\n    // 重置分页状态\r\n    store.commit('user/match/SET_PAGINATION', {\r\n      currentPage: 1,\r\n      hasMore: true\r\n    })\r\n    isLoading.value = false\r\n  }, 1000)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.background-image {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 0;\r\n  pointer-events: none;\r\n}\r\n.background-image-img {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  object-fit: cover;\r\n  display: block;\r\n}\r\n.page {\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n.search-wrapper {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 80rpx;\r\n  margin-left: 20rpx;\r\n  margin-right: 20rpx;\r\n  border-radius: 8rpx;\r\n  padding: 10px;\r\n  background: #fff;\r\n}\r\n\r\n.input-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  height: 36px;\r\n  padding: 0 30px 0 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.clear-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 16px;\r\n  color: #999;\r\n  height: 20px;\r\n  width: 20px;\r\n  line-height: 20px;\r\n  text-align: center;\r\n  z-index: 2;\r\n}\r\n\r\n.container-select {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid #eee;\r\n  background: #fff;\r\n  width: 100%;\r\n  flex-wrap: nowrap;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.select-item {\r\n  flex: 1;\r\n  min-width: 0;\r\n  padding: 12px 0px;\r\n  position: relative;\r\n  white-space: nowrap;\r\n  display: flex;\r\n  flex-direction: row; /* 水平排列 */\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.select-item-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.label-text {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  text-align: center;\r\n  margin-bottom: 2px;\r\n  color: rgba(0,0,0,0.5);\r\n}\r\n\r\n.select-item.active .select-item-content .label-text {\r\n  color: rgba(95, 38, 247, 1);\r\n}\r\n\r\n\r\n.arrow-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n  flex-shrink: 0;\r\n  transition: transform 0.3s ease;\r\n  margin-left: 10rpx;\r\n}\r\n.arrow-icon.active {\r\n  color: rgba(95, 38, 247, 1);\r\n}\r\n.arrow-icon-rotate {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.container-match {\r\n  flex: 1;\r\n  background: #f5f5f5;\r\n  overflow-y: auto;\r\n  background-color: transparent;\r\n}\r\n\r\n.popup-content {\r\n  background-color: #fff;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  padding: 15rpx 30rpx;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n.filter-section{\r\n  min-height: 400rpx;\r\n}\r\n/* 顶部标题栏 */\r\n.popup-header {\r\n  position: relative;\r\n  height: 100rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.popup-title {\r\n  font-family: 'PingFang SC', sans-serif;\r\n  font-size: 32rpx;\r\n  line-height: 70rpx;\r\n  letter-spacing: -1.1rpx;\r\n  font-weight: 600;\r\n  color: rgba(0, 0, 0, 1);\r\n}\r\n\r\n.popup-close {\r\n  color: #007AFF;\r\n  font-size: 28rpx;\r\n  position: absolute;\r\n  right: 32rpx;\r\n  top: 28rpx;\r\n}\r\n\r\n/* 状态提示栏 */\r\n.popup-status-bar {\r\n  text-align: center;\r\n  padding: 8px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.popup-status {\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n/* 选项列表区域 */\r\n.popup-scroll {\r\n  flex: 1;\r\n  height: calc(100% - 80px);\r\n}\r\n\r\n/* 列表项样式 */\r\n.popup-item {\r\n  width: 100%;\r\n  padding: 15px 16px;\r\n  border-bottom: 1px solid #f5f5f5;\r\n  font-size: 15px;\r\n  color: #333;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.popup-item-active {\r\n  color: #007AFF;\r\n}\r\n\r\n.filter-label {\r\n  font-size: 15px;\r\n  color: #333;\r\n\r\n  display: block;\r\n}\r\n\r\n\r\n\r\n.option-buttons {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.option-button {\r\n  padding: 8px 15px;\r\n  margin-right: 15px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  color: #666;\r\n  transition: all 0.3s ease;\r\n  margin-bottom: 10rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.option-button-active {\r\n  background-color: #e6f2ff;\r\n  color: #007AFF;\r\n  border: 1px solid #007AFF;\r\n}\r\n\r\n/* 老师卡片样式 */\r\n.card-list {\r\n  flex: 1;\r\n  padding: 10px 15px;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.teacher-card {\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: #ffffff;\r\n  border-radius: 16px;\r\n\r\n  margin-bottom: 15px;\r\n  box-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n  position: relative;\r\n  min-height: 110px;\r\n}\r\n\r\n.teacher-card-outer {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 16px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: stretch;\r\n  justify-content: stretch;\r\n  background: transparent;\r\n}\r\n\r\n.teacher-card-outer-gradient {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 40rpx;\r\n  padding: 2rpx;\r\n  box-sizing: border-box;\r\n  background: linear-gradient(180deg, rgba(228, 241, 255, 1) 0%, rgba(34, 136, 249, 1) 100%);\r\n}\r\n\r\n.teacher-card-inner {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 40rpx;\r\n  background: #fff;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: row;\r\n  position: relative;\r\n}\r\n\r\n/**\r\n * 老师卡内容渐变遮罩\r\n * 参考login页面同学卡内容渐变遮罩\r\n */\r\n.teacher-card-inner::after {\r\n  content: '';\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 40rpx;\r\n  pointer-events: none;\r\n  background: linear-gradient(180deg, rgba(194, 221, 250, 0.2) 11.54%, rgba(34, 136, 249, 0.2) 111.54%);\r\n  z-index: 1;\r\n}\r\n\r\n.card-left {\r\n  align-self: flex-start;\r\n  position: relative;\r\n  z-index: 10;\r\n  margin-bottom: -20rpx;\r\n}\r\n\r\n.teacher-avatar {\r\n\r\n  width: 230rpx;\r\n  height: 230rpx;\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\n.card-middle {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  min-height: 70px;\r\n  width: calc(100% - 85px);\r\n  box-sizing: border-box;\r\n}\r\n\r\n\r\n.card-middle-top-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n  justify-content: flex-start;\r\n  gap: 8rpx;\r\n  min-height: 60rpx;\r\n}\r\n\r\n.teacher-name {\r\n  /**\r\n   * 老师名字字体样式\r\n   * @font PingFang SC, 400, 16px, 100%, -0.55px\r\n   */\r\n  font-family: 'PingFang SC', sans-serif;\r\n  font-weight: 600;\r\n  font-size: 32rpx;\r\n  line-height: 100%;\r\n  letter-spacing: -0.55px;\r\n  color: rgba(0, 0, 0, 1);\r\n  margin-bottom: 20rpx;\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n.teacher-info {\r\n  /**\r\n   * 学校信息字体样式\r\n   * @font PingFang SC, 400, 12px, 100%, -0.55px, 颜色rgba(70, 78, 248, 1)\r\n   */\r\n  font-family: 'PingFang SC', sans-serif;\r\n  font-weight: 400;\r\n  font-size: 24rpx;\r\n  line-height: 100%;\r\n  letter-spacing: -0.55px;\r\n  color: rgba(70, 78, 248, 1);\r\n  margin-bottom: 4rpx;\r\n}\r\n.teacher-major-score {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap:10rpx;\r\n  margin-top:4rpx\r\n}\r\n.teacher-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.teacher-tags-inline {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-left: 8rpx;\r\n}\r\n\r\n\r\n.price-tag-container {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: center;\r\n  right: 36rpx;\r\n  z-index: 1;\r\n  padding: 8rpx 10rpx;\r\n  border-radius: 8rpx;\r\n  text-align: right;\r\n}\r\n\r\n.price-tag {\r\n  font-family: PingFang SC;\r\n  font-weight: 400;\r\n  font-size: 26rpx;\r\n  line-height: 100%;\r\n  letter-spacing: -1.1rpx;\r\n  color: rgba(70, 78, 248, 1);\r\n\r\n}\r\n.middle-text {\r\n  font-size: 20rpx;\r\n  margin-top:6rpx;\r\n}\r\n.small-text {\r\n  font-size: 16rpx;\r\n  margin-top:10rpx;\r\n  padding-right: 2rpx;\r\n}\r\n\r\n.card-right {\r\n  position: relative;\r\n  right: 36rpx;\r\n  z-index: 2;\r\n  margin-top:140rpx;\r\n}\r\n\r\n.card-right-center {\r\n  position: absolute;\r\n  top: 55%;\r\n  transform: translateY(-50%);\r\n  z-index: 2;\r\n}\r\n\r\n.communicate-btn {\r\n  flex-direction: row;\r\n  /**\r\n   * 马上沟通按钮样式\r\n   * 渐变背景，圆角，白色文字，指定文字样式\r\n   */\r\n  background: linear-gradient(180deg, #A5A9F7 0%, rgba(70, 78, 248, 0.9) 100%);\r\n  min-height: 52rpx;\r\n  padding: 0 28rpx;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n}\r\n.communicate-icon {\r\n  width: 28rpx;\r\n  height: 28rpx;\r\n  margin-right: 20rpx;\r\n}\r\n.communicate-text {\r\n  font-family: 'PingFang SC', sans-serif;\r\n  font-weight: 400;\r\n  font-size: 24rpx;\r\n  line-height: 100%;\r\n  letter-spacing: -1.36rpx;\r\n  text-align: center;\r\n  color: rgba(255, 255, 255, 1);\r\n}\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 30px 0;\r\n  color: #999;\r\n}\r\n\r\n\r\n\r\n/* 弹出层蒙版 */\r\n.filter-mask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  z-index: 998;\r\n}\r\n\r\n/* 弹出层容器 */\r\n.filter-popup {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: #fff;\r\n  z-index: 999;\r\n  border-radius: 20rpx 20rpx 0 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height:600rpx;\r\n}\r\n.filter-popup.sort-popup {\r\n  height: 38vh;\r\n}\r\n.filter-popup.non-professional-popup {\r\n  height: 46vh;\r\n}\r\n\r\n/* 筛选弹窗内容区 */\r\n.popup-content {\r\n  background-color: #fff;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  padding: 15rpx 30rpx;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 滚动区域容器 */\r\n.scroll-container {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  position: relative;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n/* 结果列表样式 */\r\n.result-list {\r\n  height: 300rpx; /* 固定高度 */\r\n  overflow-y: auto;\r\n}\r\n\r\n/* 按钮容器 */\r\n.button-container {\r\n  position: relative;\r\n\tpadding: 10rpx 20rpx 10rpx;\r\n\r\n}\r\n\r\n/* 底部按钮样式 */\r\n.popup-button {\r\n\twidth: 100%;\r\n\theight: 76rpx;\r\n\tbackground: linear-gradient(180deg, #A5A9F7 0%, rgba(70, 78, 248, 0.9) 100%);\r\n\tcolor: #ffffff;\r\n\tborder-radius: 45rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tfont-size: 32rpx;\r\n\tborder-radius: 20rpx;\r\n\tflex-direction: row;\r\n\tmargin-top: 10rpx;\r\n\r\n}\r\n\r\n\r\n/* 表单行样式 */\r\n.form-row {\r\n  margin-bottom: 25rpx;\r\n  width: 100%;\r\n}\r\n\r\n.selected-text {\r\n  font-size: 20rpx;\r\n  color: #007AFF;\r\n  margin-top: 2px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 140rpx;\r\n  text-align: left;\r\n}\r\n\r\n/* 非专业课选项卡样式 */\r\n.nonpro-tabs {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.nonpro-tabs .tab-item {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 10px 0;\r\n  font-size: 14px;\r\n  color: #666;\r\n  position: relative;\r\n}\r\n\r\n.nonpro-tabs .tab-item.active {\r\n  color: #007AFF;\r\n  font-weight: 500;\r\n}\r\n\r\n.nonpro-tabs .tab-item.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  left: 25%;\r\n  bottom: -10px;\r\n  width: 50%;\r\n  height: 3px;\r\n  background-color: #007AFF;\r\n  border-radius: 3px;\r\n}\r\n\r\n.result-item {\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  font-size: 15px;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n.result-item.active {\r\n  color: #007AFF;\r\n  background: #f0f8ff;\r\n}\r\n\r\n\r\n\r\n/* 固定在选项卡下方的按钮容器 */\r\n.fixed-button-container {\r\n  position: absolute;\r\n  bottom: 15px;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20rpx 30rpx;\r\n  background-color: #fff;\r\n  z-index: 5;\r\n}\r\n\r\n/* 针对每个弹窗标题的绝对定位样式 */\r\n.popup-title-school {\r\n  position: absolute;\r\n  width: 32px;\r\n  height: 35px;\r\n  top: 160px;\r\n  left: 21px;\r\n}\r\n.popup-title-professional {\r\n  position: absolute;\r\n  width: 47px;\r\n  height: 35px;\r\n  top: 160px;\r\n  left: 110px;\r\n}\r\n.popup-title-nonpro {\r\n  position: absolute;\r\n  width: 63px;\r\n  height: 35px;\r\n  top: 160px;\r\n  left: 212px;\r\n}\r\n.popup-title-sort {\r\n  position: absolute;\r\n  width: 63px;\r\n  height: 35px;\r\n  top: 160px;\r\n  left: 332px;\r\n}\r\n\r\n\r\n\r\n.teacher-major {\r\n  /**\r\n   * 专业和评分字体样式\r\n   * @font PingFang SC, 400, 12px, 100%, -0.55px\r\n   */\r\n  font-family: 'PingFang SC';\r\n  font-weight: 400;\r\n  font-size: 24rpx;\r\n  line-height: 100%;\r\n  letter-spacing: -0.55px;\r\n  color: #666666;\r\n}\r\n\r\n.certify-icon {\r\n  /**\r\n   * 认证状态图标样式\r\n   * @size 16x16px\r\n   * @align 与昵称垂直居中\r\n   */\r\n  width: 94rpx;\r\n  height: 40rpx;\r\n  margin-left: 4rpx;\r\n  display: inline-block;\r\n  z-index: 10;\r\n}\r\n\r\n/* 非专业课弹窗确认按钮下移 */\r\n.filter-popup.non-professional-popup .button-container {\r\n  margin-top: auto; /* 自动推到底部 */\r\n  padding-bottom: 25rpx; /* 比默认多20rpx，可根据实际调整 */\r\n}\r\n\r\n/* 排序方式弹窗确认按钮下移 */\r\n.filter-popup.sort-popup .button-container {\r\n  margin-top: auto;\r\n  padding-bottom: 25rpx;\r\n}\r\n\r\n.save-button-container {\r\n  padding-left: 10rpx;\r\n  padding-right: 10rpx;\r\n}\r\n\r\n.save-button {\r\n  width: 100%;\r\n  height: 76rpx;\r\n  background: linear-gradient(180deg, #A5A9F7 0%, rgba(70, 78, 248, 0.9) 100%);\r\n  color: #ffffff;\r\n  border-radius: 45rpx;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 32rpx;\r\n  border-radius: 20rpx;\r\n  flex-direction: row;\r\n  margin-top: 10rpx;\r\n\r\n}\r\n\r\n\r\n.save-button-image {\r\n  width: 36rpx;\r\n  height: 36rpx;\r\n  margin-right: 30rpx;\r\n}\r\n.save-button-text {\r\n  font-size: 32rpx;\r\n  color: rgba(255, 255, 255, 1);\r\n  font-family: PingFang SC;\r\n  font-weight: 400;\r\n  line-height: 100%;\r\n  letter-spacing: -0.68px;\r\n  text-align: center;\r\n}\r\n\r\n</style>\r\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages_AI_Login_Match/match/match.vue'\nwx.createPage(MiniProgramPage)"],"names":["Header","store","useStore","searchText","ref","options","currentOption","showPopup","isLoading","activeNonProTab","nonProTabs","tabLabelMap","matchTeachers","computed","currentPage","hasMore","formData","reactive","targetSchoolList","targetMajorList","graduateStore","mathOptions","englishOptions","politicsOptions","otherOptions","sortOptions","schoolInput","majorInput","filteredSchoolList","filteredMajorList","oneToOneMatchPrice","result","teacher","oneToOneService","_a","service","priceValue","hourValue","minuteValue","totalHours","isActive","key","nonProfList","onOptionClick","syncStateToForm","schoolList","idx","s","updateFilteredSchoolList","professionalList","m","updateFilteredMajorList","opt","sortMode","onPopupClose","handleSchoolChange","school","__awaiter","resetMajorSelection","GraduateStore","mutation","payload","savedMajor","majorIndex","major","initGraduateData","schools","onSchoolInput","e","keyword","onMajorInput","forceKeyword","currentKeyword","originalMajorList","originalKeyword","ensureSelectedMajorVisible","customSortMajorList","index","selectedMajor","a","b","aHasComputer","bHasComputer","selectSchoolTemp","confirmSchoolFilter","applyFilters","selectMajorTemp","prepareProfessionalFilter","searchResults","confirmProfessionalFilter","getChoiceIndex","handleChoiceSelect","confirmNonProfessionalFilter","updateObj","handleSortSelect","confirmSortFilter","sortValue","viewTeacherDetail","teacherId","Navigator","handleCommunicate","loadMoreTeachers","selectNonProTab","getChoiceList","filterSummary","summary","nonProfItems","resetSchoolFilter","resetProfessionalFilter","handleBack","onMounted","selectedSchool","majors","MiniProgramPage"],"mappings":"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"}