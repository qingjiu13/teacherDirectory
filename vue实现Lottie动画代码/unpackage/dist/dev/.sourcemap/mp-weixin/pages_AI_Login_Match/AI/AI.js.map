{"version":3,"file":"AI.js","sources":["pages_AI_Login_Match/AI/AI.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNfQUlfTG9naW5fTWF0Y2hcQUlcQUkudnVl"],"sourcesContent":["<template>\n    <!-- 加载状态指示器 -->\n\t<view class=\"loading-container\" v-if=\"isLoading\">\n        <loading-animation\n          src=\"https://lottie.host/1f64310d-d1a9-44c9-ac77-3c29ae849559/c3yfKGAzCm.json\"\n          width=\"150rpx\" \n          height=\"150rpx\"\n          :showText=\"true\"\n          text=\"加载中...\"\n        ></loading-animation>\n      </view>\n\t<view class=\"page-container\" @click=\"onPageClick\">\n\t\t<!-- 导航栏和侧边栏 -->\n\t\t<view class=\"nav-sidebar-container\">\n\t\t\t<!-- 侧边栏遮罩层 -->\n\t\t\t<view class=\"sidebar-mask\" v-if=\"sidebarVisible\" @click.stop=\"closeSidebar\" :style=\"{opacity: sidebarVisible ? 0.5 : 0}\"></view>\n\t\t\t<Header :title=\"'AI助手'\" @back=\"handleBack\" />\n\t\t\t<!-- 历史记录侧边栏 -->\n\t\t\t\t<history-sidebar\n\t\t\t\t\t:visible=\"sidebarVisible\"\n\t\t\t\t\t:grouped-history=\"groupedHistorySummaries\"\n\t\t\t\t\t:current-chat-id=\"currentChatId\"\n\t\t\t\t\t:pagination=\"pagination\"\n\t\t\t\t\t@load-chat=\"handleLoadChat\"\n\t\t\t\t\t@delete-chat=\"handleDeleteChat\"\n\t\t\t\t\t@loadMore=\"handleLoadMore\"\n\t\t\t\t\t@refresh=\"handleRefresh\">\n\t\t\t\t</history-sidebar>\n\t\t\t<!-- 主内容区域 -->\n\t\t\t<view class=\"main-wrapper\">\n\t\t\t\t<!-- 顶部导航栏 -->\n\t\t\t\t<view class=\"nav-bar\">\n\t\t\t\t\t<view class=\"nav-left\">\n\t\t\t\t\t\t<view class=\"history-btn\" @click.stop=\"toggleSidebar\">\n\t\t\t\t\t\t\t<image src=\"../static/AIchat/chatHistory.png\" class=\"history-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-title\">\n\t\t\t\t\t\t<mode-selector\n\t\t\t\t\t\t\t:current-mode=\"currentMode\"\n\t\t\t\t\t\t\t:inNav=\"true\"\n\t\t\t\t\t\t\t@mode-change=\"switchMode\">\n\t\t\t\t\t\t</mode-selector>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-right\">\n\t\t\t\t\t\t<view class=\"new-chat-btn\" @click.stop=\"startNewChat\">\n\t\t\t\t\t\t\t<image src=\"../static/AIchat/newChat.png\" class=\"new-chat-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 主内容区域 -->\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"main-content\" @scroll=\"onScroll\">\n\t\t\t\t\t<!-- 筛选区域 -->\n\t\t\t\t\t<view class=\"filter-section\">\n\t\t\t\t\t\t<view class=\"filter-content\">\n\t\t\t\t\t\t\t<!-- 学校筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">所在学校：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"schoolIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"schoolOptions\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择学校\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入学校名称\"\n\t\t\t\t\t\t\t\t\t\t:isLoadingMore=\"schoolSearchStatus.isLoading\"\n\t\t\t\t\t\t\t\t\t\t:hasMoreData=\"schoolSearchStatus.hasMore\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleSchoolSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleSchoolSearch\"\n\t\t\t\t\t\t\t\t\t\t@load-more=\"handleSchoolLoadMore\"\n\t\t\t\t\t\t\t\t\t\tref=\"schoolDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 专业筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">专业：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"majorIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"majorOptions\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择专业\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入专业名称\"\n\t\t\t\t\t\t\t\t\t\t:isLoadingMore=\"majorSearchStatus.isLoading\"\n\t\t\t\t\t\t\t\t\t\t:hasMoreData=\"majorSearchStatus.hasMore\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleMajorSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleMajorSearch\"\n\t\t\t\t\t\t\t\t\t\t@load-more=\"handleMajorLoadMore\"\n\t\t\t\t\t\t\t\t\t\tref=\"majorDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 消息区域 -->\n\t\t\t\t\t<message-list\n\t\t\t\t\t\t:messages=\"currentMessages\"\n\t\t\t\t\t\t:auto-scroll-id=\"autoScrollId\"\n\t\t\t\t\t\t@retry-message=\"retryMessage\"\n\t\t\t\t\t\t@update-auto-scroll-id=\"autoScrollId = $event\"\n\t\t\t\t\t\tref=\"messageList\">\n\t\t\t\t\t</message-list>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 输入区域 -->\n\t\t\t\t\t<input-section\n\t\t\t\t\t\t:is-processing=\"isProcessing\"\n\t\t\t\t\t\t@processing-start=\"handleProcessingStart\"\n\t\t\t\t\t\t@processing-end=\"handleProcessingEnd\"\n\t\t\t\t\t\t@message-sent=\"handleMessageSent\"\n\t\t\t\t\t\t@stream-message=\"handleStreamMessage\"\n\t\t\t\t\t\t@stream-complete=\"handleStreamComplete\"\n\t\t\t\t\t\t@stream-error=\"handleStreamError\">\n\t\t\t\t\t</input-section>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport HistorySidebar from './ai-chat/HistorySidebar'\n\timport MessageList from './ai-chat/MessageList'\n\timport ModeSelector from './ai-chat/ModeSelector'\n\timport InputSection from './ai-chat/InputSection'\n\timport ChoiceSelected from '/pages_AI_Login_Match/components/combobox/combobox'\n\timport store from '@/store'\n\timport { mapState, mapActions } from 'vuex';\n\timport Header from '@/components/navigationTitleBar/header.vue';\n\timport { Navigator } from '@/router/Router.js'\n\timport LoadingAnimation from '@/components/loading/LoadingAnimation.vue';\n\n\t// 消息类型常量\n\tconst MESSAGE_TYPE = {\n\t\tUSER: 'user',\n\t\tAI: 'AI',\n\t\tSYSTEM: 'system'\n\t}\n\t\n\t// 消息状态常量\n\tconst MESSAGE_STATUS = {\n\t\tSENDING: 'sending',\n\t\tSENT: 'sent',\n\t\tERROR: 'error'\n\t}\n\t\n\t// 对话模式常量\n\tconst CHAT_MODE = {\n\t\tGENERAL: 'general',\n\t\tSCHOOL: 'school',\n\t\tCAREER: 'career'\n\t}\n\t\n\texport default {\n\t\tonPageScroll() {\n\t\t\t// 通知所有组件页面已滚动\n\t\t\tuni.$emit('page-scroll');\n  \t\t},\n\t\tcomponents: {\n\t\t\tHistorySidebar,\n\t\t\tMessageList,\n\t\t\tModeSelector,\n\t\t\tInputSection,\n\t\t\tChoiceSelected,\n\t\t\tHeader,\n\t\t\tLoadingAnimation\n\t\t},\n\t\tcomputed: {\n\t\t\t// 从Vuex获取状态\n\t\t\t...mapState('user/aiChat', {\n\t\t\t\tstoreHistorySummaries: state => state.aiChat.conversations.map(conversation => ({\n\t\t\t\t\tid: conversation.id,\n\t\t\t\t\tabstract: conversation.abstract,\n\t\t\t\t\tchatMode: conversation.chatMode,\n\t\t\t\t\tcreatedAt: conversation.createdAt,\n\t\t\t\t\tupdatedAt: conversation.updatedAt\n\t\t\t\t})),\n\t\t\t\tstoreHistoryChats: state => state.aiChat.conversations,\n\t\t\t\tstoreActiveConversation: state => state.aiChat.activeConversation,\n\t\t\t\tstoreChatMode: state => state.aiChat.chatMode,\n\t\t\t\tstorePagination: state => state.aiChat.pagination\n\t\t\t}),\n\t\t\t\n\t\t\t// 获取当前对话的消息列表\n\t\t\tcurrentMessages() {\n\t\t\t\treturn this.$store.getters['user/aiChat/currentMessages'] || [];\n\t\t\t},\n\t\t\t\n\t\t\t// 当前选择的学校和专业 - 使用schoolMajorRequest模块\n\t\t\tcurrentSchool() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/selectedUndergraduateSchool'].name || '';\n\t\t\t},\n\t\t\tcurrentMajor() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/selectedUndergraduateMajor'].name || '';\n\t\t\t},\n\t\t\tcurrentSchoolId() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/selectedUndergraduateSchool'].id || null;\n\t\t\t},\n\t\t\tcurrentMajorId() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/selectedUndergraduateMajor'].id || null;\n\t\t\t},\n\t\t\t\n\t\t\t// 学校和专业选项列表 - 使用schoolMajorRequest模块\n\t\t\tschoolOptions() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/undergraduateSchoolOptions'];\n\t\t\t},\n\t\t\tmajorOptions() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/undergraduateMajorOptions'];\n\t\t\t},\n\t\t\t\n\t\t\t// 学校和专业的加载状态\n\t\t\tschoolSearchStatus() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/undergraduateSchoolSearchStatus'];\n\t\t\t},\n\t\t\tmajorSearchStatus() {\n\t\t\t\treturn this.$store.getters['user/schoolMajorRequest/undergraduateMajorSearchStatus'];\n\t\t\t},\n\t\t\t\n\t\t\t// 当前模式名称\n\t\t\tcurrentModeName() {\n\t\t\t\tconst modeNames = {\n\t\t\t\t\t[CHAT_MODE.GENERAL]: '通用',\n\t\t\t\t\t[CHAT_MODE.SCHOOL]: '择校',\n\t\t\t\t\t[CHAT_MODE.CAREER]: '就业'\n\t\t\t\t};\n\t\t\t\treturn modeNames[this.currentMode] || '通用';\n\t\t\t},\n\t\t\t\n\t\t\t// 兼容计算属性\n\t\t\thistorySummaries() {\n\t\t\t\treturn this.storeHistorySummaries;\n\t\t\t},\n\t\t\thistoryChats() {\n\t\t\t\treturn this.storeHistoryChats || [];\n\t\t\t},\n\t\t\tactiveConversation() {\n\t\t\t\treturn this.storeActiveConversation;\n\t\t\t},\n\t\t\tchatMode() {\n\t\t\t\treturn this.storeChatMode;\n\t\t\t},\n\t\t\t\n\t\t\t// 分页相关计算属性\n\t\t\tpagination() {\n\t\t\t\treturn this.storePagination;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 按时间分组历史记录\n\t\t\t * @returns {Object} { today: [], week: [], month: [] }\n\t\t\t */\n\t\t\tgroupedHistorySummaries() {\n\t\t\t\tconst now = new Date();\n\t\t\t\tconst today = [];\n\t\t\t\tconst week = [];\n\t\t\t\tconst month = [];\n\t\t\t\t\n\t\t\t\t(this.historySummaries || []).forEach(item => {\n\t\t\t\t\tconst timeStr = item.updatedAt || item.createdAt;\n\t\t\t\t\tif (!timeStr) return;\n\t\t\t\t\tconst time = new Date(timeStr);\n\n\t\t\t\t\t// 计算天数差\n\t\t\t\t\tconst diffTime = now.getTime() - time.getTime();\n\t\t\t\t\tconst diffDays = Math.floor(diffTime / (24 * 60 * 60 * 1000));\n\n\t\t\t\t\t// 判断分组\n\t\t\t\t\tif (\n\t\t\t\t\t\ttime.getFullYear() === now.getFullYear() &&\n\t\t\t\t\t\ttime.getMonth() === now.getMonth() &&\n\t\t\t\t\t\ttime.getDate() === now.getDate()\n\t\t\t\t\t) {\n\t\t\t\t\t\ttoday.push(item);\n\t\t\t\t\t} else if (diffDays < 7) {\n\t\t\t\t\t\tweek.push(item);\n\t\t\t\t\t} else if (diffDays < 30) {\n\t\t\t\t\t\tmonth.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn { today, week, month };\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 处理状态\n\t\t\t\tisProcessing: false,\n\t\t\t\tisLoading: false,\n\t\t\t\tautoScrollId: '',\n\t\t\t\t\n\t\t\t\t// 对话模式\n\t\t\t\tcurrentMode: CHAT_MODE.GENERAL,\n\t\t\t\t\n\t\t\t\t// 学校和专业选择索引\n\t\t\t\tschoolIndex: -1,\n\t\t\t\tmajorIndex: -1,\n\t\t\t\t\n\t\t\t\t// 搜索防抖定时器\n\t\t\t\tsearchTimers: {\n\t\t\t\t\tschool: null,\n\t\t\t\t\tmajor: null\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t// 滚动相关\n\t\t\t\tisAutoScrollEnabled: true,\n\t\t\t\t\n\t\t\t\t// 当前会话控制器\n\t\t\t\tcurrentController: null,\n\t\t\t\t\n\t\t\t\t// 上下文信息\n\t\t\t\tcontextInfo: {},\n\t\t\t\t\n\t\t\t\t// 导航栏和侧边栏\n\t\t\t\tsidebarVisible: false,\n\t\t\t\tcurrentChatId: null\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t// 监听activeConversation的变化\n\t\t\tstoreActiveConversation: {\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tif (newVal && typeof newVal === 'object' && newVal.chatId) {\n\t\t\t\t\t\tthis.currentChatId = newVal.chatId;\n\t\t\t\t\t\tif (newVal.chatMode) {\n\t\t\t\t\t\t\tthis.currentMode = newVal.chatMode;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (newVal) {\n\t\t\t\t\t\tthis.currentChatId = newVal;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听学校选项变化，更新索引\n\t\t\tschoolOptions: {\n\t\t\t\thandler(newOptions) {\n\t\t\t\t\tthis.updateSchoolIndex(newOptions);\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听专业选项变化，更新索引\n\t\t\tmajorOptions: {\n\t\t\t\thandler(newOptions) {\n\t\t\t\t\tthis.updateMajorIndex(newOptions);\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听当前选择的学校变化\n\t\t\tcurrentSchool: {\n\t\t\t\thandler() {\n\t\t\t\t\tthis.updateSchoolIndex(this.schoolOptions);\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听当前选择的专业变化\n\t\t\tcurrentMajor: {\n\t\t\t\thandler() {\n\t\t\t\t\tthis.updateMajorIndex(this.majorOptions);\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t/**\n\t\t\t * @description 页面加载时的处理逻辑\n\t\t\t */\n\t\t\t// 初始化选择索引\n\t\t\tthis.updateSelectionIndexes();\n\t\t\t\n\t\t\t// 加载第一页对话历史\n\t\t\tthis.loadConversationHistoryData();\n\t\t},\n\t\tonShow() {\n\t\t\t// 页面显示时更新选择索引\n\t\t\tthis.updateSelectionIndexes();\n\t\t},\n\t\tonUnload() {\n\t\t\t// 页面卸载时中断请求\n\t\t\tthis.abortCurrentRequest();\n\t\t\t\n\t\t\t// 清理防抖定时器\n\t\t\tObject.values(this.searchTimers).forEach(timer => {\n\t\t\t\tif (timer) clearTimeout(timer);\n\t\t\t});\n\t\t},\n\t\tmethods: {\n\t\t\t// 映射 Vuex actions\n\t\t\t...mapActions({\n\t\t\t\t// AI Chat actions\n\t\t\t\tsetCurrentChat: 'user/aiChat/setCurrentChat',\n\t\t\t\tsendQuestion: 'user/aiChat/sendQuestion',\n\t\t\t\tloadChat: 'user/aiChat/loadChat',\n\t\t\t\tdeleteChat: 'user/aiChat/deleteChat',\n\t\t\t\tloadConversationHistory: 'user/aiChat/loadConversationHistory',\n\t\t\t\t// School Major Request actions\n\t\t\t\tsearchUndergraduateSchools: 'user/schoolMajorRequest/searchUndergraduateSchools',\n\t\t\t\tsearchUndergraduateMajors: 'user/schoolMajorRequest/searchUndergraduateMajors',\n\t\t\t\tselectUndergraduateSchool: 'user/schoolMajorRequest/selectUndergraduateSchool',\n\t\t\t\tselectUndergraduateMajor: 'user/schoolMajorRequest/selectUndergraduateMajor'\n\t\t\t}),\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理页面点击事件，关闭下拉框\n\t\t\t */\n\t\t\tonPageClick() {\n\t\t\t\tthis.closeAllDropdowns();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 关闭所有下拉框\n\t\t\t */\n\t\t\tcloseAllDropdowns() {\n\t\t\t\tconst dropdowns = ['schoolDropdown', 'majorDropdown'];\n\t\t\t\tdropdowns.forEach(dropdown => {\n\t\t\t\t\tif (this.$refs && this.$refs[dropdown]) {\n\t\t\t\t\t\tthis.$refs[dropdown].closeDropdown && this.$refs[dropdown].closeDropdown();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 根据当前选择更新学校和专业索引\n\t\t\t */\n\t\t\tupdateSelectionIndexes() {\n\t\t\t\t// 更新学校索引\n\t\t\t\tif (this.currentSchool && this.schoolOptions.length > 0) {\n\t\t\t\t\tconst schoolIndex = this.schoolOptions.findIndex(item => \n\t\t\t\t\t\t(item.name || item.schoolName) === this.currentSchool\n\t\t\t\t\t);\n\t\t\t\t\tthis.schoolIndex = schoolIndex !== -1 ? schoolIndex : -1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.schoolIndex = -1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 更新专业索引\n\t\t\t\tif (this.currentMajor && this.majorOptions.length > 0) {\n\t\t\t\t\tconst majorIndex = this.majorOptions.findIndex(item => \n\t\t\t\t\t\t(item.name || item.professionalName) === this.currentMajor\n\t\t\t\t\t);\n\t\t\t\t\tthis.majorIndex = majorIndex !== -1 ? majorIndex : -1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.majorIndex = -1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 更新学校索引\n\t\t\t * @param {Array} schoolOptions - 学校选项列表\n\t\t\t */\n\t\t\tupdateSchoolIndex(schoolOptions) {\n\t\t\t\tif (this.currentSchool && schoolOptions.length > 0) {\n\t\t\t\t\tconst schoolIndex = schoolOptions.findIndex(item => \n\t\t\t\t\t\t(item.name || item.schoolName) === this.currentSchool\n\t\t\t\t\t);\n\t\t\t\t\tthis.schoolIndex = schoolIndex !== -1 ? schoolIndex : -1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.schoolIndex = -1;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 更新专业索引\n\t\t\t * @param {Array} majorOptions - 专业选项列表\n\t\t\t */\n\t\t\tupdateMajorIndex(majorOptions) {\n\t\t\t\tif (this.currentMajor && majorOptions.length > 0) {\n\t\t\t\t\tconst majorIndex = majorOptions.findIndex(item => \n\t\t\t\t\t\t(item.name || item.professionalName) === this.currentMajor\n\t\t\t\t\t);\n\t\t\t\t\tthis.majorIndex = majorIndex !== -1 ? majorIndex : -1;\n\t\t\t\t} else {\n\t\t\t\t\tthis.majorIndex = -1;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {Object} school - 选择的学校对象\n\t\t\t */\n\t\t\thandleSchoolSelect(index, school) {\n\t\t\t\tthis.schoolIndex = index;\n\t\t\t\t\n\t\t\t\t// 直接使用传入的学校对象\n\t\t\t\tif (school && (school.id || school.schoolId)) {\n\t\t\t\t\tthis.selectUndergraduateSchool({\n\t\t\t\t\t\tid: school.id || school.schoolId,\n\t\t\t\t\t\tname: school.name || school.schoolName\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {Object} major - 选择的专业对象\n\t\t\t */\n\t\t\thandleMajorSelect(index, major) {\n\t\t\t\tthis.majorIndex = index;\n\t\t\t\t\n\t\t\t\t// 直接使用传入的专业对象\n\t\t\t\tif (major && (major.id || major.professionalId)) {\n\t\t\t\t\tthis.selectUndergraduateMajor({\n\t\t\t\t\t\tid: major.id || major.professionalId,\n\t\t\t\t\t\tname: major.name || major.professionalName\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校搜索输入（带防抖）\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleSchoolSearch(keyword) {\n\t\t\t\t// 清除之前的定时器\n\t\t\t\tif (this.searchTimers.school) {\n\t\t\t\t\tclearTimeout(this.searchTimers.school);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 设置防抖延迟500ms\n\t\t\t\tthis.searchTimers.school = setTimeout(() => {\n\t\t\t\t\tthis.performSchoolSearch(keyword);\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 执行学校搜索\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\tasync performSchoolSearch(keyword) {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.searchUndergraduateSchools({ keyword });\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:553','学校搜索失败:', error);\n\t\t\t\t\tthis.showToast('学校搜索失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业搜索输入（带防抖）\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleMajorSearch(keyword) {\n\t\t\t\t// 清除之前的定时器\n\t\t\t\tif (this.searchTimers.major) {\n\t\t\t\t\tclearTimeout(this.searchTimers.major);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 设置防抖延迟500ms\n\t\t\t\tthis.searchTimers.major = setTimeout(() => {\n\t\t\t\t\tthis.performMajorSearch(keyword);\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 执行专业搜索\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\tasync performMajorSearch(keyword) {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.searchUndergraduateMajors({ keyword });\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:582','专业搜索失败:', error);\n\t\t\t\t\tthis.showToast('专业搜索失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 切换对话模式\n\t\t\t * @param {String} mode - 对话模式\n\t\t\t */\n\t\t\tswitchMode(mode) {\n\t\t\t\tif (this.currentMode === mode) return;\n\t\t\t\t\n\t\t\t\tthis.currentMode = mode;\n\t\t\t\tthis.startNewChat();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 更新对话上下文信息\n\t\t\t */\n\t\t\tupdateContextInfo() {\n\t\t\t\tthis.contextInfo = {\n\t\t\t\t\tmode: this.currentMode,\n\t\t\t\t\tuserSchoolId: this.currentSchoolId,\n\t\t\t\t\tuserMajorId: this.currentMajorId\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 开始新对话\n\t\t\t */\n\t\t\tstartNewChat() {\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:613','=== 开始新对话 ===');\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:614','当前模式:', this.currentMode);\n\t\t\t\t\n\t\t\t\tthis.currentChatId = null;\n\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\n\t\t\t\t// 清空当前活跃对话ID，准备新对话\n\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_CURRENT_CONVERSATION', null);\n\t\t\t\t\n\t\t\t\t// 创建新对话（只设置状态，不创建任何临时内容）\n\t\t\t\tthis.$store.commit('user/aiChat/CREATE_NEW_CONVERSATION', {\n\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:627','新对话已准备就绪，等待用户发送消息');\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:628','===============');\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理开始处理事件\n\t\t\t */\n\t\t\thandleProcessingStart() {\n\t\t\t\tthis.isProcessing = true;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理结束处理事件\n\t\t\t */\n\t\t\thandleProcessingEnd() {\n\t\t\t\tthis.isProcessing = false;\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理消息发送完成事件\n\t\t\t * @param {Object} result - 发送结果\n\t\t\t */\n\t\t\thandleMessageSent(result) {\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:651','消息发送完成:', result);\n\t\t\t\t// 更新当前对话ID\n\t\t\t\tif (result.conversationId) {\n\t\t\t\t\tthis.currentChatId = result.conversationId;\n\t\t\t\t\t// 更新Vuex中的activeConversation状态\n\t\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_CURRENT_CONVERSATION', result.conversationId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理流式消息片段事件\n\t\t\t * @param {Object} messageInfo - 消息信息\n\t\t\t */\n\t\t\thandleStreamMessage(messageInfo) {\n\t\t\t\t// 流式消息已经通过Vuex更新，这里可以添加额外的UI更新逻辑\n\t\t\t\t// 如果收到conversationId，立即更新状态\n\t\t\t\tif (messageInfo.conversationId && !this.currentChatId) {\n\t\t\t\t\tthis.currentChatId = messageInfo.conversationId;\n\t\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_CURRENT_CONVERSATION', messageInfo.conversationId);\n\t\t\t\t}\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理流式传输完成事件\n\t\t\t * @param {Object} finalMessage - 最终消息\n\t\t\t */\n\t\t\thandleStreamComplete(finalMessage) {\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:679','流式传输完成:', finalMessage);\n\t\t\t\t// 更新当前对话ID（如果有新的conversationId）\n\t\t\t\tif (finalMessage.conversationId && finalMessage.conversationId !== this.currentChatId) {\n\t\t\t\t\tthis.currentChatId = finalMessage.conversationId;\n\t\t\t\t\t// 更新Vuex中的activeConversation状态\n\t\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_CURRENT_CONVERSATION', finalMessage.conversationId);\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:685','✅ 已更新当前对话ID为:', finalMessage.conversationId);\n\t\t\t\t}\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理流式传输错误事件\n\t\t\t * @param {Object} error - 错误信息\n\t\t\t */\n\t\t\thandleStreamError(error) {\n\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:695','流式传输错误:', error);\n\t\t\t\tthis.showToast(error.message || '发送失败', 'none');\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 重试发送失败的消息\n\t\t\t * @param {Number} index - 消息索引\n\t\t\t */\n\t\t\tretryMessage(index) {\n\t\t\t\tconst messages = this.currentMessages;\n\t\t\t\tif (index < 1 || !messages[index] || messages[index].role !== MESSAGE_TYPE.AI) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst userMessage = messages[index - 1];\n\t\t\t\tif (!userMessage || userMessage.role !== MESSAGE_TYPE.USER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置AI消息状态\n\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_MESSAGE_CONTENT', {\n\t\t\t\t\tmessageId: messages[index].id,\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tstreaming: true,\n\t\t\t\t\tstatus: 'sending'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 使用sendQuestion action重试，但跳过添加用户消息\n\t\t\t\tthis.isProcessing = true;\n\t\t\t\tthis.$store.dispatch('user/aiChat/sendQuestion', {\n\t\t\t\t\tcontent: userMessage.content,\n\t\t\t\t\tskipUserMessage: true, // 跳过添加用户消息\n\t\t\t\t\taiMessageId: messages[index].id, // 使用现有的AI消息ID\n\t\t\t\t\tonMessage: (messageInfo) => {\n\t\t\t\t\t\tthis.handleStreamMessage(messageInfo);\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: (finalMessage) => {\n\t\t\t\t\t\tthis.handleStreamComplete(finalMessage);\n\t\t\t\t\t},\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tthis.handleStreamError(error);\n\t\t\t\t\t}\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tthis.isProcessing = false;\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 中断当前请求\n\t\t\t */\n\t\t\tabortCurrentRequest() {\n\t\t\t\tif (this.currentController && this.currentController.abort) {\n\t\t\t\t\tthis.currentController.abort();\n\t\t\t\t\tthis.currentController = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 滚动到底部\n\t\t\t */\n\t\t\tscrollToBottom() {\n\t\t\t\tif (!this.isAutoScrollEnabled) return;\n\t\t\t\t\n\t\t\t\tconst messages = this.currentMessages;\n\t\t\t\tif (messages.length > 0) {\n\t\t\t\t\tthis.autoScrollId = 'msg-' + (messages.length - 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理滚动事件\n\t\t\t */\n\t\t\tonScroll(e) {\n\t\t\t\t// 滚动事件处理\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示提示\n\t\t\t * @param {String} message - 提示信息\n\t\t\t * @param {String} [icon='none'] - 提示图标\n\t\t\t * @param {Number} [duration=2000] - 提示持续时间\n\t\t\t */\n\t\t\tshowToast(message, icon = 'none', duration = 2000) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: message,\n\t\t\t\t\ticon: icon,\n\t\t\t\t\tduration: duration\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示/隐藏加载状态\n\t\t\t * @param {Boolean} loading - 是否显示加载状态\n\t\t\t */\n\t\t\ttoggleLoading(loading = true) {\n\t\t\t\tthis.isLoading = loading;\n\t\t\t},\n\t\t\t\n\t\t\t// 侧边栏相关方法\n\t\t\ttoggleSidebar() {\n\t\t\t\tthis.sidebarVisible = !this.sidebarVisible;\n\t\t\t},\n\t\t\t\n\t\t\tcloseSidebar() {\n\t\t\t\tthis.sidebarVisible = false;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 加载对话历史数据\n\t\t\t */\n\t\t\tasync loadConversationHistoryData() {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await this.loadConversationHistory();\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:809','对话历史加载成功');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:811','对话历史加载失败:', response.message);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:814','加载对话历史异常:', error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理侧边栏加载聊天事件\n\t\t\t * @param {Object} data - 加载结果数据\n\t\t\t */\n\t\t\tasync handleLoadChat(data) {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthis.showToast(data.message || '加载聊天失败', 'none');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:829','=== 加载旧对话 ===');\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:830','加载的chatId:', data.chatId);\n\t\t\t\t\t\n\t\t\t\t\tthis.toggleLoading(true);\n\t\t\t\t\tthis.currentChatId = data.chatId;\n\t\t\t\t\t\n\t\t\t\t\t// 设置当前活跃对话ID\n\t\t\t\t\tthis.$store.commit('user/aiChat/UPDATE_CURRENT_CONVERSATION', data.chatId);\n\t\t\t\t\t\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:838','对话ID已设置为:', data.chatId);\n\t\t\t\t\t\n\t\t\t\t\t// 如果有聊天模式，更新当前模式\n\t\t\t\t\tif (data.data && data.data.chatMode) {\n\t\t\t\t\t\tthis.currentMode = data.data.chatMode;\n\t\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 直接使用从后端加载的消息数据，不需要重新构建\n\t\t\t\t\t// 因为loadChat action已经处理了消息格式转换\n\t\t\t\t\t\n\t\t\t\t\tthis.closeSidebar();\n\t\t\t\t\t\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:855','旧对话加载完成');\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:856','当前活跃对话ID:', this.$store.state.user.aiChat.activeConversation);\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:857','当前消息数量:', this.currentMessages.length);\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/AI.vue:858','===============');\n\t\t\t\t\t\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:861','处理加载聊天失败:', error);\n\t\t\t\t\tthis.showToast('加载聊天失败', 'none');\n\t\t\t\t} finally {\n\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理侧边栏删除聊天事件\n\t\t\t * @param {Object} data - 删除结果数据\n\t\t\t */\n\t\t\thandleDeleteChat(data) {\n\t\t\t\tif (data.success) {\n\t\t\t\t\t// 如果删除的是当前聊天，开始新聊天\n\t\t\t\t\tif (this.currentChatId === data.chatId) {\n\t\t\t\t\t\tthis.startNewChat();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.showToast(data.message || '删除失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理侧边栏加载更多事件\n\t\t\t * @param {Object} data - 加载更多结果数据\n\t\t\t */\n\t\t\thandleLoadMore(data) {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthis.showToast(data.message || '加载更多失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理侧边栏刷新事件\n\t\t\t * @param {Object} data - 刷新结果数据\n\t\t\t */\n\t\t\thandleRefresh(data) {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthis.showToast(data.message || '刷新失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理返回事件\n\t\t\t */\n\t\t\thandleBack() {\n\t\t\t\tNavigator.toIndex();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校加载更多事件\n\t\t\t */\n\t\t\tasync handleSchoolLoadMore() {\n\t\t\t\ttry {\n\t\t\t\t\tconst currentKeyword = this.$store.state.user.schoolMajorRequest.undergraduateSchoolSearch.searchKeyword || '';\n\t\t\t\t\tawait this.searchUndergraduateSchools({ \n\t\t\t\t\t\tkeyword: currentKeyword, \n\t\t\t\t\t\tloadMore: true \n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:921','加载更多学校失败:', error);\n\t\t\t\t\tthis.showToast('加载更多学校失败', 'none');\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业加载更多事件\n\t\t\t */\n\t\t\tasync handleMajorLoadMore() {\n\t\t\t\ttry {\n\t\t\t\t\tconst currentKeyword = this.$store.state.user.schoolMajorRequest.undergraduateMajorSearch.searchKeyword || '';\n\t\t\t\t\tawait this.searchUndergraduateMajors({ \n\t\t\t\t\t\tkeyword: currentKeyword, \n\t\t\t\t\t\tloadMore: true \n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/AI.vue:937','加载更多专业失败:', error);\n\t\t\t\t\tthis.showToast('加载更多专业失败', 'none');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.page-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0; /* 移除页面容器的内边距 */\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #f5f5f5;\n\t\toverflow: hidden; /* 防止内容溢出 */\n\t}\n\t\n\t/* 加载容器 */\n\t.loading-container {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 2000; /* 确保在所有内容之上 */\n\t}\n\t\n\t/* 加载遮罩 */\n\t.loading-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 1500;\n\t}\n\t\n\t.loading-content {\n\t\tbackground-color: #ffffff;\n\t\tpadding: 30rpx 60rpx;\n\t\tborder-radius: 20rpx;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.15);\n\t}\n\t\n\t.loading-content text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t/* 侧边栏容器样式 */\n\t.nav-sidebar-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\t\n\t.sidebar-mask {\n\t\tposition: fixed;\n\t\ttop: 206rpx; /* 修改这里，让遮罩层从header下面开始 */\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tz-index: 1500;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\n\t.main-wrapper {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttransition: transform 0.3s ease, opacity 0.3s ease;\n\t\tbackground-color: #f5f5f5;\n\t}\n\t\n\t.main-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0; /* 去除左右内边距 */\n\t\theight: 100%;\n\t\toverflow-y: auto; /* 允许内容垂直滚动 */\n\t}\n\t\n\t/* 筛选区域样式 */\n\t.filter-section {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 15rpx;\n\t\tmargin: 20rpx 0; /* 只保留上下间距，左右为0 */\n\t\tpadding: 20rpx;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t}\n\t\n\t.choice-wrapper {\n\t\tflex: 1;\n\t\tbox-sizing: border-box;\n\t\twidth: calc(100% - 150rpx); /* 考虑标签宽度和间距 */\n\t\tpadding-right: 10rpx; /* 防止右侧超出边界 */\n\t}\n\t\n\t.filter-title text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.filter-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.filter-item {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\twidth: 100%;\n\t}\n\t\n\t.full-width {\n\t\twidth: 100%;\n\t}\n\t\n\t.filter-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\twhite-space: nowrap;\n\t\tmargin-right: 10rpx;\n\t\twidth: 140rpx; /* 改为固定宽度，不用min-width */\n\t\tpadding-left: 10rpx;\n\t\ttext-align: left;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.filter-select {\n\t\twidth: 100%;\n\t\tborder: 1px solid #e0e0e0;\n\t\tborder-radius: 8rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t/* 导航栏样式 */\n\t.nav-bar {\n\t\theight: 90rpx;\n\t\tbackground-color: #ffffff;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tborder-bottom: none; /* 移除底部边框 */\n\t\tposition: relative;\n\t\tz-index: 11; /* 提高z-index，确保显示在筛选区域上方 */\n\t}\n\t\n\t.nav-left {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.history-btn {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.history-btn .iconfont {\n\t\tfont-size: 48rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t/* 新增图片图标样式 */\n\t.history-icon {\n\t\twidth: 22px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n\t\n\t.nav-title {\n\t\twidth: 60%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\toverflow: hidden;\n\t}\n\t\n\t.nav-title text {\n\t\tfont-size: 32rpx; /* 增大字体 */\n\t\tcolor: #333;\n\t\tfont-weight: 700; /* 加粗 */\n\t}\n\t\n\t.nav-right {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\talign-items: center;\n\t}\n\t\n\t.new-chat-btn {\n\t\tpadding: 14rpx 28rpx;\n\n\n\n\t\ttransition: all 0.3s;\n\t}\n\t\n\n\t\n\t/* 新增新对话图片图标样式 */\n\t.new-chat-icon {\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n\t\n\n</style>\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages_AI_Login_Match/AI/AI.vue'\nwx.createPage(MiniProgramPage)"],"names":["HistorySidebar","MessageList","ModeSelector","InputSection","ChoiceSelected","Header","LoadingAnimation","MESSAGE_TYPE","CHAT_MODE","_sfc_main","defineComponent","uni","mapState","state","conversation","now","today","week","month","item","timeStr","time","diffTime","diffDays","newVal","newOptions","timer","mapActions","dropdown","schoolIndex","majorIndex","schoolOptions","majorOptions","index","school","major","keyword","error","mode","result","messageInfo","finalMessage","messages","userMessage","message","icon","duration","loading","response","data","Navigator","currentKeyword","MiniProgramPage"],"mappings":"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"}