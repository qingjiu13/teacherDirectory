{"version":3,"file":"InputSection.js","sources":["pages_AI_Login_Match/AI/ai-chat/InputSection.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov56CU5biI5b2V5LiO5YW25LuW5Lq65YWx5Lqr5paH5Lu2L3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL3BhZ2VzX0FJX0xvZ2luX01hdGNoL0FJL2FpLWNoYXQvSW5wdXRTZWN0aW9uLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"input-section\">\r\n\t\t<input class=\"message-input\" \r\n\t\t\tv-model=\"inputValue\" \r\n\t\t\tplaceholder=\"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...\" \r\n\t\t\t:disabled=\"isProcessing\"\r\n\t\t\t@confirm=\"sendMessage\" />\r\n\t\t<button class=\"send-button\" @click=\"sendMessage\" :disabled=\"!inputValue.trim() || isProcessing\">\r\n\t\t\t<text class=\"send-button-text\">{{isProcessing ? 'å‘é€ä¸­...' : 'å‘é€'}}</text>\r\n\t\t</button>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\t/**\r\n\t * @description è¾“å…¥åŒºåŸŸç»„ä»¶ï¼Œæ”¯æŒæµå¼ä¼ è¾“\r\n\t * @property {Boolean} isProcessing - æ˜¯å¦æ­£åœ¨å¤„ç†æ¶ˆæ¯\r\n\t * @property {String} chatMode - èŠå¤©æ¨¡å¼ï¼Œç”¨äºè®¾ç½®topic\r\n\t * @event {Function} processing-start - å¼€å§‹å¤„ç†æ¶ˆæ¯\r\n\t * @event {Function} processing-end - ç»“æŸå¤„ç†æ¶ˆæ¯\r\n\t * @event {Function} message-sent - æ¶ˆæ¯å‘é€å®Œæˆäº‹ä»¶\r\n\t * @event {Function} stream-message - æµå¼æ¶ˆæ¯ç‰‡æ®µäº‹ä»¶\r\n\t * @event {Function} stream-complete - æµå¼ä¼ è¾“å®Œæˆäº‹ä»¶\r\n\t * @event {Function} stream-error - æµå¼ä¼ è¾“é”™è¯¯äº‹ä»¶\r\n\t */\r\n\texport default {\r\n\t\tname: \"InputSection\",\r\n\t\tprops: {\r\n\t\t\tisProcessing: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputValue: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description å‘é€æ¶ˆæ¯å¹¶å¤„ç†æµå¼å›å¤\r\n\t\t\t */\r\n\t\t\tasync sendMessage() {\r\n\t\t\t\tif (!this.inputValue.trim()) return;\r\n\t\t\t\t\r\n\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶å¼€å§‹å¤„ç†\r\n\t\t\t\tthis.$emit('processing-start');\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst result = await this.$store.dispatch('user/aiChat/sendQuestion', {\r\n\t\t\t\t\t\tcontent: this.inputValue.trim(),\r\n\t\t\t\t\t\t// æµå¼æ¶ˆæ¯å›è°ƒ - æ¥æ”¶æ¯ä¸ªæ¶ˆæ¯ç‰‡æ®µ\r\n\t\t\t\t\t\tonMessage: (messageInfo) => {\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:54','ğŸ”„ æ”¶åˆ°æµå¼æ¶ˆæ¯ç‰‡æ®µ:', messageInfo);\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:55',`   - ç‰‡æ®µå†…å®¹: \"${messageInfo.content}\"`);\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:56',`   - ç´¯ç§¯å†…å®¹é•¿åº¦: ${messageInfo.fullContent ? messageInfo.fullContent.length : 0}`);\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:57',`   - æ¶ˆæ¯åºå·: ${messageInfo.messageCount || 0}`);\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:58',`   - æ˜¯å¦å®Œæˆ: ${messageInfo.isComplete}`);\r\n\t\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:59',`   - ä¼šè¯ID: ${messageInfo.conversationId}`);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶æœ‰æ–°çš„æµå¼æ¶ˆæ¯ç‰‡æ®µ\r\n\t\t\t\t\t\t\tthis.$emit('stream-message', {\r\n\t\t\t\t\t\t\t\tcontent: messageInfo.content,\r\n\t\t\t\t\t\t\t\tfullContent: messageInfo.fullContent,\r\n\t\t\t\t\t\t\t\tisComplete: messageInfo.isComplete,\r\n\t\t\t\t\t\t\t\tconversationId: messageInfo.conversationId,\r\n\t\t\t\t\t\t\t\tmessageCount: messageInfo.messageCount,\r\n\t\t\t\t\t\t\t\tisTimeout: messageInfo.isTimeout\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// æµå¼ä¼ è¾“å®Œæˆå›è°ƒ\r\n\t\t\t\t\t\tonComplete: (finalMessage) => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:73','âœ… æµå¼ä¼ è¾“å®Œæˆ:', finalMessage);\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:74',`   - æœ€ç»ˆå†…å®¹é•¿åº¦: ${finalMessage.content ? finalMessage.content.length : 0}`);\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:75',`   - æ€»æ¶ˆæ¯ç‰‡æ®µæ•°: ${finalMessage.messageCount || 0}`);\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:76',`   - ä¼šè¯ID: ${finalMessage.conversationId}`);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶æµå¼ä¼ è¾“å®Œæˆ\r\n\t\t\t\t\t\t\tthis.$emit('stream-complete', {\r\n\t\t\t\t\t\t\t\tcontent: finalMessage.content,\r\n\t\t\t\t\t\t\t\tconversationId: finalMessage.conversationId,\r\n\t\t\t\t\t\t\t\tmessageCount: finalMessage.messageCount,\r\n\t\t\t\t\t\t\t\tisTimeout: finalMessage.isTimeout\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// é”™è¯¯å¤„ç†å›è°ƒ\r\n\t\t\t\t\t\tonError: (error) => {\r\n\t\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:88','âŒ æµå¼ä¼ è¾“é”™è¯¯:', error);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶å‘ç”Ÿé”™è¯¯\r\n\t\t\t\t\t\t\tthis.$emit('stream-error', error);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// æ˜¾ç¤ºé”™è¯¯æç¤º\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: error.message || 'å‘é€å¤±è´¥',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result.success) {\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:102','ğŸ‰ æ¶ˆæ¯å‘é€æµç¨‹å®Œæˆ:', result);\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:103',`   - æœ€ç»ˆæ•°æ®: \"${result.data}\"`);\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:104',`   - æ¶ˆæ¯ç‰‡æ®µæ€»æ•°: ${result.messageCount || 0}`);\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:105',`   - æµå¼å®ŒæˆçŠ¶æ€: ${result.isStreamComplete ? 'âœ…' : 'âŒ'}`);\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:106',`   - æ˜¯å¦è¶…æ—¶: ${result.isTimeout ? 'âš ï¸' : 'âœ…'}`);\r\n\t\t\t\t\t\t// uni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:107',`   - ä¼šè¯ID: ${result.conversationId}`);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// æ¸…ç©ºè¾“å…¥æ¡†\r\n\t\t\t\t\t\tthis.inputValue = '';\r\n\t\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶æ¶ˆæ¯å‘é€æˆåŠŸ\r\n\t\t\t\t\t\tthis.$emit('message-sent', {\r\n\t\t\t\t\t\t\t...result,\r\n\t\t\t\t\t\t\tcontroller: result.controller // ä¼ é€’æ§åˆ¶å™¨ä¾›å¤–éƒ¨ä½¿ç”¨\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:117','âŒ æ¶ˆæ¯å‘é€å¤±è´¥:', result);\r\n\t\t\t\t\t\t// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: result.message || 'å‘é€å¤±è´¥',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:125','å‘é€æ¶ˆæ¯å‡ºé”™:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶å‘ç”Ÿé”™è¯¯\r\n\t\t\t\t\tthis.$emit('stream-error', {\r\n\t\t\t\t\t\tmessage: 'å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•'\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\t// é€šçŸ¥çˆ¶ç»„ä»¶å¤„ç†ç»“æŸ\r\n\t\t\t\t\tthis.$emit('processing-end');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/* è¾“å…¥åŒºåŸŸ */\r\n\t.input-section {\r\n\t\twidth: 100%;\r\n\t\theight: 129rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color:rgba(255, 255, 255, 1);\r\n\t\tmargin-top: 5rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t\r\n\t.message-input {\r\n\t\tflex: 1;\r\n\t\theight: 52rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder: 2rpx solid rgba(151, 151, 151, 1);\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-right: 30rpx;\r\n\t\tmargin-left: 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tmargin-top: 20rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t}\r\n\t\r\n\t.send-button {\r\n\t\twidth: 108rpx;\r\n\t\theight: 52rpx;\r\n\t\tbackground: linear-gradient(180deg, #A5A9F7 0%, rgba(70, 78, 248, 0.9) 100%);\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 8px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder: none;\r\n\t\tpadding: 0;\r\n\t\tmargin-right: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\ttransition: all 0.3s; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1); /* æ·»åŠ é˜´å½± */\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\t\r\n\t.send-button:disabled {\r\n\t\tbackground-color: #f0f0f0; /* æ›´æ”¹ä¸ºæµ…ç°è‰²èƒŒæ™¯ï¼Œä¸åŠŸèƒ½æŒ‰é’®ä¸€è‡´ */\r\n\t\tcolor: #999; /* æ›´æš—çš„æ–‡å­—é¢œè‰² */\r\n\t\tborder: 2rpx solid #ddd; /* æ·»åŠ è¾¹æ¡† */\r\n\t\tbox-shadow: none; /* ç¦ç”¨çŠ¶æ€ä¸æ˜¾ç¤ºé˜´å½± */\r\n\t}\r\n\t\r\n\t.send-button-text {\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n</style> ","import Component from 'E:/ç ”å¸ˆå½•ä¸å…¶ä»–äººå…±äº«æ–‡ä»¶/teacherDirectory/vueå®ç°LottieåŠ¨ç”»ä»£ç /pages_AI_Login_Match/AI/ai-chat/InputSection.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","defineComponent","result","messageInfo","finalMessage","uni","error","Component"],"mappings":"0DAyBCA,EAAeC,kBAAA,CACd,KAAM,eACN,MAAO,CACN,aAAc,CACb,KAAM,QACN,QAAS,EACV,CACA,EACD,MAAI,CACH,MAAO,CACN,WAAY,GAEb,EACD,QAAS,CAIF,aAAW,mDAChB,GAAI,CAAC,KAAK,WAAW,KAAM,EAAE,OAAM,QAAA,QAAA,IAAA,EAGnC,KAAK,MAAM,kBAAkB,EAE7B,GAAI,CACH,MAAMC,EAAS,MAAM,KAAK,OAAO,SAAS,2BAA4B,IAAA,cAAA,CACrE,QAAS,KAAK,WAAW,KAAM,EAE/B,UAAW,CAACC,EAAW,OAAA,CAStB,KAAK,MAAM,iBAAkB,IAAA,cAAA,CAC5B,QAASA,EAAY,QACrB,YAAaA,EAAY,YACzB,WAAYA,EAAY,WACxB,eAAgBA,EAAY,eAC5B,aAAcA,EAAY,aAC1B,UAAWA,EAAY,SACvB,CAAA,CAAA,CACD,EAED,WAAY,CAACC,EAAY,OAAA,CACxBC,EAAG,MAAC,MAAM,MAAM,yDAAyD,YAAaD,CAAY,EAClGC,EAAAA,MAAI,MAAM,MAAM,yDAAyD,gBAAgBD,EAAa,QAAUA,EAAa,QAAQ,OAAS,CAAC,EAAE,EACjJC,QAAI,MAAM,MAAM,yDAAyD,gBAAgBD,EAAa,cAAgB,CAAC,EAAE,EACzHC,QAAI,MAAM,MAAM,yDAAyD,cAAcD,EAAa,cAAc,EAAE,EAGpH,KAAK,MAAM,kBAAmB,IAAA,cAAA,CAC7B,QAASA,EAAa,QACtB,eAAgBA,EAAa,eAC7B,aAAcA,EAAa,aAC3B,UAAWA,EAAa,SACxB,CAAA,CAAA,CACD,EAED,QAAS,CAACE,EAAK,OAAA,CACdD,EAAG,MAAC,MAAM,QAAQ,yDAAyD,YAAaC,CAAK,EAG7F,KAAK,MAAM,eAAgBA,CAAK,EAGhCD,EAAAA,MAAI,UAAU,CACb,MAAOC,EAAM,SAAW,OACxB,KAAM,MACN,CAAA,CACF,CACA,CAAA,CAAA,EAEGJ,EAAO,SASV,KAAK,WAAa,GAElB,KAAK,MAAM,eACP,IAAA,cAAA,OAAA,OAAA,OAAA,OAAA,CAAA,EAAAA,CAAM,EACT,CAAA,WAAYA,EAAO,iBAGpBG,EAAG,MAAC,MAAM,QAAQ,0DAA0D,YAAaH,CAAM,EAE/FG,EAAAA,MAAI,UAAU,CACb,MAAOH,EAAO,SAAW,OACzB,KAAM,MACN,CAAA,EAED,OAAOI,EAAO,CACfD,EAAG,MAAC,MAAM,QAAQ,0DAA0D,UAAWC,CAAK,EAC5FD,EAAAA,MAAI,UAAU,CACb,MAAO,WACP,KAAM,MACN,CAAA,EAGD,KAAK,MAAM,eAAgB,IAAA,cAAA,CAC1B,QAAS,UACT,CAAA,CAAA,CACF,QAAU,CAET,KAAK,MAAM,gBAAgB,CAC5B,EACD,CAAA,CACD,EACD,2VC3ID,GAAG,gBAAgBE,CAAS"}