{"version":3,"file":"image-upload.js","sources":["pagesChat/components/image-upload/image-upload.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov56CU5biI5b2V5LiO5YW25LuW5Lq65YWx5Lqr5paH5Lu2L3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL3BhZ2VzQ2hhdC9jb21wb25lbnRzL2ltYWdlLXVwbG9hZC9pbWFnZS11cGxvYWQudnVl"],"sourcesContent":["<template>\n\t<view @click=\"selectAndUpload()\">\n\t\t<slot>\n\t\t</slot>\n\t</view>\n</template>\n\n<script lang=\"uts\">\nimport UNI_APP from '/pagesChat/env.js'\n\nexport default {\n\tname: \"image-upload\",\n\tdata() {\n\t\treturn {\n\t\t\tuploadHeaders: {\n\t\t\t\t\"accessToken\": uni.getStorageSync('loginInfo').accessToken\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\tmaxCount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tmaxSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 5 * 1024 * 1024\n\t\t},\n\t\tsourceType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'album'\n\t\t},\n\t\tisPermanent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tonBefore: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tonSuccess: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tonError: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t}\n\t},\n\tmethods: {\n\t\tselectAndUpload() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: this.maxCount, //最多可以选择的图片张数，默认9\n\t\t\t\tsourceType: [this.sourceType], //album 从相册选图，camera 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项\n\t\t\t\tsizeType: ['original'], //original 原图，compressed 压缩图，默认二者都有\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tres.tempFiles.forEach((file) => {\n\t\t\t\t\t\tif (!this.onBefore || this.onBefore(file)) {\n\t\t\t\t\t\t\t// 调用上传图片的接口\n\t\t\t\t\t\t\tthis.uploadImage(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tuploadImage(file) {\n\t\t\tuni.uploadFile({\n\t\t\t\turl: UNI_APP.BASE_URL + '/image/upload?isPermanent=' + this.isPermanent,\n\t\t\t\theader: {\n\t\t\t\t\taccessToken: uni.getStorageSync(\"loginInfo\").accessToken\n\t\t\t\t},\n\t\t\t\tfilePath: file.path, // 要上传文件资源的路径\n\t\t\t\tname: 'file',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tlet data = JSON.parse(res.data);\n\t\t\t\t\tif (data.code != 200) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: \"none\",\n\t\t\t\t\t\t\ttitle: data.message,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.onError && this.onError(file, data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onSuccess && this.onSuccess(file, data);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tuni.__f__('log','at pagesChat/components/image-upload/image-upload.vue:87',err);\n\t\t\t\t\tthis.onError && this.onError(file, err);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style></style>","import Component from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pagesChat/components/image-upload/image-upload.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","defineComponent","uni","res","file","UNI_APP","data","err","Component"],"mappings":"oFAUAA,EAAeC,kBAAA,CACd,KAAM,eACN,MAAI,CACH,MAAO,CACN,cAAe,IAAA,cAAA,CACd,YAAeC,EAAG,MAAC,eAAe,WAAW,EAAE,YAChD,EAED,EACD,MAAO,CACN,SAAU,CACT,KAAM,OACN,QAAS,CACT,EACD,QAAS,CACR,KAAM,OACN,QAAS,EAAI,KAAO,IACpB,EACD,WAAY,CACX,KAAM,OACN,QAAS,OACT,EACD,YAAa,CACZ,KAAM,QACN,QAAS,EACT,EACD,SAAU,CACT,KAAM,SACN,QAAS,IACT,EACD,UAAW,CACV,KAAM,SACN,QAAS,IACT,EACD,QAAS,CACR,KAAM,SACN,QAAS,IACV,CACA,EACD,QAAS,CACR,iBAAe,CACdA,QAAI,YAAY,IAAA,cAAA,CACf,MAAO,KAAK,SACZ,WAAY,CAAC,KAAK,UAAU,EAC5B,SAAU,CAAC,UAAU,EACrB,QAAUC,GAAG,CACZA,EAAI,UAAU,QAASC,GAAI,EACtB,CAAC,KAAK,UAAY,KAAK,SAASA,CAAI,IAEvC,KAAK,YAAYA,CAAI,CAEvB,CAAC,CACF,CACA,CAAA,CAAA,CACD,EACD,YAAYA,EAAI,KAAA,CACfF,EAAAA,MAAI,WAAW,CACd,IAAKG,EAAAA,QAAQ,SAAW,6BAA+B,KAAK,YAC5D,OAAQ,IAAA,cAAA,CACP,YAAaH,EAAG,MAAC,eAAe,WAAW,EAAE,YAC7C,EACD,SAAUE,EAAK,KACf,KAAM,OACN,QAAUD,GAAG,CACZ,IAAIG,EAAO,IAAK,KAAA,MAAMH,EAAI,IAAI,EAC1BG,EAAK,MAAQ,KAChBJ,EAAAA,MAAI,UAAU,CACb,KAAM,OACN,MAAOI,EAAK,OACZ,CAAA,EACD,KAAK,SAAW,KAAK,QAAQF,EAAME,CAAI,GAEvC,KAAK,WAAa,KAAK,UAAUF,EAAME,CAAI,CAE5C,EACD,KAAOC,GAAG,CACTL,EAAAA,MAAI,MAAM,MAAM,2DAA2DK,CAAG,EAC9E,KAAK,SAAW,KAAK,QAAQH,EAAMG,CAAG,CACvC,CACA,CAAA,CACF,CACD,EACD,oIC3FA,GAAG,gBAAgBC,CAAS"}