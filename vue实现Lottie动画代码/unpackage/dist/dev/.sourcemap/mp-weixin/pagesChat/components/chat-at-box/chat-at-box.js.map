{"version":3,"file":"chat-at-box.js","sources":["pagesChat/components/chat-at-box/chat-at-box.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov56CU5biI5b2V5LiO5YW25LuW5Lq65YWx5Lqr5paH5Lu2L3RlYWNoZXJEaXJlY3RvcnkvdnVl5a6e546wTG90dGll5Yqo55S75Luj56CBL3BhZ2VzQ2hhdC9jb21wb25lbnRzL2NoYXQtYXQtYm94L2NoYXQtYXQtYm94LnZ1ZQ"],"sourcesContent":["<template>\n\t<uni-popup ref=\"popup\" type=\"bottom\" @change=\"onChange\">\n\t\t<view class=\"chat-at-box\">\n\t\t\t<view class=\"chat-at-top\">\n\t\t\t\t<view class=\"chat-at-tip\"> 选择要提醒的人</view>\n\t\t\t\t<button class=\"chat-at-btn\" type=\"warn\" size=\"mini\" @click=\"onClean()\">清空 </button>\n\t\t\t\t<button class=\"chat-at-btn\" type=\"primary\" size=\"mini\" @click=\"onOk()\">确定({{ atUserIds.length }})\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t<scroll-view v-show=\"atUserIds.length > 0\" scroll-x=\"true\" scroll-left=\"120\">\n\t\t\t\t<view class=\"at-user-items\">\n\t\t\t\t\t<view v-for=\"m in checkedMembers\"  class=\"at-user-item\" :key=\"m.userId\">\n\t\t\t\t\t\t<head-image :name=\"m.showNickName\" :url=\"m.headImage\" size=\"mini\"></head-image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t\t<view class=\"search-bar\">\n\t\t\t\t<uni-search-bar v-model=\"searchText\" cancelButton=\"none\" radius=\"100\" placeholder=\"搜索\"></uni-search-bar>\n\t\t\t</view>\n\t\t\t<view class=\"member-items\">\n\t\t\t\t<virtual-scroller :items=\"memberItems\">\n\t\t\t\t\t<template v-slot=\"{ item }\">\n\t\t\t\t\t\t<view class=\"member-item\" :class=\"{ checked: item.checked }\" @click=\"onSwitchChecked(item)\">\n\t\t\t\t\t\t\t<head-image :name=\"item.showNickName\" :online=\"item.online\" :url=\"item.headImage\"\n\t\t\t\t\t\t\t\tsize=\"small\"></head-image>\n\t\t\t\t\t\t\t<view class=\"member-name\">{{ item.showNickName }}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</template>\n\t\t\t\t</virtual-scroller>\n\t\t\t</view>\n\t\t</view>\n\t</uni-popup>\n</template>\n\n<script lang=\"uts\">\nexport default {\n\tname: \"chat-at-box\",\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t},\n\t\tmembers: {\n\t\t\ttype: Array\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tshowMembers: []\n\t\t};\n\t},\n\tmethods: {\n\t\tinit(atUserIds) {\n\t\t\tthis.showMembers = [];\n\t\t\tlet userId = this.userStore.userInfo.id;\n\t\t\tif (this.ownerId == userId) {\n\t\t\t\tthis.showMembers.push({\n\t\t\t\t\tuserId: -1,\n\t\t\t\t\tshowNickName: \"全体成员\"\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.members.forEach((m) => {\n\t\t\t\tif (!m.quit && m.userId != userId) {\n\t\t\t\t\tm.checked = atUserIds.indexOf(m.userId) >= 0;\n\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\topen() {\n\t\t\tthis.$refs.popup.open();\n\t\t},\n\t\tonSwitchChecked(member) {\n\t\t\tmember.checked = !member.checked;\n\t\t},\n\t\tonClean() {\n\t\t\tthis.showMembers.forEach((m) => {\n\t\t\t\tm.checked = false;\n\t\t\t})\n\t\t},\n\t\tonOk() {\n\t\t\tthis.$refs.popup.close();\n\t\t},\n\t\tonChange(e) {\n\t\t\tif (!e.show) {\n\t\t\t\tthis.$emit(\"complete\", this.atUserIds)\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tatUserIds() {\n\t\t\treturn this.showMembers.filter(m => m.checked).map(m => m.userId);\n\t\t},\n\t\tcheckedMembers() {\n\t\t\treturn this.showMembers.filter(m => m.checked);\n\t\t},\n\t\tmemberItems() {\n\t\t\treturn this.showMembers.filter(m => m.showNickName.includes(this.searchText));\n\t\t}\n\t}\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n.chat-at-box {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: white;\n\tpadding: 10rpx;\n\t//border-radius: 15rpx;\n\n\t.chat-at-top {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 70rpx;\n\t\tpadding: 10rpx;\n\n\t\t.chat-at-tip {\n\t\t\tflex: 1;\n\t\t}\n\n\t\t.chat-at-btn {\n\t\t\tmargin-left: 10rpx;\n\t\t}\n\t}\n\n\n\t.at-user-items {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 90rpx;\n\n\t\t.at-user-item {\n\t\t\tpadding: 3rpx;\n\t\t}\n\t}\n\n\n\n\t.member-items {\n\t\tposition: relative;\n\t\tflex: 1;\n\t\toverflow: hidden;\n\n\t\t.member-item {\n\t\t\theight: 110rpx;\n\t\t\tdisplay: flex;\n\t\t\tposition: relative;\n\t\t\tpadding: 0 30rpx;\n\t\t\talign-items: center;\n\t\t\tbackground-color: white;\n\t\t\twhite-space: nowrap;\n\t\t\tmargin-bottom: 1px;\n\n\t\t\t&.checked {\n\t\t\t\tbackground-color: $im-color-primary-light-9;\n\t\t\t}\n\n\t\t\t.member-name {\n\t\t\t\tflex: 1;\n\t\t\t\tpadding-left: 20rpx;\n\t\t\t\tfont-size: $im-font-size;\n\t\t\t\tline-height: 60rpx;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import Component from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pagesChat/components/chat-at-box/chat-at-box.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","defineComponent","atUserIds","userId","m","member","e","Component"],"mappings":"0DAmCAA,EAAeC,kBAAA,CACd,KAAM,cACN,MAAO,CACN,QAAS,CACR,KAAM,MACN,EACD,QAAS,CACR,KAAM,KACP,CACA,EACD,MAAI,CACH,MAAO,CACN,WAAY,GACZ,YAAa,CAAC,EAEf,EACD,QAAS,CACR,KAAKC,EAAS,KAAA,CACb,KAAK,YAAc,GACnB,IAAIC,EAAS,KAAK,UAAU,SAAS,GACjC,KAAK,SAAWA,GACnB,KAAK,YAAY,KAAK,CACrB,OAAQ,GACR,aAAc,MACd,CAAA,EAEF,KAAK,QAAQ,QAAQ,CAACC,EAAC,OAAA,CAClB,CAACA,EAAE,MAAQA,EAAE,QAAUD,IAC1BC,EAAE,QAAUF,EAAU,QAAQE,EAAE,MAAM,GAAK,EAC3C,KAAK,YAAY,KAAKA,CAAC,EAEzB,CAAC,CACD,EACD,MAAI,CACH,KAAK,MAAM,MAAM,MACjB,EACD,gBAAgBC,EAAM,KAAA,CACrBA,EAAO,QAAU,CAACA,EAAO,OACzB,EACD,SAAO,CACN,KAAK,YAAY,QAASD,GAAC,CAC1BA,EAAE,QAAU,EACb,CAAC,CACD,EACD,MAAI,CACH,KAAK,MAAM,MAAM,OACjB,EACD,SAASE,EAAC,KAAA,CACJA,EAAE,MACN,KAAK,MAAM,WAAY,KAAK,SAAS,CAEvC,CACA,EACD,SAAU,CACT,WAAS,CACR,OAAO,KAAK,YAAY,OAAOF,GAAKA,EAAE,OAAO,EAAE,IAAIA,GAAKA,EAAE,MAAM,CAChE,EACD,gBAAc,CACb,OAAO,KAAK,YAAY,OAAOA,GAAKA,EAAE,OAAO,CAC7C,EACD,aAAW,CACV,OAAO,KAAK,YAAY,OAAOA,GAAKA,EAAE,aAAa,SAAS,KAAK,UAAU,CAAC,CAC7E,CACD,EACD,qqCClGA,GAAG,gBAAgBG,CAAS"}