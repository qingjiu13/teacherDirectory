{"version":3,"file":"chat.js","sources":["pagesChat/chat.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNDaGF0XGNoYXQudnVl"],"sourcesContent":["<template>\n  <view class=\"chat-list-page\">\n    <view class=\"scroll-wrapper\">\n      <view class=\"nav-search\">\n        <uni-search-bar\n          :focus=\"false\"\n          radius=\"100\"\n          v-model=\"searchText\"\n          cancelButton=\"none\"\n          placeholder=\"搜索\"\n          @input=\"onSearchInput\"\n        ></uni-search-bar>\n      </view>\n      <!-- 消息列表 -->\n      <scroll-view class=\"message-scroll-view\" scroll-y>\n        <view v-if=\"filteredChats.length === 0\" class=\"empty-tip\">\n          {{ keyword ? `没有找到与\"${keyword}\"相关的结果` : \"暂无消息\" }}\n        </view>\n        <view v-else>\n          <chat-item\n            v-for=\"chat in filteredChats\"\n            :key=\"chat.id\"\n            :chat=\"chat\"\n            @click=\"goToChat(chat)\"\n          ></chat-item>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 底部导航栏 -->\n    <tab-bar class=\"tab-bar-container\" pageName=\"message\"></tab-bar>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nimport { ref, computed, onMounted } from \"vue\";\nimport ChatItem from \"./components/chat-item/chat-item.vue\";\nimport TabBar from \"./components/tab-bar/tab-bar.vue\";\n// import { http } from \"./common/http.js\";\nimport { apiRequest,getCurrentUserId } from \"@/store/user/JWT.js\";\nimport pollingManager from \"@/utils/pollingManager.js\";\nimport { useGlobalStore } from \"@/store/global.js\";\nconst getApiPrefix = () => {\n    const globalStore = useGlobalStore()\n    return globalStore.apiBaseUrl\n}\nconst searchText = ref(\"\");\n\n// 真实聊天列表数据\nconst chats = ref([]);\n\n// 添加keyword变量\nconst keyword = computed(() => searchText.value);\n\nconst ADMIN_ID = 1;\n\n/**\n * 获取会话列表\n * @async\n * @function fetchChatSessions\n * @description 从服务器获取用户的聊天会话列表，支持客服端和普通用户端两种模式\n * @returns {Promise<void>} 无返回值，直接更新chats.value\n * @throws {Error} 当API请求失败时抛出错误\n */\nconst fetchChatSessions = async () => {\n  try {\n    uni.__f__('log','at pagesChat/chat.vue:67',\"[调试] 开始获取会话列表\");\n    \n    // 使用 apiRequest 发送请求\n    const response = await apiRequest(\n      `${getApiPrefix()}/yanshilu/chatMessage/sessionList`,\n      \"GET\",\n      {},\n      {\n        requireAuth: true,\n        showError: false // 手动处理错误提示\n      }\n    );\n    \n    uni.__f__('log','at pagesChat/chat.vue:80',\"[调试] apiRequest 响应:\", response);\n    \n    // 检查请求是否成功\n    if (!response.success) {\n      throw new Error(response.message || \"获取会话列表失败\");\n    }\n    \n    let sessionList = [];\n    const responseData = response.data;\n    \n    // 兼容后端返回的各种结构\n    if (Array.isArray(responseData)) {\n      sessionList = responseData;\n    } else if (Array.isArray(responseData?.rows)) {\n      sessionList = responseData.rows;\n    } else if (responseData && Array.isArray(responseData.data)) {\n      sessionList = responseData.data;\n    } else if (responseData?.rows) {\n      // 兼容微信小程序对象\n      sessionList = Object.values(responseData.rows);\n    }\n    \n    // 强制转为标准数组，兼容uniapp/小程序环境\n    if (!Array.isArray(sessionList)) {\n      sessionList = Object.values(sessionList || {});\n    }\n    \n    uni.__f__('log','at pagesChat/chat.vue:107',\"[调试] sessionList 转换后:\", sessionList);\n    \n    // === 调试代码开始 ===\n    sessionList.forEach((item, idx) => {\n      uni.__f__('log','at pagesChat/chat.vue:111',`[调试] session item[${idx}]:`, JSON.stringify(item));\n    });\n    // === 调试代码结束 ===\n\n    const currentUserId = getCurrentUserId();\n    uni.__f__('log','at pagesChat/chat.vue:116',\"[调试] 当前用户ID:\", currentUserId);\n    uni.__f__('log','at pagesChat/chat.vue:117',\"[调试] 当前用户ID类型:\", typeof currentUserId);\n    uni.__f__('log','at pagesChat/chat.vue:118',\"[调试] ADMIN_ID:\", ADMIN_ID);\n    uni.__f__('log','at pagesChat/chat.vue:119',\"[调试] ADMIN_ID类型:\", typeof ADMIN_ID);\n    uni.__f__('log','at pagesChat/chat.vue:120',\"[调试] 是否相等:\", currentUserId === ADMIN_ID);\n\n    if (currentUserId === ADMIN_ID) {\n      uni.__f__('log','at pagesChat/chat.vue:123',\"[调试] 进入客服端逻辑\");\n      // 客服端：chatId用对方用户ID，无论谁发的消息\n      sessionList.forEach((item) => {\n        // 对方用户ID\n        item.chatId =\n          item.senderId === ADMIN_ID ? item.receiverId : item.senderId;\n        // 防御性昵称策略，优先用对方昵称和用户名\n        item.showName =\n          item.chat_user_nick_name ||\n          item.chatUserNickName ||\n          item.chat_user_user_name ||\n          item.chatUserUserName ||\n          \"匿名用户\";\n        // 头像优先用对方头像\n        item.headImage =\n          item.chat_user_avatar ||\n          item.senderPicture ||\n          item.receiverPicture ||\n          \"/static/image/defaultAvatar/student-man.png\";\n        item.lastContent = item.content || \"\";\n        item.lastSendTime = item.sendTime || \"\";\n        item.id = item.chatMessageId;\n      });\n      chats.value = sessionList.filter(\n        (item) => item.chatId && item.chatId !== ADMIN_ID\n      );\n      uni.__f__('log','at pagesChat/chat.vue:149',\"[调试] 客服端会话列表:\", chats.value);\n    } else {\n      uni.__f__('log','at pagesChat/chat.vue:151',\"[调试] 进入普通用户端逻辑\");\n      uni.__f__('log','at pagesChat/chat.vue:152',\"[调试] sessionList 数据:\", sessionList);\n      uni.__f__('log','at pagesChat/chat.vue:153',\n        \"[调试] currentUserId:\",\n        currentUserId,\n        \"类型:\",\n        typeof currentUserId\n      );\n      uni.__f__('log','at pagesChat/chat.vue:159',\"[调试] ADMIN_ID:\", ADMIN_ID, \"类型:\", typeof ADMIN_ID);\n\n      // 普通用户端：处理sessionList数据，显示与客服的真实会话\n      if (sessionList && sessionList.length > 0) {\n        // 找到与客服的会话\n        const customerServiceSession = sessionList.find((item) => {\n          uni.__f__('log','at pagesChat/chat.vue:165',\"[调试] 检查会话项:\", item);\n          uni.__f__('log','at pagesChat/chat.vue:166',\n            \"[调试] item.senderId:\",\n            item.senderId,\n            \"类型:\",\n            typeof item.senderId\n          );\n          uni.__f__('log','at pagesChat/chat.vue:172',\n            \"[调试] item.receiverId:\",\n            item.receiverId,\n            \"类型:\",\n            typeof item.receiverId\n          );\n          const isMatch =\n            (item.senderId === ADMIN_ID && item.receiverId === currentUserId) ||\n            (item.senderId === currentUserId && item.receiverId === ADMIN_ID);\n          uni.__f__('log','at pagesChat/chat.vue:181',\"[调试] 是否匹配:\", isMatch);\n          return isMatch;\n        });\n\n        uni.__f__('log','at pagesChat/chat.vue:185',\"[调试] 找到的客服会话:\", customerServiceSession);\n\n        if (customerServiceSession) {\n          // 使用真实的后端数据\n          chats.value = [\n            {\n              id: customerServiceSession.chatMessageId || 1,\n              chatId: ADMIN_ID,\n              showName: \"小助手\",\n              headImage: \"/static/image/defaultAvatar/kefu.png\",\n              lastContent:\n                customerServiceSession.content || \"您好，请问有什么可以帮您？\",\n              lastSendTime: customerServiceSession.sendTime || Date.now(),\n              unreadCount: 0,\n            },\n          ];\n        } else {\n          uni.__f__('log','at pagesChat/chat.vue:202',\"[调试] 未找到客服会话，创建默认会话\");\n          // 如果没有找到会话，创建默认会话\n          chats.value = [\n            {\n              id: 1,\n              chatId: ADMIN_ID,\n              showName: \"小助手\",\n              headImage: \"/static/image/defaultAvatar/kefu.png\",\n              lastContent: \"您好，请问有什么可以帮您？\",\n              lastSendTime: Date.now(),\n              unreadCount: 0,\n            },\n          ];\n        }\n      } else {\n        uni.__f__('log','at pagesChat/chat.vue:217',\"[调试] sessionList为空，创建默认会话\");\n        // 如果sessionList为空，创建默认会话\n        chats.value = [\n          {\n            id: 1,\n            chatId: ADMIN_ID,\n            showName: \"小助手\",\n            headImage: \"/static/image/defaultAvatar/kefu.png\",\n            lastContent: \"您好，请问有什么可以帮您？\",\n            lastSendTime: Date.now(),\n            unreadCount: 0,\n          },\n        ];\n      }\n      uni.__f__('log','at pagesChat/chat.vue:231',\"[调试] 普通用户端会话列表:\", chats.value);\n    }\n    sortChats();\n  } catch (error) {\n    uni.__f__('error','at pagesChat/chat.vue:235',\"[调试] 获取会话失败:\", error);\n    \n    // 显示错误提示\n    uni.showToast({ \n      title: error.message || \"获取会话失败\", \n      icon: \"none\",\n      duration: 2000\n    });\n    \n    // 如果API调用失败，创建默认的小助手会话\n    const currentUserId = getCurrentUserId();\n    chats.value = [\n      {\n        id: 1,\n        chatId: ADMIN_ID, // 小助手ID\n        showName: \"小助手\",\n        headImage: \"/static/image/defaultAvatar/kefu.png\",\n        lastContent: \"您好，请问有什么可以帮您？\",\n        lastSendTime: Date.now(),\n        unreadCount: 0,\n      },\n    ];\n    \n    uni.__f__('log','at pagesChat/chat.vue:258',\"[调试] 使用默认会话列表:\", chats.value);\n  }\n};\n\n// 轮询检查新会话\nconst checkNewSessions = async () => {\n  // try {\n  //   uni.__f__('log','at pagesChat/chat.vue:265',\"[轮询] 检查新会话\");\n  //   await fetchChatSessions();\n  // } catch (error) {\n  //   uni.__f__('error','at pagesChat/chat.vue:268',\"[轮询] 检查新会话失败:\", error);\n  // }\n};\n\n// 排序聊天列表\nconst sortChats = () => {\n  chats.value.sort((a, b) => {\n    // 小助手置顶\n    if (a.showName === \"小助手\") return -1;\n    if (b.showName === \"小助手\") return 1;\n    // 其他按时间倒序\n    return new Date(b.lastSendTime) - new Date(a.lastSendTime);\n  });\n};\n\nonMounted(() => {\n  fetchChatSessions();\n\n  // 设置当前页面为chat-list\n  pollingManager.setCurrentPage(\"chat-list\");\n\n  // 注册轮询回调\n  pollingManager.registerPollingCallback(\n    \"chat-list-sessions\",\n    checkNewSessions\n  );\n});\n\n// 页面显示时更新轮询状态 - 使用uni-app的页面生命周期\nconst onShow = () => {\n  // 设置当前页面为chat-list\n  pollingManager.setCurrentPage(\"chat-list\");\n};\n\n// 页面隐藏时停止轮询 - 使用uni-app的页面生命周期\nconst onHide = () => {\n  // 如果离开chat-list页面，设置页面为other\n  pollingManager.setCurrentPage(\"other\");\n};\n\n// 页面卸载时清理 - 使用uni-app的页面生命周期\nconst onUnload = () => {\n  // 注销轮询回调\n  pollingManager.unregisterPollingCallback(\"chat-list-sessions\");\n\n  // 设置页面为other\n  pollingManager.setCurrentPage(\"other\");\n};\n\nconst filteredChats = computed(() => {\n  if (!searchText.value) {\n    return chats.value;\n  }\n  const lowerCaseKeyword = searchText.value.toLowerCase();\n  return chats.value.filter(\n    (chat) =>\n      (chat.showName &&\n        chat.showName.toLowerCase().includes(lowerCaseKeyword)) ||\n      (chat.lastContent &&\n        chat.lastContent.toLowerCase().includes(lowerCaseKeyword))\n  );\n});\n\nconst goToChat = (chat) => {\n  if (!chat.chatId) {\n    uni.showToast({ title: \"会话ID无效\", icon: \"none\" });\n    return;\n  }\n  uni.navigateTo({\n    url: `/pagesChat/chat-box?id=${chat.chatId}&title=${encodeURIComponent(\n      chat.showName\n    )}&avatar=${encodeURIComponent(chat.headImage)}`,\n  });\n};\n\n// 添加搜索输入处理函数\nconst onSearchInput = (value) => {\n  // 搜索逻辑已经在computed中处理，这里可以添加额外的搜索逻辑\n  uni.__f__('log','at pagesChat/chat.vue:346',\"[搜索] 搜索关键词:\", value);\n};\n\nfunction goBack() {\n  uni.navigateBack();\n}\n\n// 导出uni-app页面生命周期函数\ndefineExpose({\n  onShow,\n  onHide,\n  onUnload,\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-list-page {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f8f8f8;\n  padding-top: 110rpx;\n}\n\n.scroll-wrapper {\n  flex: 1;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.nav-search {\n  width: 60vw;\n  margin-left: 40rpx;\n  margin-bottom: 32rpx;\n}\n::v-deep .uni-searchbar {\n  background: #f5f6fa;\n  border-radius: 16rpx;\n  border: 1px solid #e0e0e0;\n  min-height: 64rpx;\n  height: 64rpx;\n  box-shadow: none;\n  padding: 0;\n}\n::v-deep .uni-searchbar__box {\n  background: #f5f6fa;\n  border-radius: 16rpx;\n  border: none;\n  min-height: 64rpx;\n  height: 64rpx;\n  box-shadow: none;\n  padding-left: 12rpx;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n}\n::v-deep .uni-searchbar__input {\n  font-size: 28rpx;\n  color: #333;\n  background: transparent;\n  text-align: left;\n  padding-left: 0;\n}\n::v-deep .uni-searchbar__icon-search {\n  margin-left: 0;\n  text-align: left;\n}\n\n.message-scroll-view {\n  flex: 1;\n  background-color: #fff;\n}\n\n.empty-tip {\n  color: #999;\n  text-align: center;\n  padding-top: 200rpx;\n  font-size: 28rpx;\n}\n\n.tab-bar-container {\n  height: 120rpx;\n  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);\n}\n</style>\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pagesChat/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["ChatItem","TabBar","ADMIN_ID","getApiPrefix","useGlobalStore","searchText","ref","chats","keyword","computed","fetchChatSessions","__awaiter","uni","response","apiRequest","sessionList","responseData","item","idx","currentUserId","getCurrentUserId","customerServiceSession","isMatch","sortChats","error","checkNewSessions","a","b","onMounted","pollingManager","onShow","onHide","onUnload","filteredChats","lowerCaseKeyword","chat","goToChat","onSearchInput","value","__expose","MiniProgramPage"],"mappings":"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"}