{"version":3,"file":"teacher.js","sources":["pages/teacher/teacher.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdGVhY2hlci90ZWFjaGVyLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 主要内容区域（可滚动） -->\r\n    <scroll-view class=\"content-area\" scroll-y=\"true\">\r\n      \r\n      <!-- 头像独立于容器 -->\r\n      <image class=\"teacher-avatar\" :src=\"teacherData.avatar || '/static/image/defaultAvatar/teacher-man.png'\" mode=\"aspectFill\"></image>\r\n      \r\n      <!-- 老师个人信息卡片 -->\r\n      <view class=\"teacher-profile\">\r\n        <!-- 昵称部分 -->\r\n        <view class=\"name-row\">\r\n          <view class=\"teacher-info\">\r\n            <text class=\"teacher-name\">{{teacherData.name}}</text>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 学校专业信息 -->\r\n        <view class=\"education-info\">\r\n          {{teacherData.school}} | {{teacherData.major}} | {{teacherData.teacherScore}}\r\n        </view>\r\n        \r\n        <!-- 个人简介 -->\r\n        <view class=\"profile-intro\">\r\n          <text class=\"intro-title\">个人简介：</text>\r\n          <text class=\"intro-text\">{{teacherData.selfIntroduction || '这位老师很懒，还没有填写个人简介。'}}</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 服务部分（独立容器） -->\r\n      <view class=\"services-section\">\r\n        <!-- 标签页导航 -->\r\n        <view class=\"tab-navigation\">\r\n          <view \r\n            class=\"tab-item\" \r\n            :class=\"{ active: activeTab === 'services' }\" \r\n            @click=\"switchTab('services')\"\r\n          >\r\n            服务\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 服务列表内容 -->\r\n        <view class=\"services-container\" v-if=\"activeTab === 'services'\">\r\n          <template v-if=\"services.length > 0\">\r\n            <view class=\"service-card\" v-for=\"(service, index) in services\" :key=\"index\">\r\n              <view class=\"service-card-header\">\r\n                <view class=\"service-image-container\">\r\n                  <image class=\"service-image\" :src=\"service.image || '/static/image/services/default_service.png'\" mode=\"aspectFill\"></image>\r\n                </view>\r\n                <view class=\"service-title-price\">\r\n                  <text class=\"service-title\">{{service.name}}</text>\r\n                  <text class=\"service-price\">¥{{service.price}}</text>\r\n                </view>\r\n              </view>\r\n              <view class=\"service-description-container\">\r\n                <text class=\"service-description\">{{service.description}}</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"consult-button-container\">\r\n              <view class=\"consult-button\" @click=\"startConsultation\">立即咨询</view>\r\n            </view>\r\n          </template>\r\n          <view class=\"empty-tip\" v-else>\r\n            该老师暂未开通服务\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nimport { Navigator, MessageRoutes } from '@/router/Router.js'\r\nimport { mapGetters, mapState } from 'vuex'\r\n\r\n/**\r\n* @file 老师详情页\r\n* @description 展示老师个人信息和服务\r\n*/\r\nexport default {\r\n    data() {\r\n      return {\r\n          teacherId: null,\r\n          activeTab: 'services', // 当前选中的标签页\r\n          isLoading: false, // 是否正在加载\r\n          teacherData: {\r\n            id: null,\r\n            name: '',\r\n            avatar: '/static/image/defaultAvatar/teacher-man.png',\r\n            school: '',\r\n            major: '',\r\n            teacherScore: 0, \r\n            certificate: 0,\r\n            selfIntroduction: '加载中...',\r\n            service: []\r\n          }\r\n      }\r\n    },\r\n    \r\n    computed: {\r\n      /**\r\n      * @description 从Vuex获取老师信息\r\n      * @returns {Object} 老师信息对象\r\n      */\r\n      ...mapGetters('user/match', ['teacherInfo']),\r\n      \r\n      /**\r\n      * @description 获取老师的服务列表\r\n      * @returns {Array} 服务列表\r\n      */\r\n      services() {\r\n        if (!this.teacherData || !this.teacherData.service) {\r\n          return [];\r\n        }\r\n        return this.teacherData.service || [];\r\n      }\r\n    },\r\n    \r\n    onLoad(options) {\r\n      // 获取老师ID\r\n      this.teacherId = options.id || '';\r\n      \r\n      if (!this.teacherId) {\r\n        uni.showToast({\r\n          title: '未获取到教师ID',\r\n          icon: 'none'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // 显示加载状态\r\n      this.isLoading = true;\r\n      \r\n      // 从Vuex store获取教师信息\r\n      const teacherData = this.teacherInfo(this.teacherId);\r\n      \r\n      if (teacherData) {\r\n        this.teacherData = teacherData;\r\n      } else {\r\n        uni.showToast({\r\n          title: '未找到该教师信息',\r\n          icon: 'none'\r\n        });\r\n      }\r\n      \r\n      // 加载结束\r\n      this.isLoading = false;\r\n    },\r\n    \r\n    methods: {\r\n      /**\r\n       * @description 切换标签页\r\n       * @param {String} tab - 标签名称\r\n       */\r\n      switchTab(tab) {\r\n        if (this.activeTab !== tab) {\r\n          this.activeTab = tab;\r\n        }\r\n      },\r\n      \r\n      /**\r\n       * @description 发起咨询\r\n       */\r\n      startConsultation() {\r\n        this.isLoading = true;\r\n        \r\n        setTimeout(() => {\r\n          this.isLoading = false;\r\n          // 使用router.js中的方法跳转到聊天页面\r\n          Navigator.toChat(this.teacherId);\r\n        }, 800);\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n  /* 全局样式变量 */\r\n  page {\r\n    --primary-color: #1E90FF;\r\n    --primary-light: #87CEEB;\r\n    --primary-dark: #0073CF;\r\n    --gradient-blue: linear-gradient(135deg, #1E90FF, #00BFFF);\r\n    --gradient-blue-light: linear-gradient(135deg, #87CEEB, #48D1CC);\r\n    --text-primary: #333333;\r\n    --text-secondary: #666666;\r\n    --text-light: #999999;\r\n    --bg-color: #F5F9FC;\r\n    --card-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n    font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\r\n  }\r\n  \r\n  .container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 100vh;\r\n    background-color: var(--bg-color);\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  /* 内容区域 */\r\n  .content-area {\r\n    flex: 1;\r\n  }\r\n  \r\n  /* 老师个人信息区域 */\r\n  .teacher-profile {\r\n    background-color: #ffffff;\r\n    padding: 20px;\r\n    margin: 35px 15px 0 15px;\r\n    border-radius: 16px 16px 0 0;\r\n    box-shadow: var(--card-shadow);\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n  \r\n  /* 头像样式 - 独立于容器 */\r\n  .teacher-avatar {\r\n    width: 100px;\r\n    height: 100px;\r\n    border-radius: 50px;\r\n    border: 4px solid #ffffff;\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n    position: absolute;\r\n    left: 8px;\r\n    top: 8px;\r\n    z-index: 10;\r\n    background-color: #ffffff;\r\n  }\r\n  \r\n  /* 昵称部分 */\r\n  .name-row {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n    margin-top: 25px;\r\n    margin-left: -100px; \r\n  }\r\n  \r\n  .teacher-info {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .teacher-name {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  .education-info {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    margin-top: 5px;\r\n    margin-bottom: 15px;\r\n    margin-left: 50px;\r\n  }\r\n  \r\n  .profile-intro {\r\n    padding: 12px;\r\n    background-color: rgba(30, 144, 255, 0.05);\r\n    border-radius: 12px;\r\n    border-left: 3px solid var(--primary-color);\r\n  }\r\n  \r\n  .intro-title {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-bottom: 5px;\r\n    display: block;\r\n  }\r\n  \r\n  .intro-text {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    line-height: 1.6;\r\n  }\r\n  \r\n  /* 标签页导航 */\r\n  .tab-navigation {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    background-color: #ffffff;\r\n    padding: 12px 15px;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n    margin: 0 15px;\r\n    border-radius: 16px 16px 0 0;\r\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.03);\r\n  }\r\n  \r\n  .tab-item {\r\n    padding: 10px 10px;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n    color: var(--text-secondary);\r\n    position: relative;\r\n    transition: all 0.3s ease;\r\n    min-width: 80px;\r\n    text-align: center;\r\n    margin-left: -280px;\r\n    margin-top: -10px;\r\n  }\r\n  \r\n  .tab-item.active {\r\n    color: #2196F3;\r\n  }\r\n  \r\n  .tab-item.active:after {\r\n    content: '';\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: 30px;\r\n    height: 3px;\r\n    background-image: linear-gradient(45deg, #007AFF, #00C6FF);\r\n    border-radius: 3px;\r\n  }\r\n  \r\n  /* 动态和服务容器 */\r\n  .posts-container,\r\n  .services-container {\r\n    padding: 0 15px 30px 15px;\r\n    background-color: #ffffff;\r\n    margin: 0 15px;\r\n    border-radius: 0 0 16px 16px;\r\n    box-shadow: var(--card-shadow);\r\n  }\r\n  \r\n  /* 服务部分样式 */\r\n  .service-card {\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: #ffffff;\r\n    border-radius: 16px;\r\n    padding: 15px;\r\n    margin-bottom: 15px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  }\r\n  \r\n  .service-card-header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .service-image-container {\r\n    width: 70px;\r\n    height: 70px;\r\n    margin-right: 15px;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .service-image {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .service-title-price {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .service-title {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: var(--text-primary);\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .service-price {\r\n    font-size: 16px;\r\n    color: #FF6347;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .service-description-container {\r\n    width: 100%;\r\n  }\r\n  \r\n  .service-description {\r\n    font-size: 14px;\r\n    color: var(--text-secondary);\r\n    line-height: 1.5;\r\n  }\r\n  \r\n  .consult-button-container {\r\n    margin-top: 20px;\r\n    padding: 0 15px;\r\n  }\r\n  \r\n  .consult-button {\r\n    width: 100%;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    background-image: var(--gradient-blue);\r\n    color: #ffffff;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    border-radius: 25px;\r\n    text-align: center;\r\n    box-shadow: 0 5px 15px rgba(30, 144, 255, 0.3);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .consult-button:active {\r\n    transform: translateY(2px);\r\n    box-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);\r\n  }\r\n  \r\n  /* 空状态提示 */\r\n  .empty-tip {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 200px;\r\n    color: var(--text-light);\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .empty-tip::before {\r\n    content: '';\r\n    width: 60px;\r\n    height: 60px;\r\n    margin-bottom: 15px;\r\n    background-color: rgba(30, 144, 255, 0.1);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  \r\n  .services-section {\r\n    margin-top: 15px;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n</style>","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages/teacher/teacher.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","mapGetters","options","uni","teacherData","tab","Navigator","MiniProgramPage"],"mappings":"2FAgFAA,EAAeC,kBAAA,CACX,MAAI,CACF,MAAO,CACH,UAAW,KACX,UAAW,WACX,UAAW,GACX,YAAa,IAAA,cAAA,CACX,GAAI,KACJ,KAAM,GACN,OAAQ,8CACR,OAAQ,GACR,MAAO,GACP,aAAc,EACd,YAAa,EACb,iBAAkB,SAClB,QAAS,CAAC,EACZ,EAEL,EAED,SAAQ,OAAA,OAAA,OAAA,OAAA,GAKHC,EAAAA,WAAW,aAAc,CAAC,aAAa,CAAC,CAAC,EAAA,CAM5C,UAAQ,CACN,MAAI,CAAC,KAAK,aAAe,CAAC,KAAK,YAAY,QAClC,GAEF,KAAK,YAAY,SAAW,EACrC,EACD,EAED,OAAOC,EAAO,CAIZ,GAFA,KAAK,UAAYA,EAAQ,IAAM,GAE3B,CAAC,KAAK,UACRC,OAAAA,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACP,CAAA,EACK,KAIR,KAAK,UAAY,GAGjB,MAAMC,EAAc,KAAK,YAAY,KAAK,SAAS,EAE/CA,EACF,KAAK,YAAcA,EAEnBD,EAAAA,MAAI,UAAU,CACZ,MAAO,WACP,KAAM,MACP,CAAA,EAIH,KAAK,UAAY,EAClB,EAED,QAAS,CAKP,UAAUE,EAAG,KAAA,CACP,KAAK,YAAcA,IACrB,KAAK,UAAYA,EAEpB,EAKD,mBAAiB,CACf,KAAK,UAAY,GAEjB,WAAW,IAAA,CACT,KAAK,UAAY,GAEjBC,EAAAA,UAAU,OAAO,KAAK,SAAS,CAChC,EAAE,GAAG,CACR,CACF,EACJ,4tBC7KA,GAAG,WAAWC,CAAe"}