{"version":3,"file":"wechat_login.js","sources":["pages/login/wechat_login.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vd2VjaGF0X2xvZ2luLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <!-- é¡¶éƒ¨èƒŒæ™¯å›¾ -->\r\n    <view class=\"header-bg\">\r\n      <image class=\"bg-image\" src=\"/static/image/login_qianduan_test.png\" mode=\"widthFix\"></image>\r\n    </view>\r\n    \r\n    <!-- å†…å®¹åŒºåŸŸ -->\r\n    <view class=\"content\">\r\n      <!-- æ¬¢è¿æ–‡æ¡ˆ -->\r\n      <view class=\"welcome-text\">\r\n        <text class=\"title\">æ¬¢è¿ä½¿ç”¨</text>\r\n        <text class=\"subtitle\">è¯·å…ˆç™»å½•ä»¥äº«å—å®Œæ•´æœåŠ¡</text>\r\n      </view>\r\n      \r\n      <!-- ç”¨æˆ·å¤´åƒå ä½ -->\r\n      <view class=\"avatar-container\">\r\n        <image class=\"avatar\" :src=\"userInfo.avatarUrl || '/static/image/defaultAvatar/teacher-man.png'\" mode=\"aspectFill\"></image>\r\n        <text class=\"nickname\" v-if=\"userInfo.nickName\">{{userInfo.nickName}}</text>\r\n        <text class=\"nickname\" v-else>æœªç™»å½•</text>\r\n      </view>\r\n      \r\n      <!-- å¾®ä¿¡ç™»å½•æŒ‰é’® -->\r\n      <button class=\"login-btn\" @click=\"onWxLogin\" v-if=\"!hasLogin\">\r\n        <view class=\"btn-content\">\r\n          <image class=\"wechat-icon\" src=\"/static/image/defaultAvatar/teacher-man.png\"></image>\r\n          <text class=\"login-text\">å¾®ä¿¡ä¸€é”®ç™»å½•</text>\r\n        </view>\r\n      </button>\r\n      \r\n      <!-- å·²ç™»å½•çŠ¶æ€ -->\r\n      <button class=\"login-btn logged-in\" v-else @click=\"toHome\">\r\n        <text>è¿›å…¥åº”ç”¨</text>\r\n      </button>\r\n      \r\n      <!-- åè®®å£°æ˜ -->\r\n\t\t<view class=\"agreement\">\r\n\t\t  <text>ç™»å½•å³è¡¨ç¤ºåŒæ„</text>\r\n\t\t  <view class=\"link-group\">\r\n\t\t\t<text class=\"link\" @click=\"showAgreement\">ã€Šç”¨æˆ·åè®®ã€‹</text>\r\n\t\t\t<text>å’Œ</text>\r\n\t\t\t<text class=\"link\" @click=\"showPrivacy\">ã€Šéšç§æ”¿ç­–ã€‹</text>\r\n\t\t  </view>\r\n\t\t</view>\r\n    </view>\r\n    \r\n    <!-- ç”¨æˆ·åè®®å¼¹çª— -->\r\n    <view class=\"modal-overlay\" v-if=\"showAgreementModal\" @click.stop=\"closeModal('agreement')\">\r\n      <view class=\"modal-content\" @click.stop>\r\n        <view class=\"modal-title\">ç”¨æˆ·åè®®</view>\r\n        <view class=\"modal-body\">\r\n          <view class=\"agreement-text\">\r\n            <view class=\"agreement-item\">å°±å¹³å°ä½¿ç”¨æ¶‰åŠçš„æƒåˆ©å’Œä¹‰åŠ¡ä¸æ‚¨åšå‡ºå¦‚ä¸‹çº¦å®šï¼š</view>\r\n            <view class=\"agreement-item\">1ã€æ‚¨çŸ¥æ™“å¹¶åŒæ„ï¼Œç™»ç½²æœ¬åè®®å³ä»£è¡¨æ‚¨ä¾ç…§æœ¬åè®®å…¬å¸ƒçš„è§„åˆ™å±¥è¡Œä¹‰åŠ¡å¹¶äº«æœ‰æƒåˆ©ã€‚</view>\r\n            <view class=\"agreement-item\">2ã€æ‚¨åŒæ„ï¼Œæ³¨å†Œå¹¶ä½¿ç”¨æœ¬å¹³å°æœåŠ¡æ—¶ï¼Œéœ€éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¹³å°è§„å®šã€‚</view>\r\n            <view class=\"agreement-item\">3ã€æ‚¨åŒæ„ï¼Œåœ¨ä½¿ç”¨å¹³å°æœåŠ¡è¿‡ç¨‹ä¸­ï¼Œéµå®ˆè¯šå®ä¿¡ç”¨åŸåˆ™ï¼Œä¸å‘å¸ƒè¿æ³•ã€è™šå‡æˆ–ä¾µå®³ä»–äººæƒç›Šçš„ä¿¡æ¯ã€‚</view>\r\n            <view class=\"agreement-item\">4ã€æœ¬å¹³å°ä¿ç•™å¯¹ç”¨æˆ·èµ„æ–™è¿›è¡Œå®¡æ ¸çš„æƒåˆ©ï¼Œå¯¹è¿ååè®®çš„ç”¨æˆ·æœ‰æƒå°ç¦è´¦å·ã€‚</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"modal-footer\">\r\n          <button class=\"agree-btn\" @click=\"closeModal('agreement')\">æˆ‘å·²æ‚‰çŸ¥å¹¶åŒæ„</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- éšç§æ”¿ç­–å¼¹çª— -->\r\n    <view class=\"modal-overlay\" v-if=\"showPrivacyModal\" @click.stop=\"closeModal('privacy')\">\r\n      <view class=\"modal-content\" @click.stop>\r\n        <view class=\"modal-title\">éšç§æ”¿ç­–</view>\r\n        <view class=\"modal-body\">\r\n          <view class=\"agreement-text\">\r\n            <view class=\"agreement-item\">æœ¬åº”ç”¨éå¸¸é‡è§†ç”¨æˆ·éšç§æ”¿ç­–å¹¶ä¸¥æ ¼éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ï¼š</view>\r\n            <view class=\"agreement-item\">1ã€æˆ‘ä»¬åªä¼šæ”¶é›†å¿…è¦çš„ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç”¨æˆ·æ˜µç§°ã€å¤´åƒç­‰åŸºæœ¬ä¿¡æ¯ã€‚</view>\r\n            <view class=\"agreement-item\">2ã€æˆ‘ä»¬é‡‡å–ä¸šç•Œæ ‡å‡†çš„å®‰å…¨é˜²æŠ¤æªæ–½ä¿æŠ¤æ‚¨çš„ä¸ªäººä¿¡æ¯å®‰å…¨ã€‚</view>\r\n            <view class=\"agreement-item\">3ã€æœªç»æ‚¨çš„åŒæ„ï¼Œæˆ‘ä»¬ä¸ä¼šå‘ä»»ä½•ç¬¬ä¸‰æ–¹æä¾›ã€å‡ºå”®ã€å‡ºç§Ÿã€åˆ†äº«æˆ–äº¤æ˜“æ‚¨çš„ä¸ªäººä¿¡æ¯ã€‚</view>\r\n            <view class=\"agreement-item\">4ã€æˆ‘ä»¬ä¼šé€šè¿‡åˆç†æœ‰æ•ˆçš„ç®¡ç†æªæ–½å’ŒæŠ€æœ¯æ‰‹æ®µï¼Œä¿æŠ¤æ‚¨æä¾›çš„ä¸ªäººä¿¡æ¯å®‰å…¨ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ã€æŸæ¯æˆ–ä¸¢å¤±ã€‚</view>\r\n          </view>\r\n        </view>\r\n        <view class=\"modal-footer\">\r\n          <button class=\"agree-btn\" @click=\"closeModal('privacy')\">æˆ‘å·²æ‚‰çŸ¥å¹¶åŒæ„</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- å¾®ä¿¡æˆæƒå¼¹çª—ï¼ˆåº•éƒ¨å¼¹å‡ºï¼‰ -->\r\n    <view class=\"auth-popup\" :class=\"{'auth-popup-show': showAuthPopup}\">\r\n      <view class=\"auth-popup-mask\" @click=\"cancelAuth\"></view>\r\n      <view class=\"auth-popup-content\">\r\n        <view class=\"auth-popup-header\">\r\n          <text class=\"auth-popup-title\">{{authPopupTitle}}</text>\r\n          <text class=\"auth-popup-close\" @click=\"cancelAuth\">Ã—</text>\r\n        </view>\r\n        \r\n        <!-- å¤´åƒæˆæƒæ­¥éª¤ -->\r\n        <view class=\"auth-step\" v-if=\"authStep === 'avatar'\">\r\n          <view class=\"auth-desc\">è¯·é€‰æ‹©æ‚¨çš„å¤´åƒ</view>\r\n          <button class=\"avatar-btn\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseAvatar\">\r\n            é€‰æ‹©å¤´åƒ\r\n          </button>\r\n          <button class=\"auth-next-btn\" @click=\"goToNicknameStep\">è·³è¿‡</button>\r\n        </view>\r\n        \r\n        <!-- æ˜µç§°æˆæƒæ­¥éª¤ -->\r\n        <view class=\"auth-step\" v-if=\"authStep === 'nickname'\">\r\n          <view class=\"nickname-input-wrap\">\r\n            <text class=\"input-label\">æ˜µç§°</text>\r\n            <input class=\"nickname-input\" type=\"nickname\" placeholder=\"è¯·è¾“å…¥æ‚¨çš„æ˜µç§°\" :value=\"tempUserInfo.nickName\" @input=\"onInputNickname\" />\r\n          </view>\r\n          <button class=\"auth-next-btn\" @click=\"goToPhoneStep\" :disabled=\"!tempUserInfo.nickName\">ä¸‹ä¸€æ­¥</button>\r\n        </view>\r\n        \r\n        <!-- æ‰‹æœºå·æˆæƒæ­¥éª¤ -->\r\n        <view class=\"auth-step\" v-if=\"authStep === 'phone'\">\r\n          <view class=\"phone-auth-desc\">\r\n            <view class=\"phone-icon\">ğŸ“±</view>\r\n            <view class=\"phone-text\">æˆæƒè·å–æ‰‹æœºå·</view>\r\n            <view class=\"phone-tip\">åº”ç”¨å°†è·å–æ‚¨å¾®ä¿¡ç»‘å®šçš„æ‰‹æœºå·</view>\r\n          </view>\r\n          <button class=\"phone-btn\" open-type=\"getPhoneNumber\" @getphonenumber=\"getPhoneNumber\">\r\n            ä¸€é”®æˆæƒæ‰‹æœºå·\r\n          </button>\r\n          <view class=\"phone-skip\" @click=\"skipPhoneAuth\">\r\n            <text>æš‚ä¸æˆæƒ</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nimport { Navigator, IndexRoutes } from '../../router/Router';\r\nimport { mapState, mapMutations, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      hasLogin: false,\r\n      userInfo: {\r\n        nickName: '',\r\n        avatarUrl: ''\r\n      },\r\n      showAgreementModal: false,\r\n      showPrivacyModal: false,\r\n      // æ–°å¢æˆæƒç›¸å…³æ•°æ®\r\n      showAuthPopup: false,\r\n      authStep: 'avatar', // 'avatar', 'nickname', 'phone'\r\n      tempUserInfo: {\r\n        nickName: '',\r\n        avatarUrl: '',\r\n        phoneNumber: ''\r\n      },\r\n      wxLoginCode: '', // å­˜å‚¨å¾®ä¿¡ç™»å½•çš„code\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('user/baseInfo', ['isRegistered', 'id', 'avatar', 'name', 'phoneNumber']),\r\n    \r\n    /**\r\n     * æ ¹æ®å½“å‰æˆæƒæ­¥éª¤è¿”å›å¼¹çª—æ ‡é¢˜\r\n     * @returns {string} å¼¹çª—æ ‡é¢˜\r\n     */\r\n    authPopupTitle() {\r\n      const titles = {\r\n        'avatar': 'é€‰æ‹©å¤´åƒ',\r\n        'nickname': 'è®¾ç½®æ˜µç§°',\r\n        'phone': 'ç»‘å®šæ‰‹æœºå·'\r\n      };\r\n      return titles[this.authStep] || 'å¾®ä¿¡æˆæƒ';\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.checkLoginStatus();\r\n  },\r\n  methods: {\r\n    ...mapMutations('user/baseInfo', ['SET_USER_INFO']),\r\n    ...mapActions('user/baseInfo', ['updateUserInfo']),\r\n    \r\n    // æ£€æŸ¥ç™»å½•çŠ¶æ€\r\n    checkLoginStatus() {\r\n      const token = uni.getStorageSync('token');\r\n      \r\n      if (token && this.isRegistered) {\r\n        this.hasLogin = true;\r\n        \r\n        // ä»Vuexè·å–ç”¨æˆ·ä¿¡æ¯\r\n        this.userInfo = {\r\n          nickName: this.name,\r\n          avatarUrl: this.avatar\r\n        };\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * å¾®ä¿¡ç™»å½•æ–¹æ³• - æ›´æ–°ä¸ºæ–°æµç¨‹\r\n     * @returns {void}\r\n     */\r\n    onWxLogin() {\r\n      uni.showLoading({\r\n        title: 'ç™»å½•ä¸­...'\r\n      });\r\n      \r\n      uni.login({\r\n        provider: 'weixin',\r\n        success: (res) => {\r\n          uni.hideLoading();\r\n          if (res.code) {\r\n            // ä¿å­˜codeç”¨äºåç»­è¯·æ±‚\r\n            this.wxLoginCode = res.code;\r\n            \r\n            // æ˜¾ç¤ºæˆæƒå¼¹çª—\r\n            this.showAuthPopup = true;\r\n            this.authStep = 'avatar';\r\n          } else {\r\n            uni.showToast({\r\n              title: 'å¾®ä¿¡ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n              icon: 'none'\r\n            });\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          uni.__f__('error','at pages/login/wechat_login.vue:222','å¾®ä¿¡ç™»å½•å¤±è´¥', err);\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * å¤„ç†ç”¨æˆ·é€‰æ‹©å¤´åƒäº‹ä»¶\r\n     * @param {Object} e - å¾®ä¿¡è¿”å›çš„å¤´åƒä¿¡æ¯\r\n     */\r\n    onChooseAvatar(e) {\r\n      if (e.detail && e.detail.avatarUrl) {\r\n        this.tempUserInfo.avatarUrl = e.detail.avatarUrl;\r\n        // åŒæ—¶æ›´æ–°é¡¶éƒ¨å¤´åƒæ˜¾ç¤º\r\n        this.userInfo.avatarUrl = e.detail.avatarUrl;\r\n        \r\n        // è‡ªåŠ¨è·³è½¬åˆ°æ˜µç§°æ­¥éª¤\r\n        this.goToNicknameStep();\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * å¤„ç†ç”¨æˆ·è¾“å…¥æ˜µç§°äº‹ä»¶\r\n     * @param {Object} e - è¾“å…¥äº‹ä»¶å¯¹è±¡\r\n     */\r\n    onInputNickname(e) {\r\n      this.tempUserInfo.nickName = e.detail.value;\r\n      // åŒæ—¶æ›´æ–°é¡¶éƒ¨æ˜µç§°æ˜¾ç¤º\r\n      this.userInfo.nickName = e.detail.value;\r\n    },\r\n    \r\n    /**\r\n     * è¿›å…¥æ˜µç§°è®¾ç½®æ­¥éª¤\r\n     */\r\n    goToNicknameStep() {\r\n      this.authStep = 'nickname';\r\n    },\r\n    \r\n    /**\r\n     * è¿›å…¥æ‰‹æœºå·æˆæƒæ­¥éª¤\r\n     */\r\n    goToPhoneStep() {\r\n      this.authStep = 'phone';\r\n    },\r\n    \r\n    /**\r\n     * è·å–å¾®ä¿¡ç»‘å®šæ‰‹æœºå·\r\n     * @param {Object} e - å¾®ä¿¡è¿”å›çš„åŠ å¯†æ•°æ®\r\n     */\r\n    getPhoneNumber(e) {\r\n      if (e.detail.errMsg === 'getPhoneNumber:ok') {\r\n        // å‡†å¤‡æäº¤æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯åˆ°åç«¯\r\n        this.submitUserInfo({\r\n          code: this.wxLoginCode,\r\n          encryptedData: e.detail.encryptedData,\r\n          iv: e.detail.iv,\r\n          avatarUrl: this.tempUserInfo.avatarUrl,\r\n          nickName: this.tempUserInfo.nickName\r\n        });\r\n      } else {\r\n        uni.showToast({\r\n          title: 'æœªæˆæƒæ‰‹æœºå·ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * è·³è¿‡æ‰‹æœºå·æˆæƒ\r\n     */\r\n    skipPhoneAuth() {\r\n      // åªæäº¤å¤´åƒå’Œæ˜µç§°\r\n      this.submitUserInfo({\r\n        code: this.wxLoginCode,\r\n        avatarUrl: this.tempUserInfo.avatarUrl,\r\n        nickName: this.tempUserInfo.nickName\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * æäº¤ç”¨æˆ·ä¿¡æ¯åˆ°åç«¯\r\n     * @param {Object} data - è¦æäº¤çš„ç”¨æˆ·æ•°æ®\r\n     */\r\n    async submitUserInfo(data) {\r\n      uni.showLoading({\r\n        title: 'æäº¤ä¸­...'\r\n      });\r\n      \r\n      try {\r\n        const result = await uni.request({\r\n          method: \"POST\",\r\n          url: \"http://localhost:8080/users/auth/wechat/profile\",\r\n          data: data\r\n        });\r\n        \r\n        if (result.statusCode === 200 && result.data) {\r\n          // å­˜å‚¨tokenåˆ°æœ¬åœ°\r\n          uni.setStorageSync('token', result.data.token);\r\n          \r\n          // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯\r\n          if (result.data.userId) {\r\n            uni.setStorageSync('userId', result.data.userId);\r\n            \r\n            // ä½¿ç”¨Vuexæ›´æ–°ç”¨æˆ·ä¿¡æ¯\r\n            this.SET_USER_INFO({\r\n              id: result.data.userId,\r\n              isRegistered: 1,\r\n              name: this.tempUserInfo.nickName,\r\n              avatar: this.tempUserInfo.avatarUrl,\r\n              phoneNumber: result.data.phoneNumber || ''\r\n            });\r\n            \r\n            // æ›´æ–°æœ¬åœ°æ˜¾ç¤ºçš„ç”¨æˆ·ä¿¡æ¯\r\n            this.userInfo = {\r\n              nickName: this.tempUserInfo.nickName,\r\n              avatarUrl: this.tempUserInfo.avatarUrl\r\n            };\r\n          }\r\n          \r\n          uni.hideLoading();\r\n          \r\n          // æç¤ºç™»å½•æˆåŠŸ\r\n          uni.showToast({\r\n            title: 'ç™»å½•æˆåŠŸ',\r\n            icon: 'success',\r\n            duration: 1500\r\n          });\r\n          \r\n          // è®¾ç½®ç™»å½•çŠ¶æ€å¹¶å…³é—­å¼¹çª—\r\n          this.hasLogin = true;\r\n          this.showAuthPopup = false;\r\n          \r\n          // å»¶è¿Ÿè·³è½¬\r\n          setTimeout(() => {\r\n            Navigator.redirectTo(IndexRoutes.INDEX);\r\n          }, 1500);\r\n        } else {\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        uni.__f__('error','at pages/login/wechat_login.vue:370','æäº¤ç”¨æˆ·ä¿¡æ¯å¤±è´¥', error);\r\n        uni.hideLoading();\r\n        uni.showToast({\r\n          title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * å–æ¶ˆæˆæƒï¼Œå…³é—­å¼¹çª—\r\n     */\r\n    cancelAuth() {\r\n      this.showAuthPopup = false;\r\n      this.wxLoginCode = '';\r\n      this.tempUserInfo = {\r\n        nickName: '',\r\n        avatarUrl: '',\r\n        phoneNumber: ''\r\n      };\r\n    },\r\n    \r\n    /**\r\n     * æ ¹æ®æ³¨å†ŒçŠ¶æ€è·³è½¬åˆ°ç›¸åº”é¡µé¢\r\n     * @returns {void}\r\n     */\r\n    toHome() {\r\n      Navigator.redirectTo(IndexRoutes.INDEX);\r\n    },\r\n    \r\n    /**\r\n     * æ˜¾ç¤ºç”¨æˆ·åè®®å¼¹çª—\r\n     * @returns {void}\r\n     */\r\n    showAgreement() {\r\n      this.showAgreementModal = true;\r\n    },\r\n    \r\n    /**\r\n     * æ˜¾ç¤ºéšç§æ”¿ç­–å¼¹çª—\r\n     * @returns {void}\r\n     */\r\n    showPrivacy() {\r\n      this.showPrivacyModal = true;\r\n    },\r\n    \r\n    /**\r\n     * å…³é—­å¼¹çª—\r\n     * @param {string} type - è¦å…³é—­çš„å¼¹çª—ç±»å‹ï¼ˆ'agreement'æˆ–'privacy'ï¼‰\r\n     * @returns {void}\r\n     */\r\n    closeModal(type) {\r\n      if (type === 'agreement') {\r\n        this.showAgreementModal = false;\r\n      } else if (type === 'privacy') {\r\n        this.showPrivacyModal = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f8f8f8;\r\n  \r\n  .header-bg {\r\n    width: 100%;\r\n    height: 300rpx;\r\n    position: relative;\r\n    \r\n    .bg-image {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n  \r\n  .content {\r\n    flex: 1;\r\n    padding: 0 60rpx;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    \r\n    .welcome-text {\r\n      margin-top: 40rpx;\r\n      margin-bottom: 80rpx;\r\n      text-align: center;\r\n      \r\n      .title {\r\n        display: block;\r\n        font-size: 48rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n      }\r\n      \r\n      .subtitle {\r\n        display: block;\r\n        font-size: 28rpx;\r\n        color: #999;\r\n        margin-top: 20rpx;\r\n      }\r\n    }\r\n    \r\n    .avatar-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      margin-bottom: 80rpx;\r\n      \r\n      .avatar {\r\n        width: 140rpx;\r\n        height: 140rpx;\r\n        border-radius: 50%;\r\n        border: 4rpx solid #fff;\r\n        box-shadow: 0 10rpx 20rpx rgba(0, 0, 0, 0.1);\r\n      }\r\n      \r\n      .nickname {\r\n        margin-top: 20rpx;\r\n        font-size: 32rpx;\r\n        color: #333;\r\n      }\r\n    }\r\n    \r\n    .login-btn {\r\n      width: 100%;\r\n      height: 90rpx;\r\n      line-height: 90rpx;\r\n      border-radius: 45rpx;\r\n      background: linear-gradient(to right, #07C160, #09BB07);\r\n      color: #fff;\r\n      font-size: 32rpx;\r\n      padding: 0;\r\n      border: none;\r\n      box-shadow: 0 10rpx 20rpx rgba(7, 193, 96, 0.3);\r\n      \r\n      &.logged-in {\r\n        background: linear-gradient(to right, #1989fa, #3194fa);\r\n        box-shadow: 0 10rpx 20rpx rgba(25, 137, 250, 0.3);\r\n      }\r\n\r\n      .btn-content {\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n      }\r\n      \r\n      .wechat-icon {\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n        margin-right: 15rpx;\r\n      }\r\n\r\n      .login-text {\r\n        display: inline-block;\r\n      }\r\n    }\r\n    \r\n.agreement {\r\n  margin-top: 40rpx;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-wrap: nowrap;\r\n  flex-direction: row;\r\n\r\n  .link-group {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    gap: 6rpx; // æ§åˆ¶ã€Šç”¨æˆ·åè®®ã€‹å’Œä¹‹é—´çš„é—´è·\r\n    margin-left: 8rpx;\r\n  }\r\n\r\n  .link {\r\n    color: #1989fa;\r\n  }\r\n}\r\n  }\r\n  \r\n  // å¼¹çª—æ ·å¼\r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 999;\r\n  }\r\n  \r\n  .modal-content {\r\n    width: 80%;\r\n    max-height: 70vh;\r\n    background-color: #fff;\r\n    border-radius: 20rpx;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .modal-title {\r\n    text-align: center;\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    padding: 30rpx 0;\r\n    color: #333;\r\n    border-bottom: 1px solid #f0f0f0;\r\n  }\r\n  \r\n  .modal-body {\r\n    padding: 30rpx;\r\n    flex: 1;\r\n    overflow-y: auto;\r\n  }\r\n  \r\n  .agreement-text {\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    line-height: 1.6;\r\n  }\r\n  \r\n  .agreement-item {\r\n    margin-bottom: 20rpx;\r\n    \r\n  }\r\n  \r\n  .modal-footer {\r\n    padding: 20rpx 30rpx 40rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    \r\n    .agree-btn {\r\n      width: 80%;\r\n      height: 80rpx;\r\n      line-height: 80rpx;\r\n      text-align: center;\r\n      background: linear-gradient(to right, #1989fa, #3194fa);\r\n      color: #fff;\r\n      font-size: 30rpx;\r\n      border-radius: 40rpx;\r\n      border: none;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      padding: 0;\r\n    }\r\n  }\r\n  \r\n  // æ–°å¢æˆæƒå¼¹çª—æ ·å¼\r\n  .auth-popup {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 999;\r\n    visibility: hidden;\r\n    transform: translateY(100%);\r\n    transition: all 0.3s ease;\r\n    \r\n    &.auth-popup-show {\r\n      visibility: visible;\r\n      transform: translateY(0);\r\n    }\r\n    \r\n    .auth-popup-mask {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background-color: rgba(0, 0, 0, 0.5);\r\n    }\r\n    \r\n    .auth-popup-content {\r\n      position: relative;\r\n      background-color: #fff;\r\n      border-radius: 24rpx 24rpx 0 0;\r\n      padding: 30rpx;\r\n      \r\n      .auth-popup-header {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        position: relative;\r\n        padding-bottom: 30rpx;\r\n        border-bottom: 1px solid #f0f0f0;\r\n        \r\n        .auth-popup-title {\r\n          font-size: 32rpx;\r\n          font-weight: bold;\r\n          color: #333;\r\n        }\r\n        \r\n        .auth-popup-close {\r\n          position: absolute;\r\n          right: 0;\r\n          top: 0;\r\n          font-size: 40rpx;\r\n          color: #999;\r\n          padding: 10rpx;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // å¤´åƒé€‰æ‹©æ­¥éª¤æ ·å¼\r\n  .auth-step {\r\n    padding: 40rpx 0;\r\n    \r\n    .auth-desc {\r\n      text-align: center;\r\n      font-size: 28rpx;\r\n      color: #666;\r\n      margin-bottom: 30rpx;\r\n    }\r\n    \r\n    .avatar-btn {\r\n      width: 100%;\r\n      height: 90rpx;\r\n      line-height: 90rpx;\r\n      border-radius: 45rpx;\r\n      background-color: #07C160;\r\n      color: #fff;\r\n      font-size: 32rpx;\r\n      margin-bottom: 30rpx;\r\n    }\r\n    \r\n    .auth-next-btn {\r\n      width: 100%;\r\n      height: 90rpx;\r\n      line-height: 90rpx;\r\n      border-radius: 45rpx;\r\n      background-color: #1989fa;\r\n      color: #fff;\r\n      font-size: 32rpx;\r\n      \r\n      &[disabled] {\r\n        background-color: #cccccc;\r\n        color: #ffffff;\r\n        opacity: 0.6;\r\n      }\r\n    }\r\n    \r\n    // æ˜µç§°è¾“å…¥æ ·å¼\r\n    .nickname-input-wrap {\r\n      margin-bottom: 40rpx;\r\n      \r\n      .input-label {\r\n        display: block;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        margin-bottom: 20rpx;\r\n      }\r\n      \r\n      .nickname-input {\r\n        width: 100%;\r\n        height: 90rpx;\r\n        border: 1px solid #e5e5e5;\r\n        border-radius: 8rpx;\r\n        padding: 0 20rpx;\r\n        font-size: 28rpx;\r\n      }\r\n    }\r\n    \r\n    // æ‰‹æœºå·æˆæƒæ ·å¼\r\n    .phone-auth-desc {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      margin-bottom: 40rpx;\r\n      \r\n      .phone-icon {\r\n        font-size: 60rpx;\r\n        margin-bottom: 20rpx;\r\n      }\r\n      \r\n      .phone-text {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        margin-bottom: 10rpx;\r\n      }\r\n      \r\n      .phone-tip {\r\n        font-size: 24rpx;\r\n        color: #999;\r\n      }\r\n    }\r\n    \r\n    .phone-btn {\r\n      width: 100%;\r\n      height: 90rpx;\r\n      line-height: 90rpx;\r\n      border-radius: 45rpx;\r\n      background-color: #07C160;\r\n      color: #fff;\r\n      font-size: 32rpx;\r\n      margin-bottom: 20rpx;\r\n    }\r\n    \r\n    .phone-skip {\r\n      text-align: center;\r\n      font-size: 28rpx;\r\n      color: #999;\r\n      padding: 20rpx;\r\n    }\r\n  }\r\n}\r\n</style> ","import MiniProgramPage from 'E:/ç ”å¸ˆå½•ä¸å…¶ä»–äººå…±äº«æ–‡ä»¶/teacherDirectory/vueå®ç°LottieåŠ¨ç”»ä»£ç /pages/login/wechat_login.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","mapState","mapMutations","mapActions","uni","Navigator","IndexRoutes"],"mappings":"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"}