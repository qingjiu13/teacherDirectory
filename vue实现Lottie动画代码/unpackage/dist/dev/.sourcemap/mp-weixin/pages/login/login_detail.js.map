<<<<<<< HEAD
{"version":3,"file":"login_detail.js","sources":["pages/login/login_detail.vue","../../../HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW5fZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"form-container\">\r\n    <!-- 表单内容 -->\r\n    <view class=\"form-card\">\r\n      <!-- Nickname -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">昵称</text>\r\n        <input class=\"form-input\" type=\"text\" v-model=\"formData.nickname\" placeholder=\"请输入昵称\" />\r\n      </view>\r\n      \r\n      <!-- Gender -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">性别</text>\r\n        <view class=\"radio-group\">\r\n          <view class=\"radio-item\">\r\n            <radio :checked=\"formData.gender === '男'\" @click=\"formData.gender = '男'\" color=\"#007AFF\" />\r\n            <text>男</text>\r\n          </view>\r\n          <view class=\"radio-item\">\r\n            <radio :checked=\"formData.gender === '女'\" @click=\"formData.gender = '女'\" color=\"#007AFF\" />\r\n            <text>女</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- Phone Number -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">手机号</text>\r\n        <input class=\"form-input\" type=\"text\" v-model=\"formData.phone\" placeholder=\"请输入手机号\" />\r\n      </view>\r\n      \r\n      <!-- School -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">就读学校</text>\r\n        <ChoiceSelected\r\n          class=\"form-select\"\r\n          :choiceIndex=\"formData.schoolIndex\"\r\n          :choiceList=\"schoolList\"\r\n          defaultText=\"请选择学校\"\r\n          mode=\"search\"\r\n          searchPlaceholder=\"输入学校名称\"\r\n          @onChoiceClick=\"handleSchoolSelect\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- Major -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">就读专业</text>\r\n        <ChoiceSelected\r\n          class=\"form-select\"\r\n          :choiceIndex=\"formData.majorIndex\"\r\n          :choiceList=\"majorList\"\r\n          defaultText=\"请选择专业\"\r\n          mode=\"search\"\r\n          searchPlaceholder=\"输入专业名称\"\r\n          @onChoiceClick=\"handleMajorSelect\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- Grade -->\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">年级</text>\r\n        <ChoiceSelected\r\n          class=\"form-select\"\r\n          :choiceIndex=\"formData.gradeIndex\"\r\n          :choiceList=\"gradeList\"\r\n          defaultText=\"请选择年级\"\r\n          mode=\"select\"\r\n          @onChoiceClick=\"handleGradeSelect\"\r\n        />\r\n      </view>\r\n\r\n      <!-- 添加教师特有的字段，根据角色条件渲染 -->\r\n      <view class=\"form-row\" v-if=\"userRole === '老师'\">\r\n        <text class=\"form-label\">考研分数</text>\r\n        <input class=\"form-input\" type=\"number\" v-model=\"formData.teacherScore\" placeholder=\"请输入考研分数\" />\r\n      </view>\r\n      \r\n      <!-- 按钮区域 -->\r\n      <view class=\"button-container\">\r\n        <button class=\"submit-btn\" @click=\"submitForm\">提交信息</button>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nimport ChoiceSelected from '../../components/combobox/combobox'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  components: {\r\n    ChoiceSelected,\r\n  },\r\n  data() {\r\n    return {\r\n      formData: {\r\n        nickname: '',\r\n        gender: '男',\r\n        phone: '',\r\n        schoolIndex: -1,\r\n        majorIndex: -1,\r\n        gradeIndex: -1,\r\n        teacherScore: ''\r\n      },\r\n      schoolList: [\r\n        '北京大学',\r\n        '清华大学',\r\n        '复旦大学',\r\n        '上海交通大学',\r\n        '浙江大学',\r\n      ],\r\n      majorList: [\r\n        '计算机科学',\r\n        '电子工程',\r\n        '机械工程',\r\n        '经济学',\r\n        '法学',\r\n      ],\r\n      gradeList: ['大一', '大二', '大三', '大四', '研究生'],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      userRole: state => state.user.baseInfo.userInfo.role\r\n    })\r\n  },\r\n  methods: {\r\n    handleSchoolSelect(index) {\r\n      this.formData.schoolIndex = index;\r\n    },\r\n    handleMajorSelect(index) {\r\n      this.formData.majorIndex = index;\r\n    },\r\n    handleGradeSelect(index) {\r\n      this.formData.gradeIndex = index;\r\n    },\r\n    /**\r\n     * 提交表单信息\r\n     */\r\n    submitForm() {\r\n      // 验证表单内容\r\n      if (!this.validateForm()) {\r\n        return;\r\n      }\r\n      \r\n      // 构建用户信息对象\r\n      const userInfo = {\r\n        name: this.formData.nickname,\r\n        gender: this.formData.gender,\r\n        phoneNumber: this.formData.phone,\r\n        userInfo: {\r\n          school: this.schoolList[this.formData.schoolIndex] || '',\r\n          major: this.majorList[this.formData.majorIndex] || '',\r\n          studentGrade: this.userRole === '学生' ? this.gradeList[this.formData.gradeIndex] || '' : '',\r\n          teacherGrade: this.userRole === '老师' ? this.gradeList[this.formData.gradeIndex] || '' : '',\r\n        }\r\n      };\r\n      \r\n      // 如果是老师，添加考研分数\r\n      if (this.userRole === '老师' && this.formData.teacherScore) {\r\n        userInfo.userInfo.teacherScore = parseInt(this.formData.teacherScore);\r\n      }\r\n      \r\n      // 更新用户信息到vuex\r\n      this.$store.commit('user/baseInfo/UPDATE_USER_INFO', userInfo);\r\n      \r\n      // 提示成功\r\n      uni.showToast({\r\n        title: '信息保存成功',\r\n        icon: 'success'\r\n      });\r\n      \r\n      // 跳转到下一个页面\r\n      setTimeout(() => {\r\n        uni.switchTab({\r\n          url: '/pages/index/index'\r\n        });\r\n      }, 1500);\r\n    },\r\n    /**\r\n     * 验证表单内容\r\n     * @returns {boolean} 验证是否通过\r\n     */\r\n    validateForm() {\r\n      if (!this.formData.nickname) {\r\n        uni.showToast({\r\n          title: '请输入昵称',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      if (!this.formData.phone) {\r\n        uni.showToast({\r\n          title: '请输入手机号',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      if (this.formData.schoolIndex === -1) {\r\n        uni.showToast({\r\n          title: '请选择学校',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      if (this.formData.majorIndex === -1) {\r\n        uni.showToast({\r\n          title: '请选择专业',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      if (this.formData.gradeIndex === -1) {\r\n        uni.showToast({\r\n          title: '请选择年级',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      if (this.userRole === '老师' && !this.formData.teacherScore) {\r\n        uni.showToast({\r\n          title: '请输入考研分数',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  created() {\r\n    uni.__f__('log','at pages/login/login_detail.vue:232','当前用户角色:', this.userRole);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.form-container {\r\n  padding: 30rpx;\r\n}\r\n\r\n.form-card {\r\n  background-color: #fff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-row {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 28rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.radio-group {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.radio-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 40rpx;\r\n  \r\n  text {\r\n    font-size: 28rpx;\r\n    margin-left: 10rpx;\r\n    color: #333;\r\n  }\r\n}\r\n\r\n.form-select {\r\n  width: 100%;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.button-container {\r\n  margin-top: 50rpx;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  height: 90rpx;\r\n  line-height: 90rpx;\r\n  text-align: center;\r\n  background-color: #007AFF;\r\n  color: #fff;\r\n  font-size: 32rpx;\r\n  border-radius: 45rpx;\r\n}\r\n</style>","import MiniProgramPage from 'D:/github/teacherDirectory/vue实现Lottie动画代码/pages/login/login_detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","mapState","uni"],"mappings":"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"}
=======
{"version":3,"file":"login_detail.js","sources":["../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW5fZGV0YWlsLnZ1ZQ"],"sourcesContent":["import MiniProgramPage from 'E:/yanshilu重新来过/vue实现Lottie动画代码/pages/login/login_detail.vue'\nwx.createPage(MiniProgramPage)"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,GAAG,WAAW,eAAe;"}
>>>>>>> a2bf9657a39810a133593f8de99b785a81f8875d
