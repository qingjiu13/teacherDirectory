{"version":3,"file":"AI.js","sources":["pages/AI/AI.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQUkvQUkudnVl"],"sourcesContent":["<template>\n\t<Header :title=\"'AI助手'\" @back=\"handleBack\" />\n\t<view class=\"page-container\" @click=\"onPageClick\">\n\t\t<!-- 导航栏和侧边栏 -->\n\t\t<view class=\"nav-sidebar-container\">\n\t\t\t<!-- 侧边栏遮罩层 -->\n\t\t\t<view class=\"sidebar-mask\" v-if=\"sidebarVisible\" @click.stop=\"closeSidebar\" :style=\"{opacity: sidebarVisible ? 0.5 : 0}\"></view>\n\t\t\t\n\t\t\t<!-- 历史记录侧边栏 -->\n\t\t\t<history-sidebar\n\t\t\t\t:visible=\"sidebarVisible\"\n\t\t\t\t:history-summaries=\"historySummaries\"\n\t\t\t\t:current-chat-id=\"currentChatId\"\n\t\t\t\t@load-chat=\"loadChatHistory\"\n\t\t\t\t@delete-chat=\"deleteChatHistory\">\n\t\t\t</history-sidebar>\n\t\t\t\n\t\t\t<!-- 主内容区域 -->\n\t\t\t<view class=\"main-wrapper\" :class=\"{shifted: sidebarVisible}\">\n\t\t\t\t<!-- 顶部导航栏 -->\n\t\t\t\t<view class=\"nav-bar\">\n\t\t\t\t\t<view class=\"nav-left\">\n\t\t\t\t\t\t<view class=\"history-btn\" @click.stop=\"toggleSidebar\">\n\t\t\t\t\t\t\t<image src=\"/static/image/AIchat/chatHistory.png\" class=\"history-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-title\">\n\t\t\t\t\t\t<mode-selector\n\t\t\t\t\t\t\t:current-mode=\"currentMode\"\n\t\t\t\t\t\t\t:inNav=\"true\"\n\t\t\t\t\t\t\t@mode-change=\"switchMode\">\n\t\t\t\t\t\t</mode-selector>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-right\">\n\t\t\t\t\t\t<view class=\"new-chat-btn\" @click.stop=\"startNewChat\">\n\t\t\t\t\t\t\t<image src=\"/static/image/AIchat/newChat.png\" class=\"new-chat-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 主内容区域 -->\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"main-content\" @scroll=\"onScroll\">\n\t\t\t\t\t<!-- 筛选区域 -->\n\t\t\t\t\t<view class=\"filter-section\">\n\t\t\t\t\t\t<view class=\"filter-content\">\n\t\t\t\t\t\t\t<!-- 学校筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">所在学校：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"schoolIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"schoolList\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择学校\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入学校名称\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleSchoolSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleSchoolSearch\"\n\t\t\t\t\t\t\t\t\t\tref=\"schoolDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 专业筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">专业：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"majorIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"majorList\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择专业\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入专业名称\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleMajorSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleMajorSearch\"\n\t\t\t\t\t\t\t\t\t\tref=\"majorDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 消息区域 -->\n\t\t\t\t\t<message-list\n\t\t\t\t\t\t:messages=\"messages\"\n\t\t\t\t\t\t:auto-scroll-id=\"autoScrollId\"\n\t\t\t\t\t\t@retry-message=\"retryMessage\"\n\t\t\t\t\t\t@update-auto-scroll-id=\"autoScrollId = $event\"\n\t\t\t\t\t\tref=\"messageList\">\n\t\t\t\t\t</message-list>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 输入区域 -->\n\t\t\t\t\t<input-section\n\t\t\t\t\t\t:is-processing=\"isProcessing\"\n\t\t\t\t\t\t@send=\"sendMessage\">\n\t\t\t\t\t</input-section>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 加载提示 -->\n\t\t<view class=\"loading-mask\" v-if=\"isFullLoading\">\n\t\t\t<view class=\"loading-content\">\n\t\t\t\t<text>{{loadingText}}</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport HistorySidebar from '../../components/ai-chat/HistorySidebar'\n\timport MessageList from '../../components/ai-chat/MessageList'\n\timport ModeSelector from '../../components/ai-chat/ModeSelector'\n\timport InputSection from '../../components/ai-chat/InputSection'\n\timport ChoiceSelected from '../../components/combobox/combobox'\n\timport store from '../../store'\n\timport schoolData from '../../static/data/2886所大学.json';\n\timport majorData from '../../static/data/本科专业.json';\n\timport { mapState } from 'vuex';\n\timport createDataModule from '../../components/combobox/undergraduate.js';\n\timport Header from '../../components/navigationTitleBar/header.vue';\n\timport { Navigator } from '/router/Router.js'\n\n\t\n\t\n\t// 消息类型常量\n\tconst MESSAGE_TYPE = {\n\t\tUSER: 'user',\n\t\tAI: 'AI',\n\t\tSYSTEM: 'system'\n\t}\n\t\n\t// 消息状态常量\n\tconst MESSAGE_STATUS = {\n\t\tSENDING: 'sending',\n\t\tSENT: 'sent',\n\t\tERROR: 'error'\n\t}\n\t\n\t// 对话模式常量\n\tconst CHAT_MODE = {\n\t\tGENERAL: 'general',\n\t\tSCHOOL: 'school',\n\t\tCAREER: 'career'\n\t}\n\t\n\texport default {\n\t\tonPageScroll() {\n\t\t\t// 通知所有组件页面已滚动\n\t\t\tuni.$emit('page-scroll');\n  \t\t},\n\t\tcomponents: {\n\t\t\tHistorySidebar,\n\t\t\tMessageList,\n\t\t\tModeSelector,\n\t\t\tInputSection,\n\t\t\tChoiceSelected,\n\t\t\tHeader\n\t\t},\n\t\tcomputed: {\n\t\t\t// 从Vuex获取状态\n\t\t\t...mapState('user/aiChat', {\n\t\t\t\tstoreHistorySummaries: state => state.aiChat.historySummaries,\n\t\t\t\tstoreHistoryChats: state => state.aiChat.conversations,\n\t\t\t\tstoreActiveConversation: state => state.aiChat.activeConversation,\n\t\t\t\tstoreChatMode: state => state.aiChat.chatMode,\n\t\t\t\tstoreUserInfo: state => state.aiChat.userInfo\n\t\t\t}),\n\t\t\t\n\t\t\t// 当前选择的学校和专业\n\t\t\tcurrentSchool() {\n\t\t\t\treturn this.schoolIndex >= 0 ? this.schoolList[this.schoolIndex] : '';\n\t\t\t},\n\t\t\tcurrentMajor() {\n\t\t\t\treturn this.majorIndex >= 0 ? this.majorList[this.majorIndex] : '';\n\t\t\t},\n\t\t\t\n\t\t\t// 当前模式名称\n\t\t\tcurrentModeName() {\n\t\t\t\tconst modeNames = {\n\t\t\t\t\t[CHAT_MODE.GENERAL]: '通用',\n\t\t\t\t\t[CHAT_MODE.SCHOOL]: '择校',\n\t\t\t\t\t[CHAT_MODE.CAREER]: '职业规划'\n\t\t\t\t};\n\t\t\t\treturn modeNames[this.currentMode] || '通用';\n\t\t\t},\n\t\t\t\n\t\t\t// 兼容计算属性\n\t\t\thistorySummaries() {\n\t\t\t\treturn this.storeHistorySummaries;\n\t\t\t},\n\t\t\thistoryChats() {\n\t\t\t\treturn this.storeHistoryChats || [];\n\t\t\t},\n\t\t\tactiveConversation() {\n\t\t\t\treturn this.storeActiveConversation;\n\t\t\t},\n\t\t\tchatMode() {\n\t\t\t\treturn this.storeChatMode;\n\t\t\t},\n\t\t\t\n\t\t\t// 筛选后的学校列表\n\t\t\tfilteredSchoolList() {\n\t\t\t\tif (!this.schoolStore) return [];\n\t\t\t\treturn this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t},\n\t\t\t\n\t\t\t// 筛选后的专业列表\n\t\t\tfilteredMajorList() {\n\t\t\t\tif (!this.majorStore) return [];\n\t\t\t\treturn this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 消息相关\n\t\t\t\tmessages: [],\n\t\t\t\tisProcessing: false,\n\t\t\t\tisFullLoading: false, \n\t\t\t\tloadingText: '正在加载...',\n\t\t\t\tautoScrollId: '',\n\t\t\t\t\n\t\t\t\t// 对话模式\n\t\t\t\tcurrentMode: CHAT_MODE.GENERAL,\n\t\t\t\t\n\t\t\t\t// 学校和专业选择\n\t\t\t\tschoolIndex: -1,\n\t\t\t\tmajorIndex: -1,\n\t\t\t\tschoolList: [],\n\t\t\t\tmajorList: [],\n\t\t\t\t\n\t\t\t\t// 搜索相关\n\t\t\t\tschoolStore: null,\n\t\t\t\tmajorStore: null,\n\t\t\t\t\n\t\t\t\t// 滚动相关\n\t\t\t\tisAutoScrollEnabled: true,\n\t\t\t\t\n\t\t\t\t// 当前会话控制器\n\t\t\t\tcurrentController: null,\n\t\t\t\t\n\t\t\t\t// 上下文信息\n\t\t\t\tcontextInfo: {},\n\t\t\t\t\n\t\t\t\t// 导航栏和侧边栏\n\t\t\t\tsidebarVisible: false,\n\t\t\t\tcurrentChatId: null\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t// 监听activeConversation的变化\n\t\t\tstoreActiveConversation: {\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tif (newVal && typeof newVal === 'object' && newVal.chatId) {\n\t\t\t\t\t\tthis.currentChatId = newVal.chatId;\n\t\t\t\t\t\tif (newVal.chatMode) {\n\t\t\t\t\t\t\tthis.currentMode = newVal.chatMode;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (newVal) {\n\t\t\t\t\t\tthis.currentChatId = newVal;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听用户信息变化\n\t\t\tstoreUserInfo: {\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\tthis.setUserSelectionIndexes();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdeep: true,\n\t\t\t\timmediate: true\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t/**\n\t\t\t * @description 页面加载时的处理逻辑\n\t\t\t */\n\t\t\t// 加载大学数据\n\t\t\tthis.loadUniversityData();\n\t\t\t\n\t\t\t// 获取用户信息并初始化\n\t\t\tthis.syncUserInfoFromVuex();\n\t\t\t\n\t\t\t// 添加欢迎消息\n\t\t\tthis.addSystemMessage('欢迎使用研师录AI助手，请选择您的所在学校和专业，然后开始提问');\n\t\t\t\n\t\t\t// 加载历史会话\n\t\t\tthis.loadChatHistoryFromStorage();\n\t\t},\n\t\tonShow() {\n\t\t\t// 页面显示时刷新历史记录\n\t\t\tthis.loadChatHistoryFromStorage();\n\t\t\t\n\t\t\t// 刷新用户信息\n\t\t\tthis.syncUserInfoFromVuex();\n\t\t},\n\t\tonUnload() {\n\t\t\t// 页面卸载时中断请求\n\t\t\tthis.abortCurrentRequest();\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * @description 初始化学校和专业搜索引擎\n\t\t\t */\n\t\t\tinitSchoolAndMajorSearch() {\n\t\t\t\t// 初始化本科学校数据状态\n\t\t\t\tthis.schoolStore = createDataModule(schoolData);\n\t\t\t\t\n\t\t\t\t// 初始化本科专业数据状态\n\t\t\t\tthis.majorStore = createDataModule(majorData);\n\t\t\t\t\n\t\t\t\t// 初始化搜索引擎\n\t\t\t\tthis.schoolStore.actions.initSearch({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.majorStore.actions.initSearch({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 初始填充数据\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从JSON文件加载大学数据\n\t\t\t */\n\t\t\tloadUniversityData() {\n\t\t\t\ttry {\n\t\t\t\t\t// 初始化学校和专业搜索引擎\n\t\t\t\t\tthis.initSchoolAndMajorSearch();\n\t\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:347','加载大学数据成功');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:349','加载数据失败:', error);\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:350','错误详情:', error.message, error.stack);\n\t\t\t\t\t\n\t\t\t\t\t// 设置默认学校列表\n\t\t\t\t\tconst defaultSchools = [\"北京大学\", \"清华大学\", \"复旦大学\"];\n\t\t\t\t\t\n\t\t\t\t\t// 设置学校列表\n\t\t\t\t\tthis.schoolList = defaultSchools;\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '加载大学数据失败，使用默认列表',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理页面点击事件，关闭下拉框\n\t\t\t */\n\t\t\tonPageClick() {\n\t\t\t\tthis.closeAllDropdowns();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 关闭所有下拉框\n\t\t\t */\n\t\t\tcloseAllDropdowns() {\n\t\t\t\tconst dropdowns = ['schoolDropdown', 'majorDropdown'];\n\t\t\t\tdropdowns.forEach(dropdown => {\n\t\t\t\t\tif (this.$refs && this.$refs[dropdown]) {\n\t\t\t\t\t\tthis.$refs[dropdown].closeDropdown && this.$refs[dropdown].closeDropdown();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从Vuex同步用户信息\n\t\t\t */\n\t\t\tsyncUserInfoFromVuex() {\n\t\t\t\t// 从Vuex获取用户信息\n\t\t\t\tif (this.storeUserInfo) {\n\t\t\t\t\t// 设置选中索引\n\t\t\t\t\tthis.setUserSelectionIndexes();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 根据用户信息设置学校和专业索引\n\t\t\t */\n\t\t\tsetUserSelectionIndexes() {\n\t\t\t\tif (!this.storeUserInfo) return;\n\t\t\t\t\n\t\t\t\tif (this.storeUserInfo.school && this.schoolList.length > 0) {\n\t\t\t\t\tconst schoolIndex = this.schoolList.indexOf(this.storeUserInfo.school);\n\t\t\t\t\tif (schoolIndex !== -1) {\n\t\t\t\t\t\tthis.schoolIndex = schoolIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.storeUserInfo.major && this.majorList.length > 0) {\n\t\t\t\t\tconst majorIndex = this.majorList.indexOf(this.storeUserInfo.major);\n\t\t\t\t\tif (majorIndex !== -1) {\n\t\t\t\t\t\tthis.majorIndex = majorIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {String} school - 选择的学校名称\n\t\t\t */\n\t\t\thandleSchoolSelect(index, school) {\n\t\t\t\tthis.schoolIndex = index;\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_SCHOOL', school);\n\t\t\t\t\n\t\t\t\t// 更新上下文信息\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {String} major - 选择的专业名称\n\t\t\t */\n\t\t\thandleMajorSelect(index, major) {\n\t\t\t\tthis.majorIndex = index;\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_MAJOR', major);\n\t\t\t\t\n\t\t\t\t// 更新上下文信息\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校搜索输入\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleSchoolSearch(keyword) {\n\t\t\t\t// 更新学校搜索关键词\n\t\t\t\tthis.schoolStore.actions.updateFilterKeyword({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t}, keyword);\n\t\t\t\t\n\t\t\t\t// 获取过滤结果\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t\t\n\t\t\t\t// 调试信息\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:464',`学校搜索: \"${keyword}\", 结果数: ${this.schoolList.length}`);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业搜索输入\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleMajorSearch(keyword) {\n\t\t\t\t// 更新专业搜索关键词\n\t\t\t\tthis.majorStore.actions.updateFilterKeyword({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t}, keyword);\n\t\t\t\t\n\t\t\t\t// 获取过滤结果\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t\t\n\t\t\t\t// 调试信息\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:483',`专业搜索: \"${keyword}\", 结果数: ${this.majorList.length}`);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 切换对话模式\n\t\t\t * @param {String} mode - 对话模式\n\t\t\t */\n\t\t\tswitchMode(mode) {\n\t\t\t\tif (this.currentMode === mode) return;\n\t\t\t\t\n\t\t\t\tthis.currentMode = mode;\n\t\t\t\tthis.messages = [];\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.closeSidebar();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 更新对话上下文信息\n\t\t\t */\n\t\t\tupdateContextInfo() {\n\t\t\t\tthis.contextInfo = {\n\t\t\t\t\tmode: this.currentMode,\n\t\t\t\t\tuserSchool: this.currentSchool,\n\t\t\t\t\tuserMajor: this.currentMajor\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 添加系统消息\n\t\t\t * @param {String} content - 消息内容\n\t\t\t */\n\t\t\taddSystemMessage(content) {\n\t\t\t\tthis.messages.push({\n\t\t\t\t\trole: MESSAGE_TYPE.SYSTEM,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tstatus: MESSAGE_STATUS.SENT\n\t\t\t\t});\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 开始新对话\n\t\t\t */\n\t\t\tstartNewChat() {\n\t\t\t\tthis.messages = [];\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.addSystemMessage('开始新对话，请输入您的问题');\n\t\t\t\tthis.closeSidebar();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理消息发送和重试\n\t\t\t * @param {String} messageContent - 消息内容\n\t\t\t * @param {Number} [retryIndex] - 重试消息的索引\n\t\t\t */\n\t\t\tasync handleMessage(messageContent, retryIndex = null) {\n\t\t\t\tif (!messageContent || this.isProcessing) return;\n\t\t\t\t\n\t\t\t\tlet userMessageIndex, aiMessageIndex;\n\t\t\t\t\n\t\t\t\tif (retryIndex === null) {\n\t\t\t\t\t// 新消息\n\t\t\t\t\tuserMessageIndex = this.messages.length;\n\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\trole: MESSAGE_TYPE.USER,\n\t\t\t\t\t\tcontent: messageContent,\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\taiMessageIndex = this.messages.length;\n\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\trole: MESSAGE_TYPE.AI,\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENDING,\n\t\t\t\t\t\tstreaming: false\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 重试消息\n\t\t\t\t\tuserMessageIndex = retryIndex - 1;\n\t\t\t\t\taiMessageIndex = retryIndex;\n\t\t\t\t\tthis.messages[aiMessageIndex].content = '';\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENDING;\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\tthis.isProcessing = true;\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\n\t\t\t\t\tif (!this.currentChatId) {\n\t\t\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst response = await this.$store.dispatch('user/aiChat/testAIQA', {\n\t\t\t\t\t\tquestion: messageContent,\n\t\t\t\t\t\tcontextInfo: this.contextInfo,\n\t\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = response.data;\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENT;\n\t\t\t\t\t\tthis.saveChatHistory();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst errorMessage = response.error?.message || response.message || '获取回复失败，请稍后重试';\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，无法获取回复：${errorMessage}`;\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.showToast(errorMessage, 'none', 3000);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconst errorMsg = error.message || '系统异常，请稍后再试';\n\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，发生了错误：${errorMsg}`;\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\n\t\t\t\t\tthis.showToast(errorMsg, 'none', 3000);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.isProcessing = false;\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 发送消息\n\t\t\t * @param {String} messageContent - 消息内容\n\t\t\t */\n\t\t\tsendMessage(messageContent) {\n\t\t\t\tthis.handleMessage(messageContent);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 重试发送失败的消息\n\t\t\t * @param {Number} index - 消息索引\n\t\t\t */\n\t\t\tretryMessage(index) {\n\t\t\t\tif (index < 1 || this.messages[index].role !== MESSAGE_TYPE.AI) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst userMessage = this.messages[index - 1];\n\t\t\t\tif (userMessage.role !== MESSAGE_TYPE.USER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.handleMessage(userMessage.content, index);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 中断当前请求\n\t\t\t */\n\t\t\tabortCurrentRequest() {\n\t\t\t\tif (this.currentController && this.currentController.abort) {\n\t\t\t\t\tthis.currentController.abort();\n\t\t\t\t\tthis.currentController = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 滚动到底部\n\t\t\t */\n\t\t\tscrollToBottom() {\n\t\t\t\tif (!this.isAutoScrollEnabled) return;\n\t\t\t\t\n\t\t\t\tif (this.messages.length > 0) {\n\t\t\t\t\tthis.autoScrollId = 'msg-' + (this.messages.length - 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理滚动事件\n\t\t\t */\n\t\t\tonScroll(e) {\n\t\t\t\t// 滚动事件处理\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示提示\n\t\t\t * @param {String} message - 提示信息\n\t\t\t * @param {String} [icon='none'] - 提示图标\n\t\t\t * @param {Number} [duration=2000] - 提示持续时间\n\t\t\t */\n\t\t\tshowToast(message, icon = 'none', duration = 2000) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: message,\n\t\t\t\t\ticon: icon,\n\t\t\t\t\tduration: duration\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示/隐藏加载提示\n\t\t\t * @param {String|Boolean} text - 加载提示文本，如果为false则隐藏\n\t\t\t */\n\t\t\ttoggleLoading(text = '正在加载...') {\n\t\t\t\tif (text === false) {\n\t\t\t\t\tthis.isFullLoading = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadingText = text;\n\t\t\t\t\tthis.isFullLoading = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 侧边栏相关方法\n\t\t\ttoggleSidebar() {\n\t\t\t\tthis.sidebarVisible = !this.sidebarVisible;\n\t\t\t},\n\t\t\t\n\t\t\tcloseSidebar() {\n\t\t\t\tthis.sidebarVisible = false;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 加载指定的聊天历史\n\t\t\t * @param {String} chatId - 聊天历史ID\n\t\t\t */\n\t\t\tloadChatHistory(chatId) {\n\t\t\t\tif (!chatId) return;\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tthis.toggleLoading('正在加载对话内容...');\n\t\t\t\t\t\n\t\t\t\t\t// 从本地状态找对话\n\t\t\t\t\tconst conversations = this.historyChats || [];\n\t\t\t\t\tconst conversation = conversations.find(chat => chat.id === chatId);\n\t\t\t\t\t\n\t\t\t\t\tif (conversation) {\n\t\t\t\t\t\t// 设置当前会话ID\n\t\t\t\t\t\tthis.currentChatId = chatId;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 设置对话模式\n\t\t\t\t\t\tif (conversation.chatMode) {\n\t\t\t\t\t\t\tthis.currentMode = conversation.chatMode;\n\t\t\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 构建消息列表\n\t\t\t\t\t\tconst messages = conversation.messages ? conversation.messages.map(msg => {\n\t\t\t\t\t\t\tlet role = msg.role || MESSAGE_TYPE.AI;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!msg.role && msg.id) {\n\t\t\t\t\t\t\t\tif (msg.id.includes('msg-user')) {\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.USER;\n\t\t\t\t\t\t\t\t} else if (msg.id.includes('msg-system')) {\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.SYSTEM;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\trole: role,\n\t\t\t\t\t\t\t\tcontent: msg.content,\n\t\t\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT,\n\t\t\t\t\t\t\t\tstreaming: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}) : [];\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.messages = messages;\n\t\t\t\t\t\tthis.closeSidebar();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 从服务器加载\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/loadChat', chatId).then(response => {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tthis.currentChatId = chatId;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (response.data.chatMode) {\n\t\t\t\t\t\t\t\t\tthis.currentMode = response.data.chatMode;\n\t\t\t\t\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.messages = response.data.messages || [];\n\t\t\t\t\t\t\t\tthis.closeSidebar();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst errorMsg = response.error?.message || response.message || '加载对话失败';\n\t\t\t\t\t\t\t\tthis.showToast(`加载失败: ${errorMsg}`, 'none', 3000);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (response.error?.statusCode >= 500) {\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:799','加载对话内容失败:', error);\n\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\tthis.startNewChat();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从Vuex加载历史会话摘要\n\t\t\t */\n\t\t\tloadChatHistoryFromStorage() {\n\t\t\t\tconst conversations = this.historyChats;\n\t\t\t\t\n\t\t\t\tif (conversations && conversations.length > 0) {\n\t\t\t\t\tconst historySummaries = conversations.map(chat => ({\n\t\t\t\t\t\tid: chat.id,\n\t\t\t\t\t\ttitle: chat.abstract,\n\t\t\t\t\t\tabstract: chat.abstract,\n\t\t\t\t\t\tchatMode: chat.chatMode,\n\t\t\t\t\t\tcreatedAt: chat.createdAt,\n\t\t\t\t\t\tupdatedAt: chat.updatedAt\n\t\t\t\t\t}));\n\t\t\t\t\t\n\t\t\t\t\tthis.$store.commit('user/aiChat/SET_HISTORY_SUMMARIES', historySummaries);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 保存聊天历史摘要到Vuex\n\t\t\t */\n\t\t\tsaveChatHistory() {\n\t\t\t\tif (!this.currentChatId || this.messages.length === 0) return;\n\t\t\t\t\n\t\t\t\tconst firstUserMessage = this.messages.find(msg => msg.role === MESSAGE_TYPE.USER);\n\t\t\t\tconst title = firstUserMessage ? firstUserMessage.content.substring(0, 20) : '新对话';\n\t\t\t\t\n\t\t\t\tconst chatData = {\n\t\t\t\t\tid: this.currentChatId,\n\t\t\t\t\ttitle: title + (title.length >= 20 ? '...' : ''),\n\t\t\t\t\tabstract: title,\n\t\t\t\t\tchatMode: this.currentMode,\n\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString(),\n\t\t\t\t\tmessages: this.messages.map((msg, index) => ({\n\t\t\t\t\t\tid: `msg-${msg.role === MESSAGE_TYPE.USER ? 'user' : 'ai'}-${this.currentChatId}-${index}`,\n\t\t\t\t\t\trole: msg.role,\n\t\t\t\t\t\tcontent: msg.content,\n\t\t\t\t\t\ttimestamp: new Date().toISOString()\n\t\t\t\t\t}))\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_CONVERSATION', chatData);\n\t\t\t\t\n\t\t\t\t// 更新历史摘要\n\t\t\t\tconst summaryData = {\n\t\t\t\t\tid: chatData.id,\n\t\t\t\t\ttitle: chatData.title,\n\t\t\t\t\tabstract: chatData.abstract,\n\t\t\t\t\tchatMode: chatData.chatMode,\n\t\t\t\t\tcreatedAt: chatData.createdAt,\n\t\t\t\t\tupdatedAt: chatData.updatedAt\n\t\t\t\t};\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_HISTORY_SUMMARY', summaryData);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 删除历史记录\n\t\t\t * @param {String} chatId - 历史记录ID\n\t\t\t */\n\t\t\tdeleteChatHistory(chatId) {\n\t\t\t\tif (!chatId) return;\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '确认删除',\n\t\t\t\t\tcontent: '确定要删除这条对话记录吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '正在删除...',\n\t\t\t\t\t\t\t\tmask: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_CONVERSATION', chatId);\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_HISTORY_SUMMARY', chatId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (this.currentChatId === chatId) {\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.showToast('删除成功');\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tthis.showToast('删除失败: ' + (error.message || '系统错误'), 'none', 3000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleBack(){\n\t\t\t\tNavigator.toIndex()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.page-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0;\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #f5f5f5;\n\t\toverflow: hidden;\n\t}\n\t\n\t/* 加载遮罩 */\n\t.loading-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 999;\n\t}\n\t\n\t.loading-content {\n\t\tbackground-color: #ffffff;\n\t\tpadding: 30rpx 60rpx;\n\t\tborder-radius: 20rpx;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.15);\n\t}\n\t\n\t.loading-content text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t.nav-sidebar-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: calc(100vh - var(--status-bar-height));\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\t\n\t.main-wrapper {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttransition: transform 0.3s ease, opacity 0.3s ease;\n\t\tbackground-color: #f5f5f5;\n\t\toverflow: hidden;\n\t}\n\t\n\t.main-wrapper.shifted {\n\t\ttransform: translateX(66vw);\n\t\topacity: 0.85;\n\t}\n\t\n\t.main-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0 20rpx;\n\t\toverflow: hidden;\n\t}\n\t\n\t/* 筛选区域样式 */\n\t.filter-section {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 15rpx;\n\t\tmargin: 20rpx 0;\n\t\tpadding: 20rpx;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t\tflex-shrink: 0; /* 防止压缩 */\n\t}\n\t\n\t.choice-wrapper {\n\t\tflex: 1;\n\t\tbox-sizing: border-box;\n\t\twidth: calc(100% - 150rpx); /* 考虑标签宽度和间距 */\n\t\tpadding-right: 10rpx; /* 防止右侧超出边界 */\n\t}\n\t\n\t.filter-title text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.filter-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.filter-item {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\twidth: 100%;\n\t}\n\t\n\t.full-width {\n\t\twidth: 100%;\n\t}\n\t\n\t.filter-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\twhite-space: nowrap;\n\t\tmargin-right: 10rpx;\n\t\twidth: 140rpx; /* 改为固定宽度，不用min-width */\n\t\tpadding-left: 10rpx;\n\t\ttext-align: left;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.filter-select {\n\t\twidth: 100%;\n\t\tborder: 1px solid #e0e0e0;\n\t\tborder-radius: 8rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t/* 导航栏样式 */\n\t.nav-bar {\n\t\theight: 90rpx;\n\t\tbackground-color: #ffffff;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tpadding: 0 20rpx;\n\t\tborder-bottom: none;\n\t\tposition: relative;\n\t\tz-index: 11;\n\t\tflex-shrink: 0; /* 防止压缩 */\n\t}\n\t\n\t.nav-left {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.history-btn {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.history-btn .iconfont {\n\t\tfont-size: 48rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t/* 使用图标替代文字，如果没有图标字体可以使用以下替代样式 */\n\t.history-btn .iconfont:before {\n\t\tcontent: \"≡\"; /* 使用三横线作为菜单图标 */\n\t}\n\t\n\t/* 新增图片图标样式 */\n\t.history-icon {\n\t\twidth: 22px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n\t\n\t.nav-title {\n\t\twidth: 60%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\toverflow: hidden;\n\t}\n\t\n\t.nav-title text {\n\t\tfont-size: 32rpx; /* 增大字体 */\n\t\tcolor: #333;\n\t\tfont-weight: 700; /* 加粗 */\n\t}\n\t\n\t.nav-right {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\talign-items: center;\n\t}\n\t\n\t.new-chat-btn {\n\t\tpadding: 14rpx 28rpx;\n\t\ttransition: all 0.3s;\n\t}\n\t\n\t/* 新增新对话图片图标样式 */\n\t.new-chat-icon {\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n</style>\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages/AI/AI.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","mapState","createDataModule","schoolData","majorData","store","Navigator"],"mappings":"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"}