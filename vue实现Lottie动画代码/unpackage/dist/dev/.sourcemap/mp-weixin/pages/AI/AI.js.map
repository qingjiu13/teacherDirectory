{"version":3,"file":"AI.js","sources":["pages/AI/AI.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQUkvQUkudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"page-container\" @click=\"onPageClick\">\r\n\t\t<!-- 导航栏和侧边栏 -->\r\n\t\t<view class=\"nav-sidebar-container\">\r\n\t\t\t<!-- 侧边栏遮罩层 -->\r\n\t\t\t<view class=\"sidebar-mask\" v-if=\"sidebarVisible\" @click.stop=\"closeSidebar\" :style=\"{opacity: sidebarVisible ? 0.5 : 0}\"></view>\r\n\t\t\t\r\n\t\t\t<!-- 历史记录侧边栏 -->\r\n\t\t\t<history-sidebar\r\n\t\t\t\t:visible=\"sidebarVisible\"\r\n\t\t\t\t:history-summaries=\"historySummaries\"\r\n\t\t\t\t:current-chat-id=\"currentChatId\"\r\n\t\t\t\t@load-chat=\"loadChatHistory\"\r\n\t\t\t\t@delete-chat=\"deleteChatHistory\">\r\n\t\t\t</history-sidebar>\r\n\t\t\t\r\n\t\t\t<!-- 主内容区域 -->\r\n\t\t\t<view class=\"main-wrapper\" :class=\"{shifted: sidebarVisible}\">\r\n\t\t\t\t<!-- 顶部导航栏 -->\r\n\t\t\t\t<view class=\"nav-bar\">\r\n\t\t\t\t\t<view class=\"nav-left\">\r\n\t\t\t\t\t\t<view class=\"history-btn\" @click.stop=\"toggleSidebar\">\r\n\t\t\t\t\t\t\t<text class=\"iconfont\">&#xe67c;</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"nav-title\">\r\n\t\t\t\t\t\t<text>研师录AI</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"nav-right\">\r\n\t\t\t\t\t\t<view class=\"new-chat-btn\" @click.stop=\"startNewChat\">\r\n\t\t\t\t\t\t\t<text>新对话</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 主内容区域 -->\r\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"main-content\" @scroll=\"onScroll\">\r\n\t\t\t\t\t<!-- 筛选区域 -->\r\n\t\t\t\t\t<view class=\"filter-section\">\r\n\t\t\t\t\t\t<view class=\"filter-content\">\r\n\t\t\t\t\t\t\t<!-- 学校筛选 -->\r\n\t\t\t\t\t\t\t<view class=\"filter-item\">\r\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\r\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">所在学校：</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\r\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\r\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\r\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"schoolIndex\"\r\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"schoolList\"\r\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择学校\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\r\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入学校名称\"\r\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleSchoolSelect\"\r\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleSchoolSearch\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"schoolDropdown\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- 专业筛选 -->\r\n\t\t\t\t\t\t\t<view class=\"filter-item\">\r\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\r\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">专业：</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\r\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\r\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\r\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"majorIndex\"\r\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"majorList\"\r\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择专业\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\r\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入专业名称\"\r\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleMajorSelect\"\r\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleMajorSearch\"\r\n\t\t\t\t\t\t\t\t\t\tref=\"majorDropdown\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 消息区域 -->\r\n\t\t\t\t\t<message-list\r\n\t\t\t\t\t\t:messages=\"messages\"\r\n\t\t\t\t\t\t:auto-scroll-id=\"autoScrollId\"\r\n\t\t\t\t\t\t@retry-message=\"retryMessage\"\r\n\t\t\t\t\t\t@update-auto-scroll-id=\"autoScrollId = $event\"\r\n\t\t\t\t\t\tref=\"messageList\">\r\n\t\t\t\t\t</message-list>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 功能模式区域 -->\r\n\t\t\t\t\t<mode-selector\r\n\t\t\t\t\t\t:current-mode=\"currentMode\"\r\n\t\t\t\t\t\t@mode-change=\"switchMode\">\r\n\t\t\t\t\t</mode-selector>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 输入区域 -->\r\n\t\t\t\t\t<input-section\r\n\t\t\t\t\t\t:is-processing=\"isProcessing\"\r\n\t\t\t\t\t\t@send=\"sendMessage\">\r\n\t\t\t\t\t</input-section>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 加载提示 -->\r\n\t\t<view class=\"loading-mask\" v-if=\"isFullLoading\">\r\n\t\t\t<view class=\"loading-content\">\r\n\t\t\t\t<text>{{loadingText}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport HistorySidebar from '../../components/ai-chat/HistorySidebar'\r\n\timport MessageList from '../../components/ai-chat/MessageList'\r\n\timport ModeSelector from '../../components/ai-chat/ModeSelector'\r\n\timport InputSection from '../../components/ai-chat/InputSection'\r\n\timport ChoiceSelected from '../../components/combobox/combobox'\r\n\timport store from '../../store'\r\n\timport schoolData from '../../static/data/2886所大学.json';\r\n\timport majorData from '../../static/data/本科专业.json';\r\n\timport { mapState } from 'vuex';\r\n\timport createDataModule from '../../components/combobox/undergraduate.js';\r\n\r\n\t\r\n\t\r\n\t// 消息类型常量\r\n\tconst MESSAGE_TYPE = {\r\n\t\tUSER: 'user',\r\n\t\tAI: 'AI',\r\n\t\tSYSTEM: 'system'\r\n\t}\r\n\t\r\n\t// 消息状态常量\r\n\tconst MESSAGE_STATUS = {\r\n\t\tSENDING: 'sending',\r\n\t\tSENT: 'sent',\r\n\t\tERROR: 'error'\r\n\t}\r\n\t\r\n\t// 对话模式常量\r\n\tconst CHAT_MODE = {\r\n\t\tGENERAL: 'general',\r\n\t\tSCHOOL: 'school',\r\n\t\tCAREER: 'career'\r\n\t}\r\n\t\r\n\texport default {\r\n\t\tonPageScroll() {\r\n\t\t\t// 通知所有组件页面已滚动\r\n\t\t\tuni.$emit('page-scroll');\r\n  \t\t},\r\n\t\tcomponents: {\r\n\t\t\tHistorySidebar,\r\n\t\t\tMessageList,\r\n\t\t\tModeSelector,\r\n\t\t\tInputSection,\r\n\t\t\tChoiceSelected\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 从Vuex获取状态\r\n\t\t\t...mapState('user/aiChat', {\r\n\t\t\t\tstoreHistorySummaries: state => state.aiChat.historySummaries,\r\n\t\t\t\tstoreHistoryChats: state => state.aiChat.conversations,\r\n\t\t\t\tstoreActiveConversation: state => state.aiChat.activeConversation,\r\n\t\t\t\tstoreChatMode: state => state.aiChat.chatMode,\r\n\t\t\t\tstoreUserInfo: state => state.aiChat.userInfo\r\n\t\t\t}),\r\n\t\t\t\r\n\t\t\t// 当前选择的学校和专业\r\n\t\t\tcurrentSchool() {\r\n\t\t\t\treturn this.schoolIndex >= 0 ? this.schoolList[this.schoolIndex] : '';\r\n\t\t\t},\r\n\t\t\tcurrentMajor() {\r\n\t\t\t\treturn this.majorIndex >= 0 ? this.majorList[this.majorIndex] : '';\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 当前模式名称\r\n\t\t\tcurrentModeName() {\r\n\t\t\t\tconst modeNames = {\r\n\t\t\t\t\t[CHAT_MODE.GENERAL]: '通用',\r\n\t\t\t\t\t[CHAT_MODE.SCHOOL]: '择校',\r\n\t\t\t\t\t[CHAT_MODE.CAREER]: '职业规划'\r\n\t\t\t\t};\r\n\t\t\t\treturn modeNames[this.currentMode] || '通用';\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 兼容计算属性\r\n\t\t\thistorySummaries() {\r\n\t\t\t\treturn this.storeHistorySummaries;\r\n\t\t\t},\r\n\t\t\thistoryChats() {\r\n\t\t\t\treturn this.storeHistoryChats || [];\r\n\t\t\t},\r\n\t\t\tactiveConversation() {\r\n\t\t\t\treturn this.storeActiveConversation;\r\n\t\t\t},\r\n\t\t\tchatMode() {\r\n\t\t\t\treturn this.storeChatMode;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 筛选后的学校列表\r\n\t\t\tfilteredSchoolList() {\r\n\t\t\t\tif (!this.schoolStore) return [];\r\n\t\t\t\treturn this.schoolStore.getters.filteredData(this.schoolStore.state);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 筛选后的专业列表\r\n\t\t\tfilteredMajorList() {\r\n\t\t\t\tif (!this.majorStore) return [];\r\n\t\t\t\treturn this.majorStore.getters.filteredData(this.majorStore.state);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 消息相关\r\n\t\t\t\tmessages: [],\r\n\t\t\t\tisProcessing: false,\r\n\t\t\t\tisFullLoading: false, \r\n\t\t\t\tloadingText: '正在加载...',\r\n\t\t\t\tautoScrollId: '',\r\n\t\t\t\t\r\n\t\t\t\t// 对话模式\r\n\t\t\t\tcurrentMode: CHAT_MODE.GENERAL,\r\n\t\t\t\t\r\n\t\t\t\t// 学校和专业选择\r\n\t\t\t\tschoolIndex: -1,\r\n\t\t\t\tmajorIndex: -1,\r\n\t\t\t\tschoolList: [],\r\n\t\t\t\tmajorList: [],\r\n\t\t\t\t\r\n\t\t\t\t// 搜索相关\r\n\t\t\t\tschoolStore: null,\r\n\t\t\t\tmajorStore: null,\r\n\t\t\t\t\r\n\t\t\t\t// 滚动相关\r\n\t\t\t\tisAutoScrollEnabled: true,\r\n\t\t\t\t\r\n\t\t\t\t// 当前会话控制器\r\n\t\t\t\tcurrentController: null,\r\n\t\t\t\t\r\n\t\t\t\t// 上下文信息\r\n\t\t\t\tcontextInfo: {},\r\n\t\t\t\t\r\n\t\t\t\t// 导航栏和侧边栏\r\n\t\t\t\tsidebarVisible: false,\r\n\t\t\t\tcurrentChatId: null\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// 监听activeConversation的变化\r\n\t\t\tstoreActiveConversation: {\r\n\t\t\t\thandler(newVal) {\r\n\t\t\t\t\tif (newVal && typeof newVal === 'object' && newVal.chatId) {\r\n\t\t\t\t\t\tthis.currentChatId = newVal.chatId;\r\n\t\t\t\t\t\tif (newVal.chatMode) {\r\n\t\t\t\t\t\t\tthis.currentMode = newVal.chatMode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (newVal) {\r\n\t\t\t\t\t\tthis.currentChatId = newVal;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 监听用户信息变化\r\n\t\t\tstoreUserInfo: {\r\n\t\t\t\thandler(newVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.setUserSelectionIndexes();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true,\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t/**\r\n\t\t\t * @description 页面加载时的处理逻辑\r\n\t\t\t */\r\n\t\t\t// 加载大学数据\r\n\t\t\tthis.loadUniversityData();\r\n\t\t\t\r\n\t\t\t// 获取用户信息并初始化\r\n\t\t\tthis.syncUserInfoFromVuex();\r\n\t\t\t\r\n\t\t\t// 添加欢迎消息\r\n\t\t\tthis.addSystemMessage('欢迎使用研师录AI助手，请选择您的所在学校和专业，然后开始提问');\r\n\t\t\t\r\n\t\t\t// 加载历史会话\r\n\t\t\tthis.loadChatHistoryFromStorage();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// 页面显示时刷新历史记录\r\n\t\t\tthis.loadChatHistoryFromStorage();\r\n\t\t\t\r\n\t\t\t// 刷新用户信息\r\n\t\t\tthis.syncUserInfoFromVuex();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\t// 页面卸载时中断请求\r\n\t\t\tthis.abortCurrentRequest();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description 初始化学校和专业搜索引擎\r\n\t\t\t */\r\n\t\t\tinitSchoolAndMajorSearch() {\r\n\t\t\t\t// 初始化本科学校数据状态\r\n\t\t\t\tthis.schoolStore = createDataModule(schoolData);\r\n\t\t\t\t\r\n\t\t\t\t// 初始化本科专业数据状态\r\n\t\t\t\tthis.majorStore = createDataModule(majorData);\r\n\t\t\t\t\r\n\t\t\t\t// 初始化搜索引擎\r\n\t\t\t\tthis.schoolStore.actions.initSearch({\r\n\t\t\t\t\tcommit: (mutation, payload) => {\r\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.majorStore.actions.initSearch({\r\n\t\t\t\t\tcommit: (mutation, payload) => {\r\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 初始填充数据\r\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\r\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 从JSON文件加载大学数据\r\n\t\t\t */\r\n\t\t\tloadUniversityData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 初始化学校和专业搜索引擎\r\n\t\t\t\t\tthis.initSchoolAndMajorSearch();\r\n\t\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:345','加载大学数据成功');\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:347','加载数据失败:', error);\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:348','错误详情:', error.message, error.stack);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置默认学校列表\r\n\t\t\t\t\tconst defaultSchools = [\"北京大学\", \"清华大学\", \"复旦大学\"];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置学校列表\r\n\t\t\t\t\tthis.schoolList = defaultSchools;\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '加载大学数据失败，使用默认列表',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理页面点击事件，关闭下拉框\r\n\t\t\t */\r\n\t\t\tonPageClick() {\r\n\t\t\t\tthis.closeAllDropdowns();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 关闭所有下拉框\r\n\t\t\t */\r\n\t\t\tcloseAllDropdowns() {\r\n\t\t\t\tconst dropdowns = ['schoolDropdown', 'majorDropdown'];\r\n\t\t\t\tdropdowns.forEach(dropdown => {\r\n\t\t\t\t\tif (this.$refs && this.$refs[dropdown]) {\r\n\t\t\t\t\t\tthis.$refs[dropdown].closeDropdown && this.$refs[dropdown].closeDropdown();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 从Vuex同步用户信息\r\n\t\t\t */\r\n\t\t\tsyncUserInfoFromVuex() {\r\n\t\t\t\t// 从Vuex获取用户信息\r\n\t\t\t\tif (this.storeUserInfo) {\r\n\t\t\t\t\t// 设置选中索引\r\n\t\t\t\t\tthis.setUserSelectionIndexes();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 根据用户信息设置学校和专业索引\r\n\t\t\t */\r\n\t\t\tsetUserSelectionIndexes() {\r\n\t\t\t\tif (!this.storeUserInfo) return;\r\n\t\t\t\t\r\n\t\t\t\tif (this.storeUserInfo.school && this.schoolList.length > 0) {\r\n\t\t\t\t\tconst schoolIndex = this.schoolList.indexOf(this.storeUserInfo.school);\r\n\t\t\t\t\tif (schoolIndex !== -1) {\r\n\t\t\t\t\t\tthis.schoolIndex = schoolIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.storeUserInfo.major && this.majorList.length > 0) {\r\n\t\t\t\t\tconst majorIndex = this.majorList.indexOf(this.storeUserInfo.major);\r\n\t\t\t\t\tif (majorIndex !== -1) {\r\n\t\t\t\t\t\tthis.majorIndex = majorIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.updateContextInfo();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理学校选择\r\n\t\t\t * @param {Number} index - 选择的索引\r\n\t\t\t * @param {String} school - 选择的学校名称\r\n\t\t\t */\r\n\t\t\thandleSchoolSelect(index, school) {\r\n\t\t\t\tthis.schoolIndex = index;\r\n\t\t\t\t\r\n\t\t\t\t// 更新到Vuex\r\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_SCHOOL', school);\r\n\t\t\t\t\r\n\t\t\t\t// 更新上下文信息\r\n\t\t\t\tthis.updateContextInfo();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理专业选择\r\n\t\t\t * @param {Number} index - 选择的索引\r\n\t\t\t * @param {String} major - 选择的专业名称\r\n\t\t\t */\r\n\t\t\thandleMajorSelect(index, major) {\r\n\t\t\t\tthis.majorIndex = index;\r\n\t\t\t\t\r\n\t\t\t\t// 更新到Vuex\r\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_MAJOR', major);\r\n\t\t\t\t\r\n\t\t\t\t// 更新上下文信息\r\n\t\t\t\tthis.updateContextInfo();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理学校搜索输入\r\n\t\t\t * @param {String} keyword - 搜索关键词\r\n\t\t\t */\r\n\t\t\thandleSchoolSearch(keyword) {\r\n\t\t\t\t// 更新学校搜索关键词\r\n\t\t\t\tthis.schoolStore.actions.updateFilterKeyword({\r\n\t\t\t\t\tcommit: (mutation, payload) => {\r\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, keyword);\r\n\t\t\t\t\r\n\t\t\t\t// 获取过滤结果\r\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\r\n\t\t\t\t\r\n\t\t\t\t// 调试信息\r\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:462',`学校搜索: \"${keyword}\", 结果数: ${this.schoolList.length}`);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理专业搜索输入\r\n\t\t\t * @param {String} keyword - 搜索关键词\r\n\t\t\t */\r\n\t\t\thandleMajorSearch(keyword) {\r\n\t\t\t\t// 更新专业搜索关键词\r\n\t\t\t\tthis.majorStore.actions.updateFilterKeyword({\r\n\t\t\t\t\tcommit: (mutation, payload) => {\r\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, keyword);\r\n\t\t\t\t\r\n\t\t\t\t// 获取过滤结果\r\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\r\n\t\t\t\t\r\n\t\t\t\t// 调试信息\r\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:481',`专业搜索: \"${keyword}\", 结果数: ${this.majorList.length}`);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 切换对话模式\r\n\t\t\t * @param {String} mode - 对话模式\r\n\t\t\t */\r\n\t\t\tswitchMode(mode) {\r\n\t\t\t\tif (this.currentMode === mode) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.currentMode = mode;\r\n\t\t\t\tthis.messages = [];\r\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\r\n\t\t\t\t\r\n\t\t\t\tthis.updateContextInfo();\r\n\t\t\t\t\r\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\r\n\t\t\t\t\tchatId: this.currentChatId,\r\n\t\t\t\t\tchatMode: this.currentMode\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.closeSidebar();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 更新对话上下文信息\r\n\t\t\t */\r\n\t\t\tupdateContextInfo() {\r\n\t\t\t\tthis.contextInfo = {\r\n\t\t\t\t\tmode: this.currentMode,\r\n\t\t\t\t\tuserSchool: this.currentSchool,\r\n\t\t\t\t\tuserMajor: this.currentMajor\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 添加系统消息\r\n\t\t\t * @param {String} content - 消息内容\r\n\t\t\t */\r\n\t\t\taddSystemMessage(content) {\r\n\t\t\t\tthis.messages.push({\r\n\t\t\t\t\trole: MESSAGE_TYPE.SYSTEM,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tstatus: MESSAGE_STATUS.SENT\r\n\t\t\t\t});\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 开始新对话\r\n\t\t\t */\r\n\t\t\tstartNewChat() {\r\n\t\t\t\tthis.messages = [];\r\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\r\n\t\t\t\t\r\n\t\t\t\tthis.updateContextInfo();\r\n\t\t\t\t\r\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\r\n\t\t\t\t\tchatId: this.currentChatId,\r\n\t\t\t\t\tchatMode: this.currentMode\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.addSystemMessage('开始新对话，请输入您的问题');\r\n\t\t\t\tthis.closeSidebar();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理消息发送和重试\r\n\t\t\t * @param {String} messageContent - 消息内容\r\n\t\t\t * @param {Number} [retryIndex] - 重试消息的索引\r\n\t\t\t */\r\n\t\t\tasync handleMessage(messageContent, retryIndex = null) {\r\n\t\t\t\tif (!messageContent || this.isProcessing) return;\r\n\t\t\t\t\r\n\t\t\t\tlet userMessageIndex, aiMessageIndex;\r\n\t\t\t\t\r\n\t\t\t\tif (retryIndex === null) {\r\n\t\t\t\t\t// 新消息\r\n\t\t\t\t\tuserMessageIndex = this.messages.length;\r\n\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\trole: MESSAGE_TYPE.USER,\r\n\t\t\t\t\t\tcontent: messageContent,\r\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\taiMessageIndex = this.messages.length;\r\n\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\trole: MESSAGE_TYPE.AI,\r\n\t\t\t\t\t\tcontent: '',\r\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENDING,\r\n\t\t\t\t\t\tstreaming: false\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 重试消息\r\n\t\t\t\t\tuserMessageIndex = retryIndex - 1;\r\n\t\t\t\t\taiMessageIndex = retryIndex;\r\n\t\t\t\t\tthis.messages[aiMessageIndex].content = '';\r\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENDING;\r\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\tthis.isProcessing = true;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.updateContextInfo();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!this.currentChatId) {\r\n\t\t\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\r\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\r\n\t\t\t\t\t\t\tchatId: this.currentChatId,\r\n\t\t\t\t\t\t\tchatMode: this.currentMode\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst response = await this.$store.dispatch('user/aiChat/testAIQA', {\r\n\t\t\t\t\t\tquestion: messageContent,\r\n\t\t\t\t\t\tcontextInfo: this.contextInfo,\r\n\t\t\t\t\t\tchatId: this.currentChatId,\r\n\t\t\t\t\t\tchatMode: this.currentMode\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = response.data;\r\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENT;\r\n\t\t\t\t\t\tthis.saveChatHistory();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst errorMessage = response.error?.message || response.message || '获取回复失败，请稍后重试';\r\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，无法获取回复：${errorMessage}`;\r\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.showToast(errorMessage, 'none', 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconst errorMsg = error.message || '系统异常，请稍后再试';\r\n\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，发生了错误：${errorMsg}`;\r\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\r\n\t\t\t\t\tthis.showToast(errorMsg, 'none', 3000);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isProcessing = false;\r\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\r\n\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 发送消息\r\n\t\t\t * @param {String} messageContent - 消息内容\r\n\t\t\t */\r\n\t\t\tsendMessage(messageContent) {\r\n\t\t\t\tthis.handleMessage(messageContent);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 重试发送失败的消息\r\n\t\t\t * @param {Number} index - 消息索引\r\n\t\t\t */\r\n\t\t\tretryMessage(index) {\r\n\t\t\t\tif (index < 1 || this.messages[index].role !== MESSAGE_TYPE.AI) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst userMessage = this.messages[index - 1];\r\n\t\t\t\tif (userMessage.role !== MESSAGE_TYPE.USER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.handleMessage(userMessage.content, index);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 中断当前请求\r\n\t\t\t */\r\n\t\t\tabortCurrentRequest() {\r\n\t\t\t\tif (this.currentController && this.currentController.abort) {\r\n\t\t\t\t\tthis.currentController.abort();\r\n\t\t\t\t\tthis.currentController = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 滚动到底部\r\n\t\t\t */\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tif (!this.isAutoScrollEnabled) return;\r\n\t\t\t\t\r\n\t\t\t\tif (this.messages.length > 0) {\r\n\t\t\t\t\tthis.autoScrollId = 'msg-' + (this.messages.length - 1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理滚动事件\r\n\t\t\t */\r\n\t\t\tonScroll(e) {\r\n\t\t\t\t// 滚动事件处理\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 显示提示\r\n\t\t\t * @param {String} message - 提示信息\r\n\t\t\t * @param {String} [icon='none'] - 提示图标\r\n\t\t\t * @param {Number} [duration=2000] - 提示持续时间\r\n\t\t\t */\r\n\t\t\tshowToast(message, icon = 'none', duration = 2000) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: message,\r\n\t\t\t\t\ticon: icon,\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 显示/隐藏加载提示\r\n\t\t\t * @param {String|Boolean} text - 加载提示文本，如果为false则隐藏\r\n\t\t\t */\r\n\t\t\ttoggleLoading(text = '正在加载...') {\r\n\t\t\t\tif (text === false) {\r\n\t\t\t\t\tthis.isFullLoading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loadingText = text;\r\n\t\t\t\t\tthis.isFullLoading = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 侧边栏相关方法\r\n\t\t\ttoggleSidebar() {\r\n\t\t\t\tthis.sidebarVisible = !this.sidebarVisible;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcloseSidebar() {\r\n\t\t\t\tthis.sidebarVisible = false;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 加载指定的聊天历史\r\n\t\t\t * @param {String} chatId - 聊天历史ID\r\n\t\t\t */\r\n\t\t\tloadChatHistory(chatId) {\r\n\t\t\t\tif (!chatId) return;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.toggleLoading('正在加载对话内容...');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 从本地状态找对话\r\n\t\t\t\t\tconst conversations = this.historyChats || [];\r\n\t\t\t\t\tconst conversation = conversations.find(chat => chat.id === chatId);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (conversation) {\r\n\t\t\t\t\t\t// 设置当前会话ID\r\n\t\t\t\t\t\tthis.currentChatId = chatId;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 设置对话模式\r\n\t\t\t\t\t\tif (conversation.chatMode) {\r\n\t\t\t\t\t\t\tthis.currentMode = conversation.chatMode;\r\n\t\t\t\t\t\t\tthis.updateContextInfo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 构建消息列表\r\n\t\t\t\t\t\tconst messages = conversation.messages ? conversation.messages.map(msg => {\r\n\t\t\t\t\t\t\tlet role = msg.role || MESSAGE_TYPE.AI;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!msg.role && msg.id) {\r\n\t\t\t\t\t\t\t\tif (msg.id.includes('msg-user')) {\r\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.USER;\r\n\t\t\t\t\t\t\t\t} else if (msg.id.includes('msg-system')) {\r\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.SYSTEM;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\trole: role,\r\n\t\t\t\t\t\t\t\tcontent: msg.content,\r\n\t\t\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT,\r\n\t\t\t\t\t\t\t\tstreaming: false\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}) : [];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.messages = messages;\r\n\t\t\t\t\t\tthis.closeSidebar();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.toggleLoading(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 从服务器加载\r\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/loadChat', chatId).then(response => {\r\n\t\t\t\t\t\t\tif (response.success) {\r\n\t\t\t\t\t\t\t\tthis.currentChatId = chatId;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (response.data.chatMode) {\r\n\t\t\t\t\t\t\t\t\tthis.currentMode = response.data.chatMode;\r\n\t\t\t\t\t\t\t\t\tthis.updateContextInfo();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.messages = response.data.messages || [];\r\n\t\t\t\t\t\t\t\tthis.closeSidebar();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconst errorMsg = response.error?.message || response.message || '加载对话失败';\r\n\t\t\t\t\t\t\t\tthis.showToast(`加载失败: ${errorMsg}`, 'none', 3000);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (response.error?.statusCode >= 500) {\r\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\t\tthis.toggleLoading(false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:797','加载对话内容失败:', error);\r\n\t\t\t\t\tthis.toggleLoading(false);\r\n\t\t\t\t\tthis.startNewChat();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 从Vuex加载历史会话摘要\r\n\t\t\t */\r\n\t\t\tloadChatHistoryFromStorage() {\r\n\t\t\t\tconst conversations = this.historyChats;\r\n\t\t\t\t\r\n\t\t\t\tif (conversations && conversations.length > 0) {\r\n\t\t\t\t\tconst historySummaries = conversations.map(chat => ({\r\n\t\t\t\t\t\tid: chat.id,\r\n\t\t\t\t\t\ttitle: chat.abstract,\r\n\t\t\t\t\t\tabstract: chat.abstract,\r\n\t\t\t\t\t\tchatMode: chat.chatMode,\r\n\t\t\t\t\t\tcreatedAt: chat.createdAt,\r\n\t\t\t\t\t\tupdatedAt: chat.updatedAt\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$store.commit('user/aiChat/SET_HISTORY_SUMMARIES', historySummaries);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 保存聊天历史摘要到Vuex\r\n\t\t\t */\r\n\t\t\tsaveChatHistory() {\r\n\t\t\t\tif (!this.currentChatId || this.messages.length === 0) return;\r\n\t\t\t\t\r\n\t\t\t\tconst firstUserMessage = this.messages.find(msg => msg.role === MESSAGE_TYPE.USER);\r\n\t\t\t\tconst title = firstUserMessage ? firstUserMessage.content.substring(0, 20) : '新对话';\r\n\t\t\t\t\r\n\t\t\t\tconst chatData = {\r\n\t\t\t\t\tid: this.currentChatId,\r\n\t\t\t\t\ttitle: title + (title.length >= 20 ? '...' : ''),\r\n\t\t\t\t\tabstract: title,\r\n\t\t\t\t\tchatMode: this.currentMode,\r\n\t\t\t\t\tcreatedAt: new Date().toISOString(),\r\n\t\t\t\t\tupdatedAt: new Date().toISOString(),\r\n\t\t\t\t\tmessages: this.messages.map((msg, index) => ({\r\n\t\t\t\t\t\tid: `msg-${msg.role === MESSAGE_TYPE.USER ? 'user' : 'ai'}-${this.currentChatId}-${index}`,\r\n\t\t\t\t\t\trole: msg.role,\r\n\t\t\t\t\t\tcontent: msg.content,\r\n\t\t\t\t\t\ttimestamp: new Date().toISOString()\r\n\t\t\t\t\t}))\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 更新到Vuex\r\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_CONVERSATION', chatData);\r\n\t\t\t\t\r\n\t\t\t\t// 更新历史摘要\r\n\t\t\t\tconst summaryData = {\r\n\t\t\t\t\tid: chatData.id,\r\n\t\t\t\t\ttitle: chatData.title,\r\n\t\t\t\t\tabstract: chatData.abstract,\r\n\t\t\t\t\tchatMode: chatData.chatMode,\r\n\t\t\t\t\tcreatedAt: chatData.createdAt,\r\n\t\t\t\t\tupdatedAt: chatData.updatedAt\r\n\t\t\t\t};\r\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_HISTORY_SUMMARY', summaryData);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 删除历史记录\r\n\t\t\t * @param {String} chatId - 历史记录ID\r\n\t\t\t */\r\n\t\t\tdeleteChatHistory(chatId) {\r\n\t\t\t\tif (!chatId) return;\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '确认删除',\r\n\t\t\t\t\tcontent: '确定要删除这条对话记录吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: '正在删除...',\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_CONVERSATION', chatId);\r\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_HISTORY_SUMMARY', chatId);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (this.currentChatId === chatId) {\r\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.showToast('删除成功');\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tthis.showToast('删除失败: ' + (error.message || '系统错误'), 'none', 3000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.page-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 0; /* 移除页面容器的内边距 */\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\toverflow: hidden; /* 防止内容溢出 */\r\n\t}\r\n\t\r\n\t/* 加载遮罩 */\r\n\t.loading-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 999;\r\n\t}\r\n\t\r\n\t.loading-content {\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 30rpx 60rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.15);\r\n\t}\r\n\t\r\n\t.loading-content text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t/* 侧边栏容器样式 */\r\n\t.nav-sidebar-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.sidebar-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tz-index: 998;\r\n\t\ttransition: opacity 0.3s ease;\r\n\t}\r\n\t\r\n\t.main-wrapper {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\ttransition: transform 0.3s ease, opacity 0.3s ease;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding-bottom: 20rpx; /* 底部增加内边距 */\r\n\t}\r\n\t\r\n\t.main-wrapper.shifted {\r\n\t\ttransform: translateX(66vw);\r\n\t\topacity: 0.85;\r\n\t}\r\n\t\r\n\t.main-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 0 20rpx; /* 仅添加左右内边距 */\r\n\t\theight: calc(100vh - 90rpx); /* 减去导航栏高度 */\r\n\t\toverflow-y: auto; /* 允许内容垂直滚动 */\r\n\t}\r\n\t\r\n\t/* 筛选区域样式 */\r\n\t.filter-section {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 15rpx;\r\n\t\tmargin: 20rpx 0;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.choice-wrapper {\r\n\t\tflex: 1;\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: calc(100% - 150rpx); /* 考虑标签宽度和间距 */\r\n\t\tpadding-right: 10rpx; /* 防止右侧超出边界 */\r\n\t}\r\n\t\r\n\t.filter-title text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.filter-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.filter-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.full-width {\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.filter-label {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\twhite-space: nowrap;\r\n\t\tmargin-right: 10rpx;\r\n\t\twidth: 140rpx; /* 改为固定宽度，不用min-width */\r\n\t\tpadding-left: 10rpx;\r\n\t\ttext-align: left;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t.filter-select {\r\n\t\twidth: 100%;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t/* 导航栏样式 */\r\n\t.nav-bar {\r\n\t\theight: 90rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder-bottom: none; /* 移除底部边框 */\r\n\t\tposition: relative;\r\n\t\tz-index: 11; /* 提高z-index，确保显示在筛选区域上方 */\r\n\t}\r\n\t\r\n\t.nav-left {\r\n\t\twidth: 33%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.history-btn {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.history-btn .iconfont {\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t/* 使用图标替代文字，如果没有图标字体可以使用以下替代样式 */\r\n\t.history-btn .iconfont:before {\r\n\t\tcontent: \"≡\"; /* 使用三横线作为菜单图标 */\r\n\t}\r\n\t\r\n\t.nav-title {\r\n\t\twidth: 34%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.nav-title text {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.nav-right {\r\n\t\twidth: 33%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.new-chat-btn {\r\n\t\tpadding: 14rpx 28rpx;\r\n\t\tbackground-color: #1E90FF;\r\n\t\tborder-radius: 40rpx;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(30, 144, 255, 0.3);\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\t\r\n\t.new-chat-btn:active {\r\n\t\topacity: 0.8;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\t\r\n\t.new-chat-btn text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #fff;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages/AI/AI.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","mapState","createDataModule","schoolData","majorData","store"],"mappings":"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"}