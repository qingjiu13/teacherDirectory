{"version":3,"file":"AI.js","sources":["pages/AI/AI.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQUkvQUkudnVl"],"sourcesContent":["<template>\n\t<view class=\"page-container\" @click=\"onPageClick\">\n\t\t<!-- 导航栏和侧边栏 -->\n\t\t<view class=\"nav-sidebar-container\">\n\t\t\t<!-- 侧边栏遮罩层 -->\n\t\t\t<view class=\"sidebar-mask\" v-if=\"sidebarVisible\" @click.stop=\"closeSidebar\" :style=\"{opacity: sidebarVisible ? 0.5 : 0}\"></view>\n\t\t\t<Header :title=\"'AI助手'\" @back=\"handleBack\" />\n\t\t\t<!-- 历史记录侧边栏 -->\n\t\t\t<history-sidebar\n\t\t\t\t:visible=\"sidebarVisible\"\n\t\t\t\t:history-summaries=\"historySummaries\"\n\t\t\t\t:current-chat-id=\"currentChatId\"\n\t\t\t\t@load-chat=\"loadChatHistory\"\n\t\t\t\t@delete-chat=\"deleteChatHistory\">\n\t\t\t</history-sidebar>\n\t\t\t\n\t\t\t<!-- 主内容区域 -->\n\t\t\t<view class=\"main-wrapper\" :class=\"{shifted: sidebarVisible}\">\n\t\t\t\t<!-- 顶部导航栏 -->\n\t\t\t\t<view class=\"nav-bar\">\n\t\t\t\t\t<view class=\"nav-left\">\n\t\t\t\t\t\t<view class=\"history-btn\" @click.stop=\"toggleSidebar\">\n\t\t\t\t\t\t\t<image src=\"./AIchat/chatHistory.png\" class=\"history-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-title\">\n\t\t\t\t\t\t<mode-selector\n\t\t\t\t\t\t\t:current-mode=\"currentMode\"\n\t\t\t\t\t\t\t:inNav=\"true\"\n\t\t\t\t\t\t\t@mode-change=\"switchMode\">\n\t\t\t\t\t\t</mode-selector>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"nav-right\">\n\t\t\t\t\t\t<view class=\"new-chat-btn\" @click.stop=\"startNewChat\">\n\t\t\t\t\t\t\t<image src=\"./AIchat/newChat.png\" class=\"new-chat-icon\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 主内容区域 -->\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"main-content\" @scroll=\"onScroll\">\n\t\t\t\t\t<!-- 筛选区域 -->\n\t\t\t\t\t<view class=\"filter-section\">\n\t\t\t\t\t\t<view class=\"filter-content\">\n\t\t\t\t\t\t\t<!-- 学校筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">所在学校：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"schoolIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"schoolList\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择学校\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入学校名称\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleSchoolSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleSchoolSearch\"\n\t\t\t\t\t\t\t\t\t\tref=\"schoolDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 专业筛选 -->\n\t\t\t\t\t\t\t<view class=\"filter-item\">\n\t\t\t\t\t\t\t\t<view class=\"filter-item full-width\">\n\t\t\t\t\t\t\t\t<text class=\"filter-label\">专业：</text>\n\t\t\t\t\t\t\t\t\t<view class=\"choice-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<ChoiceSelected\n\t\t\t\t\t\t\t\t\t\tclass=\"filter-select\"\n\t\t\t\t\t\t\t\t\t\tcomponentType=\"undergraduate\"\n\t\t\t\t\t\t\t\t\t\t:choiceIndex=\"majorIndex\"\n\t\t\t\t\t\t\t\t\t\t:choiceList=\"majorList\"\n\t\t\t\t\t\t\t\t\t\tdefaultText=\"请选择专业\"\n\t\t\t\t\t\t\t\t\t\tmode=\"search\"\n\t\t\t\t\t\t\t\t\t\tsearchPlaceholder=\"输入专业名称\"\n\t\t\t\t\t\t\t\t\t\t@onChoiceClick=\"handleMajorSelect\"\n\t\t\t\t\t\t\t\t\t\t@search-input=\"handleMajorSearch\"\n\t\t\t\t\t\t\t\t\t\tref=\"majorDropdown\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 消息区域 -->\n\t\t\t\t\t<message-list\n\t\t\t\t\t\t:messages=\"messages\"\n\t\t\t\t\t\t:auto-scroll-id=\"autoScrollId\"\n\t\t\t\t\t\t@retry-message=\"retryMessage\"\n\t\t\t\t\t\t@update-auto-scroll-id=\"autoScrollId = $event\"\n\t\t\t\t\t\tref=\"messageList\">\n\t\t\t\t\t</message-list>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 输入区域 -->\n\t\t\t\t\t<input-section\n\t\t\t\t\t\t:is-processing=\"isProcessing\"\n\t\t\t\t\t\t@send=\"sendMessage\">\n\t\t\t\t\t</input-section>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 加载提示 -->\n\t\t<view class=\"loading-mask\" v-if=\"isFullLoading\">\n\t\t\t<view class=\"loading-content\">\n\t\t\t\t<text>{{loadingText}}</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport HistorySidebar from '@/components/ai-chat/HistorySidebar'\n\timport MessageList from '@/components/ai-chat/MessageList'\n\timport ModeSelector from '@/components/ai-chat/ModeSelector'\n\timport InputSection from '@/components/ai-chat/InputSection'\n\timport ChoiceSelected from '@/components/combobox/combobox'\n\timport store from '@/store'\n\timport schoolData from '@/static/data/2886所大学.json';\n\timport majorData from '@/static/data/本科专业.json';\n\timport { mapState } from 'vuex';\n\timport createDataModule from '@/components/combobox/undergraduate.js';\n\timport Header from '@/components/navigationTitleBar/header.vue';\n\timport { Navigator } from '@/router/Router.js'\n\n\t\n\t\n\t// 消息类型常量\n\tconst MESSAGE_TYPE = {\n\t\tUSER: 'user',\n\t\tAI: 'AI',\n\t\tSYSTEM: 'system'\n\t}\n\t\n\t// 消息状态常量\n\tconst MESSAGE_STATUS = {\n\t\tSENDING: 'sending',\n\t\tSENT: 'sent',\n\t\tERROR: 'error'\n\t}\n\t\n\t// 对话模式常量\n\tconst CHAT_MODE = {\n\t\tGENERAL: 'general',\n\t\tSCHOOL: 'school',\n\t\tCAREER: 'career'\n\t}\n\t\n\texport default {\n\t\tonPageScroll() {\n\t\t\t// 通知所有组件页面已滚动\n\t\t\tuni.$emit('page-scroll');\n  \t\t},\n\t\tcomponents: {\n\t\t\tHistorySidebar,\n\t\t\tMessageList,\n\t\t\tModeSelector,\n\t\t\tInputSection,\n\t\t\tChoiceSelected,\n\t\t\tHeader\n\t\t},\n\t\tcomputed: {\n\t\t\t// 从Vuex获取状态\n\t\t\t...mapState('user/aiChat', {\n\t\t\t\tstoreHistorySummaries: state => state.aiChat.historySummaries,\n\t\t\t\tstoreHistoryChats: state => state.aiChat.conversations,\n\t\t\t\tstoreActiveConversation: state => state.aiChat.activeConversation,\n\t\t\t\tstoreChatMode: state => state.aiChat.chatMode,\n\t\t\t\tstoreUserInfo: state => state.aiChat.userInfo\n\t\t\t}),\n\t\t\t\n\t\t\t// 当前选择的学校和专业\n\t\t\tcurrentSchool() {\n\t\t\t\treturn this.schoolIndex >= 0 ? this.schoolList[this.schoolIndex] : '';\n\t\t\t},\n\t\t\tcurrentMajor() {\n\t\t\t\treturn this.majorIndex >= 0 ? this.majorList[this.majorIndex] : '';\n\t\t\t},\n\t\t\t\n\t\t\t// 当前模式名称\n\t\t\tcurrentModeName() {\n\t\t\t\tconst modeNames = {\n\t\t\t\t\t[CHAT_MODE.GENERAL]: '通用',\n\t\t\t\t\t[CHAT_MODE.SCHOOL]: '择校',\n\t\t\t\t\t[CHAT_MODE.CAREER]: '职业规划'\n\t\t\t\t};\n\t\t\t\treturn modeNames[this.currentMode] || '通用';\n\t\t\t},\n\t\t\t\n\t\t\t// 兼容计算属性\n\t\t\thistorySummaries() {\n\t\t\t\treturn this.storeHistorySummaries;\n\t\t\t},\n\t\t\thistoryChats() {\n\t\t\t\treturn this.storeHistoryChats || [];\n\t\t\t},\n\t\t\tactiveConversation() {\n\t\t\t\treturn this.storeActiveConversation;\n\t\t\t},\n\t\t\tchatMode() {\n\t\t\t\treturn this.storeChatMode;\n\t\t\t},\n\t\t\t\n\t\t\t// 筛选后的学校列表\n\t\t\tfilteredSchoolList() {\n\t\t\t\tif (!this.schoolStore) return [];\n\t\t\t\treturn this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t},\n\t\t\t\n\t\t\t// 筛选后的专业列表\n\t\t\tfilteredMajorList() {\n\t\t\t\tif (!this.majorStore) return [];\n\t\t\t\treturn this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 消息相关\n\t\t\t\tmessages: [],\n\t\t\t\tisProcessing: false,\n\t\t\t\tisFullLoading: false, \n\t\t\t\tloadingText: '正在加载...',\n\t\t\t\tautoScrollId: '',\n\t\t\t\t\n\t\t\t\t// 对话模式\n\t\t\t\tcurrentMode: CHAT_MODE.GENERAL,\n\t\t\t\t\n\t\t\t\t// 学校和专业选择\n\t\t\t\tschoolIndex: -1,\n\t\t\t\tmajorIndex: -1,\n\t\t\t\tschoolList: [],\n\t\t\t\tmajorList: [],\n\t\t\t\t\n\t\t\t\t// 搜索相关\n\t\t\t\tschoolStore: null,\n\t\t\t\tmajorStore: null,\n\t\t\t\t\n\t\t\t\t// 滚动相关\n\t\t\t\tisAutoScrollEnabled: true,\n\t\t\t\t\n\t\t\t\t// 当前会话控制器\n\t\t\t\tcurrentController: null,\n\t\t\t\t\n\t\t\t\t// 上下文信息\n\t\t\t\tcontextInfo: {},\n\t\t\t\t\n\t\t\t\t// 导航栏和侧边栏\n\t\t\t\tsidebarVisible: false,\n\t\t\t\tcurrentChatId: null\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\t// 监听activeConversation的变化\n\t\t\tstoreActiveConversation: {\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tif (newVal && typeof newVal === 'object' && newVal.chatId) {\n\t\t\t\t\t\tthis.currentChatId = newVal.chatId;\n\t\t\t\t\t\tif (newVal.chatMode) {\n\t\t\t\t\t\t\tthis.currentMode = newVal.chatMode;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (newVal) {\n\t\t\t\t\t\tthis.currentChatId = newVal;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\t\n\t\t\t// 监听用户信息变化\n\t\t\tstoreUserInfo: {\n\t\t\t\thandler(newVal) {\n\t\t\t\t\tif (newVal) {\n\t\t\t\t\t\tthis.setUserSelectionIndexes();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdeep: true,\n\t\t\t\timmediate: true\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t/**\n\t\t\t * @description 页面加载时的处理逻辑\n\t\t\t */\n\t\t\t// 加载大学数据\n\t\t\tthis.loadUniversityData();\n\t\t\t\n\t\t\t// 获取用户信息并初始化\n\t\t\tthis.syncUserInfoFromVuex();\n\t\t\t\n\t\t\t\n\t\t\t// 加载历史会话\n\t\t\tthis.loadChatHistoryFromStorage();\n\t\t},\n\t\tonShow() {\n\t\t\t// 页面显示时刷新历史记录\n\t\t\tthis.loadChatHistoryFromStorage();\n\t\t\t\n\t\t\t// 刷新用户信息\n\t\t\tthis.syncUserInfoFromVuex();\n\t\t},\n\t\tonUnload() {\n\t\t\t// 页面卸载时中断请求\n\t\t\tthis.abortCurrentRequest();\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * @description 初始化学校和专业搜索引擎\n\t\t\t */\n\t\t\tinitSchoolAndMajorSearch() {\n\t\t\t\t// 初始化本科学校数据状态\n\t\t\t\tthis.schoolStore = createDataModule(schoolData);\n\t\t\t\t\n\t\t\t\t// 初始化本科专业数据状态\n\t\t\t\tthis.majorStore = createDataModule(majorData);\n\t\t\t\t\n\t\t\t\t// 初始化搜索引擎\n\t\t\t\tthis.schoolStore.actions.initSearch({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.majorStore.actions.initSearch({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 初始填充数据\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从JSON文件加载大学数据\n\t\t\t */\n\t\t\tloadUniversityData() {\n\t\t\t\ttry {\n\t\t\t\t\t// 初始化学校和专业搜索引擎\n\t\t\t\t\tthis.initSchoolAndMajorSearch();\n\t\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:344','加载大学数据成功');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:346','加载数据失败:', error);\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:347','错误详情:', error.message, error.stack);\n\t\t\t\t\t\n\t\t\t\t\t// 设置默认学校列表\n\t\t\t\t\tconst defaultSchools = [\"北京大学\", \"清华大学\", \"复旦大学\"];\n\t\t\t\t\t\n\t\t\t\t\t// 设置学校列表\n\t\t\t\t\tthis.schoolList = defaultSchools;\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '加载大学数据失败，使用默认列表',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理页面点击事件，关闭下拉框\n\t\t\t */\n\t\t\tonPageClick() {\n\t\t\t\tthis.closeAllDropdowns();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 关闭所有下拉框\n\t\t\t */\n\t\t\tcloseAllDropdowns() {\n\t\t\t\tconst dropdowns = ['schoolDropdown', 'majorDropdown'];\n\t\t\t\tdropdowns.forEach(dropdown => {\n\t\t\t\t\tif (this.$refs && this.$refs[dropdown]) {\n\t\t\t\t\t\tthis.$refs[dropdown].closeDropdown && this.$refs[dropdown].closeDropdown();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从Vuex同步用户信息\n\t\t\t */\n\t\t\tsyncUserInfoFromVuex() {\n\t\t\t\t// 从Vuex获取用户信息\n\t\t\t\tif (this.storeUserInfo) {\n\t\t\t\t\t// 设置选中索引\n\t\t\t\t\tthis.setUserSelectionIndexes();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 根据用户信息设置学校和专业索引\n\t\t\t */\n\t\t\tsetUserSelectionIndexes() {\n\t\t\t\tif (!this.storeUserInfo) return;\n\t\t\t\t\n\t\t\t\tif (this.storeUserInfo.school && this.schoolList.length > 0) {\n\t\t\t\t\tconst schoolIndex = this.schoolList.indexOf(this.storeUserInfo.school);\n\t\t\t\t\tif (schoolIndex !== -1) {\n\t\t\t\t\t\tthis.schoolIndex = schoolIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.storeUserInfo.major && this.majorList.length > 0) {\n\t\t\t\t\tconst majorIndex = this.majorList.indexOf(this.storeUserInfo.major);\n\t\t\t\t\tif (majorIndex !== -1) {\n\t\t\t\t\t\tthis.majorIndex = majorIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {String} school - 选择的学校名称\n\t\t\t */\n\t\t\thandleSchoolSelect(index, school) {\n\t\t\t\tthis.schoolIndex = index;\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_SCHOOL', school);\n\t\t\t\t\n\t\t\t\t// 更新上下文信息\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业选择\n\t\t\t * @param {Number} index - 选择的索引\n\t\t\t * @param {String} major - 选择的专业名称\n\t\t\t */\n\t\t\thandleMajorSelect(index, major) {\n\t\t\t\tthis.majorIndex = index;\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tstore.commit('user/aiChat/UPDATE_USER_MAJOR', major);\n\t\t\t\t\n\t\t\t\t// 更新上下文信息\n\t\t\t\tthis.updateContextInfo();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理学校搜索输入\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleSchoolSearch(keyword) {\n\t\t\t\t// 更新学校搜索关键词\n\t\t\t\tthis.schoolStore.actions.updateFilterKeyword({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.schoolStore.mutations[mutation](this.schoolStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t}, keyword);\n\t\t\t\t\n\t\t\t\t// 获取过滤结果\n\t\t\t\tthis.schoolList = this.schoolStore.getters.filteredData(this.schoolStore.state);\n\t\t\t\t\n\t\t\t\t// 调试信息\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:461',`学校搜索: \"${keyword}\", 结果数: ${this.schoolList.length}`);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理专业搜索输入\n\t\t\t * @param {String} keyword - 搜索关键词\n\t\t\t */\n\t\t\thandleMajorSearch(keyword) {\n\t\t\t\t// 更新专业搜索关键词\n\t\t\t\tthis.majorStore.actions.updateFilterKeyword({\n\t\t\t\t\tcommit: (mutation, payload) => {\n\t\t\t\t\t\tthis.majorStore.mutations[mutation](this.majorStore.state, payload);\n\t\t\t\t\t}\n\t\t\t\t}, keyword);\n\t\t\t\t\n\t\t\t\t// 获取过滤结果\n\t\t\t\tthis.majorList = this.majorStore.getters.filteredData(this.majorStore.state);\n\t\t\t\t\n\t\t\t\t// 调试信息\n\t\t\t\tuni.__f__('log','at pages/AI/AI.vue:480',`专业搜索: \"${keyword}\", 结果数: ${this.majorList.length}`);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 切换对话模式\n\t\t\t * @param {String} mode - 对话模式\n\t\t\t */\n\t\t\tswitchMode(mode) {\n\t\t\t\tif (this.currentMode === mode) return;\n\t\t\t\t\n\t\t\t\tthis.currentMode = mode;\n\t\t\t\tthis.messages = [];\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.closeSidebar();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 更新对话上下文信息\n\t\t\t */\n\t\t\tupdateContextInfo() {\n\t\t\t\tthis.contextInfo = {\n\t\t\t\t\tmode: this.currentMode,\n\t\t\t\t\tuserSchool: this.currentSchool,\n\t\t\t\t\tuserMajor: this.currentMajor\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 开始新对话\n\t\t\t */\n\t\t\tstartNewChat() {\n\t\t\t\tthis.messages = [];\n\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\n\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\n\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.closeSidebar();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理消息发送和重试\n\t\t\t * @param {String} messageContent - 消息内容\n\t\t\t * @param {Number} [retryIndex] - 重试消息的索引\n\t\t\t */\n\t\t\tasync handleMessage(messageContent, retryIndex = null) {\n\t\t\t\tif (!messageContent || this.isProcessing) return;\n\t\t\t\t\n\t\t\t\tlet userMessageIndex, aiMessageIndex;\n\t\t\t\t\n\t\t\t\tif (retryIndex === null) {\n\t\t\t\t\t// 新消息\n\t\t\t\t\tuserMessageIndex = this.messages.length;\n\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\trole: MESSAGE_TYPE.USER,\n\t\t\t\t\t\tcontent: messageContent,\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\taiMessageIndex = this.messages.length;\n\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\trole: MESSAGE_TYPE.AI,\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENDING,\n\t\t\t\t\t\tstreaming: false\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 重试消息\n\t\t\t\t\tuserMessageIndex = retryIndex - 1;\n\t\t\t\t\taiMessageIndex = retryIndex;\n\t\t\t\t\tthis.messages[aiMessageIndex].content = '';\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENDING;\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\tthis.isProcessing = true;\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\n\t\t\t\t\tif (!this.currentChatId) {\n\t\t\t\t\t\tthis.currentChatId = 'chat_' + Date.now();\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/setCurrentChat', {\n\t\t\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst response = await this.$store.dispatch('user/aiChat/testAIQA', {\n\t\t\t\t\t\tquestion: messageContent,\n\t\t\t\t\t\tcontextInfo: this.contextInfo,\n\t\t\t\t\t\tchatId: this.currentChatId,\n\t\t\t\t\t\tchatMode: this.currentMode\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = response.data;\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.SENT;\n\t\t\t\t\t\tthis.saveChatHistory();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst errorMessage = response.error?.message || response.message || '获取回复失败，请稍后重试';\n\t\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，无法获取回复：${errorMessage}`;\n\t\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.showToast(errorMessage, 'none', 3000);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconst errorMsg = error.message || '系统异常，请稍后再试';\n\t\t\t\t\tthis.messages[aiMessageIndex].content = `抱歉，发生了错误：${errorMsg}`;\n\t\t\t\t\tthis.messages[aiMessageIndex].status = MESSAGE_STATUS.ERROR;\n\t\t\t\t\tthis.showToast(errorMsg, 'none', 3000);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.isProcessing = false;\n\t\t\t\t\tthis.messages[aiMessageIndex].streaming = false;\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 发送消息\n\t\t\t * @param {String} messageContent - 消息内容\n\t\t\t */\n\t\t\tsendMessage(messageContent) {\n\t\t\t\tthis.handleMessage(messageContent);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 重试发送失败的消息\n\t\t\t * @param {Number} index - 消息索引\n\t\t\t */\n\t\t\tretryMessage(index) {\n\t\t\t\tif (index < 1 || this.messages[index].role !== MESSAGE_TYPE.AI) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst userMessage = this.messages[index - 1];\n\t\t\t\tif (userMessage.role !== MESSAGE_TYPE.USER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.handleMessage(userMessage.content, index);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 中断当前请求\n\t\t\t */\n\t\t\tabortCurrentRequest() {\n\t\t\t\tif (this.currentController && this.currentController.abort) {\n\t\t\t\t\tthis.currentController.abort();\n\t\t\t\t\tthis.currentController = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 滚动到底部\n\t\t\t */\n\t\t\tscrollToBottom() {\n\t\t\t\tif (!this.isAutoScrollEnabled) return;\n\t\t\t\t\n\t\t\t\tif (this.messages.length > 0) {\n\t\t\t\t\tthis.autoScrollId = 'msg-' + (this.messages.length - 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 处理滚动事件\n\t\t\t */\n\t\t\tonScroll(e) {\n\t\t\t\t// 滚动事件处理\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示提示\n\t\t\t * @param {String} message - 提示信息\n\t\t\t * @param {String} [icon='none'] - 提示图标\n\t\t\t * @param {Number} [duration=2000] - 提示持续时间\n\t\t\t */\n\t\t\tshowToast(message, icon = 'none', duration = 2000) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: message,\n\t\t\t\t\ticon: icon,\n\t\t\t\t\tduration: duration\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 显示/隐藏加载提示\n\t\t\t * @param {String|Boolean} text - 加载提示文本，如果为false则隐藏\n\t\t\t */\n\t\t\ttoggleLoading(text = '正在加载...') {\n\t\t\t\tif (text === false) {\n\t\t\t\t\tthis.isFullLoading = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadingText = text;\n\t\t\t\t\tthis.isFullLoading = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 侧边栏相关方法\n\t\t\ttoggleSidebar() {\n\t\t\t\tthis.sidebarVisible = !this.sidebarVisible;\n\t\t\t},\n\t\t\t\n\t\t\tcloseSidebar() {\n\t\t\t\tthis.sidebarVisible = false;\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 加载指定的聊天历史\n\t\t\t * @param {String} chatId - 聊天历史ID\n\t\t\t */\n\t\t\tloadChatHistory(chatId) {\n\t\t\t\tif (!chatId) return;\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tthis.toggleLoading('正在加载对话内容...');\n\t\t\t\t\t\n\t\t\t\t\t// 从本地状态找对话\n\t\t\t\t\tconst conversations = this.historyChats || [];\n\t\t\t\t\tconst conversation = conversations.find(chat => chat.id === chatId);\n\t\t\t\t\t\n\t\t\t\t\tif (conversation) {\n\t\t\t\t\t\t// 设置当前会话ID\n\t\t\t\t\t\tthis.currentChatId = chatId;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 设置对话模式\n\t\t\t\t\t\tif (conversation.chatMode) {\n\t\t\t\t\t\t\tthis.currentMode = conversation.chatMode;\n\t\t\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 构建消息列表\n\t\t\t\t\t\tconst messages = conversation.messages ? conversation.messages.map(msg => {\n\t\t\t\t\t\t\tlet role = msg.role || MESSAGE_TYPE.AI;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!msg.role && msg.id) {\n\t\t\t\t\t\t\t\tif (msg.id.includes('msg-user')) {\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.USER;\n\t\t\t\t\t\t\t\t} else if (msg.id.includes('msg-system')) {\n\t\t\t\t\t\t\t\t\trole = MESSAGE_TYPE.SYSTEM;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\trole: role,\n\t\t\t\t\t\t\t\tcontent: msg.content,\n\t\t\t\t\t\t\t\tstatus: MESSAGE_STATUS.SENT,\n\t\t\t\t\t\t\t\tstreaming: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}) : [];\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.messages = messages;\n\t\t\t\t\t\tthis.closeSidebar();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 从服务器加载\n\t\t\t\t\t\tthis.$store.dispatch('user/aiChat/loadChat', chatId).then(response => {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tthis.currentChatId = chatId;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (response.data.chatMode) {\n\t\t\t\t\t\t\t\t\tthis.currentMode = response.data.chatMode;\n\t\t\t\t\t\t\t\t\tthis.updateContextInfo();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.messages = response.data.messages || [];\n\t\t\t\t\t\t\t\tthis.closeSidebar();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst errorMsg = response.error?.message || response.message || '加载对话失败';\n\t\t\t\t\t\t\t\tthis.showToast(`加载失败: ${errorMsg}`, 'none', 3000);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (response.error?.statusCode >= 500) {\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.vue:783','加载对话内容失败:', error);\n\t\t\t\t\tthis.toggleLoading(false);\n\t\t\t\t\tthis.startNewChat();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 从Vuex加载历史会话摘要\n\t\t\t */\n\t\t\tloadChatHistoryFromStorage() {\n\t\t\t\tconst conversations = this.historyChats;\n\t\t\t\t\n\t\t\t\tif (conversations && conversations.length > 0) {\n\t\t\t\t\tconst historySummaries = conversations.map(chat => ({\n\t\t\t\t\t\tid: chat.id,\n\t\t\t\t\t\ttitle: chat.abstract,\n\t\t\t\t\t\tabstract: chat.abstract,\n\t\t\t\t\t\tchatMode: chat.chatMode,\n\t\t\t\t\t\tcreatedAt: chat.createdAt,\n\t\t\t\t\t\tupdatedAt: chat.updatedAt\n\t\t\t\t\t}));\n\t\t\t\t\t\n\t\t\t\t\tthis.$store.commit('user/aiChat/SET_HISTORY_SUMMARIES', historySummaries);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 保存聊天历史摘要到Vuex\n\t\t\t */\n\t\t\tsaveChatHistory() {\n\t\t\t\tif (!this.currentChatId || this.messages.length === 0) return;\n\t\t\t\t\n\t\t\t\tconst firstUserMessage = this.messages.find(msg => msg.role === MESSAGE_TYPE.USER);\n\t\t\t\tconst title = firstUserMessage ? firstUserMessage.content.substring(0, 20) : '新对话';\n\t\t\t\t\n\t\t\t\tconst chatData = {\n\t\t\t\t\tid: this.currentChatId,\n\t\t\t\t\ttitle: title + (title.length >= 20 ? '...' : ''),\n\t\t\t\t\tabstract: title,\n\t\t\t\t\tchatMode: this.currentMode,\n\t\t\t\t\tcreatedAt: new Date().toISOString(),\n\t\t\t\t\tupdatedAt: new Date().toISOString(),\n\t\t\t\t\tmessages: this.messages.map((msg, index) => ({\n\t\t\t\t\t\tid: `msg-${msg.role === MESSAGE_TYPE.USER ? 'user' : 'ai'}-${this.currentChatId}-${index}`,\n\t\t\t\t\t\trole: msg.role,\n\t\t\t\t\t\tcontent: msg.content,\n\t\t\t\t\t\ttimestamp: new Date().toISOString()\n\t\t\t\t\t}))\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 更新到Vuex\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_CONVERSATION', chatData);\n\t\t\t\t\n\t\t\t\t// 更新历史摘要\n\t\t\t\tconst summaryData = {\n\t\t\t\t\tid: chatData.id,\n\t\t\t\t\ttitle: chatData.title,\n\t\t\t\t\tabstract: chatData.abstract,\n\t\t\t\t\tchatMode: chatData.chatMode,\n\t\t\t\t\tcreatedAt: chatData.createdAt,\n\t\t\t\t\tupdatedAt: chatData.updatedAt\n\t\t\t\t};\n\t\t\t\tthis.$store.commit('user/aiChat/ADD_HISTORY_SUMMARY', summaryData);\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 删除历史记录\n\t\t\t * @param {String} chatId - 历史记录ID\n\t\t\t */\n\t\t\tdeleteChatHistory(chatId) {\n\t\t\t\tif (!chatId) return;\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '确认删除',\n\t\t\t\t\tcontent: '确定要删除这条对话记录吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '正在删除...',\n\t\t\t\t\t\t\t\tmask: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_CONVERSATION', chatId);\n\t\t\t\t\t\t\t\tthis.$store.commit('user/aiChat/REMOVE_HISTORY_SUMMARY', chatId);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (this.currentChatId === chatId) {\n\t\t\t\t\t\t\t\t\tthis.startNewChat();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.showToast('删除成功');\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tthis.showToast('删除失败: ' + (error.message || '系统错误'), 'none', 3000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleBack(){\n\t\t\t\tNavigator.toIndex()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.page-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0; /* 移除页面容器的内边距 */\n\t\tbox-sizing: border-box;\n\t\tbackground-color: #f5f5f5;\n\t\toverflow: hidden; /* 防止内容溢出 */\n\t}\n\t\n\t/* 加载遮罩 */\n\t.loading-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 999;\n\t}\n\t\n\t.loading-content {\n\t\tbackground-color: #ffffff;\n\t\tpadding: 30rpx 60rpx;\n\t\tborder-radius: 20rpx;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.15);\n\t}\n\t\n\t.loading-content text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t/* 侧边栏容器样式 */\n\t.nav-sidebar-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\t\n\t.sidebar-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tz-index: 998;\n\t\ttransition: opacity 0.3s ease;\n\t}\n\t\n\t.main-wrapper {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttransition: transform 0.3s ease, opacity 0.3s ease;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding-bottom: 20rpx; /* 底部增加内边距 */\n\t}\n\t\n\t.main-wrapper.shifted {\n\t\ttransform: translateX(66vw);\n\t\topacity: 0.85;\n\t}\n\t\n\t.main-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0; /* 去除左右内边距 */\n\t\theight: 100%;\n\t\toverflow-y: auto; /* 允许内容垂直滚动 */\n\t}\n\t\n\t/* 筛选区域样式 */\n\t.filter-section {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 15rpx;\n\t\tmargin: 20rpx 0; /* 只保留上下间距，左右为0 */\n\t\tpadding: 20rpx;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n\t}\n\t\n\t.choice-wrapper {\n\t\tflex: 1;\n\t\tbox-sizing: border-box;\n\t\twidth: calc(100% - 150rpx); /* 考虑标签宽度和间距 */\n\t\tpadding-right: 10rpx; /* 防止右侧超出边界 */\n\t}\n\t\n\t.filter-title text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.filter-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.filter-item {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t\twidth: 100%;\n\t}\n\t\n\t.full-width {\n\t\twidth: 100%;\n\t}\n\t\n\t.filter-label {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\twhite-space: nowrap;\n\t\tmargin-right: 10rpx;\n\t\twidth: 140rpx; /* 改为固定宽度，不用min-width */\n\t\tpadding-left: 10rpx;\n\t\ttext-align: left;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.filter-select {\n\t\twidth: 100%;\n\t\tborder: 1px solid #e0e0e0;\n\t\tborder-radius: 8rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t/* 导航栏样式 */\n\t.nav-bar {\n\t\theight: 90rpx;\n\t\tbackground-color: #ffffff;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tpadding: 0 20rpx;\n\t\tborder-bottom: none; /* 移除底部边框 */\n\t\tposition: relative;\n\t\tz-index: 11; /* 提高z-index，确保显示在筛选区域上方 */\n\t}\n\t\n\t.nav-left {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.history-btn {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.history-btn .iconfont {\n\t\tfont-size: 48rpx;\n\t\tcolor: #333;\n\t}\n\t\n\t/* 使用图标替代文字，如果没有图标字体可以使用以下替代样式 */\n\t.history-btn .iconfont:before {\n\t\tcontent: \"≡\"; /* 使用三横线作为菜单图标 */\n\t}\n\t\n\t/* 新增图片图标样式 */\n\t.history-icon {\n\t\twidth: 22px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n\t\n\t.nav-title {\n\t\twidth: 60%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\toverflow: hidden;\n\t}\n\t\n\t.nav-title text {\n\t\tfont-size: 32rpx; /* 增大字体 */\n\t\tcolor: #333;\n\t\tfont-weight: 700; /* 加粗 */\n\t}\n\t\n\t.nav-right {\n\t\twidth: 20%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\talign-items: center;\n\t}\n\t\n\t.new-chat-btn {\n\t\tpadding: 14rpx 28rpx;\n\n\n\n\t\ttransition: all 0.3s;\n\t}\n\t\n\n\t\n\t/* 新增新对话图片图标样式 */\n\t.new-chat-icon {\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tdisplay: block;\n\t\tmargin: 0 auto;\n\t}\n</style>\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages/AI/AI.vue'\nwx.createPage(MiniProgramPage)"],"names":["HistorySidebar","MessageList","ModeSelector","InputSection","ChoiceSelected","Header","MESSAGE_TYPE","MESSAGE_STATUS","CHAT_MODE","_sfc_main","defineComponent","uni","mapState","state","newVal","createDataModule","schoolData","majorData","mutation","payload","error","defaultSchools","dropdown","schoolIndex","majorIndex","index","school","store","major","keyword","mode","messageContent","retryIndex","aiMessageIndex","response","errorMessage","_a","errorMsg","userMessage","message","icon","duration","text","chatId","conversation","chat","messages","msg","role","_b","conversations","historySummaries","firstUserMessage","title","chatData","summaryData","res","Navigator","MiniProgramPage"],"mappings":"oPAoHQA,EAAoB,IAAA,6CACpBC,EAAiB,IAAA,0CACjBC,EAAkB,IAAA,2CAClBC,EAAkB,IAAA,2CAClBC,EAAoB,IAAA,wCAMpBC,EAAY,IAAA,gDAMbC,EAAe,IAAA,cAAA,CACpB,KAAM,OACN,GAAI,KACJ,OAAQ,QACT,GAGMC,EAAiB,IAAA,cAAA,CACtB,QAAS,UACT,KAAM,OACN,MAAO,OACR,GAGMC,EAAY,IAAA,cAAA,CACjB,QAAS,UACT,OAAQ,SACR,OAAQ,QACT,CAAA,EAEAC,EAAeC,kBAAA,CACd,cAAY,CAEXC,QAAI,MAAM,aAAa,CACrB,EACH,WAAY,CACX,eAAAX,EACA,YAAAC,EACA,aAAAC,EACA,aAAAC,EACA,eAAAC,EACA,OAAAC,CACA,EACD,SAEI,OAAA,OAAA,OAAA,OAAA,CAAA,EAAAO,EAAQ,SAAC,cAAe,IAAA,cAAA,CAC1B,sBAAuB,CAAAC,EAAI,OAAKA,EAAM,OAAO,iBAC7C,kBAAmB,CAAAA,EAAI,OAAKA,EAAM,OAAO,cACzC,wBAAyB,CAAAA,EAAI,OAAKA,EAAM,OAAO,mBAC/C,cAAe,CAAAA,SAASA,EAAM,OAAO,SACrC,cAAe,CAAAA,EAAM,OAAGA,EAAM,OAAO,QACrC,CAAA,CAAC,CAAA,EAAA,CAGF,eAAa,CACZ,OAAO,KAAK,aAAe,EAAI,KAAK,WAAW,KAAK,WAAW,EAAI,EACnE,EACD,cAAY,CACX,OAAO,KAAK,YAAc,EAAI,KAAK,UAAU,KAAK,UAAU,EAAI,EAChE,EAGD,iBAAe,CAMd,OALkB,IAAA,cAAA,CACjB,CAACL,EAAU,OAAO,EAAG,KACrB,CAACA,EAAU,MAAM,EAAG,KACpB,CAACA,EAAU,MAAM,EAAG,MACpB,CAAA,EACgB,KAAK,WAAW,GAAK,IACtC,EAGD,kBAAgB,CACf,OAAO,KAAK,qBACZ,EACD,cAAY,CACX,OAAO,KAAK,mBAAqB,EACjC,EACD,oBAAkB,CACjB,OAAO,KAAK,uBACZ,EACD,UAAQ,CACP,OAAO,KAAK,aACZ,EAGD,oBAAkB,CACjB,OAAK,KAAK,YACH,KAAK,YAAY,QAAQ,aAAa,KAAK,YAAY,KAAK,EADrC,EAE9B,EAGD,mBAAiB,CAChB,OAAK,KAAK,WACH,KAAK,WAAW,QAAQ,aAAa,KAAK,WAAW,KAAK,EADpC,EAE9B,EACA,EACD,MAAI,CACH,MAAO,CAEN,SAAU,CAAE,EACZ,aAAc,GACd,cAAe,GACf,YAAa,UACb,aAAc,GAGd,YAAaA,EAAU,QAGvB,YAAa,GACb,WAAY,GACZ,WAAY,CAAE,EACd,UAAW,CAAE,EAGb,YAAa,KACb,WAAY,KAGZ,oBAAqB,GAGrB,kBAAmB,KAGnB,YAAW,IAAA,cAAE,EAAE,EAGf,eAAgB,GAChB,cAAe,KAEhB,EACD,MAAO,CAEN,wBAAyB,CACxB,QAAQM,EAAM,KAAA,CACTA,GAAU,OAAOA,GAAW,UAAYA,EAAO,QAClD,KAAK,cAAgBA,EAAO,OACxBA,EAAO,WACV,KAAK,YAAcA,EAAO,WAEjBA,IACV,KAAK,cAAgBA,EAEtB,EACD,UAAW,EACX,EAGD,cAAe,CACd,QAAQA,EAAM,KAAA,CACTA,GACH,KAAK,wBAAuB,CAE7B,EACD,KAAM,GACN,UAAW,EACZ,CACA,EACD,QAAM,CAKL,KAAK,mBAAkB,EAGvB,KAAK,qBAAoB,EAIzB,KAAK,2BAA0B,CAC/B,EACD,QAAM,CAEL,KAAK,2BAA0B,EAG/B,KAAK,qBAAoB,CACzB,EACD,UAAQ,CAEP,KAAK,oBAAmB,CACxB,EACD,QAAS,CAIR,0BAAwB,CAEvB,KAAK,YAAcC,mBAAiBC,EAAAA,UAAU,EAG9C,KAAK,WAAaD,mBAAiBE,EAAAA,SAAS,EAG5C,KAAK,YAAY,QAAQ,WAAW,IAAA,cAAA,CACnC,OAAQ,CAACC,EAAQ,KAAEC,EAAO,OAAA,CACzB,KAAK,YAAY,UAAUD,CAAQ,EAAE,KAAK,YAAY,MAAOC,CAAO,CACrE,CACA,CAAA,CAAA,EAED,KAAK,WAAW,QAAQ,WAAW,IAAA,cAAA,CAClC,OAAQ,CAACD,EAAQ,KAAEC,EAAO,OAAA,CACzB,KAAK,WAAW,UAAUD,CAAQ,EAAE,KAAK,WAAW,MAAOC,CAAO,CACnE,CACA,CAAA,CAAA,EAGD,KAAK,WAAa,KAAK,YAAY,QAAQ,aAAa,KAAK,YAAY,KAAK,EAC9E,KAAK,UAAY,KAAK,WAAW,QAAQ,aAAa,KAAK,WAAW,KAAK,CAC3E,EAKD,oBAAkB,CACjB,GAAI,CAEH,KAAK,yBAAwB,EAC7BR,EAAAA,MAAI,MAAM,MAAM,yBAAyB,UAAU,CAClD,OAAOS,EAAO,CACfT,EAAG,MAAC,MAAM,QAAQ,yBAAyB,UAAWS,CAAK,EAC3DT,QAAI,MAAM,QAAQ,yBAAyB,QAASS,EAAM,QAASA,EAAM,KAAK,EAG9E,MAAMC,EAAiB,CAAC,OAAQ,OAAQ,MAAM,EAG9C,KAAK,WAAaA,EAElBV,EAAAA,MAAI,UAAU,CACb,MAAO,kBACP,KAAM,MACN,CAAA,CACF,CACA,EAKD,aAAW,CACV,KAAK,kBAAiB,CACtB,EAKD,mBAAiB,CACE,CAAC,iBAAkB,eAAe,EAC1C,QAAQW,GAAS,CACtB,KAAK,OAAS,KAAK,MAAMA,CAAQ,GACpC,KAAK,MAAMA,CAAQ,EAAE,eAAiB,KAAK,MAAMA,CAAQ,EAAE,eAE7D,CAAC,CACD,EAKD,sBAAoB,CAEf,KAAK,eAER,KAAK,wBAAuB,CAE7B,EAKD,yBAAuB,CACtB,GAAI,CAAC,KAAK,cAAe,OAAM,KAE/B,GAAI,KAAK,cAAc,QAAU,KAAK,WAAW,OAAS,EAAG,CAC5D,MAAMC,EAAc,KAAK,WAAW,QAAQ,KAAK,cAAc,MAAM,EACjEA,IAAgB,KACnB,KAAK,YAAcA,EAErB,CAEA,GAAI,KAAK,cAAc,OAAS,KAAK,UAAU,OAAS,EAAG,CAC1D,MAAMC,EAAa,KAAK,UAAU,QAAQ,KAAK,cAAc,KAAK,EAC9DA,IAAe,KAClB,KAAK,WAAaA,EAEpB,CAEA,KAAK,kBAAiB,CACtB,EAOD,mBAAmBC,EAAK,KAAEC,EAAM,KAAA,CAC/B,KAAK,YAAcD,EAGnBE,EAAAA,MAAM,OAAO,iCAAkCD,CAAM,EAGrD,KAAK,kBAAiB,CACtB,EAOD,kBAAkBD,EAAK,KAAEG,EAAK,KAAA,CAC7B,KAAK,WAAaH,EAGlBE,EAAAA,MAAM,OAAO,gCAAiCC,CAAK,EAGnD,KAAK,kBAAiB,CACtB,EAMD,mBAAmBC,EAAO,KAAA,CAEzB,KAAK,YAAY,QAAQ,oBAAoB,IAAA,cAAA,CAC5C,OAAQ,CAACX,EAAQ,KAAEC,EAAO,OAAA,CACzB,KAAK,YAAY,UAAUD,CAAQ,EAAE,KAAK,YAAY,MAAOC,CAAO,CACrE,EACA,EAAEU,CAAO,EAGV,KAAK,WAAa,KAAK,YAAY,QAAQ,aAAa,KAAK,YAAY,KAAK,EAG9ElB,EAAAA,MAAI,MAAM,MAAM,yBAAyB,UAAUkB,CAAO,WAAW,KAAK,WAAW,MAAM,EAAE,CAC7F,EAMD,kBAAkBA,EAAO,KAAA,CAExB,KAAK,WAAW,QAAQ,oBAAoB,IAAA,cAAA,CAC3C,OAAQ,CAACX,EAAQ,KAAEC,EAAO,OAAA,CACzB,KAAK,WAAW,UAAUD,CAAQ,EAAE,KAAK,WAAW,MAAOC,CAAO,CACnE,EACA,EAAEU,CAAO,EAGV,KAAK,UAAY,KAAK,WAAW,QAAQ,aAAa,KAAK,WAAW,KAAK,EAG3ElB,EAAAA,MAAI,MAAM,MAAM,yBAAyB,UAAUkB,CAAO,WAAW,KAAK,UAAU,MAAM,EAAE,CAC5F,EAMD,WAAWC,EAAI,KAAA,CACd,GAAI,KAAK,cAAgBA,EAAM,OAAM,KAErC,KAAK,YAAcA,EACnB,KAAK,SAAW,GAChB,KAAK,cAAgB,QAAU,KAAK,IAAG,EAEvC,KAAK,kBAAiB,EAEtB,KAAK,OAAO,SAAS,6BAA8B,IAAA,cAAA,CAClD,OAAQ,KAAK,cACb,SAAU,KAAK,WACf,CAAA,CAAA,EAED,KAAK,aAAY,CACjB,EAKD,mBAAiB,CAChB,KAAK,YAAc,IAAA,cAAA,CAClB,KAAM,KAAK,YACX,WAAY,KAAK,cACjB,UAAW,KAAK,YAChB,CAAA,CACD,EAMD,cAAY,CACX,KAAK,SAAW,GAChB,KAAK,cAAgB,QAAU,KAAK,IAAG,EAEvC,KAAK,kBAAiB,EAEtB,KAAK,OAAO,SAAS,6BAA8B,IAAA,cAAA,CAClD,OAAQ,KAAK,cACb,SAAU,KAAK,WACf,CAAA,CAAA,EAED,KAAK,aAAY,CACjB,EAOK,cAAcC,EAAc,KAAEC,EAAa,KAAI,yDACpD,GAAI,CAACD,GAAkB,KAAK,aAAc,OAAM,QAAA,QAAA,IAAA,EAEhD,IAAsBE,OAElBD,IAAe,MAEC,KAAK,SAAS,OACjC,KAAK,SAAS,KAAK,CAClB,KAAM1B,EAAa,KACnB,QAASyB,EACT,OAAQxB,EAAe,IACvB,CAAA,EAED0B,EAAiB,KAAK,SAAS,OAC/B,KAAK,SAAS,KAAK,CAClB,KAAM3B,EAAa,GACnB,QAAS,GACT,OAAQC,EAAe,QACvB,UAAW,EACX,CAAA,IAID0B,EAAiBD,EACjB,KAAK,SAASC,CAAc,EAAE,QAAU,GACxC,KAAK,SAASA,CAAc,EAAE,OAAS1B,EAAe,QACtD,KAAK,SAAS0B,CAAc,EAAE,UAAY,IAG3C,KAAK,eAAc,EACnB,KAAK,aAAe,GAEpB,GAAI,CACH,KAAK,kBAAiB,EAEjB,KAAK,gBACT,KAAK,cAAgB,QAAU,KAAK,IAAG,EACvC,KAAK,OAAO,SAAS,6BAA8B,IAAA,cAAA,CAClD,OAAQ,KAAK,cACb,SAAU,KAAK,WACf,CAAA,CAAA,GAGF,MAAMC,EAAW,MAAM,KAAK,OAAO,SAAS,uBAAwB,IAAA,cAAA,CACnE,SAAUH,EACV,YAAa,KAAK,YAClB,OAAQ,KAAK,cACb,SAAU,KAAK,WACf,CAAA,CAAA,EAED,GAAIG,EAAS,QACZ,KAAK,SAASD,CAAc,EAAE,QAAUC,EAAS,KACjD,KAAK,SAASD,CAAc,EAAE,OAAS1B,EAAe,KACtD,KAAK,gBAAe,MACd,CACN,MAAM4B,IAAeC,EAAAF,EAAS,SAAO,MAAAE,IAAA,OAAA,KAAAA,EAAA,UAAWF,EAAS,SAAW,eACpE,KAAK,SAASD,CAAc,EAAE,QAAU,aAAaE,CAAY,GACjE,KAAK,SAASF,CAAc,EAAE,OAAS1B,EAAe,MAEtD,KAAK,UAAU4B,EAAc,OAAQ,GAAI,CAC1C,CACC,OAAOf,EAAO,CACf,MAAMiB,EAAWjB,EAAM,SAAW,aAClC,KAAK,SAASa,CAAc,EAAE,QAAU,YAAYI,CAAQ,GAC5D,KAAK,SAASJ,CAAc,EAAE,OAAS1B,EAAe,MACtD,KAAK,UAAU8B,EAAU,OAAQ,GAAI,CACtC,QAAU,CACT,KAAK,aAAe,GACpB,KAAK,SAASJ,CAAc,EAAE,UAAY,GAC1C,KAAK,eAAc,CACpB,GACA,EAMD,YAAYF,EAAc,KAAA,CACzB,KAAK,cAAcA,CAAc,CACjC,EAMD,aAAaN,EAAK,KAAA,CACjB,GAAIA,EAAQ,GAAK,KAAK,SAASA,CAAK,EAAE,OAASnB,EAAa,GAC3D,OAAM,KAGP,MAAMgC,EAAc,KAAK,SAASb,EAAQ,CAAC,EAC3C,GAAIa,EAAY,OAAShC,EAAa,KACrC,OAAM,KAGP,KAAK,cAAcgC,EAAY,QAASb,CAAK,CAC7C,EAKD,qBAAmB,CACd,KAAK,mBAAqB,KAAK,kBAAkB,QACpD,KAAK,kBAAkB,QACvB,KAAK,kBAAoB,KAE1B,EAKD,gBAAc,CACb,GAAI,CAAC,KAAK,oBAAqB,OAAM,KAEjC,KAAK,SAAS,OAAS,IAC1B,KAAK,aAAe,QAAU,KAAK,SAAS,OAAS,GAEtD,EAKD,SAAS,EAAC,KAAA,CAET,EAQD,UAAUc,EAAO,KAAEC,EAAO,OAAQC,EAAW,IAAI,CAChD9B,EAAAA,MAAI,UAAU,CACb,MAAO4B,EACP,KAAMC,EACN,SAAUC,CACV,CAAA,CACD,EAMD,cAAcC,EAAO,UAAS,CACzBA,IAAS,GACZ,KAAK,cAAgB,IAErB,KAAK,YAAcA,EACnB,KAAK,cAAgB,GAEtB,EAGD,eAAa,CACZ,KAAK,eAAiB,CAAC,KAAK,cAC5B,EAED,cAAY,CACX,KAAK,eAAiB,EACtB,EAMD,gBAAgBC,EAAM,KAAA,CACrB,GAAI,CAACA,EAAQ,OAAM,KAEnB,GAAI,CACH,KAAK,cAAc,aAAa,EAIhC,MAAMC,GADgB,KAAK,cAAgB,IACR,KAAK,CAAAC,EAAG,OAAKA,EAAK,KAAOF,CAAM,EAElE,GAAIC,EAAc,CAEjB,KAAK,cAAgBD,EAGjBC,EAAa,WAChB,KAAK,YAAcA,EAAa,SAChC,KAAK,kBAAiB,GAIvB,MAAME,EAAWF,EAAa,SAAWA,EAAa,SAAS,IAAI,CAAAG,EAAE,OAAA,CACpE,IAAIC,EAAOD,EAAI,MAAQzC,EAAa,GAEpC,MAAI,CAACyC,EAAI,MAAQA,EAAI,KAChBA,EAAI,GAAG,SAAS,UAAU,EAC7BC,EAAO1C,EAAa,KACVyC,EAAI,GAAG,SAAS,YAAY,IACtCC,EAAO1C,EAAa,SAIf,IAAA,cAAA,CACN,KAAM0C,EACN,QAASD,EAAI,QACb,OAAQxC,EAAe,KACvB,UAAW,GACX,CACD,CAAA,EAAI,CAAA,EAEL,KAAK,SAAWuC,EAChB,KAAK,aAAY,EAEjB,KAAK,UAAU,IAAA,CACd,KAAK,eAAc,CACpB,CAAC,EAED,KAAK,cAAc,EAAK,CACvB,MAED,KAAK,OAAO,SAAS,uBAAwBH,CAAM,EAAE,KAAK,CAAAT,EAAO,OAAA,SAChE,GAAIA,EAAS,QACZ,KAAK,cAAgBS,EAEjBT,EAAS,KAAK,WACjB,KAAK,YAAcA,EAAS,KAAK,SACjC,KAAK,kBAAiB,GAGvB,KAAK,SAAWA,EAAS,KAAK,UAAY,CAAA,EAC1C,KAAK,aAAY,EAEjB,KAAK,UAAU,IAAA,CACd,KAAK,eAAc,CACpB,CAAC,MACK,CACN,MAAMG,IAAWD,EAAAF,EAAS,SAAO,MAAAE,IAAA,OAAA,KAAAA,EAAA,UAAWF,EAAS,SAAW,SAChE,KAAK,UAAU,SAASG,CAAQ,GAAI,OAAQ,GAAI,MAE5CH,EAAS,SAAO,MAAAe,IAAA,OAAA,KAAAA,EAAA,aAAc,KACjC,KAAK,aAAY,CAEnB,EACA,EAAE,QAAQ,IAAA,CACV,KAAK,cAAc,EAAK,CACzB,CAAC,CAED,OAAO7B,EAAO,CACfT,EAAG,MAAC,MAAM,QAAQ,yBAAyB,YAAaS,CAAK,EAC7D,KAAK,cAAc,EAAK,EACxB,KAAK,aAAY,CAClB,CACA,EAKD,4BAA0B,CACzB,MAAM8B,EAAgB,KAAK,aAE3B,GAAIA,GAAiBA,EAAc,OAAS,EAAG,CAC9C,MAAMC,EAAmBD,EAAc,IAAI,CAAAL,EAAG,OAAM,IAAA,cAAA,CACnD,GAAIA,EAAK,GACT,MAAOA,EAAK,SACZ,SAAUA,EAAK,SACf,SAAUA,EAAK,SACf,UAAWA,EAAK,UAChB,UAAWA,EAAK,UAChB,CAAC,EAEF,KAAK,OAAO,OAAO,oCAAqCM,CAAgB,CACzE,CACA,EAKD,iBAAe,CACd,GAAI,CAAC,KAAK,eAAiB,KAAK,SAAS,SAAW,EAAG,OAAM,KAE7D,MAAMC,EAAmB,IAAA,UAAA,KAAK,SAAcL,GAAOA,EAAI,OAASzC,EAAa,IAAI,EAC3E+C,EAAQD,EAAmBA,EAAiB,QAAQ,UAAU,EAAG,EAAE,EAAI,MAEvEE,EAAW,IAAA,cAAA,CAChB,GAAI,KAAK,cACT,MAAOD,GAASA,EAAM,QAAU,GAAK,MAAQ,IAC7C,SAAUA,EACV,SAAU,KAAK,YACf,UAAW,IAAI,KAAM,EAAC,YAAa,EACnC,UAAW,IAAI,KAAM,EAAC,YAAa,EACnC,SAAU,KAAK,SAAS,IAAI,CAACN,EAAKtB,IAAW,IAAA,cAAA,CAC5C,GAAI,OAAOsB,EAAI,OAASzC,EAAa,KAAO,OAAS,IAAI,IAAI,KAAK,aAAa,IAAImB,CAAK,GACxF,KAAMsB,EAAI,KACV,QAASA,EAAI,QACb,UAAW,IAAI,KAAM,EAAC,YAAY,CAClC,CAAA,CAAC,CACF,CAAA,EAGD,KAAK,OAAO,OAAO,+BAAgCO,CAAQ,EAG3D,MAAMC,EAAc,IAAA,cAAA,CACnB,GAAID,EAAS,GACb,MAAOA,EAAS,MAChB,SAAUA,EAAS,SACnB,SAAUA,EAAS,SACnB,UAAWA,EAAS,UACpB,UAAWA,EAAS,SACpB,CAAA,EACD,KAAK,OAAO,OAAO,kCAAmCC,CAAW,CACjE,EAMD,kBAAkBZ,EAAM,KAAA,CACvB,GAAI,CAACA,EAAQ,OAAM,KAEnBhC,QAAI,UAAU,IAAA,cAAA,CACb,MAAO,OACP,QAAS,gBACT,QAAU6C,GAAG,CACZ,GAAIA,EAAI,QAAS,CAChB7C,EAAAA,MAAI,YAAY,CACf,MAAO,UACP,KAAM,EACN,CAAA,EAED,GAAI,CACH,KAAK,OAAO,OAAO,kCAAmCgC,CAAM,EAC5D,KAAK,OAAO,OAAO,qCAAsCA,CAAM,EAE/DhC,EAAG,MAAC,YAAW,EAEX,KAAK,gBAAkBgC,GAC1B,KAAK,aAAY,EAGlB,KAAK,UAAU,MAAM,CACpB,OAAOvB,EAAO,CACfT,EAAG,MAAC,YAAW,EACf,KAAK,UAAU,UAAYS,EAAM,SAAW,QAAS,OAAQ,GAAI,CAClE,CACD,CACD,CACA,CAAA,CAAA,CACD,EACD,YAAU,CACTqC,EAAS,UAAC,QAAO,CAClB,CACD,EACD,64DCt3BD,GAAG,WAAWC,CAAe"}