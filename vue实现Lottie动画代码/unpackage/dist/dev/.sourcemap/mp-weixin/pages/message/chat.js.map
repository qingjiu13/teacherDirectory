{"version":3,"file":"chat.js","sources":["pages/message/chat.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzc2FnZS9jaGF0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"chat-container\">\r\n\t\t<view class=\"chat-header\">\r\n\t\t\t<view class=\"back-button\" @click=\"goBack\">\r\n\t\t\t\t<text>返回</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"teacher-name\">{{teacherName}}</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<scroll-view class=\"message-list\" scroll-y=\"true\" scroll-into-view=\"msg-bottom\">\r\n\t\t\t<view class=\"message-wrapper\" v-for=\"(message, index) in messages\" :key=\"index\">\r\n\t\t\t\t<view class=\"message\" :class=\"message.isSelf ? 'self-message' : 'teacher-message'\">\r\n\t\t\t\t\t<text class=\"message-content\">{{message.content}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view id=\"msg-bottom\" style=\"height: 20px;\"></view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<view class=\"input-area\">\r\n\t\t\t<input type=\"text\" class=\"message-input\" v-model=\"inputMessage\" placeholder=\"请输入消息...\" />\r\n\t\t\t<button class=\"send-button\" @click=\"sendMessage\">发送</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tteacherId: '',\r\n\t\t\tteacherName: '老师',\r\n\t\t\tinputMessage: '',\r\n\t\t\tmessages: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcontent: '您好，我是您的专业辅导老师，有什么可以帮助您的？',\r\n\t\t\t\t\tisSelf: false\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomputed: {\r\n\t\t/**\r\n\t\t * 从Vuex获取老师信息\r\n\t\t */\r\n\t\t...mapGetters('user/match', ['teacherInfo'])\r\n\t},\r\n\t\r\n\tonLoad(options) {\r\n\t\tif (options.userId) {\r\n\t\t\tthis.teacherId = options.userId;\r\n\t\t\t// 加载教师信息\r\n\t\t\tthis.loadTeacherInfo();\r\n\t\t}\r\n\t\t// 添加对teacherId参数的支持\r\n\t\telse if (options.teacherId) {\r\n\t\t\tthis.teacherId = options.teacherId;\r\n\t\t\tthis.teacherName = options.teacherName || '老师';\r\n\t\t\t// 获取完整教师信息\r\n\t\t\tthis.loadTeacherInfo();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 返回上一页\r\n\t\t */\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack();\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 加载教师信息\r\n\t\t */\r\n\t\tloadTeacherInfo() {\r\n\t\t\tif (!this.teacherId) return;\r\n\t\t\t\r\n\t\t\t// 直接从Vuex中获取教师信息\r\n\t\t\tconst teacherData = this.teacherInfo(this.teacherId);\r\n\t\t\t\r\n\t\t\tif (teacherData && teacherData.name) {\r\n\t\t\t\tthis.teacherName = teacherData.name;\r\n\t\t\t} else {\r\n\t\t\t\t// 如果没有找到，使用本地备选数据\r\n\t\t\t\tthis.getTeacherNameFromLocal();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 从本地模拟数据获取教师姓名（作为后备方案）\r\n\t\t */\r\n\t\tgetTeacherNameFromLocal() {\r\n\t\t\t// 模拟获取教师信息\r\n\t\t\tconst teachers = {\r\n\t\t\t\t'teacher001': '张老师',\r\n\t\t\t\t'teacher002': '李老师',\r\n\t\t\t\t'1': '王教授',\r\n\t\t\t\t'2': '李博士',\r\n\t\t\t\t'3': '张老师',\r\n\t\t\t\t'4': '刘教授',\r\n\t\t\t\t'5': '陈老师'\r\n\t\t\t};\r\n\t\t\tthis.teacherName = teachers[this.teacherId] || '老师';\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 发送消息\r\n\t\t */\r\n\t\tsendMessage() {\r\n\t\t\tif (!this.inputMessage.trim()) return;\r\n\t\t\t\r\n\t\t\t// 添加自己的消息\r\n\t\t\tthis.messages.push({\r\n\t\t\t\tcontent: this.inputMessage,\r\n\t\t\t\tisSelf: true\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tconst userMessage = this.inputMessage;\r\n\t\t\tthis.inputMessage = '';\r\n\t\t\t\r\n\t\t\t// 模拟教师回复\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.messages.push({\r\n\t\t\t\t\tcontent: `收到您的消息：\"${userMessage}\"，我会尽快回复您。`,\r\n\t\t\t\t\tisSelf: false\r\n\t\t\t\t});\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n\t.chat-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t.chat-header {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tpadding: 15px 20px;\r\n\t\tbackground-color: #1E90FF;\r\n\t}\r\n\t\r\n\t.back-button {\r\n\t\tpadding: 8px 15px;\r\n\t\tmargin-right: 15px;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.25);\r\n\t\tborder-radius: 20px;\r\n\t}\r\n\t\r\n\t.back-button text {\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t\r\n\t.teacher-name {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\t\r\n\t.message-list {\r\n\t\tflex: 1;\r\n\t\tpadding: 15px;\r\n\t}\r\n\t\r\n\t.message-wrapper {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t\r\n\t.message {\r\n\t\tmax-width: 70%;\r\n\t\tpadding: 12px 15px;\r\n\t\tborder-radius: 18px;\r\n\t\tword-break: break-all;\r\n\t}\r\n\t\r\n\t.self-message {\r\n\t\talign-self: flex-end;\r\n\t\tbackground-color: #DCF8C6;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\t\r\n\t.teacher-message {\r\n\t\talign-self: flex-start;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\t\r\n\t.message-content {\r\n\t\tfont-size: 16px;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\t\r\n\t.input-area {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 10px 15px;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tborder-top: 1px solid #E0E0E0;\r\n\t}\r\n\t\r\n\t.message-input {\r\n\t\tflex: 1;\r\n\t\theight: 40px;\r\n\t\tpadding: 0 15px;\r\n\t\tbackground-color: #F0F0F0;\r\n\t\tborder-radius: 20px;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t\r\n\t.send-button {\r\n\t\twidth: 80px;\r\n\t\theight: 40px;\r\n\t\tmargin-left: 10px;\r\n\t\tbackground-color: #1E90FF;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 16px;\r\n\t\tline-height: 40px;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 20px;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pages/message/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","mapGetters","options","uni","teacherData","teachers","userMessage","MiniProgramPage"],"mappings":"uDA4BAA,EAAeC,kBAAA,CACd,MAAI,CACH,MAAO,CACN,UAAW,GACX,YAAa,KACb,aAAc,GACd,SAAU,CACT,IAAA,cAAA,CACC,QAAS,2BACT,OAAQ,EACT,CAAA,CACD,EAED,EAED,SAAQ,OAAA,OAAA,CAAA,EAIJC,EAAU,WAAC,aAAc,CAAC,aAAa,CAAC,CAAA,EAG5C,OAAOC,EAAO,CACTA,EAAQ,QACX,KAAK,UAAYA,EAAQ,OAEzB,KAAK,gBAAe,GAGZA,EAAQ,YAChB,KAAK,UAAYA,EAAQ,UACzB,KAAK,YAAcA,EAAQ,aAAe,KAE1C,KAAK,gBAAe,EAErB,EACD,QAAS,CAIR,QAAM,CACLC,EAAG,MAAC,aAAY,CAChB,EAKD,iBAAe,CACd,GAAI,CAAC,KAAK,UAAW,OAAM,KAG3B,MAAMC,EAAc,KAAK,YAAY,KAAK,SAAS,EAE/CA,GAAeA,EAAY,KAC9B,KAAK,YAAcA,EAAY,KAG/B,KAAK,wBAAuB,CAE7B,EAKD,yBAAuB,CAEtB,MAAMC,EAAW,IAAA,cAAA,CAChB,WAAc,MACd,WAAc,MACd,EAAK,MACL,EAAK,MACL,EAAK,MACL,EAAK,MACL,EAAK,KACL,CAAA,EACD,KAAK,YAAcA,EAAS,KAAK,SAAS,GAAK,IAC/C,EAKD,aAAW,CACV,GAAI,CAAC,KAAK,aAAa,KAAM,EAAE,OAAM,KAGrC,KAAK,SAAS,KAAK,CAClB,QAAS,KAAK,aACd,OAAQ,EACR,CAAA,EAED,MAAMC,EAAc,KAAK,aACzB,KAAK,aAAe,GAGpB,WAAW,IAAA,CACV,KAAK,SAAS,KAAK,CAClB,QAAS,WAAWA,CAAW,aAC/B,OAAQ,EACR,CAAA,CACD,EAAE,GAAI,CACR,CACD,EACD,gZCjIA,GAAG,WAAWC,CAAe"}