{"version":3,"file":"HistorySidebar.js","sources":["pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue"],"sourcesContent":["<template>\r\n\t<view class=\"history-sidebar\" :class=\"{visible: visible}\">\r\n\t\t<view class=\"sidebar-header\">\r\n\t\t\t<text class=\"sidebar-title\">历史记录</text>\r\n\t\t</view>\r\n\t\t<scroll-view class=\"history-list\" scroll-y=\"true\">\r\n\t\t\t<!-- 今天 -->\r\n\t\t\t<view v-if=\"groupedHistory.today && groupedHistory.today.length\" class=\"history-group\">\r\n\t\t\t\t<view class=\"history-group-title\">今天</view>\r\n\t\t\t\t<view v-for=\"item in groupedHistory.today\" :key=\"item.id\" class=\"history-item-outer\" :class=\"{'active': currentChatId === item.id}\">\r\n\t\t\t\t\t<view v-if=\"currentChatId === item.id\" class=\"history-item-outer-gradient\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-inner\">\r\n\t\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"history-item-inner\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 七天内 -->\r\n\t\t\t<view v-if=\"groupedHistory.week && groupedHistory.week.length\" class=\"history-group\">\r\n\t\t\t\t<view class=\"history-group-title\">七天内</view>\r\n\t\t\t\t<view v-for=\"item in groupedHistory.week\" :key=\"item.id\" class=\"history-item-outer\" :class=\"{'active': currentChatId === item.id}\">\r\n\t\t\t\t\t<view v-if=\"currentChatId === item.id\" class=\"history-item-outer-gradient\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-inner\">\r\n\t\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"history-item-inner\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 30天内 -->\r\n\t\t\t<view v-if=\"groupedHistory.month && groupedHistory.month.length\" class=\"history-group\">\r\n\t\t\t\t<view class=\"history-group-title\">30天内</view>\r\n\t\t\t\t<view v-for=\"item in groupedHistory.month\" :key=\"item.id\" class=\"history-item-outer\" :class=\"{'active': currentChatId === item.id}\">\r\n\t\t\t\t\t<view v-if=\"currentChatId === item.id\" class=\"history-item-outer-gradient\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-inner\">\r\n\t\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"history-item-inner\" @click=\"loadChatHistory(item.id)\">\r\n\t\t\t\t\t\t<view class=\"history-item-content\">\r\n\t\t\t\t\t\t\t<text class=\"history-title\">{{item.abstract || item.title}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"history-actions\">\r\n\t\t\t\t\t\t\t<text class=\"mode-badge\" v-if=\"item.chatMode\">{{getModeLabel(item.chatMode)}}</text>\r\n\t\t\t\t\t\t\t<view class=\"history-delete\" @click.stop=\"deleteChatHistory(item.id, $event)\">\r\n    \t\t\t\t\t\t\t<image class=\"delete-icon-img\" src=\"../.././static/AIchat/delate.png\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 没有历史记录 -->\r\n\t\t\t<view class=\"empty-history\" v-if=\"!hasAnyHistory\">\r\n\t\t\t\t<text class=\"empty-history-text\">暂无历史记录</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport { mapState, mapActions } from 'vuex';\r\n\t// 导入时间戳格式化函数\r\n\timport { formatTimestamp } from '../../../components/timeStamp.js';\r\n\t\r\n\t/**\r\n\t * @description 历史记录侧边栏组件，按时间分组显示\r\n\t * @property {Boolean} visible - 侧边栏是否可见\r\n\t * @property {Object} groupedHistory - 按时间分组的历史记录\r\n\t * @property {String} currentChatId - 当前选中的聊天ID\r\n\t * @event {Function} loadChat - 加载聊天历史记录\r\n\t * @event {Function} deleteChat - 删除聊天历史记录\r\n\t */\r\n\texport default {\r\n\t\tname: \"HistorySidebar\",\r\n\t\tprops: {\r\n\t\t\tvisible: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tgroupedHistory: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({ today: [], week: [], month: [] })\r\n\t\t\t},\r\n\t\t\tcurrentChatId: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t/**\r\n\t\t\t * @description 从 Vuex 状态中获取数据\r\n\t\t\t */\r\n\t\t\t...mapState({\r\n\t\t\t\tconversations: state => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn state.user && state.user.aiChat && state.user.aiChat.aiChat \r\n\t\t\t\t\t\t\t? (state.user.aiChat.aiChat.conversations || []) \r\n\t\t\t\t\t\t\t: [];\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:145','获取 conversations 状态出错:', e);\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tactiveConversation: state => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn state.user && state.user.aiChat && state.user.aiChat.aiChat \r\n\t\t\t\t\t\t\t? state.user.aiChat.aiChat.activeConversation \r\n\t\t\t\t\t\t\t: null;\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:155','获取 activeConversation 状态出错:', e);\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 按日期分类的历史记录\r\n\t\t\t * @returns {Object} 分类后的历史记录\r\n\t\t\t */\r\n\t\t\tgroupedConversationsByDate() {\r\n\t\t\t\t// 获取当前日期、一周前日期和一个月前日期的时间戳\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tconst today = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\r\n\t\t\t\tconst weekAgo = today - 7 * 24 * 60 * 60 * 1000;\r\n\t\t\t\tconst monthAgo = today - 30 * 24 * 60 * 60 * 1000;\r\n\t\t\t\t\r\n\t\t\t\t// 分类存储\r\n\t\t\t\tconst result = {\r\n\t\t\t\t\ttoday: [],\r\n\t\t\t\t\tweek: [],\r\n\t\t\t\t\tmonth: []\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 遍历所有对话记录进行分类\r\n\t\t\t\tthis.conversations.forEach(conv => {\r\n\t\t\t\t\t// 使用更新时间作为分类依据\r\n\t\t\t\t\tconst timestamp = conv.updatedAt || conv.createdAt;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 格式化时间戳用于调试\r\n\t\t\t\t\tconst formattedDate = formatTimestamp(timestamp);\r\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:186',`对话 ${conv.id} 的时间: ${formattedDate}, 时间戳: ${timestamp}`);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (timestamp >= today) {\r\n\t\t\t\t\t\tresult.today.push(conv);\r\n\t\t\t\t\t} else if (timestamp >= weekAgo) {\r\n\t\t\t\t\t\tresult.week.push(conv);\r\n\t\t\t\t\t} else if (timestamp >= monthAgo) {\r\n\t\t\t\t\t\tresult.month.push(conv);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 按时间戳倒序排序（最新的在前面）\r\n\t\t\t\t['today', 'week', 'month'].forEach(key => {\r\n\t\t\t\t\tresult[key].sort((a, b) => {\r\n\t\t\t\t\t\tconst timeA = a.updatedAt || a.createdAt;\r\n\t\t\t\t\t\tconst timeB = b.updatedAt || b.createdAt;\r\n\t\t\t\t\t\treturn timeB - timeA;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 是否有任何历史记录\r\n\t\t\t * @returns {Boolean}\r\n\t\t\t */\r\n\t\t\thasAnyHistory() {\r\n\t\t\t\tconst g = this.groupedHistory;\r\n\t\t\t\treturn (g.today && g.today.length) || (g.week && g.week.length) || (g.month && g.month.length);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 添加调试信息\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:220','=================== 调试信息开始 ===================');\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:221','完整的 Vuex store:', this.$store);\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:222','Vuex store状态:', this.$store.state);\r\n\t\t\t\r\n\t\t\tif (this.$store.state.user) {\r\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:225','user模块状态:', this.$store.state.user);\r\n\t\t\t\t\r\n\t\t\t\tif (this.$store.state.user.aiChat) {\r\n\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:228','aiChat模块状态:', this.$store.state.user.aiChat);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.$store.state.user.aiChat.aiChat) {\r\n\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:231','内层 aiChat:', this.$store.state.user.aiChat.aiChat);\r\n\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:232','内层 aiChat conversations:', this.$store.state.user.aiChat.aiChat.conversations);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:234','无法访问内层 aiChat!');\r\n\t\t\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:235','aiChat 模块完整内容:', JSON.stringify(this.$store.state.user.aiChat));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:238','无法访问 aiChat 模块!');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.__f__('error','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:241','无法访问 user 模块!');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:244','组件计算的 conversations:', this.conversations);\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:245','组件计算的 historySummaries:', this.historySummaries);\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:246','组件计算的 currentChatId:', this.currentChatId);\r\n\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:247','=================== 调试信息结束 ===================');\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 在组件挂载时初始化对话分类\r\n\t\t\tthis.initConversationGroups();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions({\r\n\t\t\t\tsetActiveConversation: 'user/aiChat/setCurrentChat',\r\n\t\t\t\tdeleteConversation: 'user/aiChat/deleteChat'\r\n\t\t\t}),\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 初始化对话分组\r\n\t\t\t */\r\n\t\t\tinitConversationGroups() {\r\n\t\t\t\t// 初始化对话分组，将分组结果通过事件发送给父组件\r\n\t\t\t\tconst groupedConversations = this.groupedConversationsByDate;\r\n\t\t\t\tthis.$emit('updateGroups', groupedConversations);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 格式化时间戳为人类可读格式\r\n\t\t\t * @param {Number} timestamp - 时间戳\r\n\t\t\t * @param {String} format - 日期格式\r\n\t\t\t * @returns {String} 格式化后的日期字符串\r\n\t\t\t */\r\n\t\t\tformatDate(timestamp, format = 'YYYY-MM-DD') {\r\n\t\t\t\treturn formatTimestamp(timestamp, format);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 获取对话模式的中文标签\r\n\t\t\t * @param {String} mode - 对话模式\r\n\t\t\t * @returns {String} 对话模式的中文标签\r\n\t\t\t */\r\n\t\t\tgetModeLabel(mode) {\r\n\t\t\t\tconst modeLabels = {\r\n\t\t\t\t\t'general': '通用',\r\n\t\t\t\t\t'school': '择校',\r\n\t\t\t\t\t'career': '职业规划'\r\n\t\t\t\t};\r\n\t\t\t\treturn modeLabels[mode] || '通用';\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 加载聊天历史\r\n\t\t\t * @param {String} chatId - 聊天ID\r\n\t\t\t */\r\n\t\t\tloadChatHistory(chatId) {\r\n\t\t\t\t// 通过 Vuex action 设置当前活跃的对话\r\n\t\t\t\tthis.setActiveConversation(chatId);\r\n\t\t\t\t\r\n\t\t\t\t// 如果需要加载完整对话内容，还可以添加这个 action 调用\r\n\t\t\t\t// this.$store.dispatch('user/aiChat/loadChat', chatId);\r\n\t\t\t\t\r\n\t\t\t\t// 通知父组件\r\n\t\t\t\tthis.$emit('loadChat', chatId);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 删除历史记录\r\n\t\t\t * @param {String} chatId - 聊天ID\r\n\t\t\t * @param {Event} e - 事件对象，用于阻止冒泡\r\n\t\t\t */\r\n\t\t\tdeleteChatHistory(chatId, e) {\r\n\t\t\t\t// 确保阻止事件冒泡，避免触发点击加载历史记录\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.__f__('log','at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:319','删除历史记录:', chatId);\r\n\t\t\t\t// 通过 Vuex action 删除对话\r\n\t\t\t\tthis.deleteConversation(chatId);\r\n\t\t\t\t// 通知父组件\r\n\t\t\t\tthis.$emit('deleteChat', chatId);\r\n\t\t\t},\r\n\t\t\t\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.history-sidebar {\r\n\t\tposition: fixed;\r\n\t\ttop: 206rpx;\r\n\t\tleft: 0;\r\n\t\twidth: 66vw;\r\n\t\theight: calc(100vh - 88rpx);\r\n\t\tbackground-color: #ffffff;\r\n\t\ttransform: translateX(-100%);\r\n\t\ttransition: transform 0.3s ease;\r\n\t\tz-index: 2000;\r\n\t\tbox-shadow: 0 0 20rpx rgba(0, 0, 0, 0.1);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding-left: 32rpx;\r\n\t\tpadding-right: 32rpx;\r\n\t}\r\n\t\r\n\t.history-sidebar.visible {\r\n\t\ttransform: translateX(0);\r\n\t}\r\n\t\r\n\t.sidebar-header {\r\n\t\tpadding: 30rpx 0 30rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\theight: 80rpx;\r\n\t}\r\n\t\r\n\t.sidebar-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: rgba(47, 47, 47, 1);\r\n\t\tfont-weight: 600;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t\r\n\t.history-list {\r\n\t\tflex: 1;\r\n\t\theight: calc(100vh - 168rpx);\r\n\t\tpadding: 0;\r\n\t\tbackground-color: rgba(255, 255, 255, 1);\r\n\t}\r\n\t\r\n\t.empty-history {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 40rpx 0;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.empty-history-text {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.history-item-outer {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 16px;\r\n\t\tmargin-bottom: 2rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t.history-item-outer-gradient {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 40rpx;\r\n\t\tpadding: 2rpx 2rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: linear-gradient(180deg, rgba(228, 241, 255, 1) 0%, rgba(34, 136, 249, 1) 100%);\r\n\t}\r\n\t\r\n\t.history-item-inner {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 40rpx;\r\n\t\tbackground: #fff;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tposition: relative;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\t\r\n\t.history-item-outer.active .history-item-inner::after{\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(180deg, rgba(194, 221, 250, 0.1) 11.54%, rgba(34, 136, 249, 0.1) 111.54%);\r\n\r\n\t}\r\n\t\r\n\t.history-item-content {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.history-title {\r\n\t\tfont-family: PingFang SC;\r\n\t\tfont-weight: 400;\r\n\t\tfont-size: 26rpx;\r\n\t\tline-height: 100%;\r\n\t\tletter-spacing: -1.1rpx;\r\n\t\tcolor: rgba(0, 0, 0, 1);\r\n\t\t/* 单行文本截断 */\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tmax-width: 80%;\r\n\t}\r\n\t\r\n\t\r\n\t.history-actions {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.mode-badge {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: rgba(34, 136, 249, 0.8);\r\n\t\tpadding: 6rpx 12rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tmargin-right: 16rpx;\r\n\t}\r\n\t\r\n\t.history-delete {\r\n\t\twidth: 28rpx;\r\n\t\theight: 28rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tborder-radius: 50%;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t\r\n\t.delete-icon-img {\r\n\t\twidth: 28rpx;\r\n\t\theight: 28rpx;\r\n\t}\r\n\t.history-group-title {\r\n\t\tfont-family: PingFang SC;\r\n\t\tfont-weight: 400;\r\n\t\tfont-size: 24rpx;\r\n\t\tline-height: 100%;\r\n\t\tletter-spacing: -1.1rpx;\r\n\t\tcolor: #888;\r\n\t\tfont-weight: bold;\r\n\t\tpadding: 20rpx 0 10rpx 0;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t.history-group {\r\n\t\tpadding-bottom: 40rpx;\r\n\t}\r\n</style> "],"names":["_sfc_main","defineComponent","mapState","state","e","uni","now","today","weekAgo","monthAgo","result","conv","timestamp","formattedDate","formatTimestamp","key","a","b","timeA","g","mapActions","groupedConversations","format","mode","chatId"],"mappings":"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"}