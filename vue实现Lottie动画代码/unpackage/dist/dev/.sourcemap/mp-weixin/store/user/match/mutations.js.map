{"version":3,"file":"mutations.js","sources":["store/user/match/mutations.js"],"sourcesContent":["/**\r\n * 匹配模块的mutations\r\n * @module store/user/match/mutations\r\n */\r\n\r\nexport default {\r\n\r\n  /**\r\n   * 设置搜索关键词\r\n   * @param {Object} state - 状态对象\r\n   * @param {string} searchKey - 搜索关键词\r\n   */\r\n  SET_SEARCH_KEY(state, searchKey) {\r\n    state.searchKey = searchKey\r\n  },\r\n\r\n  /**\r\n   * 设置匹配列表\r\n   * @param {Object} state - 状态对象\r\n   * @param {Array} matchList - 匹配列表数组\r\n   */\r\n  SET_MATCH_LIST(state, matchList) {\r\n    state.matchList = matchList\r\n  },\r\n\r\n  /**\r\n   * 追加匹配列表\r\n   * @param {Object} state - 状态对象\r\n   * @param {Array} additionalMatches - 追加的匹配列表数组\r\n   */\r\n  APPEND_MATCH_LIST(state, additionalMatches) {\r\n    state.matchList = [...state.matchList, ...additionalMatches]\r\n  },\r\n  \r\n\r\n  /**\r\n   * 下面是对接api函数页码相关的mutations\r\n   * 设置分页信息\r\n   * @param {Object} state - 当前模块的state\r\n   * @param {Object} pagination - 分页信息\r\n   * @param {number} pagination.currentPage - 当前页码\r\n   * @param {boolean} pagination.hasMore - 是否还有更多数据\r\n   */\r\n  SET_PAGINATION(state, { currentPage, hasMore }) {\r\n    state.currentPage = currentPage;\r\n    state.hasMore = hasMore;\r\n  },\r\n  \r\n  /**\r\n   * 设置老师详细信息\r\n   * @param {Object} state - 当前模块的state\r\n   * @param {number} payload.teacherId - 老师ID（数字类型）\r\n   * @param {Object} payload.detail - 老师详细信息\r\n   */\r\n  SET_TEACHER_DETAIL(state, { teacherId, detail }) {\r\n    console.log('=== SET_TEACHER_DETAIL mutation 开始执行 ===');\r\n    console.log('接收到的参数 - teacherId:', teacherId, '类型:', typeof teacherId);\r\n    console.log('接收到的参数 - detail:', JSON.stringify(detail, null, 2));\r\n    console.log('当前 matchList 长度:', state.matchList.length);\r\n    \r\n    // 确保teacherId是数字类型\r\n    const normalizedTeacherId = Number(teacherId);\r\n    console.log('标准化后的 teacherId:', normalizedTeacherId);\r\n    \r\n    // 找到匹配列表中对应的老师\r\n    const teacherIndex = state.matchList.findIndex(teacher => Number(teacher.id) === normalizedTeacherId);\r\n    console.log('查找到的老师索引:', teacherIndex);\r\n    \r\n    if (teacherIndex !== -1) {\r\n      console.log('找到了对应的老师，准备更新...');\r\n      const originalTeacher = state.matchList[teacherIndex];\r\n      console.log('原始老师数据:', JSON.stringify(originalTeacher, null, 2));\r\n      \r\n      // 更新老师的服务信息\r\n      const updatedTeacher = {\r\n        ...originalTeacher,\r\n        // 更新服务列表 - 直接使用API返回的service数组\r\n        service: detail.service || []\r\n      };\r\n      \r\n      console.log('合并后的老师数据:', JSON.stringify(updatedTeacher, null, 2));\r\n      \r\n      // 使用splice保证响应式更新\r\n      state.matchList.splice(teacherIndex, 1, updatedTeacher);\r\n      \r\n      console.log('老师信息已更新到matchList');\r\n      console.log('更新后的服务数量:', updatedTeacher.service?.length || 0);\r\n    } else {\r\n      console.warn('=== 未找到对应的老师 ===');\r\n      console.warn('查找的 teacherId:', normalizedTeacherId, '类型:', typeof normalizedTeacherId);\r\n      console.warn('matchList 中的所有 ID:');\r\n      state.matchList.forEach((teacher, index) => {\r\n        console.warn(`[${index}] id: ${teacher.id} (类型: ${typeof teacher.id})`);\r\n      });\r\n    }\r\n    \r\n    console.log('=== SET_TEACHER_DETAIL mutation 执行完成 ===');\r\n  },\r\n\r\n  /**\r\n   * 设置非专业课选择\r\n   * @param {Object} state - 当前模块的state\r\n   * @param {Object} payload - 非专业课信息\r\n   * @param {string} payload.type - 非专业课类型 ('math', 'english', 'politics', 'other')\r\n   * @param {number} payload.id - 选项ID\r\n   * @param {string} payload.name - 选项名称\r\n   */\r\n  SET_NON_PROFESSIONAL_SELECTION(state, { type, id, name }) {\r\n    if (state.nonProfessionalList[type]) {\r\n      state.nonProfessionalList[type].selectedId = id;\r\n      state.nonProfessionalList[type].selected = name;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 清空非专业课选择\r\n   * @param {Object} state - 当前模块的state\r\n   */\r\n  CLEAR_NON_PROFESSIONAL_SELECTION(state) {\r\n    Object.keys(state.nonProfessionalList).forEach(key => {\r\n      state.nonProfessionalList[key].selectedId = null;\r\n      state.nonProfessionalList[key].selected = '';\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 设置排序选项列表\r\n   * @param {Object} state - 当前模块的state\r\n   * @param {Array} options - 排序选项列表 [{id, name}]\r\n   */\r\n  SET_SORT_OPTIONS(state, options) {\r\n    state.sortMode.options = options;\r\n  },\r\n\r\n  /**\r\n   * 设置选中的排序方式\r\n   * @param {Object} state - 当前模块的state\r\n   * @param {Object} sortMode - 排序信息\r\n   * @param {number} sortMode.id - 排序ID\r\n   * @param {string} sortMode.name - 排序名称\r\n   */\r\n  SET_SELECTED_SORT_MODE(state, { id, name }) {\r\n    state.sortMode.selectedId = id;\r\n    state.sortMode.selected = name;\r\n  }\r\n} "],"names":["mutations","state","searchKey","matchList","additionalMatches","currentPage","hasMore","teacherId","detail","uni","normalizedTeacherId","teacherIndex","teacher","originalTeacher","updatedTeacher","_a","index","type","id","name","key","options"],"mappings":"0DAKeA,EAAA,CAOb,eAAeC,EAAOC,EAAW,CAC/BD,EAAM,UAAYC,CACnB,EAOD,eAAeD,EAAOE,EAAW,CAC/BF,EAAM,UAAYE,CACnB,EAOD,kBAAkBF,EAAOG,EAAmB,CAC1CH,EAAM,UAAY,CAAC,GAAGA,EAAM,UAAW,GAAGG,CAAiB,CAC5D,EAWD,eAAeH,EAAO,CAAE,YAAAI,EAAa,QAAAC,CAAO,EAAI,CAC9CL,EAAM,YAAcI,EACpBJ,EAAM,QAAUK,CACjB,EAQD,mBAAmBL,EAAO,CAAE,UAAAM,EAAW,OAAAC,CAAM,EAAI,OAC/CC,EAAAA,MAAA,MAAA,MAAA,sCAAY,0CAA0C,EACtDA,QAAA,MAAA,MAAA,sCAAY,sBAAuBF,EAAW,MAAO,OAAOA,CAAS,EACrEE,EAAAA,MAAY,MAAA,MAAA,sCAAA,mBAAoB,KAAK,UAAUD,EAAQ,KAAM,CAAC,CAAC,EAC/DC,QAAA,MAAA,MAAA,sCAAY,mBAAoBR,EAAM,UAAU,MAAM,EAGtD,MAAMS,EAAsB,OAAOH,CAAS,EAC5CE,EAAA,MAAA,MAAA,MAAA,sCAAY,mBAAoBC,CAAmB,EAGnD,MAAMC,EAAeV,EAAM,UAAU,UAAUW,GAAW,OAAOA,EAAQ,EAAE,IAAMF,CAAmB,EAGpG,GAFAD,EAAA,MAAA,MAAA,MAAA,sCAAY,YAAaE,CAAY,EAEjCA,IAAiB,GAAI,CACvBF,EAAAA,MAAY,MAAA,MAAA,sCAAA,kBAAkB,EAC9B,MAAMI,EAAkBZ,EAAM,UAAUU,CAAY,EACpDF,EAAAA,MAAY,MAAA,MAAA,sCAAA,UAAW,KAAK,UAAUI,EAAiB,KAAM,CAAC,CAAC,EAG/D,MAAMC,EAAiB,CACrB,GAAGD,EAEH,QAASL,EAAO,SAAW,CAAE,CACrC,EAEMC,EAAAA,MAAA,MAAA,MAAA,sCAAY,YAAa,KAAK,UAAUK,EAAgB,KAAM,CAAC,CAAC,EAGhEb,EAAM,UAAU,OAAOU,EAAc,EAAGG,CAAc,EAEtDL,EAAAA,MAAY,MAAA,MAAA,sCAAA,mBAAmB,EAC/BA,QAAY,MAAA,MAAA,sCAAA,cAAaM,EAAAD,EAAe,UAAf,YAAAC,EAAwB,SAAU,CAAC,CAClE,MACMN,EAAAA,MAAa,MAAA,OAAA,sCAAA,kBAAkB,EAC/BA,2DAAa,iBAAkBC,EAAqB,MAAO,OAAOA,CAAmB,EACrFD,EAAAA,MAAA,MAAA,OAAA,sCAAa,oBAAoB,EACjCR,EAAM,UAAU,QAAQ,CAACW,EAASI,IAAU,CAC1CP,EAAA,MAAA,MAAA,OAAA,sCAAa,IAAIO,CAAK,SAASJ,EAAQ,EAAE,SAAS,OAAOA,EAAQ,EAAE,GAAG,CAC9E,CAAO,EAGHH,EAAAA,MAAA,MAAA,MAAA,sCAAY,0CAA0C,CACvD,EAUD,+BAA+BR,EAAO,CAAE,KAAAgB,EAAM,GAAAC,EAAI,KAAAC,CAAI,EAAI,CACpDlB,EAAM,oBAAoBgB,CAAI,IAChChB,EAAM,oBAAoBgB,CAAI,EAAE,WAAaC,EAC7CjB,EAAM,oBAAoBgB,CAAI,EAAE,SAAWE,EAE9C,EAMD,iCAAiClB,EAAO,CACtC,OAAO,KAAKA,EAAM,mBAAmB,EAAE,QAAQmB,GAAO,CACpDnB,EAAM,oBAAoBmB,CAAG,EAAE,WAAa,KAC5CnB,EAAM,oBAAoBmB,CAAG,EAAE,SAAW,EAChD,CAAK,CACF,EAOD,iBAAiBnB,EAAOoB,EAAS,CAC/BpB,EAAM,SAAS,QAAUoB,CAC1B,EASD,uBAAuBpB,EAAO,CAAE,GAAAiB,EAAI,KAAAC,CAAI,EAAI,CAC1ClB,EAAM,SAAS,WAAaiB,EAC5BjB,EAAM,SAAS,SAAWkB,CAC3B,CACH"}