{"version":3,"file":"state.js","sources":["store/user/chat/state.js"],"sourcesContent":["/**\r\n * chat模块的状态\r\n * @module store/user/chat/state\r\n */\r\n\r\nexport default {\r\n      // 当前会话状态\r\n  currentSession: {\r\n    sessionId: null,       // 当前会话ID\r\n    sessionType: null,     // 会话类型 (单聊/群聊/客服等)\r\n    targetId: null,        // 对方ID(用户ID或群ID)\r\n    unreadCount: 0,        // 未读消息数\r\n    lastMessage: null,     // 最后一条消息\r\n    isActive: false,       // 是否处于活跃状态(前端是否打开)\r\n    draftMessage: ''       // 草稿消息\r\n  },\r\n  \r\n  // 会话列表\r\n  sessions: {\r\n    // 按sessionId存储的会话对象\r\n    byId: {\r\n      'session1': {\r\n        sessionId: 'session1',\r\n        sessionType: 'private',\r\n        targetId: 'user123',\r\n        title: '王老师',       // 会话标题(可能是备注/群名称)\r\n        avatar: '/static/image/tab-bar/default_avatar.png',       // 头像\r\n        lastMessage: {},     // 最后一条消息\r\n        unreadCount: 3,      // 未读数量\r\n        lastMessageTime: 1620000000, // 最后消息时间戳\r\n        isMuted: false,      // 是否静音\r\n        isTop: false,        // 是否置顶\r\n        draft: ''            // 草稿\r\n      }\r\n    },\r\n    // 按时间排序的sessionId数组\r\n    allIds: []\r\n  },\r\n  \r\n  // 消息存储\r\n  messages: {\r\n    // 按sessionId分组存储的消息\r\n    bySessionId: {\r\n      \r\n      'session1': {\r\n        hasMore: true,       // 是否还有更多历史消息\r\n        isLoading: false,     // 是否正在加载\r\n        list: [              // 消息数组(按时间排序)\r\n          {\r\n            id: 'msg1',       // 消息ID\r\n            type: 'text',    // 消息类型(text/image/file等)\r\n            content: '你好，我是王老师，很高兴认识你',   // 消息内容\r\n            senderId: 'user123', // 发送者ID\r\n            senderInfo: {}, // 发送者信息(可选)\r\n            time: 1620000000, // 时间戳\r\n            status: 'sent',   // 状态(sent/delivered/read/failed)\r\n            isSelf: false     // 是否是自己发送的\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 用户信息缓存(减少重复请求)\r\n  userInfos: {\r\n    \r\n    'user123':  {\r\n      userId: 'user123',\r\n      nickname: '王老师',\r\n      avatar: '/static/image/tab-bar/default_avatar.png',\r\n      remark: '王老师'       // 备注名\r\n    }\r\n    \r\n  },\r\n  \r\n  // IM 连接状态\r\n  connection: {\r\n    isConnected: false,    // 是否已连接\r\n    isConnecting: false,   // 是否正在连接中\r\n    lastError: null,       // 最后错误信息\r\n    reconnectCount: 0      // 重连次数\r\n  },\r\n  \r\n  // 其他状态\r\n  uiState: {\r\n    inputFocus: false,     // 输入框是否聚焦\r\n    showEmojiPicker: false, // 是否显示表情选择器\r\n    showMorePanel: false   // 是否显示更多功能面板\r\n  }\r\n}; "],"names":[],"mappings":";AAKA,MAAe,QAAA;AAAA;AAAA,EAEb,gBAAgB;AAAA,IACd,WAAW;AAAA;AAAA,IACX,aAAa;AAAA;AAAA,IACb,UAAU;AAAA;AAAA,IACV,aAAa;AAAA;AAAA,IACb,aAAa;AAAA;AAAA,IACb,UAAU;AAAA;AAAA,IACV,cAAc;AAAA;AAAA,EACf;AAAA;AAAA,EAGD,UAAU;AAAA;AAAA,IAER,MAAM;AAAA,MACJ,YAAY;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,UAAU;AAAA,QACV,OAAO;AAAA;AAAA,QACP,QAAQ;AAAA;AAAA,QACR,aAAa,CAAE;AAAA;AAAA,QACf,aAAa;AAAA;AAAA,QACb,iBAAiB;AAAA;AAAA,QACjB,SAAS;AAAA;AAAA,QACT,OAAO;AAAA;AAAA,QACP,OAAO;AAAA;AAAA,MACR;AAAA,IACF;AAAA;AAAA,IAED,QAAQ,CAAE;AAAA,EACX;AAAA;AAAA,EAGD,UAAU;AAAA;AAAA,IAER,aAAa;AAAA,MAEX,YAAY;AAAA,QACV,SAAS;AAAA;AAAA,QACT,WAAW;AAAA;AAAA,QACX,MAAM;AAAA;AAAA,UACJ;AAAA,YACE,IAAI;AAAA;AAAA,YACJ,MAAM;AAAA;AAAA,YACN,SAAS;AAAA;AAAA,YACT,UAAU;AAAA;AAAA,YACV,YAAY,CAAE;AAAA;AAAA,YACd,MAAM;AAAA;AAAA,YACN,QAAQ;AAAA;AAAA,YACR,QAAQ;AAAA;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGD,WAAW;AAAA,IAET,WAAY;AAAA,MACV,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ;AAAA;AAAA,IACT;AAAA,EAEF;AAAA;AAAA,EAGD,YAAY;AAAA,IACV,aAAa;AAAA;AAAA,IACb,cAAc;AAAA;AAAA,IACd,WAAW;AAAA;AAAA,IACX,gBAAgB;AAAA;AAAA,EACjB;AAAA;AAAA,EAGD,SAAS;AAAA,IACP,YAAY;AAAA;AAAA,IACZ,iBAAiB;AAAA;AAAA,IACjB,eAAe;AAAA;AAAA,EAChB;AACH;;"}