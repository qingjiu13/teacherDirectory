{"version":3,"file":"actions.js","sources":["store/user/money/actions.js"],"sourcesContent":["import { getTransactionAPI } from '@/store/user/APIroute/money_api/money_api';\r\n\r\nexport default {\r\n    /**\r\n     * 初始化加载交易数据（刷新）\r\n     * @param {*} param0 \r\n     * @param {string} userId \r\n     */\r\n    async fetchTransactionList({ commit, state }, userId) {\r\n        commit('resetTransactionState');\r\n        commit('setLoading', true);\r\n        try {\r\n            const list = await getTransactionAPI(userId, 1, state.pageSize);\r\n            commit('setTransactionList', list);\r\n            commit('setCurrentPage', 1);\r\n            commit('setHasMore', list.length === state.pageSize);\r\n        } catch (err) {\r\n            console.error('获取交易列表失败', err);\r\n            commit('setHasMore', false);\r\n        } finally {\r\n            commit('setLoading', false);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 加载更多交易数据（下拉触发）\r\n     * @param {*} param0 \r\n     * @param {string} userId \r\n     */\r\n    async loadMoreTransactions({ commit, state }, userId) {\r\n        if (state.isLoading || !state.hasMore) return;\r\n\r\n        commit('setLoading', true);\r\n        try {\r\n            const nextPage = state.currentPage + 1;\r\n            const list = await getTransactionAPI(userId, nextPage, state.pageSize);\r\n            commit('appendTransactionList', list);\r\n            commit('setCurrentPage', nextPage);\r\n            if (list.length < state.pageSize) {\r\n                commit('setHasMore', false);\r\n            }\r\n        } catch (err) {\r\n            console.error('加载更多交易记录失败', err);\r\n            commit('setHasMore', false);\r\n        } \r\n    }\r\n};\r\n\r\n"],"names":["actions","commit","state","userId","list","getTransactionAPI","err","uni","nextPage"],"mappings":"0GAEeA,EAAA,CAMX,MAAM,qBAAqB,CAAE,OAAAC,EAAQ,MAAAC,CAAK,EAAIC,EAAQ,CAClDF,EAAO,uBAAuB,EAC9BA,EAAO,aAAc,EAAI,EACzB,GAAI,CACA,MAAMG,EAAO,MAAMC,oBAAkBF,EAAQ,EAAGD,EAAM,QAAQ,EAC9DD,EAAO,qBAAsBG,CAAI,EACjCH,EAAO,iBAAkB,CAAC,EAC1BA,EAAO,aAAcG,EAAK,SAAWF,EAAM,QAAQ,CACtD,OAAQI,EAAK,CACVC,EAAA,MAAA,MAAA,QAAA,oCAAc,WAAYD,CAAG,EAC7BL,EAAO,aAAc,EAAK,CACtC,QAAkB,CACNA,EAAO,aAAc,EAAK,CAC7B,CACJ,EAOD,MAAM,qBAAqB,CAAE,OAAAA,EAAQ,MAAAC,CAAK,EAAIC,EAAQ,CAClD,GAAI,EAAAD,EAAM,WAAa,CAACA,EAAM,SAE9B,CAAAD,EAAO,aAAc,EAAI,EACzB,GAAI,CACA,MAAMO,EAAWN,EAAM,YAAc,EAC/BE,EAAO,MAAMC,oBAAkBF,EAAQK,EAAUN,EAAM,QAAQ,EACrED,EAAO,wBAAyBG,CAAI,EACpCH,EAAO,iBAAkBO,CAAQ,EAC7BJ,EAAK,OAASF,EAAM,UACpBD,EAAO,aAAc,EAAK,CAEjC,OAAQK,EAAK,CACVC,EAAA,MAAA,MAAA,QAAA,oCAAc,aAAcD,CAAG,EAC/BL,EAAO,aAAc,EAAK,CAC7B,EACJ,CACL"}