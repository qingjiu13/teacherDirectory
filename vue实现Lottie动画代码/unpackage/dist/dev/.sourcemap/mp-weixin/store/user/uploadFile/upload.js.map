{"version":3,"file":"upload.js","sources":["store/user/uploadFile/upload.js"],"sourcesContent":["// /store/user/unloadFile/unload.js\r\nimport { uploadFile } from '@/utils/http';\r\n\r\nconst state = {\r\n    fileLink: '' // 后端返回的文件下载链接\r\n};\r\n\r\nconst mutations = {\r\n    SET_FILE_LINK(state, link) {\r\n        state.fileLink = link;\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async uploadUserFile({ commit }, { userId, filePath }) {\r\n        try {\r\n            const res = await uploadFile(filePath, userId);\r\n            commit('SET_FILE_LINK', res.data.url); // 后端返回的是 { code: 200, data: { url: 'https://...' } }\r\n            return res;\r\n        } catch (err) {\r\n            console.error('上传失败', err);\r\n            throw err;\r\n        }\r\n    }\r\n};\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions\r\n};\r\n"],"names":["state","mutations","link","actions","commit","userId","filePath","res","uploadFile","err","uni"],"mappings":"8FAGMA,EAAQ,CACV,SAAU,EACd,EAEMC,EAAY,CACd,cAAcD,EAAOE,EAAM,CACvBF,EAAM,SAAWE,CACpB,CACL,EAEMC,EAAU,CACZ,MAAM,eAAe,CAAE,OAAAC,CAAM,EAAI,CAAE,OAAAC,EAAQ,SAAAC,CAAQ,EAAI,CACnD,GAAI,CACA,MAAMC,EAAM,MAAMC,EAAAA,WAAWF,EAAUD,CAAM,EAC7C,OAAAD,EAAO,gBAAiBG,EAAI,KAAK,GAAG,EAC7BA,CACV,OAAQE,EAAK,CACVC,MAAAA,EAAA,MAAA,MAAA,QAAA,wCAAc,OAAQD,CAAG,EACnBA,CACT,CACJ,CACL,EAEeD,EAAA,CACX,WAAY,GACZ,MAAAR,EACA,UAAAC,EACA,QAAAE,CACJ"}