{"version":3,"file":"upload.js","sources":["store/user/uploadFile/upload.js"],"sourcesContent":["// /store/user/unloadFile/unload.js\r\nimport { uploadFile } from '@/utils/http';\r\n\r\nconst state = {\r\n    fileLink: '' // 后端返回的文件下载链接\r\n};\r\n\r\nconst mutations = {\r\n    SET_FILE_LINK(state, link) {\r\n        state.fileLink = link;\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    async uploadUserFile({ commit }, { userId, filePath }) {\r\n        try {\r\n            const res = await uploadFile(filePath, userId);\r\n            commit('SET_FILE_LINK', res.data.url); // 后端返回的是 { code: 200, data: { url: 'https://...' } }\r\n            return res;\r\n        } catch (err) {\r\n            console.error('上传失败', err);\r\n            throw err;\r\n        }\r\n    }\r\n};\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions\r\n};\r\n"],"names":["state","uploadFile","uni"],"mappings":";;;AAGA,MAAM,QAAQ;AAAA,EACV,UAAU;AAAA;AACd;AAEA,MAAM,YAAY;AAAA,EACd,cAAcA,QAAO,MAAM;AACvB,IAAAA,OAAM,WAAW;AAAA,EACpB;AACL;AAEA,MAAM,UAAU;AAAA,EACZ,MAAM,eAAe,EAAE,OAAM,GAAI,EAAE,QAAQ,SAAQ,GAAI;AACnD,QAAI;AACA,YAAM,MAAM,MAAMC,WAAAA,WAAW,UAAU,MAAM;AAC7C,aAAO,iBAAiB,IAAI,KAAK,GAAG;AACpC,aAAO;AAAA,IACV,SAAQ,KAAK;AACVC,oBAAA,MAAA,MAAA,SAAA,yCAAc,QAAQ,GAAG;AACzB,YAAM;AAAA,IACT;AAAA,EACJ;AACL;AAEA,MAAe,aAAA;AAAA,EACX,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AACJ;;"}