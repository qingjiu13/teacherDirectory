{"version":3,"file":"service_newbuilt.js","sources":["pagesMine/service/service_newbuilt.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNNaW5lXHNlcnZpY2Vcc2VydmljZV9uZXdidWlsdC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"page-container\">\r\n    <!-- 状态栏占位 -->\r\n    <view class=\"status-bar\"></view>\r\n    \r\n    <!-- 导航栏 -->\r\n    <Header :title=\"mode === 'edit' ? '修改信息' : '新增服务'\" class=\"header-container\" @back=\"goBack\" />\r\n    \r\n    <!-- 表单区域 -->\r\n    <view class=\"form-container\">\r\n      <!-- 服务类型和节数在一行 -->\r\n      <view class=\"row-container\">\r\n        <!-- 服务类型 -->\r\n        <view class=\"form-item1\">\r\n          <view class=\"form-label\">服务类型</view>\r\n          <choice-selected\r\n            :choiceIndex=\"selectedServiceTypeIndex\"\r\n            :choiceList=\"serviceTypes\"\r\n            :defaultText=\"'请选择服务类型'\"\r\n            @onChoiceClick=\"handleServiceTypeSelect\"\r\n          ></choice-selected>\r\n        </view>\r\n        \r\n        <!-- 节数 (一对一课程) -->\r\n        <view class=\"form-item1\" v-if=\"selectedServiceType === '一对一课程'\">\r\n          <view class=\"form-label\"></view>\r\n          <choice-selected\r\n          class=\"combobox-container\"\r\n            :choiceIndex=\"selectedLessonsIndex\"\r\n            :choiceList=\"lessonOptions\"\r\n            :defaultText=\"'请选择节数'\"\r\n            @onChoiceClick=\"handleLessonsSelect\"\r\n          ></choice-selected>\r\n        </view>\r\n        \r\n        <!-- 课时 (一对多课程) -->\r\n        <view class=\"form-item1\" v-if=\"selectedServiceType === '一对多课程'\">\r\n          <view class=\"form-label\"></view>\r\n          <choice-selected\r\n            class=\"combobox-container\"\r\n            :choiceIndex=\"selectedLessonsIndex\"\r\n            :choiceList=\"lessonOptions\"\r\n            :defaultText=\"'请选择节数'\"\r\n            @onChoiceClick=\"handleLessonsSelect\"\r\n          ></choice-selected>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 一对一课程专用字段 -->\r\n      <template v-if=\"selectedServiceType === '一对一课程'\">\r\n        <!-- 课程总时长 -->\r\n        <view class=\"row-container\">\r\n          <!-- 小时 -->\r\n          <view class=\"form-item1\">\r\n            <view class=\"form-label\">课程总时长</view>\r\n            <choice-selected\r\n              :choiceIndex=\"selectedHoursIndex\"\r\n              :choiceList=\"hourOptions\"\r\n              :defaultText=\"'小时'\"\r\n              @onChoiceClick=\"handleHoursSelect\"\r\n            ></choice-selected>\r\n          </view>\r\n          \r\n          <!-- 分钟 -->\r\n          <view class=\"form-item1\">\r\n            <view class=\"form-label\"></view> \r\n            <choice-selected\r\n              class=\"combobox-container\"\r\n              :choiceIndex=\"selectedMinutesIndex\"\r\n              :choiceList=\"minuteOptions\"\r\n              :defaultText=\"'分钟'\"\r\n              @onChoiceClick=\"handleMinutesSelect\"\r\n            ></choice-selected>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 服务名称 -->\r\n        <view class=\"form-item\">\r\n          <view class=\"form-label\">服务名称</view>\r\n          <input \r\n            class=\"form-input\" \r\n            type=\"text\" \r\n            placeholder=\"请填写\" \r\n            v-model=\"serviceName\"\r\n            @input=\"trackChanges\"\r\n          />\r\n        </view>\r\n      </template>\r\n      \r\n      <!-- 一对多课程专用字段 -->\r\n      <template v-if=\"selectedServiceType === '一对多课程'\">\r\n        <!-- 课程总时长 -->\r\n        <view class=\"row-container\">\r\n          <!-- 小时 -->\r\n          <view class=\"form-item1\">\r\n            <view class=\"form-label\">课程总时长</view>\r\n            <choice-selected\r\n              :choiceIndex=\"selectedMultiHoursIndex\"\r\n              :choiceList=\"hourOptions\"\r\n              :defaultText=\"'小时'\"\r\n              @onChoiceClick=\"handleMultiHoursSelect\"\r\n            ></choice-selected>\r\n          </view>\r\n          \r\n          <!-- 分钟 -->\r\n          <view class=\"form-item1\">\r\n            <view class=\"form-label\"></view> \r\n            <choice-selected\r\n            class=\"combobox-container\"\r\n              :choiceIndex=\"selectedMultiMinutesIndex\"\r\n              :choiceList=\"minuteOptions\"\r\n              :defaultText=\"'分钟'\"\r\n              @onChoiceClick=\"handleMultiMinutesSelect\"\r\n            ></choice-selected>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 课程人数 -->\r\n        <view class=\"form-item\">\r\n          <view class=\"form-label\">课程人数</view>\r\n          <choice-selected\r\n            :choiceIndex=\"selectedPersonCountIndex\"\r\n            :choiceList=\"personCountOptions\"\r\n            :defaultText=\"'请选择课程人数'\"\r\n            @onChoiceClick=\"handlePersonCountSelect\"\r\n          ></choice-selected>\r\n        </view>\r\n        \r\n        <!-- 服务名称 -->\r\n        <view class=\"form-item\">\r\n          <view class=\"form-label\">服务名称</view>\r\n          <input \r\n            class=\"form-input\" \r\n            type=\"text\" \r\n            placeholder=\"请填写\" \r\n            v-model=\"multiServiceName\"\r\n            @input=\"trackChanges\"\r\n          />\r\n        </view>\r\n      </template>\r\n      \r\n      <!-- 学习资料类型字段 -->\r\n      <view class=\"form-item\" v-if=\"selectedServiceType === '学习资料'\">\r\n        <view class=\"form-label\">服务名称</view>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"text\"\r\n          placeholder=\"请输入服务名称\"\r\n          v-model=\"coursequantity\"\r\n          @input=\"trackChanges\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- 服务介绍 -->\r\n      <view class=\"form-item\">\r\n        <view class=\"form-label\">服务介绍</view>\r\n        <textarea \r\n          class=\"form-textarea\" \r\n          placeholder=\"请填写\" \r\n          v-model=\"description\"\r\n          @input=\"trackChanges\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- 服务价格 -->\r\n      <view class=\"form-item\">\r\n        <view class=\"form-label\">服务价格(每小时价格/h)</view>\r\n        <input \r\n          class=\"form-input\" \r\n          type=\"text\" \r\n          placeholder=\"按照元填写，如200元/h~\" \r\n          v-model=\"price\"\r\n          @input=\"trackChanges\"\r\n        />\r\n      </view>\r\n      \r\n      <!-- 附件上传 -->\r\n      <view class=\"form-item\" v-if=\"showAttachment\">\r\n        <view class=\"form-label\">附件上传 (学习资料显示)</view>\r\n        <view class=\"upload-area\" @click=\"chooseFile\">\r\n          <text class=\"plus-icon\">+</text>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 封面上传 -->\r\n      <view class=\"form-item\">\r\n        <view class=\"form-label\">封面上传</view>\r\n        <view class=\"cover-grid\">\r\n          <!-- 已上传的图片 -->\r\n          <template v-for=\"(url, index) in coverUrls\" :key=\"index\">\r\n            <view class=\"cover-item\">\r\n              <image :src=\"url\" class=\"cover-image\" mode=\"aspectFill\"></image>\r\n              <view class=\"delete-icon\" @click.stop=\"deleteCover(index)\">×</view>\r\n            </view>\r\n          </template>\r\n          \r\n          <!-- 上传按钮 -->\r\n          <view class=\"cover-item add-button\" @click=\"chooseCover\" v-if=\"coverUrls.length < 9\">\r\n            <text class=\"add-icon\">+</text>\r\n          </view>\r\n        </view>\r\n        <text class=\"tip-text\">最多可上传9张图片，建议比例1:1</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 底部按钮 -->\r\n    <view class=\"submit-btn\" @click=\"submitForm\">\r\n      <text v-if=\"mode === 'add'\">提交信息</text>\r\n      <text v-else>完成修改</text>\r\n    </view>\r\n    \r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n// 使用绝对路径\r\nimport ChoiceSelected from '/pagesMine/components/combobox/combobox.vue'\r\nimport Header from '@/components/navigationTitleBar/header'\r\nimport { Navigator } from '@/router/Router.js'\r\n\r\nexport default {\r\n  components: {\r\n    'choice-selected': ChoiceSelected,\r\n    Header\r\n  },\r\n  data() {\r\n    return {\r\n      hasEdited: false, // 用于跟踪表单是否被编辑过\r\n      mode: 'add', // 默认为添加模式\r\n      serviceId: '', // 当前编辑的服务ID\r\n      coverUrls: [], // 修改：封面图片URL数组\r\n      avatarUrl: '', // 新增：头像URL\r\n      selectedServiceType: '',\r\n      selectedServiceTypeIndex: -1,\r\n      serviceTypes: [\r\n        '一对一课程',\r\n       '一对多课程',\r\n       '学习资料'\r\n      ],\r\n      coursequantity: '',\r\n      showServiceTypeDropdown: false,\r\n      duration: '',\r\n      description: '',\r\n      price: '',\r\n      files: [],\r\n      showDuration: false,\r\n      showAttachment: false,\r\n      originalService: null, // 保存原始服务数据\r\n      \r\n      // 一对一课程相关数据\r\n      serviceName: '',\r\n      selectedLessonsIndex: -1,\r\n      lessonOptions: ['1', '2', '3', '4', '5', '6', '8', '10', '12', '16', '20'],\r\n      selectedHoursIndex: -1,\r\n      hourOptions: ['1', '2', '4', '6', '8', '10', '12', '24', '48', '60', '120'],\r\n      selectedMinutesIndex: -1,\r\n      minuteOptions: ['0', '15', '30', '45'],\r\n      \r\n      // 一对多课程相关数据\r\n      selectedMultiHoursIndex: -1,\r\n      selectedMultiMinutesIndex: -1,\r\n      multiServiceName: '',\r\n      selectedPersonCountIndex: -1,\r\n      personCountOptions: ['2', '4', '6', '8', '10', '15', '20', '30'],\r\n\r\n      // 状态栏高度\r\n      statusBarHeight: 0\r\n    }\r\n  },\r\n  onLoad(options) {\r\n    uni.__f__('log','at pagesMine/service/service_newbuilt.vue:271','===============================')\r\n    uni.__f__('log','at pagesMine/service/service_newbuilt.vue:272','service_newbuilt onLoad:', options)\r\n    \r\n    // 设置状态栏高度\r\n    this.setStatusBarHeight()\r\n    \r\n    // 设置模式和服务ID\r\n    if (options && options.mode) {\r\n      this.mode = options.mode\r\n      uni.__f__('log','at pagesMine/service/service_newbuilt.vue:280','当前模式:', this.mode)\r\n      \r\n      if (options.mode === 'edit' && options.id) {\r\n        // 编辑模式：获取服务ID\r\n        this.serviceId = options.id\r\n        uni.__f__('log','at pagesMine/service/service_newbuilt.vue:285','编辑服务ID:', this.serviceId)\r\n        \r\n        // 检查全局状态中是否有编辑服务数据\r\n        if (getApp().globalData && getApp().globalData.editingService) {\r\n          uni.__f__('log','at pagesMine/service/service_newbuilt.vue:289','全局状态中存在编辑服务数据:', getApp().globalData.editingService)\r\n        } else {\r\n          uni.__f__('log','at pagesMine/service/service_newbuilt.vue:291','全局状态中不存在编辑服务数据')\r\n        }\r\n        \r\n        // 加载待编辑的服务数据\r\n        this.loadEditingService()\r\n      }\r\n    } else {\r\n      uni.__f__('log','at pagesMine/service/service_newbuilt.vue:298','未检测到模式参数，默认为新建模式')\r\n      this.mode = 'add'\r\n    }\r\n    \r\n    // 初始化表单字段显示\r\n    this.updateFormFields()\r\n    uni.__f__('log','at pagesMine/service/service_newbuilt.vue:304','===============================')\r\n  },\r\n  onUnload() {\r\n    // 移除事件监听\r\n    uni.$off('serviceEdited', this.handleServiceEdited)\r\n    \r\n    // 清理全局状态中的编辑服务\r\n    if (getApp().globalData) {\r\n      getApp().globalData.editingService = null\r\n    }\r\n  },\r\n  methods: {\r\n    // 设置状态栏高度\r\n    setStatusBarHeight() {\r\n      // 获取系统信息\r\n      const systemInfo = uni.getSystemInfoSync()\r\n      // 设置状态栏高度（rpx单位）\r\n      this.statusBarHeight = systemInfo.statusBarHeight\r\n      \r\n      // 设置CSS变量\r\n      // 只在document存在的环境中执行DOM操作\r\n      if (typeof document !== 'undefined' && document.documentElement) {\r\n        document.documentElement.style.setProperty('--status-bar-height', `${this.statusBarHeight}px`)\r\n      }\r\n    },\r\n    chooseAvatar() {\r\n      uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n          this.avatarUrl = res.tempFilePaths[0]\r\n        }\r\n      })\r\n    },\r\n    chooseCover() {\r\n      const remainCount = 9 - this.coverUrls.length\r\n      if (remainCount <= 0) {\r\n        uni.showToast({\r\n          title: '最多只能上传9张图片',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      uni.chooseImage({\r\n        count: remainCount,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n          this.coverUrls = [...this.coverUrls, ...res.tempFilePaths]\r\n          this.hasEdited = true\r\n        }\r\n      })\r\n    },\r\n    deleteCover(index) {\r\n      this.coverUrls.splice(index, 1)\r\n      this.hasEdited = true\r\n    },\r\n    loadEditingService() {\r\n      try {\r\n        uni.__f__('log','at pagesMine/service/service_newbuilt.vue:365','开始加载编辑服务数据...')\r\n        uni.__f__('log','at pagesMine/service/service_newbuilt.vue:366','服务ID:', this.serviceId)\r\n        \r\n        // 首先尝试从全局数据获取\r\n        if (getApp().globalData && getApp().globalData.editingService) {\r\n          const editingService = getApp().globalData.editingService\r\n          uni.__f__('log','at pagesMine/service/service_newbuilt.vue:371','从全局数据获取到编辑服务:', editingService)\r\n          \r\n          // 检查ID是否匹配\r\n          if (editingService.id.toString() === this.serviceId.toString()) {\r\n            uni.__f__('log','at pagesMine/service/service_newbuilt.vue:375','ID匹配，使用全局数据')\r\n            this.originalService = editingService\r\n            \r\n            // 使用服务数据填充表单\r\n            this.fillFormWithServiceData(this.originalService)\r\n            uni.__f__('log','at pagesMine/service/service_newbuilt.vue:380','表单填充完成')\r\n            return\r\n          } else {\r\n            uni.__f__('warn','at pagesMine/service/service_newbuilt.vue:383','全局数据中的服务ID不匹配')\r\n          }\r\n        } else {\r\n          uni.__f__('log','at pagesMine/service/service_newbuilt.vue:386','全局数据中不存在编辑服务数据')\r\n        }\r\n        \r\n        // 如果全局数据不存在或ID不匹配，尝试从本地存储加载\r\n        const servicesStr = uni.getStorageSync('services')\r\n        if (servicesStr) {\r\n          const services = JSON.parse(servicesStr)\r\n          uni.__f__('log','at pagesMine/service/service_newbuilt.vue:393','从本地存储获取到服务列表，共', services.length, '条记录')\r\n          \r\n          const service = services.find(s => s.id.toString() === this.serviceId.toString())\r\n          \r\n          if (service) {\r\n            uni.__f__('log','at pagesMine/service/service_newbuilt.vue:398','在本地存储中找到匹配的服务:', service)\r\n            this.originalService = service\r\n            \r\n            // 使用服务数据填充表单\r\n            this.fillFormWithServiceData(service)\r\n            uni.__f__('log','at pagesMine/service/service_newbuilt.vue:403','表单填充完成')\r\n          } else {\r\n            uni.__f__('error','at pagesMine/service/service_newbuilt.vue:405','在本地存储中找不到匹配的服务')\r\n            uni.showToast({\r\n              title: '找不到服务数据',\r\n              icon: 'none'\r\n            })\r\n            \r\n            // 延迟返回上一页\r\n            setTimeout(() => {\r\n              uni.navigateBack()\r\n            }, 1500)\r\n          }\r\n        } else {\r\n          uni.__f__('error','at pagesMine/service/service_newbuilt.vue:417','本地存储中不存在服务数据')\r\n          uni.showToast({\r\n            title: '找不到服务数据',\r\n            icon: 'none'\r\n          })\r\n          \r\n          // 延迟返回上一页\r\n          setTimeout(() => {\r\n            uni.navigateBack()\r\n          }, 1500)\r\n        }\r\n      } catch (error) {\r\n        uni.__f__('error','at pagesMine/service/service_newbuilt.vue:429','加载服务数据失败:', error)\r\n        uni.showToast({\r\n          title: '加载数据失败',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    fillFormWithServiceData(serviceData) {\r\n      // 设置封面图片\r\n      this.coverUrls = serviceData.imageUrls || (serviceData.imageUrl ? [serviceData.imageUrl] : [])\r\n      \r\n      // 设置服务类型 (注意：需要修正设置服务类型的方式)\r\n      if (serviceData.type && serviceData.type.typename) {\r\n        // 如果服务数据使用type对象\r\n        this.selectedServiceType = serviceData.type.typename\r\n        this.selectedServiceTypeIndex = this.serviceTypes.findIndex(type => type === serviceData.type.typename)\r\n      } else {\r\n        // 如果服务数据直接使用name字段\r\n        this.selectedServiceType = serviceData.name || ''\r\n        this.selectedServiceTypeIndex = this.serviceTypes.findIndex(type => type === serviceData.name)\r\n      }\r\n      \r\n      // 设置价格（去掉价格前面的¥符号）\r\n      this.price = serviceData.price ? serviceData.price.replace(/[¥￥]/g, '') : ''\r\n      \r\n      // 设置描述\r\n      this.description = serviceData.description || ''\r\n      \r\n      // 根据服务类型设置不同的字段\r\n      if (this.selectedServiceType === '一对一课程') {\r\n        // 设置服务名称 (优先使用serviceName字段，如果没有则使用name)\r\n        this.serviceName = serviceData.serviceName || serviceData.name || ''\r\n        \r\n        // 设置节数\r\n        if (serviceData.lessons) {\r\n          this.selectedLessonsIndex = this.lessonOptions.findIndex(l => l === serviceData.lessons.toString())\r\n        } else if (serviceData.type && serviceData.type.coursenum) {\r\n          this.selectedLessonsIndex = this.lessonOptions.findIndex(l => parseInt(l) === serviceData.type.coursenum)\r\n        }\r\n        \r\n        // 解析总时长的小时和分钟\r\n        if (serviceData.totalDuration) {\r\n          const match = serviceData.totalDuration.match(/(\\d+)小时(\\d+)分钟/)\r\n          if (match) {\r\n            this.selectedHoursIndex = this.hourOptions.findIndex(h => h === match[1])\r\n            this.selectedMinutesIndex = this.minuteOptions.findIndex(m => m === match[2])\r\n          }\r\n        } else if (serviceData.type && serviceData.type.fulllength) {\r\n          // 从type.fulllength获取时长信息\r\n          const hours = serviceData.type.fulllength.hours || ''\r\n          const minutes = serviceData.type.fulllength.minutes || ''\r\n          \r\n          const hoursMatch = hours.match(/(\\d+)/)\r\n          const minutesMatch = minutes.match(/(\\d+)/)\r\n          \r\n          if (hoursMatch) {\r\n            this.selectedHoursIndex = this.hourOptions.findIndex(h => h === hoursMatch[1])\r\n          }\r\n          \r\n          if (minutesMatch) {\r\n            this.selectedMinutesIndex = this.minuteOptions.findIndex(m => m === minutesMatch[1])\r\n          }\r\n        }\r\n      } else if (this.selectedServiceType === '一对多课程') {\r\n        // 设置服务名称\r\n        this.multiServiceName = serviceData.serviceName || serviceData.name || ''\r\n        \r\n        // 设置课时\r\n        if (serviceData.lessons) {\r\n          this.selectedLessonsIndex = this.lessonOptions.findIndex(l => l === serviceData.lessons.toString())\r\n        } else if (serviceData.type && serviceData.type.coursenum) {\r\n          this.selectedLessonsIndex = this.lessonOptions.findIndex(l => parseInt(l) === serviceData.type.coursenum)\r\n        }\r\n        \r\n        // 解析总时长的小时和分钟\r\n        if (serviceData.totalDuration) {\r\n          const match = serviceData.totalDuration.match(/(\\d+)小时(\\d+)分钟/)\r\n          if (match) {\r\n            this.selectedMultiHoursIndex = this.hourOptions.findIndex(h => h === match[1])\r\n            this.selectedMultiMinutesIndex = this.minuteOptions.findIndex(m => m === match[2])\r\n          }\r\n        } else if (serviceData.type && serviceData.type.fulllength) {\r\n          // 从type.fulllength获取时长信息\r\n          const hours = serviceData.type.fulllength.hours || ''\r\n          const minutes = serviceData.type.fulllength.minutes || ''\r\n          \r\n          const hoursMatch = hours.match(/(\\d+)/)\r\n          const minutesMatch = minutes.match(/(\\d+)/)\r\n          \r\n          if (hoursMatch) {\r\n            this.selectedMultiHoursIndex = this.hourOptions.findIndex(h => h === hoursMatch[1])\r\n          }\r\n          \r\n          if (minutesMatch) {\r\n            this.selectedMultiMinutesIndex = this.minuteOptions.findIndex(m => m === minutesMatch[1])\r\n          }\r\n        }\r\n        \r\n        // 设置课程人数\r\n        if (serviceData.personCount) {\r\n          this.selectedPersonCountIndex = this.personCountOptions.findIndex(p => p === serviceData.personCount.toString())\r\n        } else if (serviceData.type && serviceData.type.studentnum) {\r\n          this.selectedPersonCountIndex = this.personCountOptions.findIndex(p => parseInt(p) === serviceData.type.studentnum)\r\n        }\r\n      } else if (this.selectedServiceType === '学习资料') {\r\n        // 学习资料类型\r\n        this.coursequantity = serviceData.coursequantity || serviceData.name || ''\r\n      }\r\n      \r\n      // 更新表单字段显示\r\n      this.updateFormFields()\r\n    },\r\n    goBack() {\r\n      // 如果表单被编辑过，显示提示弹窗\r\n      if (this.hasEdited) {\r\n        uni.showModal({\r\n          title: '提示',\r\n          content: '是否保存已编辑的内容？',\r\n          cancelText: '不保存',\r\n          confirmText: '保存',\r\n          success: (res) => {\r\n            if (res.confirm) {\r\n              // 用户选择保存\r\n              this.submitForm();\r\n            } else {\r\n              // 用户选择不保存，直接返回\r\n              Navigator.toService();\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        // 表单未编辑过，直接返回\r\n        Navigator.toService();\r\n      }\r\n    },\r\n    handleServiceTypeSelect(index) {\r\n      this.selectedServiceTypeIndex = index\r\n      this.selectedServiceType = this.serviceTypes[index]\r\n      \r\n      // 切换服务类型时，重置相关字段\r\n      if (this.selectedServiceType === '一对一课程') {\r\n        this.selectedLessonsIndex = -1\r\n        this.selectedHoursIndex = -1\r\n        this.selectedMinutesIndex = -1\r\n        this.serviceName = ''\r\n      } else if (this.selectedServiceType === '一对多课程') {\r\n        this.selectedLessonsIndex = -1\r\n        this.selectedMultiHoursIndex = -1\r\n        this.selectedMultiMinutesIndex = -1\r\n        this.multiServiceName = ''\r\n        this.selectedPersonCountIndex = -1\r\n      } else if (this.selectedServiceType === '学习资料') {\r\n        this.coursequantity = ''\r\n      }\r\n      \r\n      // 更新表单字段显示\r\n      this.updateFormFields()\r\n      this.hasEdited = true\r\n    },\r\n    handleLessonsSelect(index) {\r\n      this.selectedLessonsIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    handleHoursSelect(index) {\r\n      this.selectedHoursIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    handleMinutesSelect(index) {\r\n      this.selectedMinutesIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    handleMultiHoursSelect(index) {\r\n      this.selectedMultiHoursIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    handleMultiMinutesSelect(index) {\r\n      this.selectedMultiMinutesIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    handlePersonCountSelect(index) {\r\n      this.selectedPersonCountIndex = index\r\n      this.hasEdited = true\r\n    },\r\n    updateFormFields() {\r\n      // 根据服务类型显示或隐藏某些表单项\r\n      if (this.selectedServiceType === '学习资料') {\r\n        this.showDuration = false\r\n        this.showAttachment = true\r\n      } else {\r\n        this.showDuration = true\r\n        this.showAttachment = this.selectedServiceType === '学习资料'\r\n      }\r\n    },\r\n    chooseFile() {\r\n      uni.chooseImage({\r\n        count: 1,\r\n        success: (res) => {\r\n          this.files = res.tempFilePaths\r\n          this.hasEdited = true\r\n        }\r\n      })\r\n    },\r\n    submitForm() {\r\n      // 显示加载动画\r\n      uni.showLoading({\r\n        title: '提交中...'\r\n      })\r\n      \r\n      // 表单验证\r\n      if (this.coverUrls.length === 0) {\r\n        uni.showToast({\r\n          title: '请上传封面图片',\r\n          icon: 'none'\r\n        })\r\n        uni.hideLoading()\r\n        return\r\n      }\r\n      \r\n      if (!this.selectedServiceType) {\r\n        uni.showToast({\r\n          title: '请选择服务类型',\r\n          icon: 'none'\r\n        })\r\n        uni.hideLoading()\r\n        return\r\n      }\r\n      \r\n      // 一对一课程的特殊验证\r\n      if (this.selectedServiceType === '一对一课程') {\r\n        if (this.selectedLessonsIndex === -1) {\r\n          uni.showToast({\r\n            title: '请选择课程节数',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n        \r\n        if (this.selectedHoursIndex === -1 || this.selectedMinutesIndex === -1) {\r\n          uni.showToast({\r\n            title: '请选择课程时长',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n        \r\n        if (!this.serviceName) {\r\n          uni.showToast({\r\n            title: '请填写服务名称',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n      } \r\n      // 一对多课程的特殊验证\r\n      else if (this.selectedServiceType === '一对多课程') {\r\n        if (this.selectedLessonsIndex === -1) {\r\n          uni.showToast({\r\n            title: '请选择课程节数',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n        \r\n        if (this.selectedMultiHoursIndex === -1 || this.selectedMultiMinutesIndex === -1) {\r\n          uni.showToast({\r\n            title: '请选择课程时长',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n        \r\n        if (!this.multiServiceName) {\r\n          uni.showToast({\r\n            title: '请填写服务名称',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n        \r\n        if (this.selectedPersonCountIndex === -1) {\r\n          uni.showToast({\r\n            title: '请选择课程人数',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n      } \r\n      // 学习资料类型验证\r\n      else if (this.selectedServiceType === '学习资料') {\r\n        if (!this.coursequantity) {\r\n          uni.showToast({\r\n            title: '请填写服务名称',\r\n            icon: 'none'\r\n          })\r\n          uni.hideLoading()\r\n          return\r\n        }\r\n      }\r\n      \r\n      if (!this.price) {\r\n        uni.showToast({\r\n          title: '请填写服务价格',\r\n          icon: 'none'\r\n        })\r\n        uni.hideLoading()\r\n        return\r\n      }\r\n      \r\n      // 构建服务对象\r\n      let serviceData = {}\r\n      \r\n      // 编辑模式下保留原始服务的部分信息\r\n      if (this.mode === 'edit' && this.originalService) {\r\n        // 保留原始ID和部分不变的属性\r\n        serviceData = {\r\n          ...this.originalService,\r\n          // 这些字段将被覆盖\r\n          name: this.selectedServiceType,\r\n          price: this.price.startsWith('¥') ? this.price : '¥' + this.price,\r\n          description: this.description || `这是一个${this.selectedServiceType}服务`,\r\n          imageUrls: this.coverUrls,\r\n          imageUrl: this.coverUrls[0] || ''\r\n        }\r\n      } else {\r\n        // 新建模式\r\n        serviceData = {\r\n          id: Date.now().toString(), // 生成新ID\r\n          name: this.selectedServiceType,\r\n          price: this.price.startsWith('¥') ? this.price : '¥' + this.price,\r\n          description: this.description || `这是一个${this.selectedServiceType}服务`,\r\n          checked: false,\r\n          imageUrls: this.coverUrls,\r\n          imageUrl: this.coverUrls[0] || '',\r\n          createTime: new Date().toISOString().split('T')[0],\r\n          updateTime: new Date().toISOString().split('T')[0],\r\n          status: 'active'\r\n        }\r\n      }\r\n      \r\n      // 为一对一课程添加特殊字段\r\n      if (this.selectedServiceType === '一对一课程') {\r\n        serviceData.serviceName = this.serviceName\r\n        serviceData.lessons = this.lessonOptions[this.selectedLessonsIndex]\r\n        serviceData.totalDuration = `${this.hourOptions[this.selectedHoursIndex]}小时${this.minuteOptions[this.selectedMinutesIndex]}分钟`\r\n        \r\n        // 添加类型信息\r\n        serviceData.type = {\r\n          typename: '一对一课程',\r\n          coursenum: parseInt(this.lessonOptions[this.selectedLessonsIndex]),\r\n          fulllength: {\r\n            hours: `${this.hourOptions[this.selectedHoursIndex]}小时`,\r\n            minutes: `${this.minuteOptions[this.selectedMinutesIndex]}分钟`\r\n          }\r\n        }\r\n      } \r\n      // 为一对多课程添加特殊字段\r\n      else if (this.selectedServiceType === '一对多课程') {\r\n        serviceData.serviceName = this.multiServiceName\r\n        serviceData.lessons = this.lessonOptions[this.selectedLessonsIndex]\r\n        serviceData.totalDuration = `${this.hourOptions[this.selectedMultiHoursIndex]}小时${this.minuteOptions[this.selectedMultiMinutesIndex]}分钟`\r\n        serviceData.personCount = this.personCountOptions[this.selectedPersonCountIndex]\r\n        \r\n        // 添加类型信息\r\n        serviceData.type = {\r\n          typename: '一对多课程',\r\n          coursenum: parseInt(this.lessonOptions[this.selectedLessonsIndex]),\r\n          fulllength: {\r\n            hours: `${this.hourOptions[this.selectedMultiHoursIndex]}小时`,\r\n            minutes: `${this.minuteOptions[this.selectedMultiMinutesIndex]}分钟`\r\n          },\r\n          studentnum: parseInt(this.personCountOptions[this.selectedPersonCountIndex])\r\n        }\r\n      } \r\n      // 其他服务类型\r\n      else if (this.selectedServiceType === '学习资料') {\r\n        serviceData.coursequantity = this.coursequantity\r\n        serviceData.serviceName = this.coursequantity // 使用输入的名称作为serviceName\r\n        \r\n        // 添加类型信息\r\n        serviceData.type = {\r\n          typename: '学习资料',\r\n          fileLink: 'https://www.baidu.com' // 示例链接，实际应该由用户上传文件后获取\r\n        }\r\n      }\r\n      \r\n      // 更新时间戳\r\n      serviceData.updateTime = new Date().toISOString().split('T')[0]\r\n      \r\n      // 根据模式执行不同操作\r\n      if (this.mode === 'edit') {\r\n        this.updateExistingService(serviceData)\r\n      } else {\r\n        this.addNewService(serviceData)\r\n      }\r\n    },\r\n    addNewService(newService) {\r\n      // 将新服务数据存储到全局状态或本地存储中\r\n      try {\r\n        // 获取之前的服务列表（如果存在）\r\n        const servicesStr = uni.getStorageSync('services')\r\n        let services = []\r\n        \r\n        if (servicesStr) {\r\n          services = JSON.parse(servicesStr)\r\n        }\r\n        \r\n        // 检查服务是否已存在\r\n        const existingIndex = services.findIndex(s => s.id === newService.id)\r\n        if (existingIndex !== -1) {\r\n          // 如果已存在，则更新\r\n          services[existingIndex] = newService\r\n        } else {\r\n          // 添加新服务到列表中\r\n          services.push(newService)\r\n        }\r\n        \r\n        // 保存更新后的列表\r\n        uni.setStorageSync('services', JSON.stringify(services))\r\n        \r\n        // 设置上一页需要刷新的标志\r\n        getApp().globalData = getApp().globalData || {}\r\n        getApp().globalData.newServiceAdded = true\r\n        getApp().globalData.newService = newService\r\n        \r\n        uni.hideLoading()\r\n        \r\n        uni.showToast({\r\n          title: '提交成功',\r\n          icon: 'success'\r\n        })\r\n        \r\n        // 重置编辑状态\r\n        this.hasEdited = false\r\n        \r\n        // 延时返回上一页\r\n        setTimeout(() => {\r\n          // 使用Navigator进行导航\r\n          Navigator.toService();\r\n        }, 1500)\r\n      } catch (e) {\r\n        uni.__f__('error','at pagesMine/service/service_newbuilt.vue:876','保存服务失败', e)\r\n        uni.hideLoading()\r\n        uni.showToast({\r\n          title: '保存失败，请重试',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    updateExistingService(updatedService) {\r\n      try {\r\n        // 获取服务列表\r\n        const servicesStr = uni.getStorageSync('services')\r\n        let services = []\r\n        \r\n        if (servicesStr) {\r\n          services = JSON.parse(servicesStr)\r\n        }\r\n        \r\n        // 查找并更新对应的服务\r\n        const index = services.findIndex(s => s.id == this.serviceId)\r\n        \r\n        if (index !== -1) {\r\n          services[index] = updatedService\r\n        } else {\r\n          // 如果找不到，则添加为新服务\r\n          services.push(updatedService)\r\n        }\r\n        \r\n        // 保存更新后的列表\r\n        uni.setStorageSync('services', JSON.stringify(services))\r\n        \r\n        // 设置编辑标志\r\n        getApp().globalData = getApp().globalData || {}\r\n        getApp().globalData.serviceEdited = true\r\n        getApp().globalData.editedService = updatedService\r\n        \r\n        uni.hideLoading()\r\n        \r\n        uni.showToast({\r\n          title: '更新成功',\r\n          icon: 'success'\r\n        })\r\n        \r\n        // 重置编辑状态\r\n        this.hasEdited = false\r\n        \r\n        // 延时返回上一页\r\n        setTimeout(() => {\r\n          // 使用Navigator进行导航\r\n          Navigator.toService();\r\n        }, 1500)\r\n      } catch (e) {\r\n        uni.__f__('error','at pagesMine/service/service_newbuilt.vue:928','更新服务失败', e)\r\n        uni.hideLoading()\r\n        uni.showToast({\r\n          title: '更新失败，请重试',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    handleServiceEdited(service) {\r\n      uni.__f__('log','at pagesMine/service/service_newbuilt.vue:937','Service edited', service)\r\n    },\r\n    trackChanges() {\r\n      this.hasEdited = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.status-bar {\r\n  width: 100%;\r\n  height: var(--status-bar-height);\r\n  background-color: #fff;\r\n}\r\n\r\n.header-container {\r\n  width: 100%;\r\n  height: 220rpx;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  position: relative;\r\n  background-color: #fff;\r\n  z-index: 100;\r\n}\r\n\r\n/* 整体页面容器 */\r\n.page-container {\r\n  background: #fff;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0;\r\n}\r\n\r\n/* 表单容器 */\r\n.form-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30rpx;\r\n  padding: 30rpx;\r\n  margin-top: 20rpx;\r\n  background-color: #ffffff;\r\n  border-radius: 20rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n/* 一行布局容器 */\r\n.row-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 20rpx;\r\n  margin-bottom: 30rpx;\r\n  width: 100%;\r\n}\r\n\r\n/* 特殊对齐的两行 */\r\n.form-item1 {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 48%;\r\n}\r\n\r\n/* 标准表单项保持垂直布局 */\r\n.form-item {\r\n  display: flex;  \r\n  flex-direction: column;\r\n  position: relative;\r\n  margin-bottom: 25rpx;\r\n  width: 100%;\r\n}\r\n\r\n/* 表单标签 */\r\n.form-label {\r\n  font-size: 30rpx;\r\n  font-weight: 500;\r\n  color: #333;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n/* 必填项标记 */\r\n.required::after {\r\n  content: '*';\r\n  color: #ff4d4f;\r\n  position: absolute;\r\n  top: 2rpx;\r\n  right: -20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n/* 表单输入框 */\r\n.form-input, .form-select{\r\n  height: 90rpx;\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 0 20rpx;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  border: 2rpx solid #eee;\r\n  width: calc(100% - 40rpx);\r\n  align-self: stretch;\r\n}\r\n\r\n/* 表单文本域 */\r\n.form-textarea {\r\n  height: 200rpx;\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  border: 2rpx solid #eee;\r\n  width: calc(100% - 40rpx);\r\n  align-self: stretch;\r\n}\r\n\r\n/* 错误提示样式 */\r\n.error-message {\r\n  color: #ff4d4f;\r\n  font-size: 24rpx;\r\n  margin-top: 8rpx;\r\n}\r\n\r\n/* 错误状态的输入框 */\r\n.input-error {\r\n  border-color: #ff4d4f !important;\r\n}\r\n\r\n/* 表单选择器容器 */\r\n.combobox-container {\r\n  position: relative; \r\n  top:10rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-top: 30rpx;\r\n}\r\n\r\n/* 提交按钮 */\r\n.submit-btn {\r\n  height: 90rpx;\r\n  background: linear-gradient(135deg, #4a89dc, #3a7bd5);\r\n  border-radius: 45rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  font-size: 32rpx;\r\n  font-weight: 500;\r\n  margin-top: 40rpx;\r\n  position: relative;\r\n  transition: all 0.3s ease;\r\n  align-self: stretch;\r\n}\r\n\r\n/* 提交按钮点击效果 */  \r\n.submit-btn:active {\r\n  transform: scale(0.98);\r\n  box-shadow: 0 3rpx 10rpx rgba(74, 111, 227, 0.2);\r\n}\r\n\r\n/* 封面图片网格 */\r\n.cover-grid {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  margin: 0 -5rpx;\r\n}\r\n\r\n.cover-item {\r\n  width: calc(33.33% - 10rpx);\r\n  height: 215rpx;\r\n  margin: 0 5rpx 15rpx;\r\n  position: relative;\r\n  border-radius: 8rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.cover-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.delete-icon {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  background: rgba(0,0,0,0.5);\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 10;\r\n  border-bottom-left-radius: 8rpx;\r\n}\r\n\r\n.add-button {\r\n  border: 2rpx dashed #ddd;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f9f9f9;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.add-icon {\r\n  font-size: 80rpx;\r\n  color: #ccc;\r\n  font-weight: 200;\r\n}\r\n\r\n.tip-text {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n/* 附件上传区域 */\r\n.upload-area {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 10rpx;\r\n  border: 2rpx solid #ddd;\r\n}\r\n\r\n/* 附件上传图标 */\r\n.plus-icon {\r\n  font-size: 72rpx;\r\n  color: #ddd;\r\n  font-weight: 300;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pagesMine/service/service_newbuilt.vue'\nwx.createPage(MiniProgramPage)"],"names":["ChoiceSelected","Header","_sfc_main","defineComponent","options","uni","systemInfo","res","remainCount","index","editingService","servicesStr","services","service","s","error","serviceData","type","l","match","h","m","hours","minutes","hoursMatch","minutesMatch","p","Navigator","newService","existingIndex","e","updatedService","MiniProgramPage"],"mappings":"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"}