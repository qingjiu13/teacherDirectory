{"version":3,"file":"bill.js","sources":["pagesMine/bill/bill.vue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNNaW5lXGJpbGxcYmlsbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"bill-container\">\t\t<!-- 交易记录标题 -->\t\t<view class=\"transaction-title\">\t\t\t<text>交易记录</text>\t\t</view>\t\t\r\n\t\t<!-- 交易记录列表 -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"transaction-list\" \r\n\t\t\tscroll-y \r\n\t\t\t@scrolltolower=\"loadMore\"\r\n\t\t\trefresher-enabled\r\n\t\t\t:refresher-triggered=\"refreshing\"\r\n\t\t\t@refresherrefresh=\"refresh\"\r\n\t\t>\r\n\t\t\t<template v-if=\"transactionList.length > 0\">\r\n\t\t\t\t<!-- 按日期分组 -->\r\n\t\t\t\t<view v-for=\"(group, date) in groupedTransactions\" :key=\"date\" class=\"date-group\">\r\n\t\t\t\t\t<view class=\"date-title\">{{formatGroupDate(date)}}</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 交易项目 -->\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(item, index) in group\" \r\n\t\t\t\t\t\t:key=\"item.id\" \r\n\t\t\t\t\t\tclass=\"transaction-item\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view class=\"transaction-icon\" :class=\"item.amount > 0 ? 'income' : 'expense'\">\r\n\t\t\t\t\t\t\t<text class=\"icon-text\">{{item.amount > 0 ? '入' : '出'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"transaction-info\">\r\n\t\t\t\t\t\t\t<view class=\"transaction-title\">{{item.name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"transaction-time\">{{formatTime(item.date)}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"transaction-amount\" :class=\"item.amount > 0 ? 'income' : 'expense'\">\r\n\t\t\t\t\t\t\t<text>{{item.amount > 0 ? '+' : ''}}{{item.amount.toFixed(2)}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 加载状态 -->\r\n\t\t\t\t<view class=\"loading-state\">\r\n\t\t\t\t\t<text v-if=\"isLoading\">加载中...</text>\r\n\t\t\t\t\t<text v-else-if=\"!hasMore\">—— 没有更多了 ——</text>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<!-- 空状态 -->\r\n\t\t\t<view v-else-if=\"!isLoading\" class=\"empty-state\">\r\n\t\t\t\t<view class=\"empty-icon\">\r\n\t\t\t\t\t<image src=\"/static/image/empty-bill.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"empty-text\">暂无交易记录</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n// 导入模拟数据\r\nimport moneyState from '@/store/user/money/state.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trefreshing: false,\r\n\t\t\t// 直接使用模拟数据\r\n\t\t\tlocalTransactionList: moneyState.transactionList,\r\n\t\t\tisLoading: false,\r\n\t\t\thasMore: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 使用本地数据\r\n\t\ttransactionList() {\r\n\t\t\treturn this.localTransactionList;\r\n\t\t},\r\n\t\t\r\n\t\t// 按日期分组的交易记录 - 显示所有记录，不再按月筛选\r\n\t\tgroupedTransactions() {\r\n\t\t\tconst grouped = {};\r\n\t\t\t\r\n\t\t\t// 直接使用所有交易记录，不再按月筛选\r\n\t\t\tif (this.transactionList && this.transactionList.length > 0) {\r\n\t\t\t\tthis.transactionList.forEach(item => {\r\n\t\t\t\t\tconst date = this.formatDate(item.date);\r\n\t\t\t\t\tif (!grouped[date]) {\r\n\t\t\t\t\t\tgrouped[date] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrouped[date].push(item);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn grouped;\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\t// 初始化加载交易记录\r\n\t\tuni.__f__('log','at pagesMine/bill/bill.vue:94','加载交易记录:', this.transactionList);\r\n\t\tthis.fetchData();\r\n\t},\r\n\t// 下拉触底加载更多\r\n\tonReachBottom() {\r\n\t\tthis.loadMore();\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化加载交易数据 - 使用模拟数据，无需实际请求\r\n\t\tfetchData() {\r\n\t\t\t// 模拟加载中状态\r\n\t\t\tthis.isLoading = true;\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 确保交易记录数据已正确加载\r\n\t\t\t\tif (!this.localTransactionList || this.localTransactionList.length === 0) {\r\n\t\t\t\t\tthis.localTransactionList = moneyState.transactionList || [];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 重置加载状态\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t// 设置是否有更多数据\r\n\t\t\t\tthis.hasMore = moneyState.hasMore;\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\t\r\n\t\t// 加载更多交易数据\r\n\t\tloadMore() {\r\n\t\t\t// 如果没有更多数据或正在加载中，则不执行\r\n\t\t\tif (!this.hasMore || this.isLoading) return;\r\n\t\t\t\r\n\t\t\t// 模拟加载更多 - 实际应用中应该调用API\r\n\t\t\tthis.isLoading = true;\r\n\t\t\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t// 模拟没有更多数据\r\n\t\t\t\tthis.hasMore = false;\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\t\r\n\t\t// 下拉刷新\r\n\t\trefresh() {\r\n\t\t\tthis.refreshing = true;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 重新获取数据\r\n\t\t\t\tthis.fetchData();\r\n\t\t\t\t// 模拟刷新完成\r\n\t\t\t\tthis.refreshing = false;\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\t\r\n\t\t// 格式化日期分组标题\r\n\t\tformatGroupDate(dateStr) {\r\n\t\t\tconst date = new Date(dateStr);\r\n\t\t\treturn `${date.getMonth() + 1}月${date.getDate()}日`;\r\n\t\t},\r\n\t\t\r\n\t\t// 格式化日期为YYYY-MM-DD\r\n\t\tformatDate(timestamp) {\r\n\t\t\tconst date = new Date(timestamp);\r\n\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\r\n\t\t},\r\n\t\t\r\n\t\t// 格式化时间为HH:mm\r\n\t\tformatTime(timestamp) {\r\n\t\t\tconst date = new Date(timestamp);\r\n\t\t\treturn `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.bill-container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #F5F7FA;\r\n\tpadding: 30rpx;\r\n\tbox-sizing: border-box;\r\n\tfont-family: \"PingFang SC\", -apple-system, BlinkMacSystemFont, Roboto, \"Helvetica Neue\", sans-serif;\r\n}\r\n\r\n/* 交易记录标题 */\r\n.transaction-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #333333;\r\n\tmargin-bottom: 20rpx;\r\n\tpadding: 0 10rpx;\r\n}\r\n\r\n/* 交易记录列表 */\r\n.transaction-list {\r\n\theight: calc(100vh - 100rpx); /* 调整高度 */\r\n\tbackground-color: #FFFFFF;\r\n\tborder-radius: 20rpx;\r\n\toverflow: hidden;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.date-group {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.date-title {\r\n\tpadding: 20rpx 30rpx;\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n\tbackground-color: #F9FAFC;\r\n}\r\n\r\n.transaction-item {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 30rpx;\r\n\tborder-bottom: 1rpx solid #F0F0F0;\r\n}\r\n\r\n.transaction-icon {\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tborder-radius: 50%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmargin-right: 20rpx;\r\n\t\r\n\t&.income {\r\n\t\tbackground-color: rgba(52, 211, 153, 0.1);\r\n\t}\r\n\t\r\n\t&.expense {\r\n\t\tbackground-color: rgba(239, 68, 68, 0.1);\r\n\t}\r\n}\r\n\r\n.icon-text {\r\n\tfont-size: 26rpx;\r\n\tfont-weight: 500;\r\n\t\r\n\t.income & {\r\n\t\tcolor: #34D399;\r\n\t}\r\n\t\r\n\t.expense & {\r\n\t\tcolor: #EF4444;\r\n\t}\r\n}\r\n\r\n.transaction-info {\r\n\tflex: 1;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.transaction-info .transaction-title {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333333;\r\n\tmargin-bottom: 8rpx;\r\n\tfont-weight: normal;\r\n}\r\n\r\n.transaction-time {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n.transaction-amount {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 500;\r\n\t\r\n\t&.income {\r\n\t\tcolor: #34D399;\r\n\t}\r\n\t\r\n\t&.expense {\r\n\t\tcolor: #EF4444;\r\n\t}\r\n}\r\n\r\n.loading-state {\r\n\ttext-align: center;\r\n\tpadding: 30rpx 0;\r\n\tfont-size: 24rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n/* 空状态 */\r\n.empty-state {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding-top: 200rpx;\r\n}\r\n\r\n.empty-icon {\r\n\tmargin-bottom: 30rpx;\r\n\t\r\n\timage {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t}\r\n}\r\n\r\n.empty-text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999999;\r\n}\r\n</style>","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/vue实现Lottie动画代码/pagesMine/bill/bill.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","moneyState","grouped","item","date","uni","dateStr","timestamp","MiniProgramPage"],"mappings":"wIAyDAA,EAAeC,kBAAA,CACd,MAAI,CACH,MAAO,CACN,WAAY,GAEZ,qBAAsBC,EAAU,WAAC,gBACjC,UAAW,GACX,QAAS,GAEV,EACD,SAAU,CAET,iBAAe,CACd,OAAO,KAAK,oBACZ,EAGD,qBAAmB,CAClB,MAAMC,EAAQ,IAAA,cAAE,CAAA,CAAE,EAGlB,OAAI,KAAK,iBAAmB,KAAK,gBAAgB,OAAS,GACzD,KAAK,gBAAgB,QAAQ,CAAAC,EAAG,OAAA,CAC/B,MAAMC,EAAO,KAAK,WAAWD,EAAK,IAAI,EACjCD,EAAQE,CAAI,IAChBF,EAAQE,CAAI,EAAI,IAEjBF,EAAQE,CAAI,EAAE,KAAKD,CAAI,CACxB,CAAC,EAGKD,CACR,CACA,EACD,QAAM,CAELG,EAAG,MAAC,MAAM,MAAM,gCAAgC,UAAW,KAAK,eAAe,EAC/E,KAAK,UAAS,CACd,EAED,eAAa,CACZ,KAAK,SAAQ,CACb,EACD,QAAS,CAER,WAAS,CAER,KAAK,UAAY,GAEjB,WAAW,IAAA,EAEN,CAAC,KAAK,sBAAwB,KAAK,qBAAqB,SAAW,KACtE,KAAK,qBAAuBJ,aAAW,iBAAmB,CAAA,GAI3D,KAAK,UAAY,GAEjB,KAAK,QAAUA,EAAU,WAAC,OAC1B,EAAE,GAAG,CACN,EAGD,UAAQ,CAEP,GAAI,CAAC,KAAK,SAAW,KAAK,UAAW,OAAM,KAG3C,KAAK,UAAY,GAEjB,WAAW,IAAA,CACV,KAAK,UAAY,GAEjB,KAAK,QAAU,EACf,EAAE,GAAG,CACN,EAGD,SAAO,CACN,KAAK,WAAa,GAClB,WAAW,IAAA,CAEV,KAAK,UAAS,EAEd,KAAK,WAAa,EAClB,EAAE,GAAI,CACP,EAGD,gBAAgBK,EAAO,KAAA,CACtB,MAAMF,EAAO,IAAI,KAAKE,CAAO,EAC7B,MAAO,GAAGF,EAAK,WAAa,CAAC,IAAIA,EAAK,SAAS,GAC/C,EAGD,WAAWG,EAAS,KAAA,CACnB,MAAMH,EAAO,IAAI,KAAKG,CAAS,EAC/B,MAAO,GAAGH,EAAK,YAAW,CAAE,IAAI,OAAOA,EAAK,SAAQ,EAAK,CAAC,EAAE,SAAS,EAAG,GAAG,CAAC,IAAI,OAAOA,EAAK,SAAS,EAAE,SAAS,EAAG,GAAG,CAAC,EACvH,EAGD,WAAWG,EAAS,KAAA,CACnB,MAAMH,EAAO,IAAI,KAAKG,CAAS,EAC/B,MAAO,GAAG,OAAOH,EAAK,SAAU,CAAA,EAAE,SAAS,EAAG,GAAG,CAAC,IAAI,OAAOA,EAAK,YAAY,EAAE,SAAS,EAAG,GAAG,CAAC,EACjG,CACD,EACA,wqBClKD,GAAG,WAAWI,CAAe"}