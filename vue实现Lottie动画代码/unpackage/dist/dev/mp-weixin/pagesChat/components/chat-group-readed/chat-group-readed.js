"use strict";const e=require("../../../common/vendor.js"),c=require("../../main.js"),p=()=>"../head-image/head-image.js",h=()=>"../virtual-scroller/virtual-scroller.js",l=e.defineComponent({name:"chat-group-readed",components:{HeadImage:p,VirtualScroller:h},data(){return{items:["已读","未读"],current:0,readedMembers:[],unreadMembers:[],chatStore:null}},props:{msgInfo:{type:Object,required:!0},groupMembers:{type:Array}},created(){try{this.chatStore=c.getChatStore(),!this.chatStore&&this.$&&(this.chatStore=this.$chatStore),this.chatStore||(this.chatStore={updateMessage:(t=null,o=null)=>{e.index.__f__("log","at pagesChat/components/chat-group-readed/chat-group-readed.vue:80","使用模拟updateMessage:",t,o)}})}catch(t){e.index.__f__("error","at pagesChat/components/chat-group-readed/chat-group-readed.vue:85","获取chatStore失败:",t),this.chatStore={updateMessage:(o=null,a=null)=>{e.index.__f__("log","at pagesChat/components/chat-group-readed/chat-group-readed.vue:89","使用模拟updateMessage:",o,a)}}}},methods:{open(){this.$refs.popup.open(),this.loadReadedUser()},loadReadedUser(){this.readedMembers=[],this.unreadMembers=[],this.$http(new UTSJSONObject({url:`/message/group/findReadedUsers?groupId=${this.msgInfo.groupId}&messageId=${this.msgInfo.id}`,method:"Get"})).then((t=null)=>{this.groupMembers.forEach((s=null)=>{if(s.userId==this.msgInfo.sendId||s.quit)return null;t.find((r=null)=>s.userId==r)?this.readedMembers.push(s):this.unreadMembers.push(s)}),this.items[0]=`已读(${this.readedMembers.length})`,this.items[1]=`未读(${this.unreadMembers.length})`;let o=new UTSJSONObject({type:"GROUP",targetId:this.msgInfo.groupId}),a=new UTSJSONObject({id:this.msgInfo.id,groupId:this.msgInfo.groupId,readedCount:this.readedMembers.length});this.chatStore.updateMessage(a,o)})},onClickItem(t=null){this.current=t.currentIndex}}});if(!Array){const t=e.resolveComponent("uni-segmented-control"),o=e.resolveComponent("head-image"),a=e.resolveComponent("virtual-scroller"),s=e.resolveComponent("uni-popup");(t+o+a+s)()}const m=()=>"../../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js",g=()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||(m+g)();function _(t,o,a,s,r,i){return e.e({a:e.o(i.onClickItem),b:e.p({current:r.current,values:r.items,"style-type":"button"}),c:r.current===0},r.current===0?{d:e.w(({item:n},u,d)=>({a:"d331fbb7-3-"+d+",d331fbb7-2",b:e.p({name:n.showNickName,online:n.online,url:n.headImage,size:90}),c:e.t(n.showNickName),d,e:u}),{name:"d",path:"d",vueId:"d331fbb7-2,d331fbb7-0"}),e:e.p({items:r.readedMembers})}:{},{f:r.current===1},r.current===1?{g:e.w(({item:n},u,d)=>({a:"d331fbb7-5-"+d+",d331fbb7-4",b:e.p({name:n.showNickName,online:n.online,url:n.headImage,size:90}),c:e.t(n.showNickName),d,e:u}),{name:"d",path:"g",vueId:"d331fbb7-4,d331fbb7-0"}),h:e.p({items:r.unreadMembers})}:{},{i:e.sr("popup","d331fbb7-0"),j:e.gei(t,""),k:e.p({type:"bottom",id:e.gei(t,"")})})}const b=e._export_sfc(l,[["render",_],["__scopeId","data-v-d331fbb7"]]);wx.createComponent(b);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pagesChat/components/chat-group-readed/chat-group-readed.js.map
