"use strict";const s=require("../../../../common/vendor.js"),a=s.defineComponent({name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(t=null){if(!this.config[t])return null;this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t=null){if(!this.config[t])return null;this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t=null){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t=null){this.mkclick=t},immediate:!0},showPopup(t=null){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:new UTSJSONObject({top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"}),maskClass:new UTSJSONObject({position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"}),transClass:new UTSJSONObject({position:"fixed",left:0,right:0}),maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{const o=s.index.getSystemInfoSync(),r=o.windowWidth,l=o.windowHeight,e=o.windowTop,i=o.safeArea,n=o.screenHeight;o.safeAreaInsets,this.popupWidth=r,this.popupHeight=l+(e||0),i&&this.safeArea?this.safeAreaInsets=n-i.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){this.isMaskClick===null&&this.maskClick===null?this.mkclick=!0:this.mkclick=this.isMaskClick!==null?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(t=null){t.stopPropagation(),this.clearPropagation=!0},open(t=null){if(this.showPopup)return null;if(t&&["top","center","bottom","left","right","message","dialog","share"].indexOf(t)!==-1||(t=this.type),!this.config[t])return s.index.__f__("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:279","缺少类型：",t),null;this[this.config[t]](),this.$emit("change",new UTSJSONObject({show:!0,type:t}))},close(t=null){this.showTrans=!1,this.$emit("change",new UTSJSONObject({show:!1,type:this.type})),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation)return this.clearPropagation=!1,null;if(this.$emit("maskClick"),!this.mkclick)return null;this.close()},top(t=null){if(this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},t)return null;this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()})},bottom(t=null){if(this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},t)return null;this.showPopup=!0,this.showTrans=!0},center(t=null){if(this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},t)return null;this.showPopup=!0,this.showTrans=!0},left(t=null){if(this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t)return null;this.showPopup=!0,this.showTrans=!0},right(t=null){if(this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t)return null;this.showPopup=!0,this.showTrans=!0}}});Array||s.resolveComponent("uni-transition")();const h=()=>"../../../uni-transition/components/uni-transition/uni-transition.js";Math||h();function u(t,o,r,l,e,i){return s.e({a:e.showPopup},e.showPopup?s.e({b:e.maskShow},e.maskShow?{c:s.o(i.onTap),d:s.p({name:"mask","mode-class":"fade",styles:e.maskClass,duration:e.duration,show:e.showTrans})}:{},{e:i.bg,f:s.n(e.popupstyle),g:s.o((...n)=>i.clear&&i.clear(...n)),h:s.o(i.onTap),i:s.p({"mode-class":e.ani,name:"content",styles:e.transClass,duration:e.duration,show:e.showTrans}),j:s.o((...n)=>i.touchstart&&i.touchstart(...n)),k:s.sei(s.gei(t,""),"view"),l:s.n(e.popupstyle),m:s.n(i.isDesktop?"fixforpc-z-index":"")}):{})}const p=s._export_sfc(a,[["render",u]]);wx.createComponent(p);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-popup/components/uni-popup/uni-popup.js.map
