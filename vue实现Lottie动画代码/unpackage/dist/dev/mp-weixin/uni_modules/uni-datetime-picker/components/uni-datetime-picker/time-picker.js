"use strict";const i=require("../../../../common/vendor.js"),c=require("./i18n/index.js"),l=require("./util.js"),d=i.initVueI18n(c.i18nMessages).t,o=i.defineComponent({name:"UniDatetimePicker",data(){return{indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:new UTSJSONObject({}),dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}},options:{virtualHost:!0},props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e=null){e?(this.parseValue(l.fixIosDateFormat(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e=null){e==="date"?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):e==="time"?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e=null){this.parseDatetimeRange(l.fixIosDateFormat(e),"start")},immediate:!0},end:{handler(e=null){this.parseDatetimeRange(l.fixIosDateFormat(e),"end")},immediate:!0},months(e=null){this.checkValue("month",this.month,e)},days(e=null){this.checkValue("day",this.day,e)},hours(e=null){this.checkValue("hour",this.hour,e)},minutes(e=null){this.checkValue("minute",this.minute,e)},seconds(e=null){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){if(this.type==="datetime")return this.currentDateIsStart?this.startHour:0;if(this.type==="time")return this.startHour},maxHour(){if(this.type==="datetime")return this.currentDateIsEnd?this.endHour:23;if(this.type==="time")return this.endHour},minMinute(){if(this.type==="datetime")return this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0;if(this.type==="time")return this.hour===this.startHour?this.startMinute:0},maxMinute(){if(this.type==="datetime")return this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59;if(this.type==="time")return this.hour===this.endHour?this.endMinute:59},minSecond(){if(this.type==="datetime")return this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0;if(this.type==="time")return this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0},maxSecond(){if(this.type==="datetime")return this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59;if(this.type==="time")return this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59},selectTimeText(){return d("uni-datetime-picker.selectTime")},okText(){return d("uni-datetime-picker.ok")},clearText(){return d("uni-datetime-picker.clear")},cancelText(){return d("uni-datetime-picker.cancel")}},mounted(){},methods:{lessThanTen(e=null){return e<10?"0"+e:e},parseTimeType(e=null){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e=null){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e=null,t=null,s=null){let a=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),s=this.superTimeStamp(s),t&&s?e<t?a=new Date(t):e>s?a=new Date(s):a=new Date(e):t&&!s?a=t<=e?new Date(e):new Date(t):!t&&s?a=e<=s?new Date(e):new Date(s):a=new Date(e),a},superTimeStamp(e=null){let t="";if(this.type==="time"&&e&&typeof e=="string"){const s=new Date,a=s.getFullYear(),h=s.getMonth()+1,r=s.getDate();t=a+"/"+h+"/"+r+" "}return Number(e)&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e=null){if(!e)return null;if(this.type==="time"&&typeof e=="string")this.parseTimeType(e);else{let t=null;t=new Date(e),this.type!=="time"&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),this.type!=="date"&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)},parseDatetimeRange(e=null,t=null){if(!e)return t==="start"&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),t==="end"&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59),null;if(this.type==="time"){const s=e.split(":");this[t+"Hour"]=Number(s[0]),this[t+"Minute"]=Number(s[1]),this[t+"Second"]=Number(s[2])}else{if(!e)return t==="start"?this.startYear=this.year-60:this.endYear=this.year+60,null;Number(e)&&(e=parseInt(e));const s=/[0-9]:[0-9]/;this.type==="datetime"&&t==="end"&&typeof e=="string"&&!s.test(e)&&(e=e+" 23:59:59");const a=new Date(e);this[t+"Year"]=a.getFullYear(),this[t+"Month"]=a.getMonth()+1,this[t+"Day"]=a.getDate(),this.type==="datetime"&&(this[t+"Hour"]=a.getHours(),this[t+"Minute"]=a.getMinutes(),this[t+"Second"]=a.getSeconds())}},getCurrentRange(e=null){const t=[];for(let s=this["min"+this.capitalize(e)];s<=this["max"+this.capitalize(e)];s++)t.push(s);return t},capitalize(e=null){return e.charAt(0).toUpperCase()+e.slice(1)},checkValue(e=null,t=null,s=null){s.indexOf(t)===-1&&(this[e]=s[0])},daysInMonth(e=null,t=null){return new Date(e,t,0).getDate()},createTimeStamp(e=null){return e?typeof e=="number"?e:(e=e.replace(/-/g,"/"),this.type==="date"&&(e=e+" 00:00:00"),Date.parse(e)):null},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),this.type==="date"?e:this.type==="time"?t:e+" "+t},initTime(e=!0){if(this.time=this.createDomSting(),!e)return null;this.returnType==="timestamp"&&this.type!=="time"?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time))},bindDateChange(e=null){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e=null){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return null;const e=l.fixIosDateFormat(this.time);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e=null){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}});function f(e,t,s,a,h,r){return i.e({a:i.t(h.time),b:!h.time},h.time?{}:{c:i.t(r.selectTimeText)},{d:s.disabled?1:"",e:s.border?1:"",f:i.o((...n)=>r.initTimePicker&&r.initTimePicker(...n)),g:h.visible},h.visible?{h:i.sei("mask","view"),i:i.o((...n)=>r.tiggerTimePicker&&r.tiggerTimePicker(...n))}:{},{j:h.visible},h.visible?i.e({k:i.t(r.selectTimeText),l:h.dateShow},h.dateShow?{m:i.f(r.years,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u})),n:i.f(r.months,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u})),o:i.f(r.days,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u})),p:h.indicatorStyle,q:r.ymd,r:i.o((...n)=>r.bindDateChange&&r.bindDateChange(...n))}:{},{s:h.timeShow},h.timeShow?i.e({t:i.f(r.hours,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u})),v:i.f(r.minutes,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u})),w:!s.hideSecond},s.hideSecond?{}:{x:i.f(r.seconds,(n,u,m)=>({a:i.t(r.lessThanTen(n)),b:u}))},{y:i.n(s.hideSecond?"time-hide-second":""),z:h.indicatorStyle,A:r.hms,B:i.o((...n)=>r.bindTimeChange&&r.bindTimeChange(...n)),C:i.n(s.hideSecond?"sign-center":"sign-left"),D:!s.hideSecond},s.hideSecond?{}:{}):{},{E:i.t(r.clearText),F:i.o((...n)=>r.clearTime&&r.clearTime(...n)),G:i.t(r.cancelText),H:i.o((...n)=>r.tiggerTimePicker&&r.tiggerTimePicker(...n)),I:i.t(r.okText),J:i.o((...n)=>r.setTime&&r.setTime(...n)),K:i.n(h.dateShow&&h.timeShow?"":"fix-nvue-height"),L:i.s(h.fixNvueBug)}):{},{M:i.sei(i.gei(e,""),"view")})}const y=i._export_sfc(o,[["render",f]]);wx.createComponent(y);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-datetime-picker/components/uni-datetime-picker/time-picker.js.map
