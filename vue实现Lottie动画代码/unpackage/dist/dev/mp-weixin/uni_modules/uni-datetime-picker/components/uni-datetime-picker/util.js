"use strict";class y{constructor({selected:t,startDate:e,endDate:s,range:a}={}){this.date=this.getDateObj(new Date),this.selected=t||[],this.startDate=e,this.endDate=s,this.range=a,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(t){const e=this.getDateObj(t);this.getWeeks(e.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(t){this.startDate=t}setEndDate(t){this.endDate=t}getPreMonthObj(t){t=D(t),t=new Date(t);const e=t.getMonth();t.setMonth(e-1);const s=t.getMonth();return e!==0&&s-e===0&&t.setMonth(s-1),this.getDateObj(t)}getNextMonthObj(t){t=D(t),t=new Date(t);const e=t.getMonth();t.setMonth(e+1);const s=t.getMonth();return s-e>1&&t.setMonth(s-1),this.getDateObj(t)}getDateObj(t){return t=D(t),t=new Date(t),{fullDate:S(t),year:t.getFullYear(),month:o(t.getMonth()+1),date:o(t.getDate()),day:t.getDay()}}getPreMonthDays(t,e){const s=[];for(let a=t-1;a>=0;a--){const l=e.month-1;s.push({date:new Date(e.year,l,-a).getDate(),month:l,disable:!0})}return s}getCurrentMonthDays(t,e){const s=[],a=this.date.fullDate;for(let l=1;l<=t;l++){const n=`${e.year}-${e.month}-${o(l)}`,c=a===n,m=this.selected&&this.selected.find(r=>{if(this.dateEqual(n,r.date))return r});this.startDate&&h(this.startDate,n),this.endDate&&h(n,this.endDate);let g=this.multipleStatus.data,u=-1;this.range&&g&&(u=g.findIndex(r=>this.dateEqual(r,n)));const f=u!==-1;s.push({fullDate:n,year:e.year,date:l,multiple:this.range?f:!1,beforeMultiple:this.isLogicBefore(n,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(n,this.multipleStatus.before,this.multipleStatus.after),month:e.month,disable:this.startDate&&!h(this.startDate,n)||this.endDate&&!h(n,this.endDate),isToday:c,userChecked:!1,extraInfo:m})}return s}_getNextMonthDays(t,e){const s=[],a=e.month+1;for(let l=1;l<=t;l++)s.push({date:l,month:a,disable:!0});return s}getInfo(t){t||(t=new Date);const e=this.calendar.find(s=>s.fullDate===this.getDateObj(t).fullDate);return e||this.getDateObj(t)}dateEqual(t,e){return t=new Date(D(t)),e=new Date(D(e)),t.valueOf()===e.valueOf()}isLogicBefore(t,e,s){let a=e;return e&&s&&(a=h(e,s)?e:s),this.dateEqual(a,t)}isLogicAfter(t,e,s){let a=s;return e&&s&&(a=h(e,s)?s:e),this.dateEqual(a,t)}geDateAll(t,e){var s=[],a=t.split("-"),l=e.split("-"),n=new Date;n.setFullYear(a[0],a[1]-1,a[2]);var c=new Date;c.setFullYear(l[0],l[1]-1,l[2]);for(var m=n.getTime()-24*60*60*1e3,g=c.getTime()-24*60*60*1e3,u=m;u<=g;)u=u+24*60*60*1e3,s.push(this.getDateObj(new Date(parseInt(u))).fullDate);return s}setMultiple(t){if(!this.range)return;let{before:e,after:s}=this.multipleStatus;if(e&&s){if(!this.lastHover){this.lastHover=!0;return}this.multipleStatus.before=t,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else e?(this.multipleStatus.after=t,h(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=t,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(t)}setHoverMultiple(t){if(!this.range||this.lastHover)return;const{before:e}=this.multipleStatus;e?(this.multipleStatus.after=t,h(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=t,this.getWeeks(t)}setDefaultMultiple(t,e){this.multipleStatus.before=t,this.multipleStatus.after=e,t&&e&&(h(t,e)?(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)):(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)))}getWeeks(t){const{year:e,month:s}=this.getDateObj(t),a=new Date(e,s-1,1).getDay(),l=this.getPreMonthDays(a,this.getDateObj(t)),n=new Date(e,s,0).getDate(),c=this.getCurrentMonthDays(n,this.getDateObj(t)),m=42-a-n,g=this._getNextMonthDays(m,this.getDateObj(t)),u=[...l,...c,...g],f=new Array(6);for(let r=0;r<u.length;r++){const p=Math.floor(r/7);f[p]||(f[p]=new Array(7)),f[p][r%7]=u[r]}this.calendar=u,this.weeks=f}}function w(i,t){return`${S(i)} ${M(i,t)}`}function S(i){i=D(i),i=new Date(i);const t=i.getFullYear(),e=i.getMonth()+1,s=i.getDate();return`${t}-${o(e)}-${o(s)}`}function M(i,t){i=D(i),i=new Date(i);const e=i.getHours(),s=i.getMinutes(),a=i.getSeconds();return t?`${o(e)}:${o(s)}`:`${o(e)}:${o(s)}:${o(a)}`}function o(i){return i<10&&(i=`0${i}`),i}function d(i){return i?"00:00":"00:00:00"}function h(i,t){return i=new Date(D(i)),t=new Date(D(t)),i<=t}function b(i){const t=/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g;return i.match(t)}const A=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function D(i){return typeof i=="string"&&A.test(i)&&(i=i.replace(/-/g,"/")),i}exports.Calendar=y;exports.checkDate=b;exports.dateCompare=h;exports.fixIosDateFormat=D;exports.getDate=S;exports.getDateTime=w;exports.getDefaultSecond=d;exports.getTime=M;
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-datetime-picker/components/uni-datetime-picker/util.js.map
