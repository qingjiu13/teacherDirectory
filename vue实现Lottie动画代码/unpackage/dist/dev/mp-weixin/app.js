"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./common/vendor.js"),s=require("./store/index.js"),r=require("./utils/vuex-debug.js"),d=require("./store/inject-checker.js"),m=require("./components/loading/index.js"),g=require("./components/loading/useAnimationCache.js"),f=new UTSJSONObject({miniprogram:new UTSJSONObject({libVersion:"2.9.0"})}),j=new UTSJSONObject({settings:f});try{const{globalState:t,getGlobalStats:n,isAllAnimationsLoaded:i}=g.useGlobalAnimationState();if(typeof getApp=="function")try{const o=getApp();o&&(o.globalData=o.globalData||{},o.globalData.$loading||(o.globalData.$loading={show:()=>a.index.__f__("log","at main.js:24","Loading组件尚未挂载，show方法未生效"),hide:()=>a.index.__f__("log","at main.js:25","Loading组件尚未挂载，hide方法未生效"),preload:()=>a.index.__f__("log","at main.js:26","Loading组件尚未挂载，preload方法未生效"),isPreloaded:{value:!1},getStatus:()=>({allLoaded:!1,stats:null}),globalState:t}),a.index.__f__("log","at main.js:33","全局动画状态已提前初始化"))}catch{a.index.__f__("log","at main.js:36","全局App尚未初始化，将在createApp中完成初始化")}}catch(t){a.index.__f__("error","at main.js:40","提前初始化全局动画状态失败:",t)}async function u(){var t,n;try{const i=getApp();if((n=(t=i==null?void 0:i.globalData)==null?void 0:t.$loading)!=null&&n.preload){if(a.index.__f__("log","at main.js:51","通过全局变量预加载动画资源"),await i.globalData.$loading.preload(),!i.globalData.$animationState){const{getGlobalStats:o,isAllAnimationsLoaded:_}=g.useGlobalAnimationState();i.globalData.$animationState={getStats:o,isAllLoaded:_}}}else a.index.__f__("log","at main.js:63","全局变量未就绪，将在组件挂载时预加载")}catch(i){a.index.__f__("error","at main.js:66","预加载资源失败:",i)}}function c(){const t=a.createSSRApp(j);t.use(s.store),t.use(m.LoadingPlugin,{preload:{animations:["https://lottie.host/1f64310d-d1a9-44c9-ac77-3c29ae849559/c3yfKGAzCm.json"]}}),t.provide("store",s.store),t.config.globalProperties.$store=s.store;const{globalState:n,getGlobalStats:i,isAllAnimationsLoaded:o}=g.useGlobalAnimationState();t.provide("animationState",{globalState:n,getStats:i,isAllLoaded:o}),t.config.globalProperties.$animationState={globalState:n,getStats:i,isAllLoaded:o};try{const e=getApp();e&&(e.globalData=e.globalData||{},e.globalData.$loading||(e.globalData.$loading={show:()=>a.index.__f__("log","at main.js:116","Loading组件尚未挂载，show方法未生效"),hide:()=>a.index.__f__("log","at main.js:117","Loading组件尚未挂载，hide方法未生效"),preload:()=>a.index.__f__("log","at main.js:118","Loading组件尚未挂载，preload方法未生效"),isPreloaded:{value:!1},getStatus:()=>({allLoaded:!1,stats:null}),globalState:n}),e.globalData.$animationState={getStats:i,isAllLoaded:o,globalState:n},a.index.__f__("log","at main.js:132","全局动画状态已在createApp中初始化"))}catch(e){a.index.__f__("error","at main.js:135","初始化全局App对象失败:",e)}t.mixin(d.injectStoreSafety);const _=e=>{a.index.__f__("error","at main.js:143","捕获到全局错误:",e)};t.config.errorHandler=(e,l,p)=>{a.index.__f__("error","at main.js:148","Vue错误:",e),a.index.__f__("info","at main.js:149","错误来源:",p),_(e)};try{r.installDebugPlugin(s.store),r.installDebugForVue3(t,s.store),d.checkStoreAvailability(s.store),a.index.__f__("log","at main.js:159","初始Vuex状态:",s.store.state),typeof window<"u"&&(window.__ANIMATION_DEBUG__={getStats:i,isAllLoaded:o,globalState:n},a.index.__f__("log","at main.js:168","已注册动画状态调试工具，可通过 window.__ANIMATION_DEBUG__ 访问"))}catch(e){a.index.__f__("error","at main.js:171","调试插件初始化失败:",e)}if(a.index.getSystemInfoSync().platform==="mp-weixin"){a.index.__f__("log","at main.js:177","当前运行环境: 微信小程序");try{a.index.onError(l=>{a.index.__f__("error","at main.js:183","小程序错误:",l),_(l)}),a.index.onNetworkStatusChange(l=>{a.index.__f__("log","at main.js:189","网络状态变化:",l.isConnected?"已连接":"已断开"),s.store.commit("app/setNetworkStatus",l.isConnected)});const e=getApp();e&&!e.globalData&&(e.globalData={}),e&&e.globalData&&(e.globalData.$animationState={getStats:i,isAllLoaded:o,globalState:n})}catch(e){a.index.__f__("error","at main.js:208","微信小程序配置失败:",e)}}return u(),{app:t}}c().app.mount("#app");exports.createApp=c;
//# sourceMappingURL=../.sourcemap/mp-weixin/app.js.map
