"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./common/vendor.js"),o=require("./store/index.js"),d=require("./utils/vuex-debug.js"),c=require("./store/inject-checker.js"),f=require("./components/loading/index.js"),g=require("./components/loading/useAnimationCache.js"),j=new UTSJSONObject({miniprogram:new UTSJSONObject({libVersion:"2.9.0"})}),u=new UTSJSONObject({settings:j});try{const{globalState:t,getGlobalStats:l,isAllAnimationsLoaded:i}=g.useGlobalAnimationState();if(typeof getApp=="function")try{const n=getApp();n&&(n.globalData=n.globalData||{},n.globalData.$loading||(n.globalData.$loading={show:()=>a.index.__f__("log","at main.js:25","Loading组件尚未挂载，show方法未生效"),hide:()=>a.index.__f__("log","at main.js:26","Loading组件尚未挂载，hide方法未生效"),preload:()=>a.index.__f__("log","at main.js:27","Loading组件尚未挂载，preload方法未生效"),isPreloaded:{value:!1},getStatus:()=>({allLoaded:!1,stats:null}),globalState:t}),a.index.__f__("log","at main.js:34","全局动画状态已提前初始化"))}catch{a.index.__f__("log","at main.js:37","全局App尚未初始化，将在createApp中完成初始化")}}catch(t){a.index.__f__("error","at main.js:41","提前初始化全局动画状态失败:",t)}async function A(){var t,l;try{const i=getApp();if((l=(t=i==null?void 0:i.globalData)==null?void 0:t.$loading)!=null&&l.preload){if(a.index.__f__("log","at main.js:52","通过全局变量预加载动画资源"),await i.globalData.$loading.preload(),!i.globalData.$animationState){const{getGlobalStats:n,isAllAnimationsLoaded:s}=g.useGlobalAnimationState();i.globalData.$animationState={getStats:n,isAllLoaded:s}}}else a.index.__f__("log","at main.js:64","全局变量未就绪，将在组件挂载时预加载")}catch(i){a.index.__f__("error","at main.js:67","预加载资源失败:",i)}}function p(){const t=a.createSSRApp(u),l=a.createPinia();t.use(l),t.use(o.store),t.use(f.LoadingPlugin,{preload:{animations:["https://lottie.host/1f64310d-d1a9-44c9-ac77-3c29ae849559/c3yfKGAzCm.json"]}}),t.provide("store",o.store),t.config.globalProperties.$store=o.store;const{globalState:i,getGlobalStats:n,isAllAnimationsLoaded:s}=g.useGlobalAnimationState();t.provide("animationState",{globalState:i,getStats:n,isAllLoaded:s}),t.config.globalProperties.$animationState={globalState:i,getStats:n,isAllLoaded:s};try{const e=getApp();e&&(e.globalData=e.globalData||{},e.globalData.$loading||(e.globalData.$loading={show:()=>a.index.__f__("log","at main.js:118","Loading组件尚未挂载，show方法未生效"),hide:()=>a.index.__f__("log","at main.js:119","Loading组件尚未挂载，hide方法未生效"),preload:()=>a.index.__f__("log","at main.js:120","Loading组件尚未挂载，preload方法未生效"),isPreloaded:{value:!1},getStatus:()=>({allLoaded:!1,stats:null}),globalState:i}),e.globalData.$animationState={getStats:n,isAllLoaded:s,globalState:i},a.index.__f__("log","at main.js:134","全局动画状态已在createApp中初始化"))}catch(e){a.index.__f__("error","at main.js:137","初始化全局App对象失败:",e)}t.mixin(c.injectStoreSafety);const r=e=>{a.index.__f__("error","at main.js:145","捕获到全局错误:",e)};t.config.errorHandler=(e,_,m)=>{a.index.__f__("error","at main.js:150","Vue错误:",e),a.index.__f__("info","at main.js:151","错误来源:",m),r(e)};try{d.installDebugPlugin(o.store),d.installDebugForVue3(t,o.store),c.checkStoreAvailability(o.store),a.index.__f__("log","at main.js:161","初始Vuex状态:",o.store.state),typeof window<"u"&&(window.__ANIMATION_DEBUG__={getStats:n,isAllLoaded:s,globalState:i},a.index.__f__("log","at main.js:170","已注册动画状态调试工具，可通过 window.__ANIMATION_DEBUG__ 访问"))}catch(e){a.index.__f__("error","at main.js:173","调试插件初始化失败:",e)}if(a.index.getSystemInfoSync().platform==="mp-weixin"){a.index.__f__("log","at main.js:179","当前运行环境: 微信小程序");try{a.index.onError(_=>{a.index.__f__("error","at main.js:185","小程序错误:",_),r(_)}),a.index.onNetworkStatusChange(_=>{a.index.__f__("log","at main.js:191","网络状态变化:",_.isConnected?"已连接":"已断开"),o.store.commit("app/setNetworkStatus",_.isConnected)});const e=getApp();e&&!e.globalData&&(e.globalData={}),e&&e.globalData&&(e.globalData.$animationState={getStats:n,isAllLoaded:s,globalState:i})}catch(e){a.index.__f__("error","at main.js:210","微信小程序配置失败:",e)}}return A(),{app:t,pinia:l}}p().app.mount("#app");exports.createApp=p;
//# sourceMappingURL=../.sourcemap/mp-weixin/app.js.map
