"use strict";const t=require("../../../common/vendor.js"),a=t.defineComponent({name:"InputSection",props:{isProcessing:{type:Boolean,default:!1}},data(){return{inputValue:""}},methods:{sendMessage(){return t.__awaiter(this,void 0,void 0,function*(){if(!this.inputValue.trim())return Promise.resolve(null);this.$emit("processing-start");try{const n=yield this.$store.dispatch("user/aiChat/sendQuestion",new UTSJSONObject({content:this.inputValue.trim(),onMessage:(e=null)=>{this.$emit("stream-message",new UTSJSONObject({content:e.content,fullContent:e.fullContent,isComplete:e.isComplete,conversationId:e.conversationId,messageCount:e.messageCount,isTimeout:e.isTimeout}))},onComplete:(e=null)=>{t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:73","✅ 流式传输完成:",e),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:74",`   - 最终内容长度: ${e.content?e.content.length:0}`),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:75",`   - 总消息片段数: ${e.messageCount||0}`),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:76",`   - 会话ID: ${e.conversationId}`),this.$emit("stream-complete",new UTSJSONObject({content:e.content,conversationId:e.conversationId,messageCount:e.messageCount,isTimeout:e.isTimeout}))},onError:(e=null)=>{t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:88","❌ 流式传输错误:",e),this.$emit("stream-error",e),t.index.showToast({title:e.message||"发送失败",icon:"none"})}}));n.success?(this.inputValue="",this.$emit("message-sent",new UTSJSONObject(Object.assign(Object.assign({},n),{controller:n.controller})))):(t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:117","❌ 消息发送失败:",n),t.index.showToast({title:n.message||"发送失败",icon:"none"}))}catch(n){t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/InputSection.vue:125","发送消息出错:",n),t.index.showToast({title:"发送失败，请重试",icon:"none"}),this.$emit("stream-error",new UTSJSONObject({message:"发送失败，请重试"}))}finally{this.$emit("processing-end")}})}}});function u(n,e,s,_,c,o){return{a:s.isProcessing,b:t.o((...i)=>o.sendMessage&&o.sendMessage(...i)),c:c.inputValue,d:t.o(i=>c.inputValue=i.detail.value),e:t.t(s.isProcessing?"发送中...":"发送"),f:t.o((...i)=>o.sendMessage&&o.sendMessage(...i)),g:!c.inputValue.trim()||s.isProcessing,h:t.sei(t.gei(n,""),"view")}}const r=t._export_sfc(a,[["render",u]]);wx.createComponent(r);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages_AI_Login_Match/AI/ai-chat/InputSection.js.map
