"use strict";const s=require("../../../common/vendor.js");function i(a){return{state:{data:a,filterKeyword:"",dataFuse:null},mutations:{setFilterKeyword(e,t){e.filterKeyword=t},initFuse(e){const t=e.data.map(r=>{const n=o(r);return{name:r,short:n,display:r}});e.dataFuse=new s.Fuse(t,{keys:[{name:"name",weight:.7},{name:"short",weight:.3}],threshold:.6,includeScore:!0,shouldSort:!0,minMatchCharLength:1,ignoreLocation:!0,findAllMatches:!0,distance:1e3,location:0,includeMatches:!0}),s.index.__f__("log","at pages_AI_Login_Match/components/combobox/undergraduate.js:46","数据搜索引擎初始化完成，总数量:",t.length)}},getters:{filteredData(e){if(!e.filterKeyword)return e.data.slice(0,30);e.dataFuse||this.mutations.initFuse(e);const t=e.filterKeyword.trim(),r=e.dataFuse.search(t);return r.length>0&&s.index.__f__("log","at pages_AI_Login_Match/components/combobox/undergraduate.js:65","搜索关键词:",t,"找到结果数:",r.length),r.map(n=>n.item.name)},bestMatchedData(e,t){if(!e.filterKeyword||!e.dataFuse)return"";const r=e.dataFuse.search(e.filterKeyword.trim());return r.length>0?r[0].item.name:""}},actions:{updateFilterKeyword({commit:e},t){e("setFilterKeyword",t)},initSearch({commit:e}){e("initFuse")},autoSelectBestMatch({state:e,getters:t}){return t.bestMatchedData}}}}function o(a){let e=[];const t=a.split("").filter(r=>/[\u4e00-\u9fa5]/.test(r)).join("");if(t.length>=2&&e.push(t.substring(0,2)),t.length>=3){e.push(t.substring(0,3));const r=t.match(/^([\u4e00-\u9fa5]{2})([\u4e00-\u9fa5]{1,3})/);r&&e.push(r[1][0]+r[2])}return t.length>=4&&(a.includes("大学")||a.includes("学院"))&&e.push(t.substring(2)),e.join(" ")}exports.createDataModule=i;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages_AI_Login_Match/components/combobox/undergraduate.js.map
