"use strict";const t=require("./common/vendor.js"),h=t.defineComponent({name:"ModeSelector",props:{currentMode:{type:String,default:"general",validator:(e=null)=>["general","school","career"].includes(e)},inNav:{type:Boolean,default:!1}},computed:Object.assign(Object.assign({},t.mapState(new UTSJSONObject({vuexChatMode:(e=null)=>{try{return e.user&&e.user.aiChat&&e.user.aiChat.aiChat?e.user.aiChat.aiChat.chatMode:null}catch(c){return t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:76","获取 Vuex chatMode 状态出错:",c),null}}}))),{activeChatMode(){const e=this.vuexChatMode||this.currentMode||"general";return t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:89","ModeSelector activeChatMode 计算:",new UTSJSONObject({vuexChatMode:this.vuexChatMode,currentMode:this.currentMode,activeChatMode:e,timestamp:new Date().toLocaleTimeString()})),e}}),watch:{vuexChatMode:{handler(e=null,c=null){t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:106","ModeSelector vuexChatMode watch 触发:",new UTSJSONObject({oldMode:c,newMode:e,activeChatMode:this.activeChatMode,timestamp:new Date().toLocaleTimeString()})),this.$forceUpdate(),e&&c&&e!==c&&t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:118","ModeSelector 检测到 Vuex 聊天模式变化:",new UTSJSONObject({oldMode:c,newMode:e,source:"外部变化（如历史记录加载）"}))},immediate:!1},activeChatMode:{handler(e=null,c=null){t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:139","ModeSelector activeChatMode 发生变化:",new UTSJSONObject({oldMode:c,newMode:e,timestamp:new Date().toLocaleTimeString()}))},immediate:!0}},methods:{switchMode(e=null){if(t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:154","switchMode 被调用:",new UTSJSONObject({targetMode:e,currentActiveChatMode:this.activeChatMode,vuexChatMode:this.vuexChatMode,shouldProceed:this.activeChatMode!==e})),this.activeChatMode===e)return t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:162","模式相同，跳过切换"),null;t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:166","ModeSelector 用户主动切换模式:",new UTSJSONObject({from:this.activeChatMode,to:e})),this.$store.commit("user/aiChat/CREATE_NEW_CONVERSATION",new UTSJSONObject({chatMode:e})),this.$nextTick(()=>{t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:178","switchMode 状态更新后验证:",new UTSJSONObject({targetMode:e,vuexChatMode:this.vuexChatMode,activeChatMode:this.activeChatMode,stateUpdated:this.vuexChatMode===e})),this.vuexChatMode!==e&&(t.index.__f__("warn","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:187","状态更新失败，尝试直接更新 chatMode"),this.$store.commit("user/aiChat/UPDATE_CHAT_MODE",e),this.$forceUpdate())}),this.$emit("modeChange",new UTSJSONObject({mode:e,isNewConversation:!0,action:"switch"})),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/ModeSelector.vue:200","已切换到新模式并准备新对话:",e)}}});function r(e,c,i,n,_,a){return t.e({a:i.inNav},i.inNav?t.e({b:a.activeChatMode==="general"},a.activeChatMode==="general"?{}:{},{c:a.activeChatMode==="general"?1:"",d:t.o(o=>a.switchMode("general")),e:a.activeChatMode==="school"},a.activeChatMode==="school"?{}:{},{f:a.activeChatMode==="school"?1:"",g:t.o(o=>a.switchMode("school")),h:a.activeChatMode==="career"},a.activeChatMode==="career"?{}:{},{i:a.activeChatMode==="career"?1:"",j:t.o(o=>a.switchMode("career"))}):{k:a.activeChatMode==="general"?1:"",l:t.o(o=>a.switchMode("general")),m:a.activeChatMode==="school"?1:"",n:t.o(o=>a.switchMode("school")),o:a.activeChatMode==="career"?1:"",p:t.o(o=>a.switchMode("career"))},{q:t.sei(t.gei(e,""),"view"),r:i.inNav?1:""})}const d=t._export_sfc(h,[["render",r]]);exports.Component=d;
//# sourceMappingURL=../.sourcemap/mp-weixin/ModeSelector.js.map
