"use strict";const t=require("../common/vendor.js"),i=r=>{if(!r)return t.index.__f__("error","at store/inject-checker.js:14","store参数未提供"),!1;try{const e=r.state.user;return e?e.baseInfo?(t.index.__f__("log","at store/inject-checker.js:32","Vuex store正常可用"),!0):(t.index.__f__("error","at store/inject-checker.js:28","user/baseInfo模块不存在"),!1):(t.index.__f__("error","at store/inject-checker.js:22","user模块不存在"),!1)}catch(e){return t.index.__f__("error","at store/inject-checker.js:35","检查Vuex模块时出错:",e),!1}},_={beforeCreate(){this.$safeStore=a()}};function a(){return{state:r=>{try{const e=o();if(!e)return null;const c=r.split(".");let n=e.state;for(const s of c){if(!n||typeof n!="object")return null;n=n[s]}return n}catch(e){return t.index.__f__("error","at store/inject-checker.js:74",`安全获取state路径 ${r} 时出错:`,e),null}},getter:r=>{try{const e=o();return e&&e.getters[r]}catch(e){return t.index.__f__("error","at store/inject-checker.js:85",`安全获取getter ${r} 时出错:`,e),null}},dispatch:(r,e)=>{try{const c=o();return c?c.dispatch(r,e):(t.index.__f__("warn","at store/inject-checker.js:95",`store不可用，dispatch ${r} 被跳过`),Promise.resolve(null))}catch(c){return t.index.__f__("error","at store/inject-checker.js:100",`安全调用dispatch ${r} 时出错:`,c),Promise.reject(c)}},commit:(r,e)=>{try{const c=o();if(!c){t.index.__f__("warn","at store/inject-checker.js:110",`store不可用，commit ${r} 被跳过`);return}c.commit(r,e)}catch(c){t.index.__f__("error","at store/inject-checker.js:115",`安全调用commit ${r} 时出错:`,c)}}}}function o(){const r=t.getCurrentInstance();if(r&&r.proxy&&r.proxy.$store)return r.proxy.$store;try{const e=t.inject("store",null);if(e)return e}catch(e){t.index.__f__("debug","at store/inject-checker.js:143","注入store失败:",e)}try{const e=getApp();if(e&&e.$vm&&e.$vm.$store)return e.$vm.$store}catch(e){t.index.__f__("warn","at store/inject-checker.js:153","无法从app获取store:",e)}return typeof t.index<"u"&&t.index.$store?t.index.$store:(t.index.__f__("warn","at store/inject-checker.js:162","无法获取store实例"),null)}exports.checkStoreAvailability=i;exports.injectStoreSafety=_;
//# sourceMappingURL=../../.sourcemap/mp-weixin/store/inject-checker.js.map
