"use strict";const t=require("../../../common/vendor.js"),c=require("../API.js"),o=require("../../index.js"),d=s=>new Promise((e,a)=>{t.index.request({url:s.url,data:s.data||s.params,method:s.method||"GET",header:s.header||{},success:n=>{e(n)},fail:n=>{a(n)}})}),_=async s=>{try{const e=o.store.state.user.baseInfo.id,a=o.store.state.user.baseInfo.userInfo.school,n=o.store.state.user.baseInfo.userInfo.major,u={userId:e,content:s.content,chatMode:s.chatMode,school:a,major:n,conversationId:s.conversationId},r=await d({url:c.AIQA_QUESTION_URL,method:"POST",data:u});return r.data&&r.data.code===200?{success:!0,conversationId:r.data.data.conversationId,aiResponse:r.data.data.aiResponse,messageId:r.data.data.messageId}:(t.index.__f__("error","at store/user/APIroute/AIchat_api.js:77","AI回复失败:",r.data.message||"未知错误"),{success:!1,message:r.data.message||"获取AI回复失败"})}catch(e){return t.index.__f__("error","at store/user/APIroute/AIchat_api.js:84","发送消息给AI时出错:",e),{success:!1,message:"网络错误，请稍后重试"}}},i=async()=>{try{const s=o.store.state.user.baseInfo.id,e=await d({url:c.AIQA_GET_HISTORY_URL,method:"GET",data:{userId:s}});return e.data&&e.data.code===200?{success:!0,conversations:e.data.data.conversations}:(t.index.__f__("error","at store/user/APIroute/AIchat_api.js:115","获取对话历史失败:",e.data.message||"未知错误"),{success:!1,message:e.data.message||"获取对话历史失败"})}catch(s){return t.index.__f__("error","at store/user/APIroute/AIchat_api.js:122","获取对话历史时出错:",s),{success:!1,message:"网络错误，请稍后重试"}}},I=async s=>{try{const e=o.store.state.user.baseInfo.id,a=await d({url:c.AIQA_GET_HISTORY_DETAIL_URL,method:"GET",data:{userId:e,conversationId:s}});return a.data&&a.data.code===200?{success:!0,messages:a.data.data.messages}:(t.index.__f__("error","at store/user/APIroute/AIchat_api.js:157","获取对话详情失败:",a.data.message||"未知错误"),{success:!1,message:a.data.message||"获取对话详情失败"})}catch(e){return t.index.__f__("error","at store/user/APIroute/AIchat_api.js:164","获取对话详情时出错:",e),{success:!1,message:"网络错误，请稍后重试"}}},m=async s=>{try{const e=o.store.state.user.baseInfo.id,a=await d({url:c.AIQA_DELETE_HISTORY_URL,method:"POST",data:{userId:e,conversationId:s}});return a.data&&a.data.code===200?{success:!0,message:"对话已成功删除"}:(t.index.__f__("error","at store/user/APIroute/AIchat_api.js:199","删除对话失败:",a.data.message||"未知错误"),{success:!1,message:a.data.message||"删除对话失败"})}catch(e){return t.index.__f__("error","at store/user/APIroute/AIchat_api.js:206","删除对话时出错:",e),{success:!1,message:"网络错误，请稍后重试"}}};exports.deleteConversation=m;exports.getConversationDetail=I;exports.getConversationHistory=i;exports.sendMessageToAI=_;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/store/user/APIroute/AIchat_api.js.map
