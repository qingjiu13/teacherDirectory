"use strict";const n=require("../../../common/vendor.js"),g={updateRole(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:13","updateRole mutation执行, 参数:",r),e.userInfo.role=r==="teacher"?"老师":"学生",n.index.setStorageSync("userBaseInfo",JSON.stringify({id:e.id,avatar:e.avatar,name:e.name,gender:e.gender,selfIntroduction:e.selfIntroduction,wechatNumber:e.wechatNumber,phoneNumber:e.phoneNumber,role:r})),n.index.setStorageSync("userRole",r),n.index.__f__("log","at store/user/baseInfo/mutations.js:31","角色更新完成, 新角色:",e.userInfo.role)},SET_USER_INFO(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:40","SET_USER_INFO mutation执行, 入参:",r),n.index.__f__("log","at store/user/baseInfo/mutations.js:41","更新前state:",{id:e.id,name:e.name,avatar:e.avatar}),e.id=r.id||"",e.avatar=r.avatar||"",e.name=r.nickname||r.name||"",e.gender=r.gender||"",e.selfIntroduction=r.introduction||r.selfIntroduction||"",e.wechatNumber=r.wechat||r.wechatNumber||"",e.phoneNumber=r.phone||r.phoneNumber||"",e.password=r.password||"";const o=r.role||"student";r.userInfo?(e.userInfo={...e.userInfo,...r.userInfo},(!r.userInfo.role||r.userInfo.role===o)&&(e.userInfo.role=o==="teacher"?"老师":"学生")):e.userInfo.role=o==="teacher"?"老师":"学生",n.index.setStorageSync("userBaseInfo",JSON.stringify({id:e.id,avatar:e.avatar,name:e.name,gender:e.gender,selfIntroduction:e.selfIntroduction,wechatNumber:e.wechatNumber,phoneNumber:e.phoneNumber,role:o})),n.index.setStorageSync("userRole",o),n.index.__f__("log","at store/user/baseInfo/mutations.js:91","更新后state:",{id:e.id,name:e.name,avatar:e.avatar,role:e.userInfo.role})},UPDATE_USER_INFO(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:112","UPDATE_USER_INFO mutation执行, 入参:",r);const{avatar:o,name:a,nickname:d,gender:u,selfIntroduction:i,introduction:S,wechatNumber:c,wechat:s,phoneNumber:t,phone:f,password:h,role:_}=r;o!==void 0&&(e.avatar=o),a!==void 0&&(e.name=a),d!==void 0&&(e.name=d),u!==void 0&&(e.gender=u),i!==void 0&&(e.selfIntroduction=i),S!==void 0&&(e.selfIntroduction=S),c!==void 0&&(e.wechatNumber=c),s!==void 0&&(e.wechatNumber=s),t!==void 0&&(e.phoneNumber=t),f!==void 0&&(e.phoneNumber=f),h!==void 0&&(e.password=h),_!==void 0&&(e.userInfo.role=_==="teacher"?"老师":"学生",n.index.setStorageSync("userRole",_)),n.index.setStorageSync("userBaseInfo",JSON.stringify({id:e.id,avatar:e.avatar,name:e.name,gender:e.gender,selfIntroduction:e.selfIntroduction,wechatNumber:e.wechatNumber,phoneNumber:e.phoneNumber,role:n.index.getStorageSync("userRole")||"student"})),n.index.__f__("log","at store/user/baseInfo/mutations.js:162","更新后state:",{id:e.id,name:e.name,avatar:e.avatar})},UPDATE_USER_PROFILE(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:175","UPDATE_USER_PROFILE mutation执行, 入参:",r),this.commit("user/baseInfo/UPDATE_USER_INFO",r),n.index.$emit("userProfileUpdated",{timestamp:Date.now(),data:r})},CLEAR_USER_INFO(e){n.index.__f__("log","at store/user/baseInfo/mutations.js:192","CLEAR_USER_INFO mutation执行"),e.id="",e.avatar="",e.name="",e.gender="",e.selfIntroduction="",e.wechatNumber="",e.phoneNumber="",e.password="",e.isLogin=0,e.isRegistered=0,e.campusAmbassador=0,e.userInfo={certificate:0,role:"学生",school:"",major:"",targetSchool:"",targetMajor:"",studentGrade:"",teacherGrade:""},n.index.removeStorageSync("userBaseInfo"),n.index.removeStorageSync("userRole"),n.index.__f__("log","at store/user/baseInfo/mutations.js:220","用户信息已清除")},SET_LOGIN_STATUS(e,r){e.isLogin=r,n.index.__f__("log","at store/user/baseInfo/mutations.js:230","登录状态已更新为:",r)},SET_REGISTER_STATUS(e,r){e.isRegistered=r,n.index.__f__("log","at store/user/baseInfo/mutations.js:240","注册状态已更新为:",r)},UPDATE_USER_INFO_DATA(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:249","UPDATE_USER_INFO_DATA mutation执行, 入参:",r);const o={...e.userInfo,...r};r.schoolId!==void 0&&(o.schoolId=r.schoolId),r.majorId!==void 0&&(o.majorId=r.majorId),r.targetSchoolId!==void 0&&(o.targetSchoolId=r.targetSchoolId),r.targetMajorId!==void 0&&(o.targetMajorId=r.targetMajorId),e.userInfo=o;try{n.index.setStorageSync("userInfoData",JSON.stringify(o)),n.index.__f__("log","at store/user/baseInfo/mutations.js:269","用户扩展信息已保存到本地存储")}catch(a){n.index.__f__("error","at store/user/baseInfo/mutations.js:271","保存用户扩展信息到本地存储失败:",a)}n.index.__f__("log","at store/user/baseInfo/mutations.js:274","更新后的userInfo:",e.userInfo)},SET_UNDERGRADUATE_SCHOOL_SEARCH_KEYWORD(e,r){e.undergraduateSchoolSearch.searchKeyword=r},SET_UNDERGRADUATE_SCHOOL_OPTIONS(e,r){if(n.index.__f__("log","at store/user/baseInfo/mutations.js:294","SET_UNDERGRADUATE_SCHOOL_OPTIONS mutation执行:",r),typeof r=="object"&&r.options){const{options:o,append:a=!1,hasMore:d=!0,currentPage:u=1}=r;a?e.undergraduateSchoolSearch.options=[...e.undergraduateSchoolSearch.options,...o]:e.undergraduateSchoolSearch.options=o,e.undergraduateSchoolSearch.hasMore=d,e.undergraduateSchoolSearch.currentPage=u}else e.undergraduateSchoolSearch.options=Array.isArray(r)?r:[]},RESET_UNDERGRADUATE_SCHOOL_SEARCH(e){e.undergraduateSchoolSearch.options=[],e.undergraduateSchoolSearch.currentPage=1,e.undergraduateSchoolSearch.hasMore=!0},SET_UNDERGRADUATE_SCHOOL_LOADING(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:335","SET_UNDERGRADUATE_SCHOOL_LOADING mutation执行:",r),e.undergraduateSchoolSearch.isLoading=!!r},SET_UNDERGRADUATE_SELECTED_SCHOOL(e,{id:r,name:o}){e.undergraduateSchoolSearch.selectedSchoolId=r,e.undergraduateSchoolSearch.selectedSchool=o,e.userInfo.school=o},SET_UNDERGRADUATE_MAJOR_SEARCH_KEYWORD(e,r){e.undergraduateMajorSearch.searchKeyword=r},SET_UNDERGRADUATE_MAJOR_OPTIONS(e,r){if(n.index.__f__("log","at store/user/baseInfo/mutations.js:370","SET_UNDERGRADUATE_MAJOR_OPTIONS mutation执行:",r),typeof r=="object"&&r.options){const{options:o,append:a=!1,hasMore:d=!0,currentPage:u=1}=r;a?e.undergraduateMajorSearch.options=[...e.undergraduateMajorSearch.options,...o]:e.undergraduateMajorSearch.options=o,e.undergraduateMajorSearch.hasMore=d,e.undergraduateMajorSearch.currentPage=u}else e.undergraduateMajorSearch.options=Array.isArray(r)?r:[]},RESET_UNDERGRADUATE_MAJOR_SEARCH(e){e.undergraduateMajorSearch.options=[],e.undergraduateMajorSearch.currentPage=1,e.undergraduateMajorSearch.hasMore=!0},SET_UNDERGRADUATE_MAJOR_LOADING(e,r){n.index.__f__("log","at store/user/baseInfo/mutations.js:411","SET_UNDERGRADUATE_MAJOR_LOADING mutation执行:",r),e.undergraduateMajorSearch.isLoading=!!r},SET_UNDERGRADUATE_SELECTED_MAJOR(e,{id:r,name:o}){e.undergraduateMajorSearch.selectedMajorId=r,e.undergraduateMajorSearch.selectedMajor=o,e.userInfo.major=o},SET_GRADUATE_SCHOOL_SEARCH_KEYWORD(e,r){e.graduateSchoolSearch.searchKeyword=r},SET_GRADUATE_SCHOOL_OPTIONS(e,{options:r,isLoadMore:o=!1}){o?e.graduateSchoolSearch.options=[...e.graduateSchoolSearch.options,...r]:e.graduateSchoolSearch.options=r},SET_GRADUATE_SCHOOL_PAGINATION(e,{currentPage:r,hasMore:o,isLoading:a}){r!==void 0&&(e.graduateSchoolSearch.currentPage=r),o!==void 0&&(e.graduateSchoolSearch.hasMore=o),a!==void 0&&(e.graduateSchoolSearch.isLoading=a)},SET_GRADUATE_SELECTED_SCHOOL(e,{id:r,name:o}){e.graduateSchoolSearch.selectedSchoolId=r,e.graduateSchoolSearch.selectedSchool=o,e.userInfo.targetSchool=o},SET_GRADUATE_MAJOR_SEARCH_KEYWORD(e,r){e.graduateMajorSearch.searchKeyword=r},SET_GRADUATE_MAJOR_OPTIONS(e,r){if(n.index.__f__("log","at store/user/baseInfo/mutations.js:499","SET_GRADUATE_MAJOR_OPTIONS mutation执行:",r),typeof r=="object"&&r.options){const{options:o,append:a=!1,hasMore:d=!0,currentPage:u=1}=r;a?e.graduateMajorSearch.options=[...e.graduateMajorSearch.options,...o]:e.graduateMajorSearch.options=o,e.graduateMajorSearch.hasMore=d,e.graduateMajorSearch.currentPage=u}else e.graduateMajorSearch.options=Array.isArray(r)?r:[]},SET_GRADUATE_SELECTED_MAJOR(e,{id:r,name:o}){e.graduateMajorSearch.selectedMajorId=r,e.graduateMajorSearch.selectedMajor=o,e.userInfo.targetMajor=o},SET_JWT_TOKEN(e,r){e.jwtToken=r,n.index.setStorageSync("jwtToken",r),n.index.__f__("log","at store/user/baseInfo/mutations.js:547","JWT令牌已设置:",r)},CLEAR_JWT_TOKEN(e){e.jwtToken="",n.index.removeStorageSync("jwtToken"),n.index.__f__("log","at store/user/baseInfo/mutations.js:558","JWT令牌已清除")},RESTORE_JWT_TOKEN(e){const r=n.index.getStorageSync("jwtToken")||"";e.jwtToken=r,n.index.__f__("log","at store/user/baseInfo/mutations.js:568","JWT令牌已从本地存储恢复:",r)}};exports.mutations=g;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/store/user/baseInfo/mutations.js.map
