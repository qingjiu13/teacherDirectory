"use strict";const t=require("../../../common/vendor.js"),c=require("../JWT.js"),i={async fetchUserServices({commit:s},r={}){try{const e=await c.apiRequest("/api/user/services","GET",r);return s("SET_USER_SERVICES",e.data),e.data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:25","获取用户服务失败:",e),e}},async getServiceDetail(s,r){try{return(await c.apiRequest(`/api/user/services/${r}`,"GET")).data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:41","获取服务详情失败:",e),e}},async updateService({commit:s},{id:r,updatedInfo:e}){try{const a=await c.apiRequest(`/api/user/services/${r}`,"PUT",e);return a.success&&s("UPDATE_SERVICE_BY_USER",{id:r,updatedInfo:e}),a.data}catch(a){throw t.index.__f__("error","at store/user/myService/actions.js:66","更新服务信息失败:",a),a}},async addService({commit:s},r){try{const e=await c.apiRequest("/api/user/services","POST",r);return e.success&&s("ADD_SERVICE",e.data),e.data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:89","添加服务失败:",e),e}},async deleteService({commit:s},r){try{const e=await c.apiRequest(`/api/user/services/${r}`,"DELETE");return e.success&&s("DELETE_SERVICE",r),e.data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:112","删除服务失败:",e),e}},setCurrentEditingService({commit:s},r){s("SET_CURRENT_EDITING_SERVICE",r)},async uploadServiceCover(s,r){try{const e=new FormData;return e.append("file",r.file),(await c.apiRequest(`/api/user/services/${r.serviceId}/cover`,"POST",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:148","上传服务封面失败:",e),e}},async uploadServiceAttachment(s,r){try{const e=new FormData;return e.append("file",r.file),(await c.apiRequest(`/api/user/services/${r.serviceId}/attachment`,"POST",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw t.index.__f__("error","at store/user/myService/actions.js:174","上传服务附件失败:",e),e}},setServiceFilter({commit:s},r){s("SET_SERVICE_FILTER",r)},filterServicesByType({commit:s},r){s("SET_SERVICE_FILTER",{type:r})},searchServicesByKeyword({commit:s},r){s("SET_SERVICE_FILTER",{keyword:r})},loadLocalServices({commit:s}){try{const r=t.index.getStorageSync("services");if(r){const e=JSON.parse(r);s("SET_USER_SERVICES",e)}return{success:!0}}catch(r){return t.index.__f__("error","at store/user/myService/actions.js:224","加载本地服务数据失败:",r),{success:!1,error:r}}},saveServicesToLocal({state:s}){try{return t.index.setStorageSync("services",JSON.stringify(s.service)),{success:!0}}catch(r){return t.index.__f__("error","at store/user/myService/actions.js:240","保存服务到本地存储失败:",r),{success:!1,error:r}}}};exports.actions=i;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/store/user/myService/actions.js.map
