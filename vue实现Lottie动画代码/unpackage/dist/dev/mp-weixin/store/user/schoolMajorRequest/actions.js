"use strict";const l=require("../../../common/vendor.js"),g=require("../APIroute/schoolMajorRequest_api/schoolMajorRequest_api.js"),R={searchUndergraduateSchools({commit:a,state:o},{keyword:r="",loadMore:t=!1}){const n=t?o.undergraduateSchoolSearch.currentPage+1:1;a("SET_UNDERGRADUATE_SCHOOL_PAGINATION",{isLoading:!0}),t||a("SET_UNDERGRADUATE_SCHOOL_SEARCH_KEYWORD",r);const E={keyword:r,pageNum:n,pageSize:o.undergraduateSchoolSearch.pageSize};return new Promise((S,u)=>{g.getUndergraduateSchoolList(E).then(e=>{if(e&&e.success&&e.data){const s=e.data,c=(s.rows||[]).map(_=>({schoolId:_.schoolId,schoolName:_.schoolName}));a("SET_UNDERGRADUATE_SCHOOL_OPTIONS",{options:c,isLoadMore:t});const A=s.total||0,h=(t?o.undergraduateSchoolSearch.options.length+c.length:c.length)<A;a("SET_UNDERGRADUATE_SCHOOL_PAGINATION",{currentPage:n,hasMore:h,isLoading:!1}),S(e)}else throw new Error("获取本科学校列表失败")}).catch(e=>{l.index.__f__("error","at store/user/schoolMajorRequest/actions.js:82","搜索本科学校失败:",e),a("SET_UNDERGRADUATE_SCHOOL_PAGINATION",{isLoading:!1}),u(e)})})},selectUndergraduateSchool({commit:a},{schoolId:o,schoolName:r}){a("SET_SELECTED_UNDERGRADUATE_SCHOOL",{id:o,name:r})},searchUndergraduateMajors({commit:a,state:o},{keyword:r="",loadMore:t=!1}){const n=t?o.undergraduateMajorSearch.currentPage+1:1;a("SET_UNDERGRADUATE_MAJOR_PAGINATION",{isLoading:!0}),t||a("SET_UNDERGRADUATE_MAJOR_SEARCH_KEYWORD",r);const E={keyword:r,pageNum:n,pageSize:o.undergraduateMajorSearch.pageSize};return new Promise((S,u)=>{g.getUndergraduateMajorList(E).then(e=>{if(e&&e.success&&e.data){const s=e.data,c=(s.rows||[]).map(_=>({professionalId:_.professionalId,professionalName:_.professionalName}));a("SET_UNDERGRADUATE_MAJOR_OPTIONS",{options:c,isLoadMore:t});const A=s.total||0,h=(t?o.undergraduateMajorSearch.options.length+c.length:c.length)<A;a("SET_UNDERGRADUATE_MAJOR_PAGINATION",{currentPage:n,hasMore:h,isLoading:!1}),S(e)}else throw new Error("获取本科专业列表失败")}).catch(e=>{l.index.__f__("error","at store/user/schoolMajorRequest/actions.js:167","搜索本科专业失败:",e),a("SET_UNDERGRADUATE_MAJOR_PAGINATION",{isLoading:!1}),u(e)})})},selectUndergraduateMajor({commit:a},{professionalId:o,professionalName:r}){a("SET_SELECTED_UNDERGRADUATE_MAJOR",{id:o,name:r})},searchGraduateSchools({commit:a,state:o},{keyword:r="",loadMore:t=!1}){const n=t?o.graduateSchoolSearch.currentPage+1:1;a("SET_GRADUATE_SCHOOL_PAGINATION",{isLoading:!0}),t||a("SET_GRADUATE_SCHOOL_SEARCH_KEYWORD",r);const E={keyword:r,pageNum:n,pageSize:o.graduateSchoolSearch.pageSize};return new Promise((S,u)=>{g.getGraduateSchoolList(E).then(e=>{if(e&&e.success&&e.data){const s=e.data,c=(s.rows||[]).map(_=>({schoolId:_.schoolId,schoolName:_.schoolName}));a("SET_GRADUATE_SCHOOL_OPTIONS",{options:c,isLoadMore:t});const A=s.total||0,h=(t?o.graduateSchoolSearch.options.length+c.length:c.length)<A;a("SET_GRADUATE_SCHOOL_PAGINATION",{currentPage:n,hasMore:h,isLoading:!1}),S(e)}else throw new Error("获取研究生学校列表失败")}).catch(e=>{l.index.__f__("error","at store/user/schoolMajorRequest/actions.js:252","搜索研究生学校失败:",e),a("SET_GRADUATE_SCHOOL_PAGINATION",{isLoading:!1}),u(e)})})},selectGraduateSchool({commit:a},{schoolId:o,schoolName:r}){a("SET_SELECTED_GRADUATE_SCHOOL",{id:o,name:r}),a("CLEAR_GRADUATE_MAJOR_SELECTION")},searchGraduateMajors({commit:a,state:o},{schoolId:r,keyword:t="",loadMore:n=!1}){if(!r)return Promise.reject(new Error("请先选择学校"));const E=n?o.graduateMajorSearch.currentPage+1:1;a("SET_GRADUATE_MAJOR_PAGINATION",{isLoading:!0}),n||a("SET_GRADUATE_MAJOR_SEARCH_KEYWORD",t);const S={schoolId:r,keyword:t,pageNum:E,pageSize:o.graduateMajorSearch.pageSize};return new Promise((u,e)=>{g.getGraduateMajorList(S).then(s=>{if(s&&s.success&&s.data){const i=s.data,A=(i.rows||[]).map(d=>({professionalId:d.professionalId,professionalName:d.professionalName}));a("SET_GRADUATE_MAJOR_OPTIONS",{options:A,isLoadMore:n});const T=i.total||0,_=(n?o.graduateMajorSearch.options.length+A.length:A.length)<T;a("SET_GRADUATE_MAJOR_PAGINATION",{currentPage:E,hasMore:_,isLoading:!1}),u(s)}else throw new Error("获取研究生专业列表失败")}).catch(s=>{l.index.__f__("error","at store/user/schoolMajorRequest/actions.js:345","搜索研究生专业失败:",s),a("SET_GRADUATE_MAJOR_PAGINATION",{isLoading:!1}),e(s)})})},selectGraduateMajor({commit:a},{professionalId:o,professionalName:r}){a("SET_SELECTED_GRADUATE_MAJOR",{id:o,name:r})}};exports.actions=R;
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/store/user/schoolMajorRequest/actions.js.map
