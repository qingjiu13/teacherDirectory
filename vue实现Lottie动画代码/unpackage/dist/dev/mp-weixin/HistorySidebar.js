"use strict";const t=require("./common/vendor.js"),c=t.defineComponent({name:"HistorySidebar",props:{visible:{type:Boolean,default:!1}},computed:Object.assign(Object.assign({},t.mapState(new UTSJSONObject({conversations:(e=null)=>{try{return e.user&&e.user.aiChat&&e.user.aiChat.aiChat?e.user.aiChat.aiChat.conversations||[]:[]}catch(a){return t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:61","获取 conversations 状态出错:",a),[]}},activeConversation:(e=null)=>{try{return e.user&&e.user.aiChat&&e.user.aiChat.aiChat?e.user.aiChat.aiChat.activeConversation:null}catch(a){return t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:71","获取 activeConversation 状态出错:",a),null}}}))),{historySummaries(){if(!this.conversations)return t.index.__f__("warn","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:84","conversations 是 undefined"),[];try{return this.conversations.map((e=null)=>new UTSJSONObject({id:e.id,abstract:e.abstract,chatMode:e.chatMode,createdAt:e.createdAt,updatedAt:e.updatedAt}))}catch(e){return t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:97","处理 historySummaries 出错:",e),[]}},currentChatId(){return this.activeConversation}}),created(){t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:112","=================== 调试信息开始 ==================="),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:113","完整的 Vuex store:",this.$store),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:114","Vuex store状态:",this.$store.state),this.$store.state.user?(t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:117","user模块状态:",this.$store.state.user),this.$store.state.user.aiChat?(t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:120","aiChat模块状态:",this.$store.state.user.aiChat),this.$store.state.user.aiChat.aiChat?(t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:123","内层 aiChat:",this.$store.state.user.aiChat.aiChat),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:124","内层 aiChat conversations:",this.$store.state.user.aiChat.aiChat.conversations)):(t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:126","无法访问内层 aiChat!"),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:127","aiChat 模块完整内容:",UTS.JSON.stringify(this.$store.state.user.aiChat)))):t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:130","无法访问 aiChat 模块!")):t.index.__f__("error","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:133","无法访问 user 模块!"),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:136","组件计算的 conversations:",this.conversations),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:137","组件计算的 historySummaries:",this.historySummaries),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:138","组件计算的 currentChatId:",this.currentChatId),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:139","=================== 调试信息结束 ===================")},methods:Object.assign(Object.assign({},t.mapActions(new UTSJSONObject({setActiveConversation:"user/aiChat/setCurrentChat",deleteConversation:"user/aiChat/deleteChat"}))),{getModeLabel(e=null){return new UTSJSONObject({general:"通用",school:"择校",career:"职业规划"})[e]||"通用"},loadChatHistory(e=null){this.setActiveConversation(e),this.$emit("loadChat",e)},deleteChatHistory(e=null,a=null){a&&(a.stopPropagation(),a.preventDefault()),t.index.__f__("log","at pages_AI_Login_Match/AI/ai-chat/HistorySidebar.vue:188","删除历史记录:",e),this.deleteConversation(e),this.$emit("deleteChat",e)},formatTime(e=null){if(!e)return"";const a=new Date(e),s=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0");return`${s}-${o}-${n} ${r}:${i}`}})});function d(e,a,s,o,n,r){return t.e({a:r.historySummaries.length===0},r.historySummaries.length===0?{}:{b:t.f(r.historySummaries,(i,h,g)=>t.e({a:t.t(i.abstract||i.title||"对话 "+(h+1)),b:t.t(r.formatTime(i.updatedAt||i.createdAt)),c:i.chatMode},i.chatMode?{d:t.t(r.getModeLabel(i.chatMode))}:{},{e:t.o(_=>r.deleteChatHistory(i.id,_),i.id),f:i.id,g:r.currentChatId===i.id?1:"",h:t.o(_=>r.loadChatHistory(i.id),i.id)}))},{c:t.sei(t.gei(e,""),"view"),d:s.visible?1:""})}const u=t._export_sfc(c,[["render",d]]);exports.Component=u;
//# sourceMappingURL=../.sourcemap/mp-weixin/HistorySidebar.js.map
