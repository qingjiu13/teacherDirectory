"use strict";const t=require("../../common/vendor.js"),d=require("../../router/Router.js"),h=()=>"../../components/navigationTitleBar/header.js",m=()=>"../../components/top-navbar/top-navbar.js",g=()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js",p=t.defineComponent({components:{Header:h,topNavbar:m,uniDatetimePicker:g},data(){return{currentTab:0,teacherCurrentTab:0,timeSlots:[new UTSJSONObject({period:"上午",slots:["08:00-09:00","09:00-10:00","10:00-11:00","11:00-12:00"]}),new UTSJSONObject({period:"下午",slots:["13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"]}),new UTSJSONObject({period:"晚上",slots:["18:00-19:00","19:00-20:00","20:00-21:00"]})],selectedTimeSlot:"",selectedTimePeriod:"",selectedTimestamp:Date.now(),teacherSelectedTimestamp:Date.now(),durationOptions:["30分钟","45分钟","60分钟","90分钟","120分钟"],durationIndex:2,teacherDurationIndex:2,durationMinutes:60,teacherDurationMinutes:60,datePickerVisible:!1,teacherDatePickerVisible:!1,showAvailableSlots:!1,availableDates:[],selectedDateIndex:-1,selectedTimeIndex:-1,currentCourseForDirect:null,allTimeSlots:[],pendingCourses:[new UTSJSONObject({id:1,name:"考研政治精讲班",teacher:"王老师",time:"2023-12-15 14:00",price:399,image:"/static/images/default_avatar.png",description:"系统讲解考研政治马原、毛中特、思修法基、当代世界经济与政治重点内容。"}),new UTSJSONObject({id:2,name:"考研数学基础班",teacher:"李老师",time:"2023-12-16 10:00",price:499,image:"/static/images/default_avatar.png",description:"覆盖高等数学、线性代数、概率论与数理统计核心知识点，夯实数学基础。"}),new UTSJSONObject({id:3,name:"考研英语词汇班",teacher:"张老师",time:"2023-12-17 15:00",price:349,image:"/static/images/default_avatar.png",description:"掌握考研英语必备5500词汇，提高阅读理解和写作能力。"}),new UTSJSONObject({id:4,name:"计算机专业课辅导",teacher:"陈老师",time:"2023-12-18 19:00",price:549,image:"/static/images/default_avatar.png",description:"针对计算机专业考生，讲解数据结构、操作系统、计算机网络等核心科目。"})],reservedCourses:[new UTSJSONObject({id:5,name:"考研专业课强化班",teacher:"赵老师",price:599,reservedTime:"2023-12-18 14:00",image:"/static/images/default_avatar.png",description:"针对专业课考试，深入讲解重点难点，提供真题分析和解题技巧。"}),new UTSJSONObject({id:6,name:"考研政治冲刺班",teacher:"孙老师",price:449,reservedTime:"2023-12-19 10:00",image:"/static/images/default_avatar.png",description:"考前政治热点分析，提供答题模板和背诵要点，助力考研政治高分。"})],completedCourses:[new UTSJSONObject({id:7,name:"考研英语写作班",teacher:"黄老师",price:399,completedTime:"2023-12-10 15:00",image:"/static/images/default_avatar.png",replayUrl:"https://meeting.tencent.com/v2/cloud-record/share?id=5fcc0283-6d70-4b56-8710-5ef9318c475b&from=3"}),new UTSJSONObject({id:8,name:"考研复试指导课",teacher:"周老师",price:499,completedTime:"2023-12-15 09:00",image:"/static/images/default_avatar.png",replayUrl:"https://meeting.tencent.com/v2/cloud-record/share?id=7e9f8d62-34a1-4b12-9f80-5c31d9b52ec8&from=3"})],currentCourseIndex:null,selectedDate:null,userRole:"student",userName:"",userData:new UTSJSONObject({}),isLoggedIn:!1,teacherPendingCourses:[],teacherActiveCourses:[],teacherCompletedCourses:[],showDurationPicker:!1,durationIndex:2,durationMinutes:60,currentOperation:null}},computed:{filteredTimeSlots(){if(this.selectedDateIndex===-1)return[];if(this.allTimeSlots.length===0&&this.timeSlots.forEach(e=>{this.allTimeSlots.push(...e.slots)}),this.selectedDateIndex===0){const e=new Date,s=e.getHours(),n=e.getMinutes();return this.allTimeSlots.filter(c=>{const r=c.split("-")[0],a=t.__read(r.split(":").map(Number),2),i=a[0],o=a[1];return i>s||i===s&&o>n})}return this.allTimeSlots},canConfirmSelection(){return this.selectedDateIndex!==-1&&this.selectedTimeIndex!==-1}},onLoad(e){t.index.__f__("log","at pagesMine/course/course.vue:431","课程页面 onLoad",e),this.loadUserData();const s=getApp().globalData,n=t.index.getStorageSync("userRole");s&&s.userRole?(this.userRole=s.userRole,t.index.__f__("log","at pagesMine/course/course.vue:443","使用全局角色状态:",this.userRole)):n&&(this.userRole=n,s&&(s.userRole=this.userRole),t.index.__f__("log","at pagesMine/course/course.vue:452","使用存储的角色:",this.userRole)),this.loadCourseData()},onShow(){t.index.__f__("log","at pagesMine/course/course.vue:459","课程页面 onShow, 当前角色:",this.userRole);const e=getApp().globalData;if(e&&e.userRole&&e.userRole!==this.userRole){t.index.__f__("log","at pagesMine/course/course.vue:464","全局角色变更:",e.userRole);const n=this.userRole;this.userRole=e.userRole,n!==this.userRole&&(this.resetRoleRelatedState(),t.index.setStorageSync("userRole",this.userRole),this.loadCourseData())}const s=t.index.getStorageSync("userRole");if(s&&s!==this.userRole){t.index.__f__("log","at pagesMine/course/course.vue:479","存储角色与当前不一致, 存储:",s,"当前:",this.userRole);const n=this.userRole;this.userRole=s,e&&(e.userRole=this.userRole),n!==this.userRole&&(this.resetRoleRelatedState(),this.loadCourseData())}},onUnload(){t.index.__f__("log","at pagesMine/course/course.vue:497","课程页面 onUnload, 保存当前角色:",this.userRole),t.index.setStorageSync("userRole",this.userRole);const e=getApp().globalData;e&&(e.userRole=this.userRole)},methods:{loadUserData(){const e=t.index.getStorageSync("token");if(this.isLoggedIn=!!e,this.isLoggedIn){const s=t.index.getStorageSync("userInfo");if(s)try{this.userData=typeof s=="string"?UTS.JSON.parse(s):s,this.userName=this.userData.nickname||"用户";const n=this.userRole;if(this.userData.role){this.userRole=this.userData.role,t.index.__f__("log","at pagesMine/course/course.vue:529","从用户数据中设置角色:",this.userRole),t.index.setStorageSync("userRole",this.userData.role);const c=getApp().globalData;c&&(c.userRole=this.userRole),n!==this.userRole&&this.resetRoleRelatedState()}}catch(n){t.index.__f__("error","at pagesMine/course/course.vue:546","解析用户信息失败:",n)}}else this.userData=new UTSJSONObject({}),this.userName="",t.index.__f__("log","at pagesMine/course/course.vue:555","未登录，保持当前角色:",this.userRole)},resetRoleRelatedState(){t.index.__f__("log","at pagesMine/course/course.vue:561","重置角色相关状态"),this.userRole==="student"?this.currentTab=0:this.teacherCurrentTab=0,this.selectedDate=null,this.selectedTimeSlot="",this.selectedTimePeriod=""},onTabChange(e=null){t.index.__f__("log","at pagesMine/course/course.vue:574","学生模式标签切换:",e),this.currentTab=e,e===0&&(this.selectedTimeSlot="",this.selectedTimePeriod="")},resetDateSelection(){this.selectedDate=null,this.selectedTimeSlot="",this.selectedTimePeriod=""},handleReserve(e=null){this.currentCourseIndex=e,this.currentCourseForDirect=this.pendingCourses[e],this.currentOperation="student_reserve",this.$refs.datetimePicker.show()},generateAvailableDates(){const e=[],s=new Date;for(let n=0;n<7;n++){const c=new Date(s);c.setDate(s.getDate()+n),e.push(c)}this.availableDates=e},formatDay(e=null){return["周日","周一","周二","周三","周四","周五","周六"][e.getDay()]},formatDate(e=null){return`${e.getMonth()+1}月${e.getDate()}日`},selectAvailableDate(e=null){this.selectedDateIndex=e,this.selectedTimeIndex=-1,e===0&&this.filteredTimeSlots.length>0&&this.$nextTick(()=>{const s=document.querySelectorAll(".time-slot-item");s.length>0&&s[0].scrollIntoView(new UTSJSONObject({behavior:"smooth",block:"center"}))})},selectTimeSlot(e=null){this.selectedTimeIndex=e},onDurationChange(e=null){this.durationIndex=e.detail.value;const s=[30,45,60,90,120];this.durationMinutes=s[this.durationIndex]},showTimeSelectionDialog(){const e=this.timeSlots.map(s=>s.period);t.index.showActionSheet({itemList:e,success:s=>{this.selectedTimePeriod=e[s.tapIndex];const n=this.timeSlots[s.tapIndex];setTimeout(()=>{t.index.showActionSheet({itemList:n.slots,success:c=>{this.selectedTimeSlot=n.slots[c.tapIndex],this.confirmReservation()}})},300)}})},confirmReservation(){const e=this.pendingCourses[this.currentCourseIndex],s=this.durationOptions[this.durationIndex];t.index.showModal(new UTSJSONObject({title:"确认预约",content:`课程：${e.name}
日期时间：${this.selectedDate}
时长：${s}`,success:n=>{n.confirm&&(this.reservedCourses.push(Object.assign(Object.assign({},e),{reservedTime:this.selectedDate,duration:s})),this.pendingCourses.splice(this.currentCourseIndex,1),t.index.showToast({title:"预约成功",icon:"success",duration:2e3}),this.currentCourseIndex=null,this.selectedDate=null)}}))},completeClass(e=null){const s=this.teacherActiveCourses[e];t.index.showModal(new UTSJSONObject({title:"添加课程回放",editable:!0,placeholderText:"请输入课程回放链接 (可选)",success:n=>{let c="";n.confirm&&n.content&&(c=n.content),t.index.showModal(new UTSJSONObject({title:"确认下课",content:`确定完成${s.studentName}的${s.name}课程吗？`,success:r=>{r.confirm&&(this.teacherCompletedCourses.push(Object.assign(Object.assign({},s),{completedTime:new Date().toISOString().split("T")[0],replayUrl:c})),this.teacherActiveCourses.splice(e,1),t.index.showToast({title:"课程已完成",icon:"success",duration:2e3}))}}))}}))},modifyReservationTime(e=null){this.currentCourseIndex=e,this.currentOperation="student_modify",this.$refs.datetimePicker.show()},viewFeedback(e=null){e.replayUrl?t.index.showModal(new UTSJSONObject({title:"查看回放",content:"是否跳转到课程回放网页？",success:s=>{s.confirm&&this.openExternalLink(e.replayUrl)}})):t.index.navigateTo({url:`/pages/mine/order/appraise/appraise?courseId=${e.id}&courseName=${e.name}&teacherName=${e.teacher}&price=${e.price}`})},loadCourseData(){t.index.__f__("log","at pagesMine/course/course.vue:796","加载课程数据，当前角色:",this.userRole),this.userRole==="teacher"?(t.index.__f__("log","at pagesMine/course/course.vue:800","加载老师课程数据"),this.initTeacherData(),this.teacherCurrentTab=0):(t.index.__f__("log","at pagesMine/course/course.vue:806","加载学生课程数据"),this.initStudentData(),this.currentTab=0)},onTeacherTabChange(e=null){t.index.__f__("log","at pagesMine/course/course.vue:817","老师模式标签切换:",e),this.teacherCurrentTab=e,e===0?t.index.__f__("log","at pagesMine/course/course.vue:823","切换到老师-待接受课程标签"):e===1?t.index.__f__("log","at pagesMine/course/course.vue:826","切换到老师-进行中课程标签"):e===2&&t.index.__f__("log","at pagesMine/course/course.vue:829","切换到老师-已完成课程标签")},initTeacherData(){t.index.__f__("log","at pagesMine/course/course.vue:835","初始化教师数据"),this.teacherPendingCourses=[{id:101,name:"考研政治精讲班",studentName:"张同学",price:399,image:"/static/images/default_avatar.png"},{id:102,name:"考研数学基础班",studentName:"李同学",price:499,image:"/static/images/default_avatar.png"}],this.teacherActiveCourses=[{id:103,name:"考研英语词汇班",studentName:"王同学",price:349,classTime:"2023-12-20 15:00",image:"/static/images/default_avatar.png"}],this.teacherCompletedCourses=[{id:104,name:"计算机专业课辅导",studentName:"赵同学",price:549,completedTime:"2023-12-10",image:"/static/images/default_avatar.png",replayUrl:"https://meeting.tencent.com/v2/cloud-record/share?id=9a0c7f38-5e12-4d1d-a53e-94ed126aa3bb&from=3"}]},teacherReserve(e=null){this.currentCourseIndex=e,this.$refs.teacherDatetimePicker.show()},onTeacherDatetimeChange(e=null){this.teacherDatePickerVisible=!1,this.teacherSelectedTimestamp=e;const s=new Date(e);this.selectedDate=this.formatDateTime(s),this.teacherCurrentTab===0?this.currentOperation="reserve":this.teacherCurrentTab===1&&(this.currentOperation="reschedule"),this.showDurationPicker=!0},onDurationPickerChange(e=null){const s=e.detail.value[0];this.currentOperation==="reserve"?this.teacherDurationIndex=s:this.durationIndex=s},closeDurationPicker(){this.showDurationPicker=!1},confirmDurationSelection(){if(this.currentOperation==="reserve"){const e=[30,45,60,90,120];this.teacherDurationMinutes=e[this.teacherDurationIndex],this.confirmTeacherReservation()}else if(this.currentOperation==="reschedule"){const e=[30,45,60,90,120];this.durationMinutes=e[this.durationIndex],this.confirmRescheduleClass()}else if(this.currentOperation==="student_reserve"){const e=[30,45,60,90,120];this.durationMinutes=e[this.durationIndex],this.confirmReservation()}else if(this.currentOperation==="student_modify"){const e=[30,45,60,90,120];this.durationMinutes=e[this.durationIndex],this.confirmModifyReservation()}this.showDurationPicker=!1},formatDateTime(e=null){const s=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),c=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");return`${s}-${n}-${c} ${r}:${a}`},confirmTeacherReservation(){const e=this.teacherPendingCourses[this.currentCourseIndex],s=this.durationOptions[this.teacherDurationIndex];t.index.showModal(new UTSJSONObject({title:"确认发起预约",content:`课程：${e.name}
学生：${e.studentName}
日期时间：${this.selectedDate}
时长：${s}`,success:n=>{n.confirm&&(this.sendReservationToStudent(e),this.teacherPendingCourses.splice(this.currentCourseIndex,1),t.index.showToast({title:"预约已发送",icon:"success",duration:2e3}),this.currentCourseIndex=null,this.selectedDate=null)}}))},sendReservationToStudent(e=null){t.index.__f__("log","at pagesMine/course/course.vue:1002","发送预约信息到学生:",e.studentName);const s=this.durationOptions[this.teacherDurationIndex],n=getApp().globalData||new UTSJSONObject({});n.studentReservations||(n.studentReservations=[]),n.studentReservations.push(new UTSJSONObject({id:Date.now(),name:e.name,teacher:"我",time:this.selectedDate,duration:s,price:e.price,image:e.image||"/static/images/default_avatar.png",description:`由老师发起的预约：${e.name}`,studentName:e.studentName})),this.teacherActiveCourses.push(Object.assign(Object.assign({},e),{classTime:this.selectedDate,duration:s}))},viewClassFeedback(e=null){e.replayUrl?t.index.showModal(new UTSJSONObject({title:"查看回放",content:"是否跳转到课程回放网页？",success:s=>{s.confirm&&this.openExternalLink(e.replayUrl)}})):t.index.showModal(new UTSJSONObject({title:"学生评价",content:`${e.studentName}对本课程的评价：
非常棒的课程，讲解清晰，收获很多！`,showCancel:!1}))},getRandomFutureTime(){const e=new Date,s=new Date(e.getTime()+(1+Math.floor(Math.random()*7))*24*60*60*1e3),n=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),a=["09","10","14","15","16","19","20"][Math.floor(Math.random()*7)],i=["00","30"][Math.floor(Math.random()*2)];return`${n}-${c}-${r} ${a}:${i}`},openExternalLink(e=null){t.index.navigateTo({url:`/pages/webview/webview?url=${encodeURIComponent(e)}`}),t.index.__f__("log","at pagesMine/course/course.vue:1092","跳转到外部链接:",e)},confirmClassEnd(e=null){t.index.showModal(new UTSJSONObject({title:"确认下课",content:"确定要确认下课吗？",success:s=>{if(s.confirm){const n=this.reservedCourses[e];this.completedCourses.push(Object.assign(Object.assign({},n),{completedTime:new Date().toISOString().split("T")[0]})),this.reservedCourses.splice(e,1),t.index.showToast({title:"已确认下课",icon:"success",duration:2e3})}}}))},initStudentData(){t.index.__f__("log","at pagesMine/course/course.vue:1124","初始化学生数据");const e=getApp().globalData||new UTSJSONObject({});e.studentReservations&&e.studentReservations.length>0&&(t.index.__f__("log","at pagesMine/course/course.vue:1132","发现老师发起的预约:",e.studentReservations.length),e.studentReservations.forEach((s=null)=>{this.pendingCourses.some(c=>c.id===s.id)||this.pendingCourses.unshift({id:s.id,name:s.name,teacher:s.teacher,time:s.time,price:s.price,image:s.image,description:s.description,isTeacherReservation:!0})}),e.studentReservations=[])},acceptReservation(e=null){const s=this.pendingCourses[e];t.index.showModal(new UTSJSONObject({title:"接受预约",content:`确认接受${s.teacher}的预约吗？
课程：${s.name}
时间：${s.time}
时长：${s.duration||"60分钟"}`,success:n=>{n.confirm&&(this.reservedCourses.push(Object.assign(Object.assign({},s),{reservedTime:s.time,duration:s.duration||"60分钟"})),this.pendingCourses.splice(e,1),t.index.showToast({title:"已接受预约",icon:"success",duration:2e3}))}}))},goBack(){d.Navigator.toMine()},rescheduleClass(e=null){this.currentCourseIndex=e,this.$refs.teacherDatetimePicker.show()},confirmRescheduleClass(){const e=this.teacherActiveCourses[this.currentCourseIndex],s=this.durationOptions[this.durationIndex];t.index.showModal(new UTSJSONObject({title:"确认修改时间",content:`课程：${e.name}
学生：${e.studentName}
新时间：${this.selectedDate}
时长：${s}`,success:n=>{n.confirm&&(this.teacherActiveCourses[this.currentCourseIndex].classTime=this.selectedDate,this.teacherActiveCourses[this.currentCourseIndex].duration=s,t.index.showToast({title:"时间已修改",icon:"success",duration:2e3}),this.currentCourseIndex=null,this.selectedDate=null)}}))},closeDatePicker(){this.datePickerVisible=!1},closeTeacherDatePicker(){this.teacherDatePickerVisible=!1},confirmDirectSelection(){if(!this.canConfirmSelection)return null;const e=this.availableDates[this.selectedDateIndex],s=this.filteredTimeSlots[this.selectedTimeIndex],n=e.getFullYear(),c=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");this.selectedDate=`${n}-${c}-${r} ${s.split("-")[0]}`,this.showAvailableSlots=!1,this.$nextTick(()=>{this.confirmReservation()})},onDatetimeChange(e=null){this.datePickerVisible=!1,this.selectedTimestamp=e;const s=new Date(e);this.selectedDate=this.formatDateTime(s),this.currentOperation==="student_reserve"||this.currentOperation==="student_modify"?(this.durationIndex=2,this.durationMinutes=60,this.currentOperation==="student_reserve"?this.confirmReservation():this.currentOperation==="student_modify"&&this.confirmModifyReservation()):this.showDurationPicker=!0},getToday(){const e=new Date,s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${s}-${n}-${c} ${r}:${a}`},getNextMonth(){const e=new Date,s=new Date(e);return s.setMonth(e.getMonth()+1),`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`},onTeacherDurationChange(e=null){this.teacherDurationIndex=e.detail.value;const s=[30,45,60,90,120];this.teacherDurationMinutes=s[this.teacherDurationIndex]},confirmModifyReservation(){const e=this.reservedCourses[this.currentCourseIndex],s=this.durationOptions[this.durationIndex];t.index.showModal(new UTSJSONObject({title:"确认修改预约时间",content:`课程：${e.name}
新时间：${this.selectedDate}
时长：${s}`,success:n=>{n.confirm&&(this.reservedCourses[this.currentCourseIndex].reservedTime=this.selectedDate,this.reservedCourses[this.currentCourseIndex].duration=s,t.index.showToast({title:"时间已修改",icon:"success",duration:2e3}),this.currentCourseIndex=null,this.selectedDate=null)}}))}}});if(!Array){const e=t.resolveComponent("Header"),s=t.resolveComponent("uni-datetime-picker"),n=t.resolveComponent("top-navbar");(e+s+n)()}const f=()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js",S=()=>"../../components/top-navbar/top-navbar2.js";Math||(f+S)();function v(e,s,n,c,r,a){return t.e({a:t.o(a.goBack),b:t.p({title:"我的课程"}),c:t.sr("datetimePicker","77c0ede1-1"),d:t.o(a.onDatetimeChange),e:t.o(a.closeDatePicker),f:t.o(i=>r.selectedTimestamp=i),g:t.p({type:"datetime",clearIcon:!0,start:a.getToday(),modelValue:r.selectedTimestamp}),h:t.sr("teacherDatetimePicker","77c0ede1-2"),i:t.o(a.onTeacherDatetimeChange),j:t.o(a.closeTeacherDatePicker),k:t.o(i=>r.teacherSelectedTimestamp=i),l:t.p({type:"datetime",clearIcon:!0,start:a.getToday(),modelValue:r.teacherSelectedTimestamp}),m:r.showDurationPicker},r.showDurationPicker?{n:t.o((...i)=>a.closeDurationPicker&&a.closeDurationPicker(...i))}:{},{o:r.showDurationPicker},r.showDurationPicker?{p:t.f(r.durationOptions,(i,o,l)=>({a:t.t(i),b:o})),q:[r.durationIndex],r:t.o((...i)=>a.onDurationPickerChange&&a.onDurationPickerChange(...i)),s:t.o((...i)=>a.closeDurationPicker&&a.closeDurationPicker(...i)),t:t.o((...i)=>a.confirmDurationSelection&&a.confirmDurationSelection(...i))}:{},{v:r.userRole==="student"},r.userRole==="student"?t.e({w:!r.selectedDate&&r.showAvailableSlots},!r.selectedDate&&r.showAvailableSlots?{x:t.o(i=>r.showAvailableSlots=!1),y:t.f(r.availableDates,(i,o,l)=>({a:t.t(a.formatDay(i)),b:t.t(a.formatDate(i)),c:o,d:r.selectedDateIndex===o?1:"",e:t.o(u=>a.selectAvailableDate(o),o)})),z:t.f(a.filteredTimeSlots,(i,o,l)=>({a:t.t(i),b:o,c:r.selectedTimeIndex===o?1:"",d:t.o(u=>a.selectTimeSlot(o),o)})),A:t.t(r.durationOptions[r.durationIndex]),B:t.o((...i)=>a.onDurationChange&&a.onDurationChange(...i)),C:r.durationIndex,D:r.durationOptions,E:t.o((...i)=>a.confirmDirectSelection&&a.confirmDirectSelection(...i)),F:!a.canConfirmSelection}:{},{G:t.f(r.pendingCourses,(i,o,l)=>t.e({a:t.t(i.name),b:t.t(i.teacher),c:i.isTeacherReservation},i.isTeacherReservation?{d:t.t(i.time)}:{},{e:i.isTeacherReservation},i.isTeacherReservation?{f:t.o(u=>a.acceptReservation(o),o)}:{g:t.o(u=>a.handleReserve(o),o)},{h:o})),H:r.pendingCourses.length===0},r.pendingCourses.length===0?{}:{},{I:t.f(r.reservedCourses,(i,o,l)=>t.e({a:t.t(i.name),b:t.t(i.teacher),c:t.t(i.reservedTime),d:i.duration},i.duration?{e:t.t(i.duration)}:{},{f:t.o(u=>a.modifyReservationTime(o),o),g:o})),J:r.reservedCourses.length===0},r.reservedCourses.length===0?{}:{},{K:t.f(r.completedCourses,(i,o,l)=>t.e({a:t.t(i.name),b:t.t(i.teacher),c:t.t(i.completedTime),d:i.rating},i.rating?{e:t.f(5,(u,T,_)=>({a:t.t(u<=i.rating?"★":"☆"),b:u}))}:{},{f:t.o(u=>a.viewFeedback(i),o),g:o})),L:r.completedCourses.length===0},r.completedCourses.length===0?{}:{},{M:t.o(a.onTabChange),N:t.p({navHeight:60,userRole:r.userRole})}):t.e({O:t.f(r.teacherPendingCourses,(i,o,l)=>({a:t.t(i.name),b:t.t(i.studentName||"暂无"),c:t.o(u=>a.teacherReserve(o),o),d:o})),P:r.teacherPendingCourses.length===0},r.teacherPendingCourses.length===0?{}:{},{Q:t.f(r.teacherActiveCourses,(i,o,l)=>t.e({a:t.t(i.name),b:t.t(i.studentName||"暂无"),c:t.t(i.classTime),d:i.duration},i.duration?{e:t.t(i.duration)}:{},{f:t.o(u=>a.completeClass(o),o),g:t.o(u=>a.rescheduleClass(o),o),h:o})),R:r.teacherActiveCourses.length===0},r.teacherActiveCourses.length===0?{}:{},{S:t.f(r.teacherCompletedCourses,(i,o,l)=>({a:t.t(i.name),b:t.t(i.studentName||"暂无"),c:t.t(i.completedTime),d:t.o(u=>a.viewClassFeedback(i),o),e:o})),T:r.teacherCompletedCourses.length===0},r.teacherCompletedCourses.length===0?{}:{},{U:t.o(a.onTeacherTabChange),V:t.p({navHeight:60,userRole:r.userRole})}),{W:t.sei(t.gei(e,""),"view")})}const D=t._export_sfc(p,[["render",v]]);wx.createPage(D);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/course/course.js.map
