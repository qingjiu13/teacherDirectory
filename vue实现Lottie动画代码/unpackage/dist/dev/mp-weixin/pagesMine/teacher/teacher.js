"use strict";const t=require("../../common/vendor.js"),s=require("../../router/Router.js"),u=require("../../common/assets.js"),l=()=>"../../components/navigationTitleBar/header.js",m=()=>"../../components/loading/LoadingAnimation.js",v=t.defineComponent({components:{Header:l,LoadingAnimation:m},data(){return{teacherId:null,activeTab:"services",isLoading:!1,showServiceDetail:!1,currentService:null,isIntroExpanded:!1,introMaxLength:100}},computed:Object.assign(Object.assign({},t.mapState("user/match",["matchList"])),{teacherData(){return this.matchList.find((c=null)=>c.id===this.teacherId)||new UTSJSONObject({id:null,name:"",avatar:"/static/image/defaultAvatar/teacher-man.png",school:"",major:"",certificate:0,campusAmbassador:0,selfIntroduction:"暂无数据",service:[]})},services(){return this.teacherData&&Array.isArray(this.teacherData.service)?this.teacherData.service:[]},displayIntroduction(){const i=this.teacherData.selfIntroduction||"这位老师很懒，还没有填写个人简介。";return!this.isIntroExpanded&&i.length>this.introMaxLength?i.substring(0,this.introMaxLength)+"...":i},shouldShowToggleBtn(){return(this.teacherData.selfIntroduction||"").length>this.introMaxLength}}),onLoad(i){if(this.teacherId=i.id||"",!this.teacherId)return t.index.showToast({title:"未获取到教师ID",icon:"none"}),null;this.isLoading=!0,setTimeout(()=>{this.matchList.findIndex((a=null)=>a.id===this.teacherId)===-1&&t.index.showToast({title:"未找到该教师信息",icon:"none"}),this.isLoading=!1},1e3)},methods:{handleBack(){s.Navigator.redirectTo(s.MatchRoutes.MATCH)},switchTab(i=null){this.activeTab!==i&&(this.activeTab=i)},toggleIntroduction(){this.isIntroExpanded=!this.isIntroExpanded},startConsultation(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,s.Navigator.toChat(this.teacherId)},500)},goToServiceDetail(i=null){const c=Array.isArray(this.services)?this.services:[],a=UTS.arrayFind(c,(o=null)=>o.id===i);a?(this.currentService=a,this.showServiceDetail=!0):t.index.showToast({title:"未找到服务信息",icon:"none"})},closeServiceDetail(){this.showServiceDetail=!1,this.currentService=null}}});if(!Array){const i=t.resolveComponent("Header"),c=t.resolveComponent("loading-animation");(i+c)()}function B(i,c,a,o,e,r){return t.e({a:u._imports_0$2,b:u._imports_1$2,c:t.o(r.handleBack),d:t.p({title:"导师详情"}),e:e.isLoading},e.isLoading?{f:t.p({src:"https://lottie.host/1f64310d-d1a9-44c9-ac77-3c29ae849559/c3yfKGAzCm.json",width:"150rpx",height:"150rpx",showText:!0,text:"加载中..."})}:{},{g:!e.isLoading},e.isLoading?{}:t.e({h:r.teacherData.avatar||"/static/image/defaultAvatar/teacher-man.png",i:t.t(r.teacherData.name),j:r.teacherData.certificate},r.teacherData.certificate?{k:u._imports_2$2}:{l:u._imports_3$4},{m:r.teacherData.campusAmbassador},r.teacherData.campusAmbassador?{n:u._imports_4$1}:{},{o:t.t(r.teacherData.school),p:t.t(r.teacherData.major),q:t.t(r.displayIntroduction),r:r.shouldShowToggleBtn},r.shouldShowToggleBtn?{s:t.t(e.isIntroExpanded?"收起":"展开"),t:t.o((...n)=>r.toggleIntroduction&&r.toggleIntroduction(...n))}:{},{v:e.activeTab==="services"?1:"",w:t.o(n=>r.switchTab("services")),x:e.activeTab==="services"},e.activeTab==="services"?t.e({y:r.teacherData.service&&r.teacherData.service.length>0},r.teacherData.service&&r.teacherData.service.length>0?{z:t.f(r.teacherData.service,(n,h,g)=>({a:n.image||"../static/teacher/test.png",b:t.t(n.name),c:t.t(n.price),d:t.t(n.description.length>=40?n.description.slice(0,40)+"...":n.description),e:h,f:t.o(E=>r.goToServiceDetail(n.id),h)}))}:{}):{},{A:u._imports_5,B:t.o((...n)=>r.startConsultation&&r.startConsultation(...n))}),{C:e.showServiceDetail},e.showServiceDetail?t.e({D:t.o((...n)=>r.closeServiceDetail&&r.closeServiceDetail(...n)),E:e.currentService.image||"../static/teacher/test.png",F:t.t(e.currentService.name),G:t.t(e.currentService.price),H:t.t(e.currentService.type.typename),I:e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"?{}:{},{J:e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"?{K:t.t(e.currentService.type.coursenum)}:{},{L:e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"?{}:{},{M:e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对一课程"||e.currentService.type.typename==="一对多课程"?{N:t.t(e.currentService.type.fulllength.hours),O:t.t(e.currentService.type.fulllength.minutes)}:{},{P:e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对多课程"?{}:{},{Q:e.currentService.type.typename==="一对多课程"},e.currentService.type.typename==="一对多课程"?{R:t.t(e.currentService.type.studentnum)}:{},{S:t.t(e.currentService.description)}):{})}const p=t._export_sfc(v,[["render",B]]);wx.createPage(p);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/teacher/teacher.js.map
