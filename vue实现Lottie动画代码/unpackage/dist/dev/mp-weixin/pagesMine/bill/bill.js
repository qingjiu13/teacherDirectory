"use strict";const t=require("../../common/vendor.js"),c=require("../../store/user/money/state.js"),u=require("../../common/assets.js"),l=t.defineComponent({data(){return{refreshing:!1,localTransactionList:c.moneyState.transactionList,isLoading:!1,hasMore:!1}},computed:{transactionList(){return this.localTransactionList},groupedTransactions(){const a=new UTSJSONObject({});return this.transactionList&&this.transactionList.length>0&&this.transactionList.forEach((e=null)=>{const o=this.formatDate(e.date);a[o]||(a[o]=[]),a[o].push(e)}),a}},onLoad(){t.index.__f__("log","at pagesMine/bill/bill.vue:94","加载交易记录:",this.transactionList),this.fetchData()},onReachBottom(){this.loadMore()},methods:{fetchData(){this.isLoading=!0,setTimeout(()=>{(!this.localTransactionList||this.localTransactionList.length===0)&&(this.localTransactionList=c.moneyState.transactionList||[]),this.isLoading=!1,this.hasMore=c.moneyState.hasMore},500)},loadMore(){if(!this.hasMore||this.isLoading)return null;this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.hasMore=!1},500)},refresh(){this.refreshing=!0,setTimeout(()=>{this.fetchData(),this.refreshing=!1},1e3)},formatGroupDate(a=null){const e=new Date(a);return`${e.getMonth()+1}月${e.getDate()}日`},formatDate(a=null){const e=new Date(a);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},formatTime(a=null){const e=new Date(a);return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}}});function g(a,e,o,d,r,s){return t.e({a:s.transactionList.length>0},s.transactionList.length>0?t.e({b:t.f(s.groupedTransactions,(i,h,m)=>({a:t.t(s.formatGroupDate(h)),b:t.f(i,(n,L,_)=>({a:t.t(n.amount>0?"入":"出"),b:t.n(n.amount>0?"income":"expense"),c:t.t(n.name),d:t.t(s.formatTime(n.date)),e:t.t(n.amount>0?"+":""),f:t.t(n.amount.toFixed(2)),g:t.n(n.amount>0?"income":"expense"),h:n.id})),c:h})),c:r.isLoading},r.isLoading?{}:r.hasMore?{}:{},{d:!r.hasMore}):r.isLoading?{}:{f:u._imports_0$5},{e:!r.isLoading,g:t.o((...i)=>s.loadMore&&s.loadMore(...i)),h:r.refreshing,i:t.o((...i)=>s.refresh&&s.refresh(...i)),j:t.sei(t.gei(a,""),"view")})}const f=t._export_sfc(l,[["render",g]]);wx.createPage(f);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/bill/bill.js.map
