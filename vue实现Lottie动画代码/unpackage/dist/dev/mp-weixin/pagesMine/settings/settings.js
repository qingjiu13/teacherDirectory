"use strict";const e=require("../../common/vendor.js"),i=require("../../router/Router.js"),r=require("../../store/index.js"),d=e.defineComponent({data(){return{isLoggedIn:!1,switching:!1}},computed:Object.assign(Object.assign({},e.mapGetters(new UTSJSONObject({isTeacher:"user/baseInfo/isTeacher",userRole:"user/baseInfo/userRole",profile:"user/baseInfo/profile"}))),{isStudent(){return!this.isTeacher}}),onLoad(){this.isLoggedIn=r.store.getters["user/baseInfo/id"]!==""},methods:{handleModifyInfo(){i.Navigator.toModify()},handleSwitchRole(){if(this.switching)return null;const t=this.isTeacher?"student":"teacher";e.index.showModal(new UTSJSONObject({title:"切换身份",content:`确定要切换到${t==="teacher"?"老师":"学生"}模式吗？`,success:s=>e.__awaiter(this,void 0,void 0,function*(){if(s.confirm)try{this.switching=!0,yield r.store.dispatch("user/baseInfo/updateRole",t),e.index.showToast({title:t==="teacher"?"已切换为老师模式":"已切换为学生模式",icon:"none"}),setTimeout(()=>{i.Navigator.reLaunch("/pages/mine/mine/mine_common")},1500)}catch(a){e.index.__f__("error","at pagesMine/settings/settings.vue:104","切换角色失败:",a),e.index.showToast({title:"切换角色失败",icon:"none"})}finally{this.switching=!1}})}))},handleContactUs(){e.index.showModal(new UTSJSONObject({title:"联系我们",content:`客服电话：400-123-4567
客服邮箱：support@example.com
工作时间：周一至周五 9:00-18:00`,showCancel:!1}))},handleLogout(){e.index.showModal(new UTSJSONObject({title:"提示",content:"确定要退出登录吗？",success:t=>e.__awaiter(this,void 0,void 0,function*(){if(t.confirm)try{yield r.store.dispatch("user/baseInfo/logout"),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{i.Navigator.reLaunch("/pages/mine/mine/mine_common")},1500)}catch(s){e.index.__f__("error","at pagesMine/settings/settings.vue:152","退出登录时出错:",s),e.index.showToast({title:"退出登录时出错",icon:"none"})}})}))}}});function h(t,s,a,l,c,n){return e.e({a:e.t(t.isTeacher?"老师":"学生"),b:e.o((...o)=>n.handleSwitchRole&&n.handleSwitchRole(...o)),c:e.o((...o)=>n.handleModifyInfo&&n.handleModifyInfo(...o)),d:e.o((...o)=>n.handleContactUs&&n.handleContactUs(...o)),e:c.isLoggedIn},c.isLoggedIn?{f:e.o((...o)=>n.handleLogout&&n.handleLogout(...o))}:{},{g:e.sei(e.gei(t,""),"view")})}const u=e._export_sfc(d,[["render",h]]);wx.createPage(u);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/settings/settings.js.map
