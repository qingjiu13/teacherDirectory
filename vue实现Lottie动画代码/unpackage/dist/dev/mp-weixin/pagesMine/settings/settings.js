"use strict";const e=require("../../common/vendor.js"),s=require("../../router/Router.js"),r=require("../../store/index.js"),d=e.defineComponent({data(){return{isLoggedIn:!1,switching:!1}},computed:Object.assign(Object.assign({},e.mapGetters(new UTSJSONObject({isTeacher:"user/baseInfo/isTeacher",userRole:"user/baseInfo/userRole",profile:"user/baseInfo/profile"}))),{isStudent(){return!this.isTeacher}}),onLoad(){this.isLoggedIn=r.store.getters["user/baseInfo/id"]!==""},methods:{handleModifyInfo(){s.Navigator.toModify()},handleSwitchRole(){if(this.switching)return null;const t=this.isTeacher?"student":"teacher";e.index.showModal(new UTSJSONObject({title:"切换身份",content:`确定要切换到${t==="teacher"?"老师":"学生"}模式吗？`,success:o=>e.__awaiter(this,void 0,void 0,function*(){if(o.confirm)try{this.switching=!0,yield r.store.dispatch("user/baseInfo/updateRole",t),e.index.showToast({title:t==="teacher"?"已切换为老师模式":"已切换为学生模式",icon:"none"}),setTimeout(()=>{s.Navigator.reLaunch("/pagesMine/mine/mine_common")},1500)}catch(a){e.index.__f__("error","at pagesMine/settings/settings.vue:96","切换角色失败:",a),e.index.showToast({title:"切换角色失败",icon:"none"})}finally{this.switching=!1}})}))},handleLogout(){e.index.showModal(new UTSJSONObject({title:"提示",content:"确定要退出登录吗？",success:t=>e.__awaiter(this,void 0,void 0,function*(){if(t.confirm)try{yield r.store.dispatch("user/baseInfo/logout"),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{s.Navigator.reLaunch("/pagesMine/mine/mine_common")},1500)}catch(o){e.index.__f__("error","at pagesMine/settings/settings.vue:132","退出登录时出错:",o),e.index.showToast({title:"退出登录时出错",icon:"none"})}})}))}}});function u(t,o,a,l,c,n){return e.e({a:e.t(t.isTeacher?"老师":"学生"),b:e.o((...i)=>n.handleSwitchRole&&n.handleSwitchRole(...i)),c:e.o((...i)=>n.handleModifyInfo&&n.handleModifyInfo(...i)),d:c.isLoggedIn},c.isLoggedIn?{e:e.o((...i)=>n.handleLogout&&n.handleLogout(...i))}:{},{f:e.sei(e.gei(t,""),"view")})}const h=e._export_sfc(d,[["render",u]]);wx.createPage(h);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/settings/settings.js.map
