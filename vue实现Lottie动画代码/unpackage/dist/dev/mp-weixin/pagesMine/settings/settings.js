"use strict";const e=require("../../common/vendor.js"),r=require("../../router/Router.js"),a=require("../../store/index.js"),i=require("../../common/assets.js"),h=()=>"../../components/navigationTitleBar/header.js",u=e.defineComponent({components:{Header:h},data(){return{isLoggedIn:!1,switching:!1}},computed:Object.assign(Object.assign({},e.mapGetters(new UTSJSONObject({isTeacher:"user/baseInfo/isTeacher",userRole:"user/baseInfo/userRole",profile:"user/baseInfo/profile"}))),{isStudent(){return!this.isTeacher}}),onLoad(){this.isLoggedIn=a.store.getters["user/baseInfo/id"]!==""},methods:{handleBack(){r.Navigator.toMine()},handleModifyInfo(){r.Navigator.toModify()},handleSwitchRole(){if(this.switching)return null;const t=this.isTeacher?"student":"teacher";e.index.showModal(new UTSJSONObject({title:"切换身份",content:`确定要切换到${t==="teacher"?"老师":"学生"}模式吗？`,success:s=>e.__awaiter(this,void 0,void 0,function*(){if(s.confirm)try{this.switching=!0,yield a.store.dispatch("user/baseInfo/updateRole",t),e.index.showToast({title:t==="teacher"?"已切换为老师模式":"已切换为学生模式",icon:"none"}),setTimeout(()=>{r.Navigator.reLaunch("/pagesMine/mine/mine_common")},1500)}catch(c){e.index.__f__("error","at pagesMine/settings/settings.vue:118","切换角色失败:",c),e.index.showToast({title:"切换角色失败",icon:"none"})}finally{this.switching=!1}})}))},handleLogout(){e.index.showModal(new UTSJSONObject({title:"提示",content:"确定要退出登录吗？",success:t=>e.__awaiter(this,void 0,void 0,function*(){if(t.confirm)try{yield a.store.dispatch("user/baseInfo/logout"),e.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{r.Navigator.reLaunch("/pagesMine/mine/mine_common")},1500)}catch(s){e.index.__f__("error","at pagesMine/settings/settings.vue:154","退出登录时出错:",s),e.index.showToast({title:"退出登录时出错",icon:"none"})}})}))}}});Array||e.resolveComponent("Header")();function l(t,s,c,g,d,n){return e.e({a:i._imports_0$2,b:i._imports_1$2,c:e.o(n.handleBack),d:e.p({title:"设置"}),e:i._imports_2$4,f:e.t(t.isTeacher?"老师":"学生"),g:e.o((...o)=>n.handleSwitchRole&&n.handleSwitchRole(...o)),h:i._imports_2$4,i:e.o((...o)=>n.handleModifyInfo&&n.handleModifyInfo(...o)),j:d.isLoggedIn},d.isLoggedIn?{k:i._imports_3$6,l:e.o((...o)=>n.handleLogout&&n.handleLogout(...o))}:{})}const _=e._export_sfc(u,[["render",l]]);wx.createPage(_);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesMine/settings/settings.js.map
