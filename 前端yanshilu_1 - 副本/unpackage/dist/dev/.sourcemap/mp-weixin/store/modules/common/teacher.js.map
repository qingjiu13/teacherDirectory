{"version":3,"file":"teacher.js","sources":["store/modules/common/teacher.js"],"sourcesContent":["/**\n * @description 老师详情功能Vuex模块\n * 获取和管理老师详细信息\n */\n\nimport { match, mock } from '../../services';\n\n// 初始状态\nconst state = {\n  // 老师基本信息\n  teacherInfo: {\n    id: null,\n    nickname: '',\n    avatar: '',\n    school: '',\n    major: '',\n    score: '',\n    tags: [],\n    introduction: ''\n  },\n  \n  // 老师服务列表\n  services: [],\n  \n  // 加载状态\n  loading: false,\n  error: null\n};\n\n// Getters\nconst getters = {\n  /**\n   * @description 获取老师详情\n   * @param {Object} state - Vuex状态\n   * @returns {Object} 老师详情\n   */\n  teacherInfo: state => state.teacherInfo,\n  \n  /**\n   * @description 获取老师服务列表\n   * @param {Object} state - Vuex状态\n   * @returns {Array} 服务列表\n   */\n  services: state => state.services,\n  \n  /**\n   * @description 获取加载状态\n   * @param {Object} state - Vuex状态\n   * @returns {Boolean} 是否正在加载\n   */\n  isLoading: state => state.loading,\n  \n  /**\n   * @description 获取错误信息\n   * @param {Object} state - Vuex状态\n   * @returns {Object} 错误信息\n   */\n  error: state => state.error\n};\n\n// 引入常量类型\nconst SET_TEACHER_INFO = 'SET_TEACHER_INFO';\nconst SET_SERVICES = 'SET_SERVICES';\nconst SET_LOADING = 'SET_LOADING';\nconst SET_ERROR = 'SET_ERROR';\nconst RESET_TEACHER = 'RESET_TEACHER';\n\n// Mutations\nconst mutations = {\n  [SET_TEACHER_INFO](state, teacherInfo) {\n    state.teacherInfo = teacherInfo;\n  },\n  \n  [SET_SERVICES](state, services) {\n    state.services = services;\n  },\n  \n  [SET_LOADING](state, loading) {\n    state.loading = loading;\n  },\n  \n  [SET_ERROR](state, error) {\n    state.error = error;\n  },\n  \n  [RESET_TEACHER](state) {\n    state.teacherInfo = {\n      id: null,\n      nickname: '',\n      avatar: '',\n      school: '',\n      major: '',\n      score: '',\n      tags: [],\n      introduction: ''\n    };\n    state.services = [];\n  }\n};\n\n// Actions\nconst actions = {\n  /**\n   * @description 获取老师详情和服务列表（合并API）\n   * @param {Object} context - Vuex上下文\n   * @param {Number} teacherId - 老师ID\n   * @returns {Promise<Object>} 结果对象\n   */\n  async getTeacherInfo({ commit, rootState }, teacherId) {\n    try {\n      commit(SET_LOADING, true);\n      commit(SET_ERROR, null);\n      \n      // 尝试从match模块中找到这个老师的基本信息\n      let teacherBasicInfo = null;\n      \n      if (rootState.match && rootState.match.teachers) {\n        teacherBasicInfo = rootState.match.teachers.find(t => t.id === parseInt(teacherId));\n      }\n      \n      // API调用 - match.api.js会根据环境自动选择真实API或模拟数据\n      const response = await match.getTeacherDetail(teacherId);\n      \n      if (!response.success) {\n        throw response.error || { message: '获取老师详情失败' };\n      }\n      \n      // 从API响应中提取老师信息和服务列表\n      const teacherDetail = response.data.teacher;\n      const services = response.data.services || [];\n      \n      // 更新state\n      commit(SET_TEACHER_INFO, teacherDetail);\n      commit(SET_SERVICES, services);\n      \n      return { success: true, data: response.data };\n    } catch (error) {\n      console.error('获取老师详情失败:', error);\n      commit(SET_ERROR, error);\n      return { success: false, error };\n    } finally {\n      commit(SET_LOADING, false);\n    }\n  },\n  \n  /**\n   * @description 重置老师信息\n   * @param {Object} context - Vuex上下文\n   */\n  resetTeacher({ commit }) {\n    commit(RESET_TEACHER);\n  },\n  \n  /**\n   * @description 清除错误信息\n   * @param {Object} context - Vuex上下文\n   */\n  clearError({ commit }) {\n    commit(SET_ERROR, null);\n  },\n  \n  /**\n   * @description 初始化老师模块数据\n   * @param {Object} context - Vuex上下文\n   * @returns {Promise<Object>} 结果对象\n   */\n  async loadInitialData({ commit }) {\n    // 在这里可以加载一些基础数据\n    // 重置状态以确保初始化\n    commit(RESET_TEACHER);\n    \n    return { success: true };\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n}; "],"names":["state","match.getTeacherDetail","uni"],"mappings":";;;;AAQA,MAAM,QAAQ;AAAA;AAAA,EAEZ,aAAa;AAAA,IACX,IAAI;AAAA,IACJ,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM,CAAE;AAAA,IACR,cAAc;AAAA,EACf;AAAA;AAAA,EAGD,UAAU,CAAE;AAAA;AAAA,EAGZ,SAAS;AAAA,EACT,OAAO;AACT;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMd,aAAa,CAAAA,WAASA,OAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO5B,UAAU,CAAAA,WAASA,OAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOzB,WAAW,CAAAA,WAASA,OAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO1B,OAAO,CAAAA,WAASA,OAAM;AACxB;AAGA,MAAM,mBAAmB;AACzB,MAAM,eAAe;AACrB,MAAM,cAAc;AACpB,MAAM,YAAY;AAClB,MAAM,gBAAgB;AAGtB,MAAM,YAAY;AAAA,EAChB,CAAC,gBAAgB,EAAEA,QAAO,aAAa;AACrC,IAAAA,OAAM,cAAc;AAAA,EACrB;AAAA,EAED,CAAC,YAAY,EAAEA,QAAO,UAAU;AAC9B,IAAAA,OAAM,WAAW;AAAA,EAClB;AAAA,EAED,CAAC,WAAW,EAAEA,QAAO,SAAS;AAC5B,IAAAA,OAAM,UAAU;AAAA,EACjB;AAAA,EAED,CAAC,SAAS,EAAEA,QAAO,OAAO;AACxB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EAED,CAAC,aAAa,EAAEA,QAAO;AACrB,IAAAA,OAAM,cAAc;AAAA,MAClB,IAAI;AAAA,MACJ,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,OAAO;AAAA,MACP,MAAM,CAAE;AAAA,MACR,cAAc;AAAA,IACpB;AACI,IAAAA,OAAM,WAAW;EAClB;AACH;AAGA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOd,MAAM,eAAe,EAAE,QAAQ,UAAS,GAAI,WAAW;AACrD,QAAI;AACF,aAAO,aAAa,IAAI;AACxB,aAAO,WAAW,IAAI;AAGtB,UAAI,mBAAmB;AAEvB,UAAI,UAAU,SAAS,UAAU,MAAM,UAAU;AAC/C,2BAAmB,UAAU,MAAM,SAAS,KAAK,OAAK,EAAE,OAAO,SAAS,SAAS,CAAC;AAAA,MACnF;AAGD,YAAM,WAAW,MAAMC,0CAAuB,SAAS;AAEvD,UAAI,CAAC,SAAS,SAAS;AACrB,cAAM,SAAS,SAAS,EAAE,SAAS,WAAU;AAAA,MAC9C;AAGD,YAAM,gBAAgB,SAAS,KAAK;AACpC,YAAM,WAAW,SAAS,KAAK,YAAY,CAAA;AAG3C,aAAO,kBAAkB,aAAa;AACtC,aAAO,cAAc,QAAQ;AAE7B,aAAO,EAAE,SAAS,MAAM,MAAM,SAAS,KAAI;AAAA,IAC5C,SAAQ,OAAO;AACdC,mFAAc,aAAa,KAAK;AAChC,aAAO,WAAW,KAAK;AACvB,aAAO,EAAE,SAAS,OAAO;IAC/B,UAAc;AACR,aAAO,aAAa,KAAK;AAAA,IAC1B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,aAAa,EAAE,UAAU;AACvB,WAAO,aAAa;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,WAAW,EAAE,UAAU;AACrB,WAAO,WAAW,IAAI;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAM,gBAAgB,EAAE,UAAU;AAGhC,WAAO,aAAa;AAEpB,WAAO,EAAE,SAAS;EACnB;AACH;AAEA,MAAe,UAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;"}