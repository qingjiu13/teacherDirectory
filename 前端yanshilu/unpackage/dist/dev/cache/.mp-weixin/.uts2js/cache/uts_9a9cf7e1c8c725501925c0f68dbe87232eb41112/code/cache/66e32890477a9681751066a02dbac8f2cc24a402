{"code":"import { defineComponent } from \"vue\";\n/**\n * @description 首页组件\n */\nimport TabBar from '../../components/tab-bar/tab-bar.uvue';\nimport Routes from '../../utils/routes.js';\nexport default defineComponent({\n    components: {\n        TabBar\n    },\n    data() {\n        return {\n            title: '研师录',\n            avatarPosition: new UTSJSONObject({\n                x: 50,\n                y: 400\n            }),\n            isDragging: false,\n            startPosition: new UTSJSONObject({\n                x: 0,\n                y: 0\n            }),\n            screenInfo: new UTSJSONObject({\n                width: 0,\n                height: 0,\n                tabBarHeight: 50 // 默认底部导航栏高度\n            })\n        };\n    },\n    onLoad() {\n        /**\n         * @description 页面加载时的处理逻辑\n         */\n        // 获取屏幕信息\n        this.getScreenInfo();\n    },\n    onShow() {\n        // 确保系统tabBar被隐藏\n        uni.hideTabBar();\n    },\n    methods: {\n        /**\n         * @description 获取屏幕信息\n         */\n        getScreenInfo() {\n            try {\n                const systemInfo = uni.getSystemInfoSync();\n                this.screenInfo.width = systemInfo.windowWidth;\n                this.screenInfo.height = systemInfo.windowHeight;\n                // 初始化头像位置为右上角\n                this.avatarPosition = {\n                    x: this.screenInfo.width - 80,\n                    y: 100\n                };\n            }\n            catch (e) {\n                uni.__f__('error', 'at pages/index/index.uvue:110', '获取屏幕信息失败:', e);\n            }\n        },\n        /**\n         * @description 跳转到匹配页面\n         */\n        goToMatch() {\n            // 使用Routes导航\n            try {\n                Routes.navigator.navigateTo(Routes.match.MATCH_HOME);\n            }\n            catch (e) {\n                uni.__f__('error', 'at pages/index/index.uvue:122', e);\n                uni.showToast({\n                    title: '页面跳转失败',\n                    icon: 'none'\n                });\n            }\n        },\n        /**\n         * @description 跳转到AI页面\n         */\n        goToAI() {\n            if (!this.isDragging) {\n                try {\n                    Routes.navigator.toAI();\n                }\n                catch (err) {\n                    uni.__f__('error', 'at pages/index/index.uvue:138', '跳转AI页面失败:', err);\n                    uni.showToast({\n                        title: '页面跳转失败',\n                        icon: 'none'\n                    });\n                }\n            }\n        },\n        /**\n         * @description 触摸开始事件处理\n         * @param {Object} e - 触摸事件对象\n         */\n        onTouchStart(e = null) {\n            this.isDragging = false;\n            this.startPosition = {\n                x: e.touches[0].clientX - this.avatarPosition.x,\n                y: e.touches[0].clientY - this.avatarPosition.y\n            };\n        },\n        /**\n         * @description 触摸移动事件处理\n         * @param {Object} e - 触摸事件对象\n         */\n        onTouchMove(e = null) {\n            this.isDragging = true;\n            // 计算新位置\n            let newX = e.touches[0].clientX - this.startPosition.x;\n            let newY = e.touches[0].clientY - this.startPosition.y;\n            // 限制拖动范围\n            const maxX = this.screenInfo.width - 60; // 头像宽度为60px\n            const maxY = this.screenInfo.height - this.screenInfo.tabBarHeight - 60; // 减去底部导航栏高度\n            newX = Math.max(0, Math.min(newX, maxX));\n            newY = Math.max(0, Math.min(newY, maxY));\n            this.avatarPosition = {\n                x: newX,\n                y: newY\n            };\n        },\n        /**\n         * @description 微信小程序movable-view移动变化事件\n         * @param {Object} e - 事件对象\n         */\n        onMoveChange(e = null) {\n            this.isDragging = true;\n            // 更新位置\n            let newX = e.detail.x;\n            let newY = e.detail.y;\n            // 限制Y轴不进入底部导航栏区域\n            const maxY = this.screenInfo.height - this.screenInfo.tabBarHeight - 60;\n            if (newY > maxY) {\n                newY = maxY;\n                // 由于微信小程序无法直接修改movable-view的位置，需要延迟设置\n                setTimeout(() => {\n                    this.avatarPosition.y = maxY;\n                }, 10);\n            }\n            this.avatarPosition = {\n                x: newX,\n                y: newY\n            };\n        },\n        /**\n         * @description 触摸结束事件处理\n         */\n        onTouchEnd() {\n            setTimeout(() => {\n                this.isDragging = false;\n            }, 50);\n        }\n    }\n});\n//# sourceMappingURL=E:/yanshilu%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AFyanshilu/pages/index/index.uvue?vue&type=script&lang.uts.js.map","references":["E:/yanshilu小程序前端/前端yanshilu/components/tab-bar/tab-bar.uvue.ts","E:/yanshilu小程序前端/前端yanshilu/utils/routes.js"],"uniExtApis":["uni.hideTabBar","uni.getSystemInfoSync","uni.__f__","uni.showToast"],"map":"{\"version\":3,\"file\":\"index.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
