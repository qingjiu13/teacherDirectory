{"code":"import { defineComponent } from \"vue\";\n/**\n * @description 个人中心页面\n */\nimport TabBar from '../../components/tab-bar/tab-bar.uvue';\nimport { Navigator, CommonRoutes } from '../../utils/routes.js';\nimport { isLoggedIn, getUserInfo, checkLogin, logout } from '../../utils/checkload.js';\nexport default defineComponent({\n    components: {\n        TabBar\n    },\n    data() {\n        return {\n            userInfo: null\n        };\n    },\n    onLoad() {\n        /**\n         * 页面加载时执行\n         */\n        this.checkLoginStatus();\n    },\n    onShow() {\n        /**\n         * 确保系统tabBar被隐藏\n         */\n        uni.hideTabBar();\n        // 每次显示页面时检查登录状态，以便更新页面显示\n        this.checkLoginStatus();\n    },\n    methods: {\n        /**\n         * @description 检查登录状态\n         */\n        checkLoginStatus() {\n            // 检查是否已登录\n            if (isLoggedIn()) {\n                // 获取用户信息\n                this.userInfo = getUserInfo();\n            }\n            else {\n                this.userInfo = null;\n            }\n        },\n        /**\n         * @description 处理头像点击\n         */\n        handleAvatarClick() {\n            if (!this.userInfo) {\n                // 未登录，跳转到登录页\n                Navigator.toLogin('/pages/mine/mine');\n            }\n            else {\n                // 已登录，跳转到个人资料页\n                this.navigateTo('/pages/mine/profile/profile');\n            }\n        },\n        /**\n         * @description 处理登录文本点击\n         */\n        handleLoginClick() {\n            if (!this.userInfo) {\n                // 未登录，跳转到登录页\n                Navigator.toLogin('/pages/mine/mine');\n            }\n            else {\n                // 已登录，跳转到个人资料页\n                this.navigateTo('/pages/mine/profile/profile');\n            }\n        },\n        /**\n         * @description 处理退出登录\n         */\n        handleLogout() {\n            uni.showModal({\n                title: '提示',\n                content: '确定要退出登录吗？',\n                success: (res) => {\n                    if (res.confirm) {\n                        // 调用退出登录方法\n                        logout();\n                        // 更新页面显示\n                        this.userInfo = null;\n                    }\n                }\n            });\n        },\n        /**\n         * 页面跳转方法\n         * @param {string} url - 目标页面路径\n         */\n        navigateTo(url = null) {\n            // 有些页面需要登录才能访问\n            const requiresLogin = [\n                '/pages/order/order',\n                '/pages/wallet/wallet',\n                '/pages/certification/certification',\n                '/pages/service/service',\n                '/pages/mine/profile/profile'\n            ];\n            // 如果需要登录的页面且未登录，则先检查登录状态\n            if (requiresLogin.includes(url) && !isLoggedIn()) {\n                // 检查登录状态，未登录会自动跳转到登录页\n                checkLogin(new UTSJSONObject({\n                    redirect: url\n                }));\n                return null;\n            }\n            // 正常跳转\n            uni.navigateTo({\n                url: url\n            });\n        },\n        /**\n         * @description 跳转到我的帖子页面\n         */\n        goToMyPosts() {\n            // 检查是否已登录\n            if (!checkLogin(new UTSJSONObject({ redirect: '/pages/mine/minepost' }))) {\n                return null;\n            }\n            try {\n                // 使用主包标准路径格式\n                uni.navigateTo({\n                    url: '/pages/mine/minepost',\n                    fail: (err) => {\n                        uni.__f__('error', 'at pages/mine/mine.uvue:223', '跳转失败:', err);\n                        uni.showToast({\n                            title: '页面跳转失败',\n                            icon: 'none'\n                        });\n                    }\n                });\n            }\n            catch (e) {\n                uni.__f__('error', 'at pages/mine/mine.uvue:231', '跳转异常:', e);\n            }\n        },\n        /**\n         * @description 跳转到粉丝列表页面\n         */\n        goToFansList() {\n            if (!checkLogin(new UTSJSONObject({ redirect: '/pages/mine/fans/fans' }))) {\n                return null;\n            }\n            uni.navigateTo({\n                url: '/pages/mine/fans/fans'\n            });\n        },\n        /**\n         * @description 跳转到关注列表页面\n         */\n        goToFollowList() {\n            if (!checkLogin(new UTSJSONObject({ redirect: '/pages/mine/follow/follow' }))) {\n                return null;\n            }\n            uni.navigateTo({\n                url: '/pages/mine/follow/follow'\n            });\n        },\n        /**\n         * @description 跳转到收藏页面\n         */\n        goToFavorites() {\n            if (!checkLogin(new UTSJSONObject({ redirect: '/pages/mine/favorites/favorites' }))) {\n                return null;\n            }\n            uni.navigateTo({\n                url: '/pages/mine/favorites/favorites'\n            });\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu/pages/mine/mine.uvue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu/components/tab-bar/tab-bar.uvue.ts","E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu/utils/routes.js","E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu/utils/checkload.js"],"uniExtApis":["uni.hideTabBar","uni.showModal","uni.navigateTo","uni.__f__","uni.showToast"],"map":"{\"version\":3,\"file\":\"mine.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"mine.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
