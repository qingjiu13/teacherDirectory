{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\n/**\n * @description AI择校第四步页面\n */\nimport { aiSelectionApis } from '../../../config.js';\nexport default defineComponent({\n    data() {\n        return {\n            searchText: '',\n            showMajorList: false,\n            majors: [],\n            studyModes: ['全日制', '非全日制'],\n            selectedMajor: null,\n            selectedMode: '',\n            loading: false,\n            // 添加本地备用数据，防止云函数失败 - 包含考研专业的名称、编号和类别\n            localMajors: [\n                new UTSJSONObject({ code: '0801', name: '计算机科学与技术', category: '学术学位' }),\n                new UTSJSONObject({ code: '0835', name: '软件工程', category: '学术学位' }),\n                new UTSJSONObject({ code: '0854', name: '电子信息', category: '专业学位' }),\n                new UTSJSONObject({ code: '0812', name: '计算机技术', category: '专业学位' }),\n                new UTSJSONObject({ code: '0251', name: '金融', category: '专业学位' }),\n                new UTSJSONObject({ code: '0351', name: '法律', category: '专业学位' }),\n                new UTSJSONObject({ code: '0452', name: '体育', category: '专业学位' }),\n                new UTSJSONObject({ code: '0451', name: '教育', category: '专业学位' }),\n                new UTSJSONObject({ code: '0551', name: '翻译', category: '专业学位' }),\n                new UTSJSONObject({ code: '0501', name: '中国语言文学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0701', name: '数学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0702', name: '物理学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0703', name: '化学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0710', name: '生物学', category: '学术学位' }),\n                new UTSJSONObject({ code: '1002', name: '临床医学', category: '学术学位' }),\n                new UTSJSONObject({ code: '1001', name: '基础医学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0202', name: '应用经济学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0201', name: '理论经济学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0303', name: '社会学', category: '学术学位' }),\n                new UTSJSONObject({ code: '0304', name: '民族学', category: '学术学位' })\n            ]\n        };\n    },\n    computed: {\n        /**\n         * @description 过滤后的专业列表\n         * @returns {Array} 过滤后的专业列表\n         */\n        filteredMajors() {\n            const majorsToFilter = this.majors.length > 0 ? this.majors : this.localMajors;\n            if (!this.searchText)\n                return majorsToFilter;\n            const keyword = this.searchText.toLowerCase();\n            return majorsToFilter.filter(major => {\n                return major.name.toLowerCase().includes(keyword) ||\n                    major.code.includes(keyword) ||\n                    major.category.toLowerCase().includes(keyword);\n            });\n        }\n    },\n    onLoad() {\n        // 加载专业数据\n        this.getMajorData();\n        // 检查是否有保存的数据，如果有则回显\n        const savedMajorJSON = uni.getStorageSync('step4_major');\n        const savedMode = uni.getStorageSync('step4_mode');\n        if (savedMajorJSON) {\n            try {\n                this.selectedMajor = UTS.JSON.parse(savedMajorJSON);\n                this.searchText = this.selectedMajor.name;\n            }\n            catch (e) {\n                uni.__f__('error', 'at pages/ai/selection/step4.uvue:135', '解析已保存专业数据失败:', e);\n            }\n        }\n        if (savedMode) {\n            this.selectedMode = savedMode;\n        }\n    },\n    methods: {\n        /**\n         * @description 获取报考专业数据\n         */\n        getMajorData() {\n            return __awaiter(this, void 0, void 0, function* () {\n                this.loading = true;\n                try {\n                    const result = yield uniCloud.callFunction({\n                        name: aiSelectionApis.getGraduateMajors,\n                        data: new UTSJSONObject({})\n                    });\n                    if (result.result && result.result.code === 0) {\n                        this.majors = result.result.data || [];\n                        uni.__f__('log', 'at pages/ai/selection/step4.uvue:156', '获取到专业数据:', this.majors);\n                    }\n                    else {\n                        uni.__f__('warn', 'at pages/ai/selection/step4.uvue:158', '使用本地专业列表');\n                        this.majors = this.localMajors;\n                    }\n                }\n                catch (e) {\n                    uni.__f__('error', 'at pages/ai/selection/step4.uvue:162', '获取专业数据失败:', e);\n                    this.majors = this.localMajors;\n                    uni.showToast({\n                        title: '获取专业数据失败',\n                        icon: 'none'\n                    });\n                }\n                finally {\n                    this.loading = false;\n                }\n            });\n        },\n        /**\n         * @description 根据关键词搜索专业\n         * @param {String} keyword - 搜索关键词\n         */\n        searchMajors(keyword = null) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!keyword)\n                    return Promise.resolve(null);\n                this.loading = true;\n                try {\n                    const result = yield uniCloud.callFunction({\n                        name: aiSelectionApis.getGraduateMajors,\n                        data: new UTSJSONObject({ keyword })\n                    });\n                    if (result.result && result.result.code === 0) {\n                        // 只在有结果时更新列表，避免清空\n                        if (result.result.data && result.result.data.length > 0) {\n                            this.majors = result.result.data;\n                        }\n                    }\n                }\n                catch (e) {\n                    uni.__f__('error', 'at pages/ai/selection/step4.uvue:192', '搜索专业失败:', e);\n                }\n                finally {\n                    this.loading = false;\n                }\n            });\n        },\n        /**\n         * @description 选择专业\n         * @param {Object} major - 选择的专业对象，包含编号、名称和类别\n         */\n        selectMajor(major = null) {\n            this.searchText = major.name;\n            this.selectedMajor = major;\n            this.showMajorList = false;\n            // 保存到本地存储 - 将对象转为JSON字符串\n            uni.setStorageSync('step4_major', UTS.JSON.stringify(major));\n        },\n        /**\n         * @description 选择学习方式\n         * @param {String} mode - 选择的学习方式\n         */\n        selectMode(mode = null) {\n            this.selectedMode = mode;\n            // 保存到本地存储\n            uni.setStorageSync('step4_mode', mode);\n        },\n        /**\n         * @description 返回上一步\n         */\n        prevPage() {\n            uni.navigateBack();\n        },\n        /**\n         * @description 进入下一步\n         */\n        nextPage() {\n            if (!this.selectedMajor || !this.selectedMode) {\n                uni.showToast({\n                    title: '请选择完整信息',\n                    icon: 'none'\n                });\n                return null;\n            }\n            uni.navigateTo({\n                url: '/pages/ai/selection/step5'\n            });\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu/pages/ai/selection/step4.uvue?vue&type=script&lang.uts.js.map","references":["E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu/config.js"],"uniExtApis":["uni.getStorageSync","uni.__f__","uniCloud.callFunction","uni.showToast","uni.setStorageSync","uni.navigateBack","uni.navigateTo"],"map":"{\"version\":3,\"file\":\"step4.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"step4.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
