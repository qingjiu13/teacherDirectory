{"code":"import { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            posts: [],\n            currentPage: 1,\n            isLoading: false,\n            hasMore: true,\n            isRefreshing: false\n        };\n    },\n    onLoad() {\n        // 页面加载时\n        this.loadMyPosts();\n    },\n    // 下拉刷新\n    onPullDownRefresh() {\n        this.currentPage = 1;\n        this.posts = [];\n        this.loadMyPosts(() => {\n            uni.stopPullDownRefresh();\n        });\n    },\n    // 上拉加载更多\n    onReachBottom() {\n        if (this.hasMore && !this.isLoading) {\n            this.loadMorePosts();\n        }\n    },\n    methods: {\n        /**\n         * @description 返回上一页\n         */\n        navigateBack() {\n            uni.navigateBack();\n        },\n        /**\n         * @description 加载我的帖子列表\n         * @param {Function} callback - 完成后的回调函数\n         */\n        loadMyPosts(callback = null) {\n            if (this.isLoading)\n                return null;\n            this.isLoading = true;\n            // 构建请求参数 - 这里只需要分页相关参数，因为是获取当前用户的帖子\n            const params = new UTSJSONObject({\n                page: this.currentPage,\n                pageSize: 10\n            });\n            // 模拟数据，实际应用中应该调用API\n            const mockPosts = this.getMockData();\n            this.posts = this.currentPage === 1 ? mockPosts : [...this.posts, ...mockPosts];\n            this.hasMore = this.currentPage < 2; // 模拟2页数据\n            setTimeout(() => {\n                this.isLoading = false;\n                callback && callback();\n            }, 500);\n            // 实际API调用（注释掉，等待后端接口完成后再取消注释）\n            /*\n            uni.request({\n              url: 'YOUR_API_URL/user/posts',\n              data: params,\n              method: 'GET',\n              success: (res) => {\n                if (res.statusCode === 200 && res.data) {\n                  if (this.currentPage === 1) {\n                    this.posts = res.data.posts || [];\n                  } else {\n                    this.posts = [...this.posts, ...(res.data.posts || [])];\n                  }\n                  \n                  this.hasMore = res.data.hasMore || false;\n                } else {\n                  uni.showToast({\n                    title: '加载失败',\n                    icon: 'none'\n                  });\n                }\n              },\n              fail: (err) => {\n                uni.__f__('error','at pages/mine/minepost.uvue:150','请求失败:', err);\n                uni.showToast({\n                  title: '网络异常',\n                  icon: 'none'\n                });\n              },\n              complete: () => {\n                this.isLoading = false;\n                callback && callback();\n              }\n            });\n            */\n        },\n        /**\n         * @description 加载更多帖子\n         */\n        loadMorePosts() {\n            this.currentPage++;\n            this.loadMyPosts();\n        },\n        /**\n         * @description 查看帖子详情\n         * @param {Number} postId - 帖子ID\n         */\n        viewPostDetail(postId = null) {\n            uni.navigateTo({\n                url: `/pages/post/detail?id=${postId}`\n            });\n        },\n        /**\n         * @description 点赞帖子\n         * @param {Object} post - 帖子对象\n         */\n        likePost(post = null) {\n            const action = post.isLiked ? 'unlike' : 'like';\n            uni.request({\n                url: `YOUR_API_URL/post/${action}`,\n                method: 'POST',\n                data: new UTSJSONObject({ postId: post.id }),\n                success: (res) => {\n                    if (res.statusCode === 200) {\n                        post.isLiked = !post.isLiked;\n                        post.likeCount += post.isLiked ? 1 : -1;\n                    }\n                }\n            });\n        },\n        /**\n         * @description 评论帖子\n         * @param {Object} post - 帖子对象\n         */\n        commentPost(post = null) {\n            uni.navigateTo({\n                url: `/pages/post/detail?id=${post.id}&showComment=true`\n            });\n        },\n        /**\n         * @description 收藏帖子\n         * @param {Object} post - 帖子对象\n         */\n        collectPost(post = null) {\n            const action = post.isCollected ? 'uncollect' : 'collect';\n            uni.request({\n                url: `YOUR_API_URL/post/${action}`,\n                method: 'POST',\n                data: new UTSJSONObject({ postId: post.id }),\n                success: (res) => {\n                    if (res.statusCode === 200) {\n                        post.isCollected = !post.isCollected;\n                        post.collectCount += post.isCollected ? 1 : -1;\n                        uni.showToast({\n                            title: post.isCollected ? '已收藏' : '已取消收藏',\n                            icon: 'none'\n                        });\n                    }\n                }\n            });\n        },\n        /**\n         * @description 分享帖子\n         * @param {Object} post - 帖子对象\n         */\n        sharePost(post = null) {\n            uni.showActionSheet({\n                itemList: ['分享给好友', '分享到微信好友', '分享到微信群聊', '分享到朋友圈'],\n                success: (res) => {\n                    const index = res.tapIndex;\n                    // 根据选择执行不同的分享操作\n                    switch (index) {\n                        case 0: // 分享给好友\n                            uni.navigateTo({\n                                url: `/pages/share/friends?postId=${post.id}`\n                            });\n                            break;\n                        case 1: // 分享到微信好友\n                        case 2: // 分享到微信群聊\n                        case 3: // 分享到朋友圈\n                            uni.share(new UTSJSONObject({\n                                provider: 'weixin',\n                                scene: index === 1 ? 'WXSceneSession' : (index === 2 ? 'WXSceneSession' : 'WXSceneTimeline'),\n                                type: 0,\n                                title: post.title || '分享内容',\n                                summary: post.content.substring(0, 50) + (post.content.length > 50 ? '...' : ''),\n                                imageUrl: post.images && post.images.length > 0 ? post.images[0] : '/static/image/share_default.png',\n                                href: `YOUR_SHARE_URL/post/${post.id}`,\n                                success: function () {\n                                    uni.__f__('log', 'at pages/mine/minepost.uvue:266', '分享成功');\n                                    // 更新分享计数\n                                    post.shareCount++;\n                                },\n                                fail: function () {\n                                    uni.__f__('log', 'at pages/mine/minepost.uvue:271', '分享失败');\n                                }\n                            }));\n                            break;\n                    }\n                }\n            });\n        },\n        /**\n         * @description 获取模拟数据\n         * @return {Array} 模拟的帖子数据\n         */\n        getMockData() {\n            return [\n                new UTSJSONObject({\n                    id: 1,\n                    content: '今天分享一下考研复习经验，希望对大家有帮助！数学部分要注重基础，多做真题。#考研# #复习经验#',\n                    createTime: '2023-09-15 14:30',\n                    viewCount: 256,\n                    likeCount: 42,\n                    commentCount: 8,\n                    collectCount: 15,\n                    shareCount: 3,\n                    isLiked: false,\n                    isCollected: false,\n                    images: []\n                }),\n                new UTSJSONObject({\n                    id: 2,\n                    content: '考研英语阅读理解技巧分享，掌握这些方法效率提升50%！长难句分析方法和常见词汇搭配整理。',\n                    createTime: '2023-08-20 09:15',\n                    viewCount: 189,\n                    likeCount: 36,\n                    commentCount: 12,\n                    collectCount: 20,\n                    shareCount: 5,\n                    isLiked: true,\n                    isCollected: false,\n                    images: []\n                }),\n                new UTSJSONObject({\n                    id: 3,\n                    content: '考研政治复习时间规划，建议8月开始系统学习，10月开始真题训练，12月开始背诵考点。提供我整理的笔记供大家参考。',\n                    createTime: '2023-07-05 16:45',\n                    viewCount: 320,\n                    likeCount: 67,\n                    commentCount: 23,\n                    collectCount: 45,\n                    shareCount: 12,\n                    isLiked: false,\n                    isCollected: true,\n                    images: []\n                })\n            ];\n        }\n    }\n});\n//# sourceMappingURL=E:/%E7%A0%94%E5%B8%88%E5%BD%95%E4%B8%8E%E5%85%B6%E4%BB%96%E4%BA%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/teacherDirectory/%E5%89%8D%E7%AB%AFyanshilu/pages/mine/minepost.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.stopPullDownRefresh","uni.navigateBack","uni.navigateTo","uni.request","uni.showToast","uni.showActionSheet","uni.share","uni.__f__"],"map":"{\"version\":3,\"file\":\"minepost.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"minepost.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
