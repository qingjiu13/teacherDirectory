"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/routes.js"),n=require("../../utils/checkload.js"),i=e.defineComponent({components:{TabBar:()=>"../../components/tab-bar/tab-bar.js"},data:()=>({userInfo:null}),onLoad(){this.checkLoginStatus()},onShow(){e.index.hideTabBar(),this.checkLoginStatus()},methods:{checkLoginStatus(){n.isLoggedIn()?this.userInfo=n.getUserInfo():this.userInfo=null},handleAvatarClick(){this.userInfo?this.navigateTo("/pages/mine/profile/profile"):o.Navigator.toLogin("/pages/mine/mine")},handleLoginClick(){this.userInfo?this.navigateTo("/pages/mine/profile/profile"):o.Navigator.toLogin("/pages/mine/mine")},handleLogout(){e.index.showModal({title:"提示",content:"确定要退出登录吗？",success:e=>{e.confirm&&(n.logout(),this.userInfo=null)}})},navigateTo(o=null){if(["/pages/order/order","/pages/wallet/wallet","/pages/certification/certification","/pages/service/service","/pages/mine/profile/profile"].includes(o)&&!n.isLoggedIn())return n.checkLogin(new UTSJSONObject({redirect:o})),null;e.index.navigateTo({url:o})},goToMyPosts(){if(!n.checkLogin(new UTSJSONObject({redirect:"/pages/mine/minepost"})))return null;try{e.index.navigateTo({url:"/pages/mine/minepost",fail:o=>{e.index.__f__("error","at pages/mine/mine.uvue:223","跳转失败:",o),e.index.showToast({title:"页面跳转失败",icon:"none"})}})}catch(o){e.index.__f__("error","at pages/mine/mine.uvue:231","跳转异常:",o)}},goToFansList(){if(!n.checkLogin(new UTSJSONObject({redirect:"/pages/mine/fans/fans"})))return null;e.index.navigateTo({url:"/pages/mine/fans/fans"})},goToFollowList(){if(!n.checkLogin(new UTSJSONObject({redirect:"/pages/mine/follow/follow"})))return null;e.index.navigateTo({url:"/pages/mine/follow/follow"})},goToFavorites(){if(!n.checkLogin(new UTSJSONObject({redirect:"/pages/mine/favorites/favorites"})))return null;e.index.navigateTo({url:"/pages/mine/favorites/favorites"})}}});if(!Array){e.resolveComponent("tab-bar")()}Math;const t=e._export_sfc(i,[["render",function(o,n,i,t,a,s){return e.e({a:a.userInfo&&a.userInfo.avatarUrl||"/static/image/default_avatar.png",b:e.o(((...e)=>s.handleAvatarClick&&s.handleAvatarClick(...e))),c:e.t(a.userInfo?a.userInfo.nickname||"用户":"登录"),d:e.o(((...e)=>s.handleLoginClick&&s.handleLoginClick(...e))),e:a.userInfo},a.userInfo?{f:e.t(a.userInfo.tag||"标签")}:{},{g:e.t(a.userInfo&&a.userInfo.postCount||"0"),h:e.o(((...e)=>s.goToMyPosts&&s.goToMyPosts(...e))),i:e.t(a.userInfo&&a.userInfo.fansCount||"0"),j:e.o(((...e)=>s.goToFansList&&s.goToFansList(...e))),k:e.t(a.userInfo&&a.userInfo.followCount||"0"),l:e.o(((...e)=>s.goToFollowList&&s.goToFollowList(...e))),m:e.t(a.userInfo&&a.userInfo.favoriteCount||"0"),n:e.o(((...e)=>s.goToFavorites&&s.goToFavorites(...e))),o:e.o((e=>s.navigateTo("/pages/order/order"))),p:e.o((e=>s.navigateTo("/pages/wallet/wallet"))),q:e.o((e=>s.navigateTo("/pages/certification/certification"))),r:e.o((e=>s.navigateTo("/pages/service/service"))),s:e.o((e=>s.navigateTo("/pages/subscribe/subscribe"))),t:e.o((e=>s.navigateTo("/pages/contact/contact"))),v:a.userInfo},a.userInfo?{w:e.o(((...e)=>s.handleLogout&&s.handleLogout(...e)))}:{},{x:e.p({pageName:"mine"}),y:e.sei(o.virtualHostId,"view")})}]]);wx.createPage(t);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/mine/mine.js.map
