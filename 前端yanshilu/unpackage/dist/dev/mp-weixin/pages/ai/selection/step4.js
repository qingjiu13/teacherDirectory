"use strict";const e=require("../../../common/vendor.js"),t=require("../../../config.js"),a=e.defineComponent({name:"AISelectionStep4",data:()=>({searchText:"",showMajorList:!1,majors:[],studyModes:["全日制","非全日制"],selectedMajor:null,selectedMode:"",loading:!1,localMajors:[new UTSJSONObject({code:"0801",name:"计算机科学与技术",category:"学术学位"}),new UTSJSONObject({code:"0835",name:"软件工程",category:"学术学位"}),new UTSJSONObject({code:"0854",name:"电子信息",category:"专业学位"}),new UTSJSONObject({code:"0812",name:"计算机技术",category:"专业学位"}),new UTSJSONObject({code:"0251",name:"金融",category:"专业学位"}),new UTSJSONObject({code:"0351",name:"法律",category:"专业学位"}),new UTSJSONObject({code:"0452",name:"体育",category:"专业学位"}),new UTSJSONObject({code:"0451",name:"教育",category:"专业学位"}),new UTSJSONObject({code:"0551",name:"翻译",category:"专业学位"}),new UTSJSONObject({code:"0501",name:"中国语言文学",category:"学术学位"}),new UTSJSONObject({code:"0701",name:"数学",category:"学术学位"}),new UTSJSONObject({code:"0702",name:"物理学",category:"学术学位"}),new UTSJSONObject({code:"0703",name:"化学",category:"学术学位"}),new UTSJSONObject({code:"0710",name:"生物学",category:"学术学位"}),new UTSJSONObject({code:"1002",name:"临床医学",category:"学术学位"}),new UTSJSONObject({code:"1001",name:"基础医学",category:"学术学位"}),new UTSJSONObject({code:"0202",name:"应用经济学",category:"学术学位"}),new UTSJSONObject({code:"0201",name:"理论经济学",category:"学术学位"}),new UTSJSONObject({code:"0303",name:"社会学",category:"学术学位"}),new UTSJSONObject({code:"0304",name:"民族学",category:"学术学位"})]}),computed:{filteredMajors(){const e=this.majors.length>0?this.majors:this.localMajors;if(!this.searchText)return e;const t=this.searchText.toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(t)||e.code.includes(t)||e.category.toLowerCase().includes(t)))}},onLoad(){this.getMajorData();const t=e.index.getStorageSync("step4_major"),a=e.index.getStorageSync("step4_mode");if(t)try{this.selectedMajor=UTS.JSON.parse(t),this.searchText=this.selectedMajor.name}catch(o){e.index.__f__("error","at pages/AI/selection/step4.uvue:136","解析已保存专业数据失败:",o)}a&&(this.selectedMode=a)},methods:{getMajorData(){return e.__awaiter(this,void 0,void 0,(function*(){this.loading=!0;try{const a=yield e.Zs.callFunction({name:t.aiSelectionApis.getGraduateMajors,data:new UTSJSONObject({})});a.result&&0===a.result.code?(this.majors=a.result.data||[],e.index.__f__("log","at pages/AI/selection/step4.uvue:157","获取到专业数据:",this.majors)):(e.index.__f__("warn","at pages/AI/selection/step4.uvue:159","使用本地专业列表"),this.majors=this.localMajors)}catch(a){e.index.__f__("error","at pages/AI/selection/step4.uvue:163","获取专业数据失败:",a),this.majors=this.localMajors,e.index.showToast({title:"获取专业数据失败",icon:"none"})}finally{this.loading=!1}}))},searchMajors(a=null){return e.__awaiter(this,void 0,void 0,(function*(){if(!a)return Promise.resolve(null);this.loading=!0;try{const o=yield e.Zs.callFunction({name:t.aiSelectionApis.getGraduateMajors,data:new UTSJSONObject({keyword:a})});o.result&&0===o.result.code&&o.result.data&&o.result.data.length>0&&(this.majors=o.result.data)}catch(o){e.index.__f__("error","at pages/AI/selection/step4.uvue:193","搜索专业失败:",o)}finally{this.loading=!1}}))},selectMajor(t=null){this.searchText=t.name,this.selectedMajor=t,this.showMajorList=!1,e.index.setStorageSync("step4_major",UTS.JSON.stringify(t))},selectMode(t=null){this.selectedMode=t,e.index.setStorageSync("step4_mode",t)},prevPage(){e.index.navigateBack()},nextPage(){if(!this.selectedMajor||!this.selectedMode)return e.index.showToast({title:"请选择完整信息",icon:"none"}),null;e.index.navigateTo({url:"/pages/AI/selection/step5"})}}});const o=e._export_sfc(a,[["render",function(t,a,o,s,c,n){return e.e({a:e.o((e=>c.showMajorList=!0)),b:c.searchText,c:e.o((e=>c.searchText=e.detail.value)),d:c.showMajorList},c.showMajorList?{e:e.f(n.filteredMajors,((t,a,o)=>({a:e.t(t.name),b:e.t(t.code),c:e.t(t.category),d:a,e:e.o((e=>n.selectMajor(t)),a)})))}:{},{f:c.selectedMajor},c.selectedMajor?{g:e.t(c.selectedMajor.name),h:e.t(c.selectedMajor.code),i:e.t(c.selectedMajor.category)}:{},{j:e.f(c.studyModes,((t,a,o)=>({a:e.t(t),b:a,c:e.n(c.selectedMode===t?"active":""),d:e.o((e=>n.selectMode(t)),a)}))),k:e.o(((...e)=>n.prevPage&&n.prevPage(...e))),l:e.o(((...e)=>n.nextPage&&n.nextPage(...e))),m:e.sei(t.virtualHostId,"view")})}]]);wx.createPage(o);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/AI/selection/step4.js.map
