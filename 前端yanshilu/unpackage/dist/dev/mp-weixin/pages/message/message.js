"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=e.defineComponent({components:{TabBar:()=>"../../components/tab-bar/tab-bar.js"},data:()=>({searchKey:"",searchFriendKey:"",friendList:[new UTSJSONObject({id:"1",name:"张教授",avatar:"/static/image/default_avatar.png",lastMessage:"关于论文的修改建议已经发送给你了",lastMessageTime:Date.now()-36e5,unreadCount:2,title:"计算机科学教授"}),new UTSJSONObject({id:"2",name:"李老师",avatar:"/static/image/default_avatar.png",lastMessage:"下周一记得来参加组会",lastMessageTime:Date.now()-72e5,unreadCount:0,title:"软件工程讲师"}),new UTSJSONObject({id:"3",name:"学习群",avatar:"/static/image/default_avatar.png",lastMessage:"[有人@我] 请问这道题怎么解？",lastMessageTime:Date.now()-12e4,unreadCount:5,title:"群聊"}),new UTSJSONObject({id:"4",name:"系统通知",avatar:"/static/image/default_avatar.png",lastMessage:"您有新的课程提醒",lastMessageTime:Date.now()-864e5,unreadCount:0,title:"系统消息"})]}),methods:{navigateToChat(a=null){e.index.navigateTo({url:`/pages/message/chat?id=${a.id}&name=${a.name}`})},navigateToAddFriend(){e.index.__f__("log","at pages/message/message.uvue:117","点击了添加好友按钮"),e.index.navigateTo({url:"/pages/message/add",success:()=>{e.index.__f__("log","at pages/message/message.uvue:121","成功跳转到添加好友页面")},fail:a=>{e.index.__f__("error","at pages/message/message.uvue:124","跳转失败:",a),e.index.showToast({title:"跳转失败，请重试",icon:"none"})}})},showAddFriendPopup(){this.$refs.addFriendPopup.open()},closeAddFriendPopup(){this.$refs.addFriendPopup.close(),this.searchFriendKey=""},formatTime(e=null){const a=new Date(e),t=new Date-a;if(t<864e5)return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`;if(t<6048e5){return`星期${["日","一","二","三","四","五","六"][a.getDay()]}`}return`${a.getMonth()+1}月${a.getDate()}日`}}});if(!Array){e.resolveComponent("tab-bar")()}Math;const s=e._export_sfc(t,[["render",function(t,s,n,i,r,o){return{a:a._imports_0,b:e.o(((...e)=>o.navigateToAddFriend&&o.navigateToAddFriend(...e))),c:e.f(r.friendList,((a,t,s)=>e.e({a:a.avatar||"/static/image/default_avatar.png",b:a.unreadCount>0},a.unreadCount>0?{c:e.t(a.unreadCount)}:{},{d:e.t(a.name),e:e.t(o.formatTime(a.lastMessageTime)),f:e.t(a.lastMessage),g:a.id,h:e.o((e=>o.navigateToChat(a)),a.id)}))),d:e.o(((...e)=>t.loadMoreFriends&&t.loadMoreFriends(...e))),e:e.p({pageName:"message"}),f:e.sei(t.virtualHostId,"view")}}]]);wx.createPage(s);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/message/message.js.map
