"use strict";const o=require("../../common/vendor.js"),e=require("../../utils/routes.js"),t=o.defineComponent({data:()=>({userInfo:new UTSJSONObject({school:"",major:""}),inputValue:"",currentFunction:null,messages:[],activeDropdown:"",schoolList:["北京大学","清华大学","复旦大学","上海交通大学","浙江大学","南京大学","中国人民大学","武汉大学"],majorList:["计算机科学与技术","软件工程","人工智能","数据科学","网络工程","电子信息工程","通信工程","金融学"]}),onLoad(){this.getUserInfo()},methods:{getUserInfo(){try{const e=o.index.getStorageSync("userInfo");e&&(this.userInfo=UTS.JSON.parse(e))}catch(e){o.index.__f__("error","at pages/AI/AI.uvue:182","获取用户信息失败:",e)}},saveUserInfo(){try{o.index.setStorageSync("userInfo",UTS.JSON.stringify(this.userInfo))}catch(e){o.index.__f__("error","at pages/AI/AI.uvue:193","保存用户信息失败:",e)}},toggleDropdown(o=null){if(this.activeDropdown===o)return this.activeDropdown="",null;this.activeDropdown=o},selectOption(o=null,e=null){"school"===o?this.userInfo.school=e:"major"===o&&(this.userInfo.major=e),this.saveUserInfo(),this.activeDropdown=""},onPageTap(){this.activeDropdown&&(this.activeDropdown="")},stopEvent(o=null){o&&o.stopPropagation&&o.stopPropagation()},switchFunction(o=null){this.currentFunction=o;let e="通用";"school"===o?e="择校":"career"===o&&(e="职业规划"),this.messages.push({type:"system",content:`已切换到${e}模式`})},sendMessage(){if(!this.inputValue.trim())return null;this.messages.push({type:"user",content:this.inputValue}),new UTSJSONObject({content:this.inputValue,function:this.currentFunction,userInfo:this.userInfo}),setTimeout((()=>{let o="";o="school"===this.currentFunction?`关于择校问题，基于您就读的${this.userInfo.school||"(未设置学校)"}，${this.userInfo.major||"(未设置专业)"}专业，我的建议是...`:"career"===this.currentFunction?`关于职业规划，考虑到您在${this.userInfo.school||"(未设置学校)"}学习${this.userInfo.major||"(未设置专业)"}，您可以考虑以下职业方向...`:`您好，我是研师录AI助手，很高兴为您服务。您的问题是"${this.inputValue}"，我的回答是...`,this.messages.push({type:"ai",content:o})}),500),this.inputValue=""},goBack(){try{e.Routes.navigator.navigateBack()}catch(t){o.index.__f__("error","at pages/AI/AI.uvue:324","返回失败:",t),e.Routes.navigator.reLaunch(e.Routes.main.INDEX)}}}});const s=o._export_sfc(t,[["render",function(e,t,s,n,r,i){return o.e({a:r.userInfo.school},r.userInfo.school?{b:o.t(r.userInfo.school)}:{},{c:"school"===r.activeDropdown?1:"",d:o.o((o=>i.toggleDropdown("school"))),e:"school"===r.activeDropdown?1:"",f:"school"===r.activeDropdown},"school"===r.activeDropdown?{g:o.f(r.schoolList,((e,t,s)=>({a:o.t(e),b:t,c:r.userInfo.school===e?1:"",d:o.o((o=>i.selectOption("school",e)),t)}))),h:o.o(((...o)=>i.stopEvent&&i.stopEvent(...o)))}:{},{i:r.userInfo.major},r.userInfo.major?{j:o.t(r.userInfo.major)}:{},{k:"major"===r.activeDropdown?1:"",l:o.o((o=>i.toggleDropdown("major"))),m:"major"===r.activeDropdown?1:"",n:"major"===r.activeDropdown},"major"===r.activeDropdown?{o:o.f(r.majorList,((e,t,s)=>({a:o.t(e),b:t,c:r.userInfo.major===e?1:"",d:o.o((o=>i.selectOption("major",e)),t)}))),p:o.o(((...o)=>i.stopEvent&&i.stopEvent(...o)))}:{},{q:0===r.messages.length},0===r.messages.length?{}:{r:o.f(r.messages,((e,t,s)=>({a:o.t(e.content),b:t,c:o.n(e.type)})))},{s:null===r.currentFunction?1:"",t:o.o((o=>i.switchFunction(null))),v:"school"===r.currentFunction?1:"",w:o.o((o=>i.switchFunction("school"))),x:"career"===r.currentFunction?1:"",y:o.o((o=>i.switchFunction("career"))),z:o.o(((...o)=>i.sendMessage&&i.sendMessage(...o))),A:r.inputValue,B:o.o((o=>r.inputValue=o.detail.value)),C:o.o(((...o)=>i.sendMessage&&i.sendMessage(...o))),D:o.sei(e.virtualHostId,"view"),E:o.o(((...o)=>i.onPageTap&&i.onPageTap(...o)))})}]]);wx.createPage(s);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/AI/AI.js.map
