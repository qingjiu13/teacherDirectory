{"version":3,"file":"AI.js","sources":["pages/AI/AI.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQUkvQUkudXZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"page-container\">\r\n\r\n\t\t<!-- 微信小程序专用视图包装器 -->\r\n\t\t<view class=\"mp-container\">\r\n\r\n\t\t\t\r\n\t\t\t<!-- 筛选区域 -->\r\n\t\t\t<view class=\"filter-section\">\r\n\t\t\t\t<view class=\"filter-content\">\r\n\t\t\t\t\t<view class=\"filter-item school\">\r\n\t\t\t\t\t\t<text class=\"filter-label\">所在学校：</text>\r\n\t\t\t\t\t\t<input class=\"filter-input\" v-model=\"userInfo.school\" placeholder=\"请输入学校\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"filter-item major\">\r\n\t\t\t\t\t\t<text class=\"filter-label\">专业：</text>\r\n\t\t\t\t\t\t<input class=\"filter-input\" v-model=\"userInfo.major\" placeholder=\"请输入专业\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button class=\"save-button\" @click=\"saveUserInfo\">保存筛选</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 回答区域 -->\r\n\t\t\t<view class=\"answer-section\">\r\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"answer-scroll\">\r\n\t\t\t\t\t<view v-if=\"messages.length === 0\" class=\"empty-message\">\r\n\t\t\t\t\t\t<text>您可以开始提问了...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"message-list\">\r\n\t\t\t\t\t\t<view v-for=\"(msg, index) in messages\" :key=\"index\" class=\"message-item\" :class=\"msg.type\">\r\n\t\t\t\t\t\t\t<text class=\"message-content\">{{msg.content}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 功能区域 -->\r\n\t\t\t<view class=\"function-section\">\r\n\t\t\t\t<view class=\"function-list\">\r\n\t\t\t\t\t<view class=\"function-item\" \r\n\t\t\t\t\t\t:class=\"{active: currentFunction === null}\" \r\n\t\t\t\t\t\t@click=\"switchFunction(null)\">\r\n\t\t\t\t\t\t<text class=\"function-item-text\">通用</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"function-item\" \r\n\t\t\t\t\t\t:class=\"{active: currentFunction === 'school'}\" \r\n\t\t\t\t\t\t@click=\"switchFunction('school')\">\r\n\t\t\t\t\t\t<text class=\"function-item-text\">择校</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"function-item\" \r\n\t\t\t\t\t\t:class=\"{active: currentFunction === 'career'}\" \r\n\t\t\t\t\t\t@click=\"switchFunction('career')\">\r\n\t\t\t\t\t\t<text class=\"function-item-text\">职业规划</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 输入区域 -->\r\n\t\t\t<view class=\"input-section\">\r\n\t\t\t\t<input class=\"message-input\" \r\n\t\t\t\t\tv-model=\"inputValue\" \r\n\t\t\t\t\tplaceholder=\"请输入您的问题...\" \r\n\t\t\t\t\t@confirm=\"sendMessage\" />\r\n\t\t\t\t<button class=\"send-button\" @click=\"sendMessage\">发送</button>\r\n\t\t\t</view>\r\n\t\t\t\r\n\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\t/**\r\n\t * @description AI助手页面\r\n\t */\r\n\timport Routes from '../../utils/routes.js';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserInfo: {\r\n\t\t\t\t\tschool: '',\r\n\t\t\t\t\tmajor: ''\r\n\t\t\t\t},\r\n\t\t\t\tinputValue: '',\r\n\t\t\t\tcurrentFunction: null, // null, 'school', 'career'\r\n\t\t\t\tmessages: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t/**\r\n\t\t\t * @description 页面加载时的处理逻辑\r\n\t\t\t */\r\n\t\t\t// 尝试获取用户信息\r\n\t\t\tthis.getUserInfo();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description 获取用户信息\r\n\t\t\t */\r\n\t\t\tgetUserInfo() {\r\n\t\t\t\t// 这里可以从本地存储或API获取用户信息\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\t\t\t\tif (userInfo) {\r\n\t\t\t\t\t\tthis.userInfo = JSON.parse(userInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.uvue:110','获取用户信息失败:', e);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 保存用户信息\r\n\t\t\t */\r\n\t\t\tsaveUserInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.setStorageSync('userInfo', JSON.stringify(this.userInfo));\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.uvue:125','保存用户信息失败:', e);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 切换功能模式\r\n\t\t\t * @param {String} mode - 功能模式\r\n\t\t\t */\r\n\t\t\tswitchFunction(mode) {\r\n\t\t\t\tthis.currentFunction = mode;\r\n\t\t\t\t\r\n\t\t\t\t// 显示当前模式提示\r\n\t\t\t\tlet modeName = '通用';\r\n\t\t\t\tif (mode === 'school') {\r\n\t\t\t\t\tmodeName = '择校';\r\n\t\t\t\t} else if (mode === 'career') {\r\n\t\t\t\t\tmodeName = '职业规划';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 添加系统消息\r\n\t\t\t\tthis.messages.push({\r\n\t\t\t\t\ttype: 'system',\r\n\t\t\t\t\tcontent: `已切换到${modeName}模式`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 发送消息\r\n\t\t\t */\r\n\t\t\tsendMessage() {\r\n\t\t\t\t// 发送消息的逻辑\r\n\t\t\t\tif (!this.inputValue.trim()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 添加用户消息\r\n\t\t\t\tthis.messages.push({\r\n\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\tcontent: this.inputValue\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 根据当前功能模式处理消息\r\n\t\t\t\tconst message = {\r\n\t\t\t\t\tcontent: this.inputValue,\r\n\t\t\t\t\tfunction: this.currentFunction,\r\n\t\t\t\t\tuserInfo: this.userInfo\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 模拟AI回复\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet aiResponse = '';\r\n\t\t\t\t\tif (this.currentFunction === 'school') {\r\n\t\t\t\t\t\taiResponse = `关于择校问题，基于您就读的${this.userInfo.school || '(未设置学校)'}，${this.userInfo.major || '(未设置专业)'}专业，我的建议是...`;\r\n\t\t\t\t\t} else if (this.currentFunction === 'career') {\r\n\t\t\t\t\t\taiResponse = `关于职业规划，考虑到您在${this.userInfo.school || '(未设置学校)'}学习${this.userInfo.major || '(未设置专业)'}，您可以考虑以下职业方向...`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taiResponse = `您好，我是研师录AI助手，很高兴为您服务。您的问题是\"${this.inputValue}\"，我的回答是...`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.messages.push({\r\n\t\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\t\tcontent: aiResponse\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 500);\r\n\t\t\t\t\r\n\t\t\t\t// 清空输入\r\n\t\t\t\tthis.inputValue = '';\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 返回首页\r\n\t\t\t */\r\n\t\t\tgoBack() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tRoutes.navigator.navigateBack();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.__f__('error','at pages/AI/AI.uvue:205','返回失败:', e);\r\n\t\t\t\t\tRoutes.navigator.reLaunch(Routes.main.INDEX);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.page-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 20px;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\r\n\t.mp-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t\r\n\t/* 筛选区域 */\r\n\t.filter-section {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #f0f0f5;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 15px;\r\n\t}\r\n\t\r\n\t.filter-content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.filter-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t\r\n\t.filter-label {\r\n\t\twidth: 100px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t.filter-input {\r\n\t\tflex: 1;\r\n\t\theight: 30px;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 4px;\r\n\t\tpadding: 0 10px;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t\r\n\t.save-button {\r\n\t\talign-self: flex-end;\r\n\t\twidth: 100px;\r\n\t\theight: 30px;\r\n\t\tfont-size: 14px;\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n\t/* 回答区域 */\r\n\t.answer-section {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #f0f0f5;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 20px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.answer-scroll {\r\n\t\theight: 100%;\r\n\t\tpadding: 15px;\r\n\t}\r\n\t\r\n\t.empty-message {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.empty-message text {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t\r\n\t.message-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.message-item {\r\n\t\tmax-width: 80%;\r\n\t\tpadding: 10px 15px;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t\r\n\t.message-item.user {\r\n\t\talign-self: flex-end;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\t\r\n\t.message-item.user .message-content {\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n\t.message-item.ai {\r\n\t\talign-self: flex-start;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t\r\n\t.message-item.system {\r\n\t\talign-self: center;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tpadding: 5px 10px;\r\n\t\tborder-radius: 15px;\r\n\t}\r\n\t\r\n\t.message-item.system .message-content {\r\n\t\tcolor: #666;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\t\r\n\t.message-content {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t/* 功能区域 */\r\n\t.function-section {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #f0f0f5;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 10px;\r\n\t}\r\n\t\r\n\t.function-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\t\r\n\t.function-item {\r\n\t\tpadding: 8px 15px;\r\n\t\tborder-radius: 15px;\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\t\r\n\t.function-item.active {\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\t\r\n\t.function-item.active .function-item-text {\r\n\t\tcolor: #fff;\r\n\t}\r\n\t\r\n\t.function-item-text {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t/* 输入区域 */\r\n\t.input-section {\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.message-input {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f0f0f5;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 0 15px;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\t\r\n\t.send-button {\r\n\t\twidth: 80px;\r\n\t\theight: 50px;\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 8px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n</style> ","import MiniProgramPage from 'E:/yanshilu小程序前端/前端yanshilu/pages/AI/AI.uvue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","data","userInfo","UTSJSONObject","school","major","inputValue","currentFunction","messages","onLoad","this","getUserInfo","methods","uni","getStorageSync","UTS","JSON","parse","e","index","__f__","saveUserInfo","setStorageSync","stringify","showToast","title","icon","switchFunction","mode","modeName","push","type","content","sendMessage","trim","function","setTimeout","aiResponse","goBack","navigator","navigateBack","Routes","reLaunch","main","INDEX","wx","createPage","MiniProgramPage"],"mappings":"0FA8ECA,EAAeC,kBAAA,CACdC,KAAI,KACI,CACNC,SAAU,IAAAC,cAAA,CACTC,OAAQ,GACRC,MAAO,KAERC,WAAY,GACZC,gBAAiB,KACjBC,SAAU,KAGZC,SAKCC,KAAKC,aACL,EACDC,QAAS,CAIRD,cAEK,IACH,MAAMT,EAAWW,EAAAA,MAAIC,eAAe,YAChCZ,IACHQ,KAAKR,SAAWa,IAAAC,KAAKC,MAAMf,GAI7B,OAFSgB,GACRL,EAAGM,MAACC,MAAM,QAAQ,0BAA0B,YAAaF,EAC1D,CACA,EAKDG,eACK,YACCC,eAAe,WAAYP,IAAAC,KAAKO,UAAUb,KAAKR,WACnDW,EAAAA,MAAIW,UAAU,CACbC,MAAO,OACPC,KAAM,WAQR,OANSR,GACRL,EAAGM,MAACC,MAAM,QAAQ,0BAA0B,YAAaF,GACzDL,EAAAA,MAAIW,UAAU,CACbC,MAAO,OACPC,KAAM,QAER,CACA,EAMDC,eAAeC,EAAI,MAClBlB,KAAKH,gBAAkBqB,EAGvB,IAAIC,EAAW,KACF,WAATD,EACQC,EAAA,KACQ,WAATD,IACCC,EAAA,QAIZnB,KAAKF,SAASsB,KAAK,CAClBC,KAAM,SACNC,QAAS,OAAOH,OAEjB,EAKDI,cAEC,IAAKvB,KAAKJ,WAAW4B,OACd,OAAA,KAIPxB,KAAKF,SAASsB,KAAK,CAClBC,KAAM,OACNC,QAAStB,KAAKJ,aAIC,IAAAH,cAAA,CACf6B,QAAStB,KAAKJ,WACd6B,SAAUzB,KAAKH,gBACfL,SAAUQ,KAAKR,WAIhBkC,YAAW,KACV,IAAIC,EAAa,GAEHA,EADe,WAAzB3B,KAAKH,gBACK,gBAAgBG,KAAKR,SAASE,QAAU,aAAaM,KAAKR,SAASG,OAAS,uBACtD,WAAzBK,KAAKH,gBACF,eAAeG,KAAKR,SAASE,QAAU,cAAcM,KAAKR,SAASG,OAAS,2BAE5E,8BAA8BK,KAAKJ,uBAGjDI,KAAKF,SAASsB,KAAK,CAClBC,KAAM,KACNC,QAASK,GACT,GACC,KAGH3B,KAAKJ,WAAa,EAClB,EAKDgC,SACK,aACIC,UAAUC,cAIlB,OAHStB,GACRL,EAAGM,MAACC,MAAM,QAAQ,0BAA0B,QAASF,GACrDuB,EAAMA,OAACF,UAAUG,SAASD,EAAMA,OAACE,KAAKC,MACvC,CACD,uxBC9MHC,GAAGC,WAAWC"}