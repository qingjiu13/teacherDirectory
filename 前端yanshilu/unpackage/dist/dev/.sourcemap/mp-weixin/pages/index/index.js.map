{"version":3,"file":"index.js","sources":["pages/index/index.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudXZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"page-container\">\n\t\t<!-- 标题区域 -->\n\t\t<view class=\"header\">\n\t\t\t<text class=\"main-title\">研师录</text>\n\t\t\t<text class=\"sub-title\">一站式对接目标院校专业学长学姐</text>\n\t\t</view>\n\t\t\n\t\t<!-- 按钮区域 -->\n\t\t<view class=\"button-area\">\n\t\t\t<view class=\"match-button\" @click=\"goToMatch\">\n\t\t\t\t<text class=\"button-text\">精准匹配</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 可拖动头像区域 -->\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\n\n\t\t<view class=\"avatar-container\">\n\t\t\t<movable-area class=\"movable-container\">\n\t\t\t\t<movable-view \n\t\t\t\t\tclass=\"draggable-avatar\"\n\t\t\t\t\tdirection=\"all\"\n\t\t\t\t\tx=\"{{avatarPosition.x}}\"\n\t\t\t\t\ty=\"{{avatarPosition.y}}\"\n\t\t\t\t\t@change=\"onMoveChange\"\n\t\t\t\t\t@touchend=\"onTouchEnd\"\n\t\t\t\t\t@tap=\"goToAI\"\n\t\t\t\t>\n\t\t\t\t\t<image class=\"avatar-image\" src=\"../../static/image/default_avatar.png\"></image>\n\t\t\t\t</movable-view>\n\t\t\t</movable-area>\n\t\t</view>\n\n\t\t\n\t\t<!-- 底部导航栏 -->\n\t\t<tab-bar pageName=\"index\"></tab-bar>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\t/**\n\t * @description 首页组件\n\t */\n\timport TabBar from '../../components/tab-bar/tab-bar.uvue';\n\timport Routes from '../../utils/routes.js';\n\t\n\texport default {\n\t\tcomponents: {\n\t\t\tTabBar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttitle: '研师录',\n\t\t\t\tavatarPosition: {\n\t\t\t\t\tx: 50,\n\t\t\t\t\ty: 400\n\t\t\t\t},\n\t\t\t\tisDragging: false,\n\t\t\t\tstartPosition: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tscreenInfo: {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\ttabBarHeight: 50 // 默认底部导航栏高度\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t/**\n\t\t\t * @description 页面加载时的处理逻辑\n\t\t\t */\n\t\t\t// 获取屏幕信息\n\t\t\tthis.getScreenInfo();\n\t\t},\n\t\tonShow() {\n\t\t\t// 确保系统tabBar被隐藏\n\t\t\tuni.hideTabBar();\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * @description 获取屏幕信息\n\t\t\t */\n\t\t\tgetScreenInfo() {\n\t\t\t\ttry {\n\t\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\n\t\t\t\t\tthis.screenInfo.width = systemInfo.windowWidth;\n\t\t\t\t\tthis.screenInfo.height = systemInfo.windowHeight;\n\t\t\t\t\t\n\t\t\t\t\t// 初始化头像位置为右上角\n\t\t\t\t\tthis.avatarPosition = {\n\t\t\t\t\t\tx: this.screenInfo.width - 80,\n\t\t\t\t\t\ty: 100\n\t\t\t\t\t};\n\t\t\t\t} catch (e) {\n\t\t\t\t\tuni.__f__('error','at pages/index/index.uvue:110','获取屏幕信息失败:', e);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 跳转到匹配页面\n\t\t\t */\n\t\t\tgoToMatch() {\n\t\t\t\t// 使用Routes导航\n\t\t\t\ttry {\n\t\t\t\t\tRoutes.navigator.navigateTo(Routes.match.MATCH_HOME);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tuni.__f__('error','at pages/index/index.uvue:122',e);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 跳转到AI页面\n\t\t\t */\n\t\t\tgoToAI() {\n\t\t\t\tif (!this.isDragging) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tRoutes.navigator.toAI();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tuni.__f__('error','at pages/index/index.uvue:138','跳转AI页面失败:', err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 触摸开始事件处理\n\t\t\t * @param {Object} e - 触摸事件对象\n\t\t\t */\n\t\t\tonTouchStart(e) {\n\t\t\t\tthis.isDragging = false;\n\t\t\t\tthis.startPosition = {\n\t\t\t\t\tx: e.touches[0].clientX - this.avatarPosition.x,\n\t\t\t\t\ty: e.touches[0].clientY - this.avatarPosition.y\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 触摸移动事件处理\n\t\t\t * @param {Object} e - 触摸事件对象\n\t\t\t */\n\t\t\tonTouchMove(e) {\n\t\t\t\tthis.isDragging = true;\n\t\t\t\t// 计算新位置\n\t\t\t\tlet newX = e.touches[0].clientX - this.startPosition.x;\n\t\t\t\tlet newY = e.touches[0].clientY - this.startPosition.y;\n\t\t\t\t\n\t\t\t\t// 限制拖动范围\n\t\t\t\tconst maxX = this.screenInfo.width - 60; // 头像宽度为60px\n\t\t\t\tconst maxY = this.screenInfo.height - this.screenInfo.tabBarHeight - 60; // 减去底部导航栏高度\n\t\t\t\t\n\t\t\t\tnewX = Math.max(0, Math.min(newX, maxX));\n\t\t\t\tnewY = Math.max(0, Math.min(newY, maxY));\n\t\t\t\t\n\t\t\t\tthis.avatarPosition = {\n\t\t\t\t\tx: newX,\n\t\t\t\t\ty: newY\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 微信小程序movable-view移动变化事件\n\t\t\t * @param {Object} e - 事件对象\n\t\t\t */\n\t\t\tonMoveChange(e) {\n\t\t\t\tthis.isDragging = true;\n\t\t\t\t\n\t\t\t\t// 更新位置\n\t\t\t\tlet newX = e.detail.x;\n\t\t\t\tlet newY = e.detail.y;\n\t\t\t\t\n\t\t\t\t// 限制Y轴不进入底部导航栏区域\n\t\t\t\tconst maxY = this.screenInfo.height - this.screenInfo.tabBarHeight - 60;\n\t\t\t\tif (newY > maxY) {\n\t\t\t\t\tnewY = maxY;\n\t\t\t\t\t\n\t\t\t\t\t// 由于微信小程序无法直接修改movable-view的位置，需要延迟设置\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.avatarPosition.y = maxY;\n\t\t\t\t\t}, 10);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.avatarPosition = {\n\t\t\t\t\tx: newX,\n\t\t\t\t\ty: newY\n\t\t\t\t};\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * @description 触摸结束事件处理\n\t\t\t */\n\t\t\tonTouchEnd() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.isDragging = false;\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.page-container {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.header {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tmargin-top: 100px;\n\t\twidth: 100%;\n\t}\n\t\n\t.main-title {\n\t\tfont-size: 40px;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 20px;\n\t\tcolor: #333;\n\t}\n\t\n\t.sub-title {\n\t\tfont-size: 16px;\n\t\tcolor: #333;\n\t\tmargin-bottom: 20px;\n\t\ttext-align: center;\n\t}\n\t\n\t.button-area {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tgap: 30rpx;\n\t}\n\t\n\t.match-button {\n\t\twidth: 240px;\n\t\theight: 50px;\n\t\tbackground-color: #ffffff;\n\t\tcolor: #333;\n\t\tborder: 1px solid #dddddd;\n\t\tborder-radius: 25px;\n\t\tfont-size: 18px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.button-text {\n\t\tcolor: #333;\n\t}\n\t\n\n\n\n\n\n\n\n\n\t\n\n\t.avatar-container {\n\t\tposition: absolute;\n\t\twidth: 100%; \n\t\theight: 100%;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tz-index: 999; /* 确保在最顶层 */\n\t\tpointer-events: auto; /* 允许容器接收点击事件 */\n\t}\n\t\n\t.movable-container {\n\t\twidth: 100%;\n\t\theight: calc(100% - 50px); /* 减去底部导航栏高度 */\n\t\tpointer-events: none; /* 让容器本身不接收事件 */\n\t}\n\t\n\t.draggable-avatar {\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\tpointer-events: auto; /* 确保头像可点击 */\n\t}\n\n\t\n\t.avatar-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder-radius: 50%;\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n\t}\n</style>","import MiniProgramPage from 'E:/yanshilu小程序前端/前端yanshilu/pages/index/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","components","TabBar","data","title","avatarPosition","UTSJSONObject","x","y","isDragging","startPosition","screenInfo","width","height","tabBarHeight","onLoad","this","getScreenInfo","onShow","uni","index","hideTabBar","methods","systemInfo","getSystemInfoSync","windowWidth","windowHeight","e","__f__","goToMatch","Routes","navigator","navigateTo","match","MATCH_HOME","showToast","icon","goToAI","toAI","err","onTouchStart","touches","clientX","clientY","onTouchMove","newX","newY","maxX","maxY","Math","max","min","onMoveChange","detail","setTimeout","onTouchEnd","wx","createPage","MiniProgramPage"],"mappings":"8HA2DCA,EAAeC,kBAAA,CACdC,WAAY,CACXC,OALiB,IAAA,uCAOlBC,KAAI,KACI,CACNC,MAAO,MACPC,eAAgB,IAAAC,cAAA,CACfC,EAAG,GACHC,EAAG,MAEJC,YAAY,EACZC,cAAe,IAAAJ,cAAA,CACdC,EAAG,EACHC,EAAG,IAEJG,WAAY,IAAAL,cAAA,CACXM,MAAO,EACPC,OAAQ,EACRC,aAAc,OAIjBC,SAKCC,KAAKC,eACL,EACDC,SAECC,EAAGC,MAACC,YACJ,EACDC,QAAS,CAIRL,gBACK,IACG,MAAAM,EAAaJ,QAAIK,oBAClBR,KAAAL,WAAWC,MAAQW,EAAWE,YAC9BT,KAAAL,WAAWE,OAASU,EAAWG,aAGpCV,KAAKX,eAAiB,CACrBE,EAAGS,KAAKL,WAAWC,MAAQ,GAC3BJ,EAAG,IAIL,OAFSmB,GACRR,EAAGC,MAACQ,MAAM,QAAQ,gCAAgC,YAAaD,EAChE,CACA,EAKDE,YAEK,IACHC,EAAMA,OAACC,UAAUC,WAAWF,EAAMA,OAACG,MAAMC,WAO1C,OANSP,GACRR,EAAAA,MAAIS,MAAM,QAAQ,gCAAgCD,GAClDR,EAAAA,MAAIgB,UAAU,CACb/B,MAAO,SACPgC,KAAM,QAER,CACA,EAKDC,SACK,IAACrB,KAAKP,WACL,aACIsB,UAAUO,MAOlB,OANSC,GACRpB,EAAGC,MAACQ,MAAM,QAAQ,gCAAgC,YAAaW,GAC/DpB,EAAAA,MAAIgB,UAAU,CACb/B,MAAO,SACPgC,KAAM,QAER,CAED,EAMDI,aAAab,EAAC,MACbX,KAAKP,YAAa,EAClBO,KAAKN,cAAgB,CACpBH,EAAGoB,EAAEc,QAAQ,GAAGC,QAAU1B,KAAKX,eAAeE,EAC9CC,EAAGmB,EAAEc,QAAQ,GAAGE,QAAU3B,KAAKX,eAAeG,EAE/C,EAMDoC,YAAYjB,EAAC,MACZX,KAAKP,YAAa,EAElB,IAAIoC,EAAOlB,EAAEc,QAAQ,GAAGC,QAAU1B,KAAKN,cAAcH,EACjDuC,EAAOnB,EAAEc,QAAQ,GAAGE,QAAU3B,KAAKN,cAAcF,EAG/C,MAAAuC,EAAO/B,KAAKL,WAAWC,MAAQ,GAC/BoC,EAAOhC,KAAKL,WAAWE,OAASG,KAAKL,WAAWG,aAAe,GAErE+B,EAAOI,KAAKC,IAAI,EAAGD,KAAKE,IAAIN,EAAME,IAClCD,EAAOG,KAAKC,IAAI,EAAGD,KAAKE,IAAIL,EAAME,IAElChC,KAAKX,eAAiB,CACrBE,EAAGsC,EACHrC,EAAGsC,EAEJ,EAMDM,aAAazB,EAAC,MACbX,KAAKP,YAAa,EAGd,IAAAoC,EAAOlB,EAAE0B,OAAO9C,EAChBuC,EAAOnB,EAAE0B,OAAO7C,EAGpB,MAAMwC,EAAOhC,KAAKL,WAAWE,OAASG,KAAKL,WAAWG,aAAe,GACjEgC,EAAOE,IACHF,EAAAE,EAGPM,YAAW,KACVtC,KAAKX,eAAeG,EAAIwC,CAAA,GACtB,KAGJhC,KAAKX,eAAiB,CACrBE,EAAGsC,EACHrC,EAAGsC,EAEJ,EAKDS,aACCD,YAAW,KACVtC,KAAKP,YAAa,CAAA,GAChB,GACJ,qYCvNH+C,GAAGC,WAAWC"}