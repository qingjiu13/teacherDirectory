{"version":3,"file":"detail.js","sources":["pages/post/detail.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcG9zdC9kZXRhaWwudXZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"header\">\r\n      <view class=\"back-button\" @tap=\"goBack\">\r\n        <text>←</text>\r\n      </view>\r\n      <text class=\"title\">帖子详情</text>\r\n      <view class=\"more-button\" @tap=\"showMoreOptions\">\r\n        <text>⋮</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <scroll-view class=\"content\" scroll-y=\"true\" @scrolltolower=\"loadMoreComments\">\r\n      <!-- 帖子主体 -->\r\n      <view class=\"post-card\">\r\n        <view class=\"post-header\">\r\n          <view class=\"user-info\">\r\n            <image class=\"avatar\" :src=\"post.avatar || '/static/image/default_avatar.png'\" mode=\"aspectFill\" @tap=\"navigateToUserDetail(post.userId)\"></image>\r\n            <view class=\"user-detail\">\r\n              <text class=\"username\">{{post.nickname}}</text>\r\n              <text class=\"school\">{{post.school}}</text>\r\n              <text class=\"major\">{{post.major}}</text>\r\n            </view>\r\n          </view>\r\n          <button class=\"follow-btn\" :class=\"{ followed: post.isFollowed }\" @tap=\"toggleFollow\">\r\n            {{post.isFollowed ? '已关注' : '关注'}}\r\n          </button>\r\n        </view>\r\n        \r\n        <view class=\"post-content\">\r\n          <text class=\"post-title\">{{post.title || '无标题'}}</text>\r\n          <text class=\"post-text\">{{post.content}}</text>\r\n          \r\n          <!-- 帖子图片 -->\r\n          <view class=\"post-images\" v-if=\"post.images && post.images.length > 0\">\r\n            <view class=\"image-grid\" :class=\"'grid-' + (post.images.length > 4 ? 'multi' : post.images.length)\">\r\n              <view class=\"image-item\" v-for=\"(image, index) in post.images\" :key=\"index\" @tap=\"previewImage(index)\">\r\n                <image class=\"post-image\" :src=\"image\" mode=\"aspectFill\"></image>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"post-tags\" v-if=\"post.tags && post.tags.length > 0\">\r\n            <view class=\"post-tag\" v-for=\"(tag, index) in post.tags\" :key=\"index\">\r\n              #{{tag}}\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"post-footer\">\r\n          <view class=\"post-time\">{{post.createTime}}</view>\r\n          <view class=\"stat-item\">\r\n            <text class=\"stat-count\">{{post.viewCount}} · 浏览</text>\r\n          </view>\r\n          <view class=\"action-bar\">\r\n            <view class=\"action-item\" @tap=\"likePost\">\r\n              <image class=\"action-icon\" :src=\"post.isLiked ? '/static/image/like_filled.svg' : '/static/image/like.svg'\" mode=\"aspectFit\"></image>\r\n              <text class=\"action-count\">{{post.likeCount}}</text>\r\n            </view>\r\n            <view class=\"action-item\" @tap=\"focusCommentInput\">\r\n              <image class=\"action-icon\" src=\"/static/image/comment.svg\" mode=\"aspectFit\"></image>\r\n              <text class=\"action-count\">{{post.commentCount}}</text>\r\n            </view>\r\n            <view class=\"action-item\" @tap=\"collectPost\">\r\n              <image class=\"action-icon\" :src=\"post.isCollected ? '/static/image/star_filled.svg' : '/static/image/star.svg'\" mode=\"aspectFit\"></image>\r\n              <text class=\"action-count\">{{post.collectCount}}</text>\r\n            </view>\r\n            <view class=\"action-item\" @tap=\"sharePost\">\r\n              <image class=\"action-icon\" src=\"/static/image/share.svg\" mode=\"aspectFit\"></image>\r\n              <text class=\"action-count\">{{post.shareCount}}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 评论区 -->\r\n      <view class=\"comment-section\">\r\n        <view class=\"section-title\">评论 ({{comments.length}})</view>\r\n        \r\n        <view class=\"comment-list\">\r\n          <view class=\"comment-item\" v-for=\"(comment, index) in comments\" :key=\"index\">\r\n            <image class=\"comment-avatar\" :src=\"comment.avatar || '/static/image/default_avatar.png'\" mode=\"aspectFill\" @tap=\"navigateToUserDetail(comment.userId)\"></image>\r\n            <view class=\"comment-content\">\r\n              <view class=\"comment-user\">\r\n                <text class=\"comment-username\">{{comment.nickname}}</text>\r\n                <text class=\"comment-time\">{{comment.createTime}}</text>\r\n              </view>\r\n              <text class=\"comment-text\">{{comment.content}}</text>\r\n              <view class=\"comment-actions\">\r\n                <view class=\"comment-like\" @tap=\"likeComment(comment)\">\r\n                  <image class=\"comment-like-icon\" :src=\"comment.isLiked ? '/static/image/like_filled.svg' : '/static/image/like.svg'\" mode=\"aspectFit\"></image>\r\n                  <text class=\"comment-like-count\">{{comment.likeCount || 0}}</text>\r\n                </view>\r\n                <view class=\"comment-reply\" @tap=\"replyComment(comment)\">\r\n                  <text>回复</text>\r\n                </view>\r\n              </view>\r\n              \r\n              <!-- 回复列表 -->\r\n              <view class=\"reply-list\" v-if=\"comment.replies && comment.replies.length > 0\">\r\n                <view class=\"reply-item\" v-for=\"(reply, replyIndex) in comment.replies\" :key=\"replyIndex\">\r\n                  <view class=\"reply-user\">\r\n                    <text class=\"reply-username\">{{reply.nickname}}</text>\r\n                    <text v-if=\"reply.replyTo\" class=\"reply-to\">回复</text>\r\n                    <text v-if=\"reply.replyTo\" class=\"reply-to-username\">{{reply.replyToName}}</text>\r\n                    <text class=\"reply-text\">: {{reply.content}}</text>\r\n                  </view>\r\n                </view>\r\n                <view class=\"more-replies\" v-if=\"comment.replyCount > comment.replies.length\" @tap=\"loadMoreReplies(comment)\">\r\n                  <text>查看更多回复</text>\r\n                </view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <!-- 加载更多评论 -->\r\n          <view class=\"load-more\" v-if=\"hasMoreComments && comments.length > 0\" @tap=\"loadMoreComments\">\r\n            <text>加载更多</text>\r\n          </view>\r\n          \r\n          <!-- 无评论提示 -->\r\n          <view class=\"no-comment\" v-if=\"comments.length === 0\">\r\n            <text>暂无评论，快来发表你的看法吧</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n    \r\n    <!-- 评论输入区域 -->\r\n    <view class=\"comment-input-section\">\r\n      <input \r\n        class=\"comment-input\" \r\n        :placeholder=\"replyTarget ? `回复 ${replyTarget.nickname}` : '说点什么...'\" \r\n        v-model=\"commentContent\"\r\n        :focus=\"inputFocus\"\r\n        confirm-type=\"send\"\r\n        @confirm=\"submitComment\"\r\n      />\r\n      <view class=\"send-btn\" :class=\"{ active: commentContent }\" @tap=\"submitComment\">\r\n        <text>发送</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        postId: null,\r\n        post: {\r\n          id: null,\r\n          userId: null,\r\n          nickname: '',\r\n          avatar: '',\r\n          school: '',\r\n          major: '',\r\n          title: '',\r\n          content: '',\r\n          images: [],\r\n          tags: [],\r\n          createTime: '',\r\n          viewCount: 0,\r\n          likeCount: 0,\r\n          commentCount: 0,\r\n          collectCount: 0,\r\n          shareCount: 0,\r\n          isLiked: false,\r\n          isCollected: false,\r\n          isFollowed: false\r\n        },\r\n        comments: [],\r\n        commentPage: 1,\r\n        hasMoreComments: true,\r\n        commentContent: '',\r\n        inputFocus: false,\r\n        replyTarget: null,\r\n        isLoadingComments: false\r\n      }\r\n    },\r\n    onLoad(options) {\r\n      if (options.id) {\r\n        this.postId = options.id;\r\n        this.loadPostDetail();\r\n        this.loadComments();\r\n        \r\n        // 如果需要直接显示评论区\r\n        if (options.showComment) {\r\n          this.inputFocus = true;\r\n        }\r\n      } else {\r\n        // 使用模拟数据\r\n        this.loadMockData();\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * @description 加载模拟数据\r\n       */\r\n      loadMockData() {\r\n        // 模拟帖子详情\r\n        this.post = {\r\n          id: 1,\r\n          userId: 101,\r\n          nickname: '研究生活小助手',\r\n          avatar: '/static/image/default_avatar.png',\r\n          school: '北京大学',\r\n          major: '计算机科学',\r\n          title: '考研复习经验分享',\r\n          content: '今天分享一下考研复习经验，希望对大家有帮助！数学部分要注重基础，多做真题。考研复习是一场持久战，要合理规划时间，保持良好心态。英语阅读需要每天坚持，政治要理解记忆结合。',\r\n          images: [],\r\n          tags: ['考研', '复习经验', '时间规划'],\r\n          createTime: '2023-06-15 14:30',\r\n          viewCount: 256,\r\n          likeCount: 42,\r\n          commentCount: 8,\r\n          collectCount: 15,\r\n          shareCount: 3,\r\n          isLiked: false,\r\n          isCollected: false,\r\n          isFollowed: false\r\n        };\r\n        \r\n        // 模拟评论\r\n        this.comments = [\r\n          {\r\n            id: 101,\r\n            nickname: '考研学子',\r\n            avatar: '/static/image/default_avatar.png',\r\n            content: '感谢分享，对我帮助很大！',\r\n            createTime: '2023-06-15 15:20',\r\n            likeCount: 5,\r\n            isLiked: false,\r\n            replies: [\r\n              {\r\n                id: 201,\r\n                nickname: '研究生活小助手',\r\n                content: '不客气，希望对你有帮助~',\r\n                createTime: '2023-06-15 15:30',\r\n                replyTo: 101,\r\n                replyToName: '考研学子'\r\n              }\r\n            ],\r\n            replyCount: 1\r\n          },\r\n          {\r\n            id: 102,\r\n            nickname: '未来研究生',\r\n            avatar: '/static/image/default_avatar.png',\r\n            content: '请问数学复习有什么具体建议吗？',\r\n            createTime: '2023-06-15 16:45',\r\n            likeCount: 3,\r\n            isLiked: false,\r\n            replies: [],\r\n            replyCount: 0\r\n          }\r\n        ];\r\n      },\r\n      \r\n      /**\r\n       * @description 加载帖子详情\r\n       */\r\n      loadPostDetail() {\r\n        // 实际开发中应调用API\r\n        // 此处使用模拟数据\r\n        this.loadMockData();\r\n        \r\n        // API调用示例\r\n        /*\r\n        uni.request({\r\n          url: `YOUR_API_URL/post/detail/${this.postId}`,\r\n          method: 'GET',\r\n          success: (res) => {\r\n            if (res.statusCode === 200 && res.data) {\r\n              this.post = res.data;\r\n              \r\n              // 记录浏览量\r\n              this.recordView();\r\n            }\r\n          },\r\n          fail: () => {\r\n            uni.showToast({\r\n              title: '加载失败',\r\n              icon: 'none'\r\n            });\r\n          }\r\n        });\r\n        */\r\n      },\r\n      \r\n      /**\r\n       * @description 记录浏览量\r\n       */\r\n      recordView() {\r\n        // 模拟记录浏览量\r\n        this.post.viewCount++;\r\n        \r\n        // API调用示例\r\n        /*\r\n        uni.request({\r\n          url: `YOUR_API_URL/post/view`,\r\n          method: 'POST',\r\n          data: { postId: this.postId },\r\n          success: () => {\r\n            // 浏览量+1\r\n            this.post.viewCount++;\r\n          }\r\n        });\r\n        */\r\n      },\r\n      \r\n      /**\r\n       * @description 加载评论\r\n       */\r\n      loadComments() {\r\n        if (this.isLoadingComments) return;\r\n        \r\n        this.isLoadingComments = true;\r\n        \r\n        // 模拟加载评论的延迟\r\n        setTimeout(() => {\r\n          // 这里已经在loadMockData中设置了模拟评论\r\n          // 如果是加载更多，模拟没有更多数据\r\n          if (this.commentPage > 1) {\r\n            this.hasMoreComments = false;\r\n          }\r\n          \r\n          this.isLoadingComments = false;\r\n        }, 500);\r\n        \r\n        // API调用示例\r\n        /*\r\n        uni.request({\r\n          url: `YOUR_API_URL/post/comments`,\r\n          method: 'GET',\r\n          data: {\r\n            postId: this.postId,\r\n            page: this.commentPage,\r\n            pageSize: 10\r\n          },\r\n          success: (res) => {\r\n            if (res.statusCode === 200 && res.data) {\r\n              if (this.commentPage === 1) {\r\n                this.comments = res.data.comments || [];\r\n              } else {\r\n                this.comments = [...this.comments, ...(res.data.comments || [])];\r\n              }\r\n              \r\n              this.hasMoreComments = res.data.hasMore || false;\r\n            }\r\n          },\r\n          complete: () => {\r\n            this.isLoadingComments = false;\r\n          }\r\n        });\r\n        */\r\n      },\r\n      \r\n      /**\r\n       * @description 加载更多评论\r\n       */\r\n      loadMoreComments() {\r\n        if (!this.hasMoreComments || this.isLoadingComments) return;\r\n        \r\n        this.commentPage++;\r\n        this.loadComments();\r\n      },\r\n      \r\n      /**\r\n       * @description 加载更多回复\r\n       */\r\n      loadMoreReplies(comment) {\r\n        // 模拟加载更多回复\r\n        uni.showToast({\r\n          title: '已加载全部回复',\r\n          icon: 'none'\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 预览图片\r\n       */\r\n      previewImage(index) {\r\n        uni.previewImage({\r\n          urls: this.post.images,\r\n          current: this.post.images[index]\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 返回上一页\r\n       */\r\n      goBack() {\r\n        uni.navigateBack();\r\n      },\r\n      \r\n      /**\r\n       * @description 显示更多选项\r\n       */\r\n      showMoreOptions() {\r\n        uni.showActionSheet({\r\n          itemList: ['举报', '不感兴趣', '分享'],\r\n          success: (res) => {\r\n            switch(res.tapIndex) {\r\n              case 0: // 举报\r\n                this.reportPost();\r\n                break;\r\n              case 1: // 不感兴趣\r\n                this.markNotInterested();\r\n                break;\r\n              case 2: // 分享\r\n                this.sharePost();\r\n                break;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 关注/取消关注用户\r\n       */\r\n      toggleFollow() {\r\n        this.post.isFollowed = !this.post.isFollowed;\r\n        \r\n        uni.showToast({\r\n          title: this.post.isFollowed ? '已关注' : '已取消关注',\r\n          icon: 'none'\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 点赞帖子\r\n       */\r\n      likePost() {\r\n        this.post.isLiked = !this.post.isLiked;\r\n        this.post.likeCount += this.post.isLiked ? 1 : -1;\r\n      },\r\n      \r\n      /**\r\n       * @description 收藏帖子\r\n       */\r\n      collectPost() {\r\n        this.post.isCollected = !this.post.isCollected;\r\n        this.post.collectCount += this.post.isCollected ? 1 : -1;\r\n        \r\n        uni.showToast({\r\n          title: this.post.isCollected ? '已收藏' : '已取消收藏',\r\n          icon: 'none'\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 分享帖子\r\n       */\r\n      sharePost() {\r\n        uni.showActionSheet({\r\n          itemList: ['分享给好友', '分享到微信好友', '分享到微信群聊', '分享到朋友圈'],\r\n          success: (res) => {\r\n            // 更新分享计数\r\n            this.post.shareCount++;\r\n            \r\n            uni.showToast({\r\n              title: '分享成功',\r\n              icon: 'success'\r\n            });\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 举报帖子\r\n       */\r\n      reportPost() {\r\n        uni.showToast({\r\n          title: '举报已提交',\r\n          icon: 'success'\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 跳转到用户详情页\r\n       * @param {Number} userId - 用户ID\r\n       */\r\n      navigateToUserDetail(userId) {\r\n        // 判断用户类型并跳转到相应的详情页\r\n        // 这里简单处理，假设全部是老师类型\r\n        uni.navigateTo({\r\n          url: `/pages/teacher/profile?id=${userId}`\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 标记为不感兴趣\r\n       */\r\n      markNotInterested() {\r\n        uni.showToast({\r\n          title: '已减少此类内容推送',\r\n          icon: 'none'\r\n        });\r\n        \r\n        // 延迟返回上一页\r\n        setTimeout(() => {\r\n          uni.navigateBack();\r\n        }, 1500);\r\n      },\r\n      \r\n      /**\r\n       * @description 点赞评论\r\n       */\r\n      likeComment(comment) {\r\n        comment.isLiked = !comment.isLiked;\r\n        comment.likeCount += comment.isLiked ? 1 : -1;\r\n      },\r\n      \r\n      /**\r\n       * @description 回复评论\r\n       */\r\n      replyComment(comment) {\r\n        this.replyTarget = {\r\n          id: comment.id,\r\n          nickname: comment.nickname,\r\n          type: 'comment'\r\n        };\r\n        this.inputFocus = true;\r\n      },\r\n      \r\n      /**\r\n       * @description 聚焦评论输入框\r\n       */\r\n      focusCommentInput() {\r\n        this.replyTarget = null;\r\n        this.inputFocus = true;\r\n      },\r\n      \r\n      /**\r\n       * @description 提交评论或回复\r\n       */\r\n      submitComment() {\r\n        if (!this.commentContent.trim()) {\r\n          return;\r\n        }\r\n        \r\n        // 构建新评论对象\r\n        const newComment = {\r\n          id: Date.now(),\r\n          nickname: '当前用户',\r\n          avatar: '/static/image/default_avatar.png',\r\n          content: this.commentContent,\r\n          createTime: '刚刚',\r\n          likeCount: 0,\r\n          isLiked: false,\r\n          replies: [],\r\n          replyCount: 0\r\n        };\r\n        \r\n        // 如果是回复，添加到对应评论的回复列表中\r\n        if (this.replyTarget) {\r\n          const targetComment = this.comments.find(c => c.id === this.replyTarget.id);\r\n          if (targetComment) {\r\n            const newReply = {\r\n              id: Date.now(),\r\n              nickname: '当前用户',\r\n              content: this.commentContent,\r\n              createTime: '刚刚',\r\n              replyTo: this.replyTarget.id,\r\n              replyToName: this.replyTarget.nickname\r\n            };\r\n            \r\n            targetComment.replies.push(newReply);\r\n            targetComment.replyCount++;\r\n          }\r\n        } else {\r\n          // 如果是新评论，添加到评论列表开头\r\n          this.comments.unshift(newComment);\r\n        }\r\n        \r\n        // 清空输入框并更新评论计数\r\n        this.commentContent = '';\r\n        this.replyTarget = null;\r\n        this.post.commentCount++;\r\n        \r\n        uni.showToast({\r\n          title: '评论成功',\r\n          icon: 'success'\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  /* 全局样式变量 */\r\n  page {\r\n    --primary-color: #1E90FF;\r\n    --primary-light: #87CEEB;\r\n    --primary-dark: #0073CF;\r\n    --gradient-blue: linear-gradient(135deg, #1E90FF, #00BFFF);\r\n    --gradient-blue-light: linear-gradient(135deg, #87CEEB, #48D1CC);\r\n    --text-primary: #333333;\r\n    --text-secondary: #666666;\r\n    --text-light: #999999;\r\n    --bg-color: #F5F9FC;\r\n    --card-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n    font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\r\n  }\r\n  \r\n  .container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n    background-color: var(--bg-color);\r\n  }\r\n  \r\n  .header {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    padding: 15px 20px;\r\n    background-image: var(--gradient-blue);\r\n    border-bottom-left-radius: 20px;\r\n    border-bottom-right-radius: 20px;\r\n    box-shadow: 0 4px 15px rgba(30, 144, 255, 0.2);\r\n  }\r\n  \r\n  .back-button, .more-button {\r\n    padding: 8px 12px;\r\n    font-size: 18px;\r\n    color: #ffffff;\r\n    background-color: rgba(255, 255, 255, 0.2);\r\n    border-radius: 50%;\r\n    width: 34px;\r\n    height: 34px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .back-button:active, .more-button:active {\r\n    transform: scale(0.92);\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n  }\r\n  \r\n  .title {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: #ffffff;\r\n    letter-spacing: 1px;\r\n  }\r\n  \r\n  .content {\r\n    flex: 1;\r\n    padding-bottom: 60px;\r\n  }\r\n  \r\n  .post-card {\r\n    background-color: #ffffff;\r\n    padding: 20px;\r\n    margin: 15px;\r\n    border-radius: 16px;\r\n    box-shadow: var(--card-shadow);\r\n  }\r\n  \r\n  .post-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .user-info {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .avatar {\r\n    width: 46px;\r\n    height: 46px;\r\n    border-radius: 23px;\r\n    margin-right: 12px;\r\n    border: 2px solid rgba(30, 144, 255, 0.2);\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .user-detail {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .username {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    margin-bottom: 3px;\r\n    color: var(--text-primary);\r\n  }\r\n  \r\n  .school, .major {\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    margin-bottom: 2px;\r\n  }\r\n  \r\n  .follow-btn {\r\n    padding: 6px 15px;\r\n    background-color: #ffffff;\r\n    border: 1px solid var(--primary-color);\r\n    border-radius: 18px;\r\n    color: var(--primary-color);\r\n    font-size: 13px;\r\n    line-height: 1.5;\r\n    min-width: 66px;\r\n    font-weight: 500;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .follow-btn.followed {\r\n    background-color: rgba(30, 144, 255, 0.08);\r\n    border-color: transparent;\r\n    color: var(--text-secondary);\r\n  }\r\n  \r\n  .post-content {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .post-title {\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    margin-bottom: 12px;\r\n    display: block;\r\n    color: var(--text-primary);\r\n    line-height: 1.4;\r\n  }\r\n  \r\n  .post-text {\r\n    font-size: 15px;\r\n    line-height: 1.7;\r\n    color: var(--text-primary);\r\n    margin-bottom: 15px;\r\n    display: block;\r\n  }\r\n  \r\n  .post-images {\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .image-grid {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .grid-1 .image-item {\r\n    width: 100%;\r\n    height: 220px;\r\n  }\r\n  \r\n  .grid-2 .image-item, .grid-4 .image-item {\r\n    width: 50%;\r\n    height: 160px;\r\n    padding: 3px;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .grid-3 .image-item, .grid-multi .image-item {\r\n    width: 33.33%;\r\n    height: 130px;\r\n    padding: 3px;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .post-image {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 8px;\r\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .post-tags {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .post-tag {\r\n    padding: 6px 12px;\r\n    background-image: var(--gradient-blue-light);\r\n    border-radius: 15px;\r\n    font-size: 12px;\r\n    color: #ffffff;\r\n    margin-right: 8px;\r\n    margin-bottom: 8px;\r\n    box-shadow: 0 2px 5px rgba(30, 144, 255, 0.2);\r\n  }\r\n  \r\n  .post-footer {\r\n    display: flex;\r\n    flex-direction: column;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n    padding-top: 15px;\r\n  }\r\n  \r\n  .post-time {\r\n    font-size: 12px;\r\n    color: var(--text-light);\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .stat-item {\r\n    font-size: 12px;\r\n    color: var(--text-light);\r\n    margin-bottom: 12px;\r\n  }\r\n  \r\n  .action-bar {\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    padding: 10px 0;\r\n    justify-content: space-around;\r\n  }\r\n  \r\n  .action-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: 8px 15px;\r\n    border-radius: 20px;\r\n    transition: background-color 0.3s ease;\r\n  }\r\n  \r\n  .action-item:active {\r\n    background-color: rgba(30, 144, 255, 0.08);\r\n  }\r\n  \r\n  .action-icon {\r\n    width: 22px;\r\n    height: 22px;\r\n    margin-bottom: 5px;\r\n    margin-right: 0;\r\n  }\r\n  \r\n  .action-count {\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    text-align: center;\r\n  }\r\n  \r\n  .comment-section {\r\n    background-color: #ffffff;\r\n    padding: 20px;\r\n    margin: 15px;\r\n    border-radius: 16px;\r\n    box-shadow: var(--card-shadow);\r\n  }\r\n  \r\n  .section-title {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    margin-bottom: 20px;\r\n    color: var(--text-primary);\r\n    position: relative;\r\n    padding-left: 12px;\r\n  }\r\n  \r\n  .section-title:before {\r\n    content: '';\r\n    position: absolute;\r\n    left: 0;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    width: 4px;\r\n    height: 18px;\r\n    background-image: var(--gradient-blue);\r\n    border-radius: 2px;\r\n  }\r\n  \r\n  .comment-item {\r\n    display: flex;\r\n    margin-bottom: 20px;\r\n    padding-bottom: 20px;\r\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n  }\r\n  \r\n  .comment-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 20px;\r\n    margin-right: 12px;\r\n    border: 2px solid rgba(30, 144, 255, 0.1);\r\n  }\r\n  \r\n  .comment-content {\r\n    flex: 1;\r\n  }\r\n  \r\n  .comment-user {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 6px;\r\n  }\r\n  \r\n  .comment-username {\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    color: var(--text-primary);\r\n  }\r\n  \r\n  .comment-time {\r\n    font-size: 12px;\r\n    color: var(--text-light);\r\n  }\r\n  \r\n  .comment-text {\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    color: var(--text-primary);\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .comment-actions {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .comment-like {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 20px;\r\n  }\r\n  \r\n  .comment-like-icon {\r\n    width: 18px;\r\n    height: 18px;\r\n    margin-right: 5px;\r\n    opacity: 0.8;\r\n  }\r\n  \r\n  .comment-like-count {\r\n    font-size: 12px;\r\n    color: var(--text-light);\r\n  }\r\n  \r\n  .comment-reply {\r\n    font-size: 12px;\r\n    color: var(--primary-color);\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .reply-list {\r\n    background-color: rgba(30, 144, 255, 0.05);\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .reply-item {\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .reply-user {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    font-size: 12px;\r\n    line-height: 1.6;\r\n  }\r\n  \r\n  .reply-username {\r\n    color: var(--primary-color);\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .reply-to {\r\n    margin: 0 3px;\r\n    color: var(--text-light);\r\n  }\r\n  \r\n  .reply-to-username {\r\n    color: var(--primary-color);\r\n  }\r\n  \r\n  .reply-text {\r\n    color: var(--text-primary);\r\n  }\r\n  \r\n  .more-replies {\r\n    font-size: 12px;\r\n    color: var(--primary-color);\r\n    margin-top: 8px;\r\n    padding: 5px 0;\r\n    text-align: center;\r\n    border-radius: 4px;\r\n    transition: background-color 0.3s ease;\r\n  }\r\n  \r\n  .more-replies:active {\r\n    background-color: rgba(30, 144, 255, 0.08);\r\n  }\r\n  \r\n  .load-more {\r\n    text-align: center;\r\n    padding: 15px 0;\r\n    font-size: 14px;\r\n    color: var(--primary-color);\r\n    font-weight: 500;\r\n  }\r\n  \r\n  .no-comment {\r\n    text-align: center;\r\n    padding: 30px 0;\r\n    font-size: 14px;\r\n    color: var(--text-light);\r\n  }\r\n  \r\n  .no-comment::before {\r\n    content: '';\r\n    display: block;\r\n    width: 60px;\r\n    height: 60px;\r\n    margin: 0 auto 15px;\r\n    background-color: rgba(30, 144, 255, 0.1);\r\n    border-radius: 50%;\r\n  }\r\n  \r\n  .comment-input-section {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12px 15px;\r\n    background-color: #ffffff;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n    z-index: 100;\r\n    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);\r\n  }\r\n  \r\n  .comment-input {\r\n    flex: 1;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    padding: 0 15px;\r\n    border: 1px solid rgba(0, 0, 0, 0.08);\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    background-color: rgba(30, 144, 255, 0.05);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .comment-input:focus {\r\n    border-color: var(--primary-color);\r\n    box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.1);\r\n  }\r\n  \r\n  .send-btn {\r\n    padding: 0 18px;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    margin-left: 10px;\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: var(--text-light);\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .send-btn.active {\r\n    color: #ffffff;\r\n    background-image: var(--gradient-blue);\r\n    box-shadow: 0 3px 8px rgba(30, 144, 255, 0.3);\r\n  }\r\n  \r\n  .send-btn.active:active {\r\n    transform: scale(0.95);\r\n  }\r\n</style>","import MiniProgramPage from 'E:/yanshilu小程序前端/前端yanshilu/pages/post/detail.uvue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","data","postId","post","UTSJSONObject","id","userId","nickname","avatar","school","major","title","content","images","tags","createTime","viewCount","likeCount","commentCount","collectCount","shareCount","isLiked","isCollected","isFollowed","comments","commentPage","hasMoreComments","commentContent","inputFocus","replyTarget","isLoadingComments","onLoad","options","this","loadPostDetail","loadComments","showComment","loadMockData","methods","replies","replyTo","replyToName","replyCount","recordView","setTimeout","loadMoreComments","loadMoreReplies","comment","uni","showToast","icon","previewImage","index","urls","current","goBack","navigateBack","showMoreOptions","showActionSheet","itemList","success","res","tapIndex","reportPost","markNotInterested","sharePost","toggleFollow","likePost","collectPost","navigateToUserDetail","navigateTo","url","likeComment","replyComment","type","focusCommentInput","submitComment","trim","newComment","Date","now","targetComment","c","newReply","push","unshift","wx","createPage","MiniProgramPage"],"mappings":"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"}