{"version":3,"file":"match.js","sources":["pages/match/match.uvue","../../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWF0Y2gvbWF0Y2gudXZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"back-button\" @click=\"goBack\" id=\"step1\">\r\n\t\t\t\t<text>返回</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"title\">精准匹配</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 筛选区域 -->\r\n\t\t<view class=\"filter-section\">\r\n\t\t\t<view class=\"filter-item\" :class=\"{ active: activeDropdown === 'school' }\" @click.stop=\"toggleDropdown('school')\">\r\n\t\t\t\t<text class=\"filter-text\">{{ selectedSchool || '请选择学校' }}</text>\r\n\t\t\t\t<image class=\"dropdown-icon\" :src=\"'/static/image/arrow_down.svg'\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 学校下拉菜单 -->\r\n\t\t\t\t<view class=\"dropdown-menu\" v-if=\"activeDropdown === 'school'\">\r\n\t\t\t\t\t<view class=\"dropdown-item\" :class=\"{ selected: selectedSchool === school }\" v-for=\"(school, index) in schools\" :key=\"index\" @click.stop=\"selectFromDropdown('school', school)\">\r\n\t\t\t\t\t\t<text>{{ school }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"filter-item\" :class=\"{ active: activeDropdown === 'major' }\" @click.stop=\"toggleDropdown('major')\">\r\n\t\t\t\t<text class=\"filter-text\">{{ selectedMajor || '请选择专业' }}</text>\r\n\t\t\t\t<image class=\"dropdown-icon\" :src=\"'/static/image/arrow_down.svg'\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 专业下拉菜单 -->\r\n\t\t\t\t<view class=\"dropdown-menu\" v-if=\"activeDropdown === 'major'\">\r\n\t\t\t\t\t<view class=\"dropdown-item\" :class=\"{ selected: selectedMajor === major }\" v-for=\"(major, index) in majors\" :key=\"index\" @click.stop=\"selectFromDropdown('major', major)\">\r\n\t\t\t\t\t\t<text>{{ major }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"filter-item\" :class=\"{ active: activeDropdown === 'sort' }\" @click.stop=\"toggleDropdown('sort')\">\r\n\t\t\t\t<text class=\"filter-text\">{{ selectedSort || '排序筛选' }}</text>\r\n\t\t\t\t<image class=\"dropdown-icon\" :src=\"'/static/image/arrow_down.svg'\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 排序下拉菜单 -->\r\n\t\t\t\t<view class=\"dropdown-menu\" v-if=\"activeDropdown === 'sort'\">\r\n\t\t\t\t\t<view class=\"dropdown-item\" :class=\"{ selected: selectedSort === sort }\" v-for=\"(sort, index) in ['综合排序', '评分排序']\" :key=\"index\" @click.stop=\"selectFromDropdown('sort', sort)\">\r\n\t\t\t\t\t\t<text>{{ sort }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 老师卡片列表 -->\r\n\t\t<scroll-view class=\"card-list\" scroll-y=\"true\" id=\"step2\">\r\n\t\t\t<view class=\"teacher-card\" v-for=\"(teacher, index) in filteredTeachers\" :key=\"index\">\r\n\t\t\t\t<view class=\"card-left\">\r\n\t\t\t\t\t<image class=\"teacher-avatar\" :src=\"teacher.avatar || '/static/image/default_avatar.svg'\" mode=\"aspectFill\" @tap=\"viewTeacherDetail(teacher.id)\" hover-class=\"avatar-hover\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"card-middle\">\r\n\t\t\t\t\t<view class=\"teacher-name\">{{ teacher.nickname }}</view>\r\n\t\t\t\t\t<view class=\"teacher-info\">{{ teacher.title || '教授' }} | {{ teacher.major }} | {{ teacher.score }}</view>\r\n\t\t\t\t\t<view class=\"teacher-tags\">\r\n\t\t\t\t\t\t<view class=\"tag\" v-for=\"(tag, tagIndex) in teacher.tags\" :key=\"tagIndex\">{{ tag }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"card-right\">\r\n\t\t\t\t\t<button class=\"communicate-btn\" @click.stop=\"handleCommunicate(teacher.id)\">马上沟通</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"empty-state\" v-if=\"filteredTeachers.length === 0\">\r\n\t\t\t\t<text>暂无匹配的老师信息</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- 加载提示 -->\r\n\t\t<view class=\"loading-mask\" v-if=\"isLoading\">\r\n\t\t\t<view class=\"loading-content\">\r\n\t\t\t\t<text>正在连接中...</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 教师详情弹窗 -->\r\n\t\t<view class=\"teacher-detail-popup\" v-if=\"showTeacherDetail\">\r\n\t\t\t<view class=\"popup-mask\" @tap=\"closeTeacherDetail\"></view>\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<view class=\"teacher-header\">\r\n\t\t\t\t\t<image class=\"teacher-large-avatar\" :src=\"currentTeacher.avatar || '/static/image/default_avatar.png'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"teacher-header-info\">\r\n\t\t\t\t\t\t<view class=\"teacher-header-name\">{{ currentTeacher.nickname }}</view>\r\n\t\t\t\t\t\t<view class=\"teacher-header-title\">{{ currentTeacher.title }} | {{ currentTeacher.school }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"detail-tabs\">\r\n\t\t\t\t\t<view class=\"tab\" :class=\"{ active: activeTab === 'chat' }\" @tap=\"switchTab('chat')\">\r\n\t\t\t\t\t\t<text>聊天</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tab\" :class=\"{ active: activeTab === 'profile' }\" @tap=\"switchTab('profile')\">\r\n\t\t\t\t\t\t<text>老师详情</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"tab-content\">\r\n\t\t\t\t\t<view v-if=\"activeTab === 'chat'\" class=\"chat-tip\">\r\n\t\t\t\t\t\t<button class=\"start-chat-btn\" @tap=\"startChat\">马上沟通</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view v-if=\"activeTab === 'profile'\" class=\"profile-content\">\r\n\t\t\t\t\t\t<view class=\"profile-section\">\r\n\t\t\t\t\t\t\t<view class=\"section-title\">专业背景</view>\r\n\t\t\t\t\t\t\t<view class=\"section-content\">{{ currentTeacher.background || '暂无介绍' }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"profile-section\">\r\n\t\t\t\t\t\t\t<view class=\"section-title\">教学经验</view>\r\n\t\t\t\t\t\t\t<view class=\"section-content\">{{ currentTeacher.experience || '暂无介绍' }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"profile-section\">\r\n\t\t\t\t\t\t\t<view class=\"section-title\">擅长领域</view>\r\n\t\t\t\t\t\t\t<view class=\"section-content\">\r\n\t\t\t\t\t\t\t\t<view class=\"expertise-tags\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"expertise-tag\" v-for=\"(tag, index) in currentTeacher.expertise || []\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t{{ tag }}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button class=\"view-profile-btn\" @tap=\"viewTeacherProfile\">查看完整主页</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 匹配计时器 -->\r\n\t\t<view class=\"matching-timer\" v-if=\"isMatching\">\r\n\t\t\t<view class=\"timer-text\">匹配中</view>\r\n\t\t\t<view class=\"timer-countdown\">{{ matchingTime }}秒</view>\r\n\t\t\t<button class=\"cancel-btn\" @tap=\"cancelMatching\">取消匹配</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部导航栏 -->\r\n\t\t<tab-bar pageName=\"none\"></tab-bar>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport TabBar from '../../components/tab-bar/tab-bar.uvue';\r\n\timport { pageMap } from '@/config.js';\r\n\r\n\t/**\r\n\t * @description 精准匹配页面\r\n\t */\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tTabBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 筛选相关数据\r\n\t\t\t\tactiveDropdown: '', // 当前激活的下拉菜单\r\n\t\t\t\tselectedSchool: '',\r\n\t\t\t\tselectedMajor: '',\r\n\t\t\t\tselectedSort: '综合排序',\r\n\t\t\t\tschools: ['北京大学', '清华大学', '复旦大学', '浙江大学', '南京大学'],\r\n\t\t\t\tmajors: ['计算机科学', '软件工程', '数学', '物理', '化学', '生物'],\r\n\t\t\t\t\r\n\t\t\t\t// 环境检测\r\n\t\t\t\tisWebEnv: true, // 默认假设是Web环境\r\n\t\t\t\t\r\n\t\t\t\t// 加载状态\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\t\r\n\t\t\t\t// 老师数据\r\n\t\t\t\tteachers: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tnickname: '王教授',\r\n\t\t\t\t\t\tavatar: '/static/image/default_avatar.png',\r\n\t\t\t\t\t\tschool: '北京大学',\r\n\t\t\t\t\t\tmajor: '计算机科学',\r\n\t\t\t\t\t\ttitle: '教授',\r\n\t\t\t\t\t\tscore: '考研400分',\r\n\t\t\t\t\t\ttags: ['认证学校', '经验丰富']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tnickname: '李博士',\r\n\t\t\t\t\t\tavatar: '/static/image/default_avatar.png',\r\n\t\t\t\t\t\tschool: '清华大学',\r\n\t\t\t\t\t\tmajor: '软件工程',\r\n\t\t\t\t\t\ttitle: '副教授',\r\n\t\t\t\t\t\tscore: '考研390分',\r\n\t\t\t\t\t\ttags: ['认证学校', '教学认真']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tnickname: '张老师',\r\n\t\t\t\t\t\tavatar: '/static/image/default_avatar.png',\r\n\t\t\t\t\t\tschool: '复旦大学',\r\n\t\t\t\t\t\tmajor: '数学',\r\n\t\t\t\t\t\ttitle: '讲师',\r\n\t\t\t\t\t\tscore: '考研380分',\r\n\t\t\t\t\t\ttags: ['认证学校', '耐心细致']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\tnickname: '刘教授',\r\n\t\t\t\t\t\tavatar: '/static/image/default_avatar.png',\r\n\t\t\t\t\t\tschool: '浙江大学',\r\n\t\t\t\t\t\tmajor: '物理',\r\n\t\t\t\t\t\ttitle: '教授',\r\n\t\t\t\t\t\tscore: '考研410分',\r\n\t\t\t\t\t\ttags: ['认证学校', '通俗易懂']\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tnickname: '陈老师',\r\n\t\t\t\t\t\tavatar: '/static/image/default_avatar.png',\r\n\t\t\t\t\t\tschool: '南京大学',\r\n\t\t\t\t\t\tmajor: '化学',\r\n\t\t\t\t\t\ttitle: '副教授',\r\n\t\t\t\t\t\tscore: '考研385分',\r\n\t\t\t\t\t\ttags: ['认证学校', '答疑及时']\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tshowTeacherDetail: false,\r\n\t\t\t\tcurrentTeacher: null,\r\n\t\t\t\tactiveTab: 'chat',\r\n\t\t\t\tisMatching: false,\r\n\t\t\t\tmatchingTime: 60,\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tmatchingTimer: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t/**\r\n\t\t\t * @description 根据筛选条件过滤老师列表\r\n\t\t\t * @return {Array} 过滤后的老师列表\r\n\t\t\t */\r\n\t\t\tfilteredTeachers() {\r\n\t\t\t\t// 创建源数据的副本\r\n\t\t\t\tlet result = [...this.teachers];\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 按学校筛选\r\n\t\t\t\t\tif (this.selectedSchool) {\r\n\t\t\t\t\t\tresult = result.filter(teacher => teacher.school === this.selectedSchool);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 按专业筛选\r\n\t\t\t\t\tif (this.selectedMajor) {\r\n\t\t\t\t\t\tresult = result.filter(teacher => teacher.major === this.selectedMajor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 排序\r\n\t\t\t\t\tif (this.selectedSort === '评分排序') {\r\n\t\t\t\t\t\t// 根据分数进行排序，提取数字部分\r\n\t\t\t\t\t\tresult.sort((a, b) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst scoreA = parseInt(a.score.match(/\\d+/)[0]);\r\n\t\t\t\t\t\t\t\tconst scoreB = parseInt(b.score.match(/\\d+/)[0]);\r\n\t\t\t\t\t\t\t\treturn scoreB - scoreA; // 降序排列\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:263','分数排序异常:', error);\r\n\t\t\t\t\t\t\t\treturn 0; // 排序出错时保持原顺序\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 综合排序，可以根据业务需求实现\r\n\t\t\t\t\t\t// 这里简单实现为按ID排序\r\n\t\t\t\t\t\tresult.sort((a, b) => a.id - b.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:273','筛选处理异常:', error);\r\n\t\t\t\t\t// 发生异常时返回原始数据\r\n\t\t\t\t\treturn this.teachers;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 确保此页面能被正确路由\r\n\t\tonReady() {\r\n\t\t\tuni.__f__('log','at pages/match/match.uvue:283','Match page ready');\r\n\t\t\t// 初始化数据\r\n\t\t\tthis.initFilterData();\r\n\t\t\t// 检测当前环境\r\n\t\t\tthis.detectEnvironment();\r\n\t\t\t\r\n\t\t\t// 调试下拉菜单状态\r\n\t\t\tuni.__f__('log','at pages/match/match.uvue:290','初始下拉菜单状态:', this.activeDropdown);\r\n\t\t},\r\n\t\t// 页面显示时添加点击事件监听\r\n\t\tonShow() {\r\n\t\t\t// 添加全局点击事件处理\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 只在非App环境中使用document方法\r\n\t\t\t\tif (this.isWebEnv) {\r\n\t\t\t\t\t// 移除可能存在的旧监听器，避免重复添加\r\n\t\t\t\t\tdocument.removeEventListener('click', this.handleGlobalClick);\r\n\t\t\t\t\t// 添加新的监听器\r\n\t\t\t\t\tdocument.addEventListener('click', this.handleGlobalClick);\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:302','全局点击事件监听已添加');\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t},\r\n\t\t// 页面隐藏时移除点击事件监听\r\n\t\tonHide() {\r\n\t\t\t// 只在非App环境中使用document方法\r\n\t\t\tif (this.isWebEnv) {\r\n\t\t\t\tdocument.removeEventListener('click', this.handleGlobalClick);\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:311','全局点击事件监听已移除');\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 页面卸载时移除点击事件监听\r\n\t\tonUnload() {\r\n\t\t\t// 只在非App环境中使用document方法\r\n\t\t\tif (this.isWebEnv) {\r\n\t\t\t\tdocument.removeEventListener('click', this.handleGlobalClick);\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t/**\r\n\t\t\t * @description 监听筛选条件变化\r\n\t\t\t */\r\n\t\t\tselectedSchool() {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:326','学校变更为:', this.selectedSchool);\r\n\t\t\t\t// 这里可以添加额外的处理逻辑，例如加载专业列表等\r\n\t\t\t},\r\n\t\t\tselectedMajor() {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:330','专业变更为:', this.selectedMajor);\r\n\t\t\t},\r\n\t\t\tselectedSort() {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:333','排序方式变更为:', this.selectedSort);\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * @description 检测当前运行环境\r\n\t\t\t */\r\n\t\t\tdetectEnvironment() {\r\n\t\t\t\t// 检测是否为Web环境\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 在小程序等非Web环境下，document可能不存在或表现不同\r\n\t\t\t\t\tthis.isWebEnv = typeof document !== 'undefined' && !!document.body;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取系统信息\r\n\t\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:348','当前环境:', systemInfo);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// App环境标识\r\n\t\t\t\t\tif (systemInfo.uniPlatform === 'app') {\r\n\t\t\t\t\t\tthis.isWebEnv = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:355','环境检测失败:', e);\r\n\t\t\t\t\tthis.isWebEnv = false; // 出错时假设非Web环境，避免调用不兼容方法\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 初始化筛选数据\r\n\t\t\t */\r\n\t\t\tinitFilterData() {\r\n\t\t\t\t// 此方法可用于从API加载学校和专业数据\r\n\t\t\t\t// 示例：\r\n\t\t\t\t// this.getSchoolList();\r\n\t\t\t\t// this.getMajorList();\r\n\t\t\t\t\r\n\t\t\t\t// 如果有缓存或上次选择的数据，可以在这里恢复\r\n\t\t\t\tconst cachedSchool = uni.getStorageSync('selectedSchool');\r\n\t\t\t\tconst cachedMajor = uni.getStorageSync('selectedMajor');\r\n\t\t\t\tconst cachedSort = uni.getStorageSync('selectedSort');\r\n\t\t\t\t\r\n\t\t\t\tif (cachedSchool) this.selectedSchool = cachedSchool;\r\n\t\t\t\tif (cachedMajor) this.selectedMajor = cachedMajor;\r\n\t\t\t\tif (cachedSort) this.selectedSort = cachedSort;\r\n\t\t\t\t\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:378',\"初始化筛选数据完成:\", {\r\n\t\t\t\t\tschools: this.schools,\r\n\t\t\t\t\tmajors: this.majors,\r\n\t\t\t\t\tselectedSchool: this.selectedSchool,\r\n\t\t\t\t\tselectedMajor: this.selectedMajor\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理全局点击事件，用于关闭下拉菜单\r\n\t\t\t * @param {Event} event - 点击事件对象\r\n\t\t\t */\r\n\t\t\thandleGlobalClick(event) {\r\n\t\t\t\t// 如果没有打开的下拉菜单，不处理\r\n\t\t\t\tif (!this.activeDropdown) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 使用原生DOM API判断点击元素\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst target = event.target;\r\n\t\t\t\t\tlet isFilterItemOrDropdown = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 向上查找父元素\r\n\t\t\t\t\tlet currentElement = target;\r\n\t\t\t\t\twhile (currentElement && currentElement !== document.body) {\r\n\t\t\t\t\t\tif (currentElement.classList) {\r\n\t\t\t\t\t\t\tif (currentElement.classList.contains('filter-item') || \r\n\t\t\t\t\t\t\t\tcurrentElement.classList.contains('dropdown-menu') || \r\n\t\t\t\t\t\t\t\tcurrentElement.classList.contains('dropdown-item')) {\r\n\t\t\t\t\t\t\t\tisFilterItemOrDropdown = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentElement = currentElement.parentElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 如果点击的不是筛选项或下拉菜单，则关闭所有下拉菜单\r\n\t\t\t\t\tif (!isFilterItemOrDropdown) {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:417','点击了筛选区域外部，关闭所有下拉菜单');\r\n\t\t\t\t\t\tthis.closeAllDropdowns();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:420','点击了筛选或下拉菜单区域，保持菜单状态');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:423','处理全局点击事件失败:', error);\r\n\t\t\t\t\t// 出错时关闭所有下拉菜单（安全处理）\r\n\t\t\t\t\tthis.closeAllDropdowns();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 返回上一页\r\n\t\t\t */\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 切换下拉菜单的显示状态\r\n\t\t\t * @param {String} dropdown - 下拉菜单的标识\r\n\t\t\t */\r\n\t\t\ttoggleDropdown(dropdown) {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:441','切换下拉菜单:', dropdown, '当前状态:', this.activeDropdown);\r\n\t\t\t\t\r\n\t\t\t\t// 更新下拉菜单状态\r\n\t\t\t\tif (this.activeDropdown === dropdown) {\r\n\t\t\t\t\t// 如果当前菜单已打开，则关闭\r\n\t\t\t\t\tthis.activeDropdown = '';\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:447','关闭下拉菜单:', dropdown);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 关闭其他打开的菜单，打开当前菜单\r\n\t\t\t\t\tthis.activeDropdown = dropdown;\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:451','打开下拉菜单:', dropdown);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 关闭所有下拉菜单\r\n\t\t\t */\r\n\t\t\tcloseAllDropdowns() {\r\n\t\t\t\tthis.activeDropdown = '';\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 从下拉菜单中选择项目\r\n\t\t\t * @param {String} type - 类型（school、major、sort）\r\n\t\t\t * @param {String} value - 选择的值\r\n\t\t\t */\r\n\t\t\tselectFromDropdown(type, value) {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:468',`选择${type}:`, value);\r\n\t\t\t\t\r\n\t\t\t\t// 根据类型设置选中的值\r\n\t\t\t\tif (type === 'school') {\r\n\t\t\t\t\tthis.selectedSchool = value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 保存选择到本地存储\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('selectedSchool', value);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:478','保存学校选择失败', e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:481',\"已选择学校:\", value);\r\n\t\t\t\t} else if (type === 'major') {\r\n\t\t\t\t\tthis.selectedMajor = value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 保存选择到本地存储\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('selectedMajor', value);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:489','保存专业选择失败', e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:492',\"已选择专业:\", value);\r\n\t\t\t\t} else if (type === 'sort') {\r\n\t\t\t\t\tthis.selectedSort = value;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 保存选择到本地存储\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.setStorageSync('selectedSort', value);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:500','保存排序选择失败', e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:503',\"已选择排序方式:\", value);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 关闭下拉菜单\r\n\t\t\t\tthis.closeAllDropdowns();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理\"马上沟通\"按钮点击\r\n\t\t\t * @param {Number} teacherId - 老师的ID\r\n\t\t\t */\r\n\t\t\thandleCommunicate(teacherId) {\r\n\t\t\t\t// 显示加载提示\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// 模拟API调用延迟\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// 在实际应用中，这里应该调用Box-IM的API\r\n\t\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:524',`打开与老师${teacherId}的聊天窗口`);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 假设有一个全局的boxIM对象\r\n\t\t\t\t\t\tif (window.boxIM && typeof window.boxIM.openChat === 'function') {\r\n\t\t\t\t\t\t\twindow.boxIM.openChat(teacherId);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 如果没有找到Box-IM的API，模拟一个成功的跳转\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '正在打开聊天窗口',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 这里可以跳转到一个聊天页面\r\n\t\t\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t\t\t//   url: `/pages/chat/chat?teacherId=${teacherId}`\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/match/match.uvue:542','打开聊天窗口失败:', error);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '老师当前不在线，请稍后再试',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 显示选择弹出框\r\n\t\t\t * @param {String} type - 弹出框类型\r\n\t\t\t */\r\n\t\t\tshowPickerPopup(type) {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:556','显示选择弹出框:', type);\r\n\t\t\t\t\r\n\t\t\t\t// 打开对应的弹出框\r\n\t\t\t\tthis.$refs[`${type}Popup`].open();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 关闭弹出框\r\n\t\t\t * @param {String} type - 弹出框类型\r\n\t\t\t */\r\n\t\t\tclosePopup(type) {\r\n\t\t\t\tuni.__f__('log','at pages/match/match.uvue:567','关闭弹出框:', type);\r\n\t\t\t\t\r\n\t\t\t\t// 关闭对应的弹出框\r\n\t\t\t\tthis.$refs[`${type}Popup`].close();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 处理无匹配结果的情况\r\n\t\t\t */\r\n\t\t\thandleNoMatchResult() {\r\n\t\t\t\t// 显示相关推荐\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '暂无精确匹配',\r\n\t\t\t\t\tcontent: '是否查看相关推荐？（同专业其他学校或相关专业）',\r\n\t\t\t\t\tconfirmText: '查看推荐',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// 获取相关推荐\r\n\t\t\t\t\t\t\tthis.getRelatedTeachers();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 用户取消，可以显示空状态\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/match/match.uvue:589','用户取消查看推荐');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 获取相关推荐教师\r\n\t\t\t */\r\n\t\t\tgetRelatedTeachers() {\r\n\t\t\t\t// 显示加载状态\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// 准备参数（放宽筛选条件）\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tmajor: this.selectedMajor || '',\r\n\t\t\t\t\tisRelated: true // 标记为相关推荐请求\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 调用API获取相关教师\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: '您的API地址/api/related-teachers',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: params,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200 && res.data) {\r\n\t\t\t\t\t\t\tthis.teachers = res.data.teachers || [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.teachers.length > 0) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '已显示相关推荐',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 所有规则都失效的情况\r\n\t\t\t\t\t\t\t\tthis.startMatchingTimer();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 开始匹配计时器\r\n\t\t\t */\r\n\t\t\tstartMatchingTimer() {\r\n\t\t\t\t// 显示匹配中状态\r\n\t\t\t\tthis.isMatching = true;\r\n\t\t\t\tthis.matchingTime = 60; // 60秒倒计时\r\n\t\t\t\tthis.showCancelButton = true;\r\n\t\t\t\t\r\n\t\t\t\t// 开始倒计时\r\n\t\t\t\tthis.matchingTimer = setInterval(() => {\r\n\t\t\t\t\tthis.matchingTime--;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.matchingTime <= 0) {\r\n\t\t\t\t\t\t// 停止计时器\r\n\t\t\t\t\t\tclearInterval(this.matchingTimer);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 显示优惠提示\r\n\t\t\t\t\t\tthis.showLongTermMatchingTip();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 取消匹配\r\n\t\t\t */\r\n\t\t\tcancelMatching() {\r\n\t\t\t\tif (this.matchingTimer) {\r\n\t\t\t\t\tclearInterval(this.matchingTimer);\r\n\t\t\t\t\tthis.matchingTimer = null;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isMatching = false;\r\n\t\t\t\tthis.showCancelButton = false;\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已取消匹配',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 显示长期匹配提示\r\n\t\t\t */\r\n\t\t\tshowLongTermMatchingTip() {\r\n\t\t\t\tthis.isMatching = false;\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '匹配超时',\r\n\t\t\t\t\tcontent: '我们将在后台继续为您匹配合适的老师，并提供优惠。是否继续等待？',\r\n\t\t\t\t\tconfirmText: '继续等待',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// 发送后台长期匹配请求\r\n\t\t\t\t\t\t\tthis.startLongTermMatching();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 用户取消\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '已取消匹配',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 开始后台长期匹配\r\n\t\t\t */\r\n\t\t\tstartLongTermMatching() {\r\n\t\t\t\t// 调用API启动后台匹配任务\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: '您的API地址/api/long-term-matching',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tschool: this.selectedSchool,\r\n\t\t\t\t\t\tmajor: this.selectedMajor,\r\n\t\t\t\t\t\tuserId: '当前用户ID' // 需要从全局状态或存储中获取\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '已启动后台匹配',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 打开教师详情弹窗\r\n\t\t\t * @param {Object} teacher - 教师对象\r\n\t\t\t */\r\n\t\t\tshowTeacherDetailPopup(teacher) {\r\n\t\t\t\tthis.currentTeacher = teacher;\r\n\t\t\t\tthis.showTeacherDetail = true;\r\n\t\t\t\tthis.activeTab = 'chat'; // 默认显示聊天选项卡\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 关闭教师详情弹窗\r\n\t\t\t */\r\n\t\t\tcloseTeacherDetail() {\r\n\t\t\t\tthis.showTeacherDetail = false;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 切换选项卡\r\n\t\t\t * @param {String} tab - 选项卡名称\r\n\t\t\t */\r\n\t\t\tswitchTab(tab) {\r\n\t\t\t\tthis.activeTab = tab;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 开始聊天\r\n\t\t\t */\r\n\t\t\tstartChat() {\r\n\t\t\t\t// 关闭弹窗\r\n\t\t\t\tthis.closeTeacherDetail();\r\n\t\t\t\t\r\n\t\t\t\t// 调用Box-IM打开聊天\r\n\t\t\t\tif (this.currentTeacher) {\r\n\t\t\t\t\tthis.handleCommunicate(this.currentTeacher.id);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 查看教师完整主页\r\n\t\t\t */\r\n\t\t\tviewTeacherProfile() {\r\n\t\t\t\tif (this.currentTeacher) {\r\n\t\t\t\t\t// 导航到教师主页\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/pages/teacher/profile?id=${this.currentTeacher.id}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 监听滚动到底部\r\n\t\t\t */\r\n\t\t\tonReachBottom() {\r\n\t\t\t\t// 如果不是在匹配中状态且列表有内容\r\n\t\t\t\tif (!this.isMatching && this.filteredTeachers.length > 0) {\r\n\t\t\t\t\t// 如果已经加载完所有数据\r\n\t\t\t\t\tif (this.isAllLoaded) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已经到底啦~',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 加载更多数据\r\n\t\t\t\t\t\tthis.loadMoreTeachers();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 加载更多教师数据\r\n\t\t\t */\r\n\t\t\tloadMoreTeachers() {\r\n\t\t\t\tif (this.isLoadingMore) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoadingMore = true;\r\n\t\t\t\tthis.page++;\r\n\t\t\t\t\r\n\t\t\t\t// 准备参数\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\t\tschool: this.selectedSchool || '',\r\n\t\t\t\t\tmajor: this.selectedMajor || '',\r\n\t\t\t\t\tsortType: this.selectedSort || '综合排序'\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 调用API加载更多\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: '您的API地址/api/teachers',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdata: params,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200 && res.data) {\r\n\t\t\t\t\t\t\tconst newTeachers = res.data.teachers || [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (newTeachers.length > 0) {\r\n\t\t\t\t\t\t\t\t// 添加新数据到列表\r\n\t\t\t\t\t\t\t\tthis.teachers = [...this.teachers, ...newTeachers];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 没有更多数据\r\n\t\t\t\t\t\t\t\tthis.isAllLoaded = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.isLoadingMore = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @description 打开教师详情\r\n\t\t\t * @param {Number} teacherId - 教师ID\r\n\t\t\t */\r\n\t\t\tviewTeacherDetail(teacherId) {\r\n\t\t\t\t// 跳转到教师详情页\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/teacher/profile?id=${teacherId}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/* 全局样式变量 */\r\n\tpage {\r\n\t\t--primary-color: #1E90FF;\r\n\t\t--primary-light: #87CEEB;\r\n\t\t--primary-dark: #0073CF;\r\n\t\t--gradient-blue: linear-gradient(135deg, #1E90FF, #00BFFF);\r\n\t\t--gradient-blue-light: linear-gradient(135deg, #87CEEB, #48D1CC);\r\n\t\t--text-primary: #333333;\r\n\t\t--text-secondary: #666666;\r\n\t\t--text-light: #999999;\r\n\t\t--bg-color: #F5F9FC;\r\n\t\t--card-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n\t\tfont-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\r\n\t}\r\n\t\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: var(--bg-color);\r\n\t}\r\n\t\r\n\t.header {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tpadding: 15px 20px;\r\n\t\tbackground-image: var(--gradient-blue);\r\n\t\tborder-bottom-left-radius: 20px;\r\n\t\tborder-bottom-right-radius: 20px;\r\n\t\tbox-shadow: 0 4px 15px rgba(30, 144, 255, 0.2);\r\n\t}\r\n\t\r\n\t.back-button {\r\n\t\tpadding: 8px 15px;\r\n\t\tmargin-right: 15px;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.25);\r\n\t\tborder-radius: 20px;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.back-button:active {\r\n\t\ttransform: scale(0.95);\r\n\t\tbackground-color: rgba(255, 255, 255, 0.35);\r\n\t}\r\n\t\r\n\t.back-button text {\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t\r\n\t.title {\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #ffffff;\r\n\t\tletter-spacing: 1px;\r\n\t\ttext-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t/* 筛选区域样式 */\r\n\t.filter-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tpadding: 12px 15px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 15px;\r\n\t\tmargin: 15px;\r\n\t\tbox-shadow: var(--card-shadow);\r\n\t\tposition: relative;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t\r\n\t.filter-item {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 8px 0;\r\n\t\tposition: relative;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.filter-item.active {\r\n\t\ttransform: scale(1.02);\r\n\t}\r\n\t\r\n\t.filter-text {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: var(--text-primary);\r\n\t\tmargin-right: 5px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.filter-item.active .filter-text {\r\n\t\tcolor: var(--primary-color);\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.dropdown-icon {\r\n\t\twidth: 16px;\r\n\t\theight: 16px;\r\n\t\ttransition: transform 0.3s;\r\n\t}\r\n\t\r\n\t.filter-item.active .dropdown-icon {\r\n\t\ttransform: rotate(180deg);\r\n\t}\r\n\t\r\n\t/* 下拉菜单样式 */\r\n\t.dropdown-menu {\r\n\t\tposition: absolute;\r\n\t\ttop: 100%;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 2001;\r\n\t\tborder-radius: 12px;\r\n\t\tmax-height: 200px;\r\n\t\toverflow-y: auto;\r\n\t\tmargin-top: 8px;\r\n\t\tanimation: dropdownFadeIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n\t}\r\n\t\r\n\t@keyframes dropdownFadeIn {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(-15px);\r\n\t\t}\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\t\r\n\t.dropdown-item {\r\n\t\tpadding: 12px 15px;\r\n\t\tfont-size: 14px;\r\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.dropdown-item.selected {\r\n\t\tbackground-image: linear-gradient(to right, rgba(30, 144, 255, 0.1), rgba(0, 191, 255, 0.1));\r\n\t\tcolor: var(--primary-color);\r\n\t}\r\n\t\r\n\t.dropdown-item.selected text {\r\n\t\tcolor: var(--primary-color);\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.dropdown-item:active {\r\n\t\tbackground-color: rgba(135, 206, 235, 0.1);\r\n\t}\r\n\t\r\n\t.dropdown-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t/* 卡片列表样式 */\r\n\t.card-list {\r\n\t\tflex: 1;\r\n\t\tpadding: 10px 15px;\r\n\t}\r\n\t\r\n\t.teacher-card {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 16px;\r\n\t\tpadding: 18px;\r\n\t\tmargin-bottom: 15px;\r\n\t\tbox-shadow: var(--card-shadow);\r\n\t\ttransition: transform 0.3s ease, box-shadow 0.3s ease;\r\n\t}\r\n\t\r\n\t.teacher-card:active {\r\n\t\ttransform: scale(0.98);\r\n\t\tbox-shadow: 0 2px 8px rgba(30, 144, 255, 0.1);\r\n\t}\r\n\t\r\n\t.card-left {\r\n\t\tmargin-right: 15px;\r\n\t}\r\n\t\r\n\t.teacher-avatar {\r\n\t\twidth: 70px;\r\n\t\theight: 70px;\r\n\t\tborder-radius: 35px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tborder: 3px solid rgba(30, 144, 255, 0.2);\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.card-middle {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.teacher-name {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 6px;\r\n\t\tcolor: var(--text-primary);\r\n\t\tletter-spacing: 0.5px;\r\n\t}\r\n\t\r\n\t.teacher-info {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: var(--text-secondary);\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t\r\n\t.teacher-tags {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\t\r\n\t.tag {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #ffffff;\r\n\t\tbackground-image: var(--gradient-blue-light);\r\n\t\tpadding: 3px 10px;\r\n\t\tborder-radius: 12px;\r\n\t\tmargin-right: 8px;\r\n\t\tmargin-bottom: 5px;\r\n\t\tbox-shadow: 0 2px 5px rgba(30, 144, 255, 0.2);\r\n\t}\r\n\t\r\n\t.card-right {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t\r\n\t.communicate-btn {\r\n\t\tbackground-image: var(--gradient-blue);\r\n\t\tcolor: #ffffff;\r\n\t\tfont-size: 14px;\r\n\t\tpadding: 8px 15px;\r\n\t\tborder-radius: 20px;\r\n\t\tborder: none;\r\n\t\tfont-weight: 500;\r\n\t\tbox-shadow: 0 3px 10px rgba(30, 144, 255, 0.3);\r\n\t\ttransition: transform 0.2s ease, box-shadow 0.2s ease;\r\n\t}\r\n\t\r\n\t.communicate-btn:active {\r\n\t\ttransform: translateY(2px);\r\n\t\tbox-shadow: 0 1px 5px rgba(30, 144, 255, 0.3);\r\n\t}\r\n\t\r\n\t/* 空状态样式 */\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 200px;\r\n\t\tcolor: var(--text-light);\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t\r\n\t.empty-state text {\r\n\t\tmargin-top: 15px;\r\n\t\tcolor: var(--text-light);\r\n\t}\r\n\t\r\n\t.empty-state::before {\r\n\t\tcontent: '';\r\n\t\twidth: 80px;\r\n\t\theight: 80px;\r\n\t\tbackground-color: rgba(30, 144, 255, 0.1);\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\t\r\n\t/* 加载提示样式 */\r\n\t.loading-mask {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 1001;\r\n\t\tbackdrop-filter: blur(3px);\r\n\t}\r\n\t\r\n\t.loading-content {\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 25px 30px;\r\n\t\tborder-radius: 16px;\r\n\t\tbox-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n\t\tanimation: pulse 1.5s infinite alternate;\r\n\t}\r\n\t\r\n\t.loading-content text {\r\n\t\tcolor: var(--primary-color);\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\t\r\n\t@keyframes pulse {\r\n\t\tfrom {\r\n\t\t\tbox-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n\t\t}\r\n\t\tto {\r\n\t\t\tbox-shadow: 0 10px 30px rgba(30, 144, 255, 0.4);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* 匹配计时器样式 */\r\n\t.matching-timer {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 25px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 20px;\r\n\t\tmargin: 20px;\r\n\t\tbox-shadow: var(--card-shadow);\r\n\t\tanimation: fadeInUp 0.5s ease-out;\r\n\t}\r\n\t\r\n\t@keyframes fadeInUp {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(20px);\r\n\t\t}\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\t\r\n\t.timer-text {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: var(--text-primary);\r\n\t\tmargin-bottom: 15px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.timer-countdown {\r\n\t\tfont-size: 32px;\r\n\t\tbackground: var(--gradient-blue);\r\n\t\t-webkit-background-clip: text;\r\n\t\t-webkit-text-fill-color: transparent;\r\n\t\tfont-weight: bold;\r\n\t\tmargin: 15px 0;\r\n\t}\r\n\t\r\n\t.cancel-btn {\r\n\t\tmargin-top: 20px;\r\n\t\tpadding: 10px 30px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tcolor: var(--text-secondary);\r\n\t\tborder-radius: 25px;\r\n\t\tfont-size: 15px;\r\n\t\tfont-weight: 500;\r\n\t\tbox-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.cancel-btn:active {\r\n\t\tbackground-color: #eeeeee;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\t\r\n\t/* 教师详情弹窗样式 */\r\n\t.teacher-detail-popup {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 9999;\r\n\t}\r\n\t\r\n\t.popup-mask {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\t\tbackdrop-filter: blur(3px);\r\n\t}\r\n\t\r\n\t.popup-content {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-top-left-radius: 25px;\r\n\t\tborder-top-right-radius: 25px;\r\n\t\tpadding-bottom: 30px;\r\n\t\tmax-height: 85%;\r\n\t\toverflow-y: auto;\r\n\t\tbox-shadow: 0 -5px 25px rgba(0, 0, 0, 0.1);\r\n\t\tanimation: slideUp 0.3s cubic-bezier(0.19, 1, 0.22, 1);\r\n\t}\r\n\t\r\n\t@keyframes slideUp {\r\n\t\tfrom {\r\n\t\t\ttransform: translateY(100%);\r\n\t\t}\r\n\t\tto {\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\t\r\n\t.teacher-header {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 25px;\r\n\t\tbackground-image: linear-gradient(to right, rgba(30, 144, 255, 0.1), rgba(0, 191, 255, 0.1));\r\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n\t}\r\n\t\r\n\t.teacher-large-avatar {\r\n\t\twidth: 90px;\r\n\t\theight: 90px;\r\n\t\tborder-radius: 45px;\r\n\t\tmargin-right: 20px;\r\n\t\tborder: 4px solid white;\r\n\t\tbox-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\t\r\n\t.teacher-header-info {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.teacher-header-name {\r\n\t\tfont-size: 22px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: var(--text-primary);\r\n\t\tmargin-bottom: 8px;\r\n\t\tletter-spacing: 0.5px;\r\n\t}\r\n\t\r\n\t.teacher-header-title {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: var(--text-secondary);\r\n\t}\r\n\t\r\n\t.detail-tabs {\r\n\t\tdisplay: flex;\r\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.05);\r\n\t\tbackground-color: #ffffff;\r\n\t}\r\n\t\r\n\t.tab {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t\tpadding: 15px 0;\r\n\t\tposition: relative;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: var(--text-secondary);\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.tab.active {\r\n\t\tcolor: var(--primary-color);\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.tab.active:after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\twidth: 30px;\r\n\t\theight: 3px;\r\n\t\tbackground-image: var(--gradient-blue);\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\t\r\n\t.tab-content {\r\n\t\tpadding: 25px;\r\n\t}\r\n\t\r\n\t.chat-tip {\r\n\t\ttext-align: center;\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t\r\n\t.start-chat-btn, .view-profile-btn {\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tline-height: 50px;\r\n\t\tbackground-image: var(--gradient-blue);\r\n\t\tcolor: #ffffff;\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: 600;\r\n\t\tborder-radius: 25px;\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 25px;\r\n\t\tbox-shadow: 0 5px 15px rgba(30, 144, 255, 0.3);\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.start-chat-btn:active, .view-profile-btn:active {\r\n\t\ttransform: translateY(2px);\r\n\t\tbox-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);\r\n\t}\r\n\t\r\n\t.profile-content {\r\n\t\tmargin-bottom: 25px;\r\n\t}\r\n\t\r\n\t.profile-section {\r\n\t\tmargin-bottom: 25px;\r\n\t}\r\n\t\r\n\t.section-title {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: var(--text-primary);\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 15px;\r\n\t\tposition: relative;\r\n\t\tpadding-left: 15px;\r\n\t}\r\n\t\r\n\t.section-title:before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t\twidth: 4px;\r\n\t\theight: 18px;\r\n\t\tbackground-image: var(--gradient-blue);\r\n\t\tborder-radius: 2px;\r\n\t}\r\n\t\r\n\t.section-content {\r\n\t\tfont-size: 15px;\r\n\t\tcolor: var(--text-secondary);\r\n\t\tline-height: 1.6;\r\n\t\tpadding-left: 15px;\r\n\t}\r\n\t\r\n\t.expertise-tags {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding-left: 15px;\r\n\t}\r\n\t\r\n\t.expertise-tag {\r\n\t\tpadding: 8px 15px;\r\n\t\tbackground-image: linear-gradient(to right, rgba(30, 144, 255, 0.1), rgba(0, 191, 255, 0.1));\r\n\t\tcolor: var(--primary-color);\r\n\t\tborder-radius: 20px;\r\n\t\tmargin-right: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tfont-size: 13px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.avatar-hover {\r\n\t\tborder: 2px solid var(--primary-color);\r\n\t}\r\n</style> ","import MiniProgramPage from 'E:/研师录与其他人共享文件/teacherDirectory/前端yanshilu/pages/match/match.uvue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","components","TabBar","data","activeDropdown","selectedSchool","selectedMajor","selectedSort","schools","majors","isWebEnv","isLoading","teachers","UTSJSONObject","id","nickname","avatar","school","major","title","score","tags","showTeacherDetail","currentTeacher","activeTab","isMatching","matchingTime","showCancelButton","matchingTimer","computed","filteredTeachers","result","this","filter","teacher","sort","a","b","scoreA","parseInt","match","error","uni","index","__f__","onReady","initFilterData","detectEnvironment","onShow","setTimeout","document","removeEventListener","handleGlobalClick","addEventListener","onHide","onUnload","watch","methods","body","systemInfo","getSystemInfoSync","uniPlatform","e","cachedSchool","getStorageSync","cachedMajor","cachedSort","event","target","isFilterItemOrDropdown","currentElement","classList","contains","parentElement","closeAllDropdowns","goBack","navigateBack","toggleDropdown","dropdown","selectFromDropdown","type","value","setStorageSync","handleCommunicate","teacherId","window","boxIM","openChat","showToast","icon","showPickerPopup","$refs","open","closePopup","close","handleNoMatchResult","showModal","content","confirmText","cancelText","success","res","confirm","getRelatedTeachers","params","isRelated","request","url","method","statusCode","length","startMatchingTimer","complete","setInterval","clearInterval","showLongTermMatchingTip","cancelMatching","startLongTermMatching","userId","showTeacherDetailPopup","closeTeacherDetail","switchTab","tab","startChat","viewTeacherProfile","navigateTo","onReachBottom","isAllLoaded","loadMoreTeachers","isLoadingMore","page","pageSize","sortType","newTeachers","viewTeacherDetail","wx","createPage","MiniProgramPage"],"mappings":"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"}