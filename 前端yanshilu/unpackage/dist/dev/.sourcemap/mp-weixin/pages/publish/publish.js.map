{"version":3,"file":"publish.js","sources":["pages/publish/publish.uvue","../../HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGlzaC9wdWJsaXNoLnV2dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"content\">\r\n      <!-- 动态列表区域 -->\r\n      <view class=\"post-list\">\r\n        <!-- 下拉刷新提示 -->\r\n        <view class=\"refresh-tip\" v-if=\"isRefreshing\">\r\n          <text>正在刷新...</text>\r\n        </view>\r\n        \r\n        <!-- 分类筛选区域 -->\r\n        <view class=\"filter-section\">\r\n          <view class=\"filter-item\" \r\n                :class=\"{ active: filter.category === '专业课' }\"\r\n                @tap=\"selectCategory('专业课')\">\r\n            <text>专业课</text>\r\n            <image class=\"down-arrow\" src=\"/static/image/arrow_down.svg\" mode=\"aspectFit\"></image>\r\n          </view>\r\n          <view class=\"filter-item\" \r\n                :class=\"{ active: filter.category === '数学' }\"\r\n                @tap=\"selectCategory('数学')\">\r\n            <text>数学</text>\r\n          </view>\r\n          <view class=\"filter-item\" \r\n                :class=\"{ active: filter.category === '英语' }\"\r\n                @tap=\"selectCategory('英语')\">\r\n            <text>英语</text>\r\n          </view>\r\n          <view class=\"filter-item\" \r\n                :class=\"{ active: filter.category === '政治' }\"\r\n                @tap=\"selectCategory('政治')\">\r\n            <text>政治</text>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 动态卡片 -->\r\n        <view class=\"post-card\" v-for=\"(post, index) in posts\" :key=\"index\" @tap=\"viewPostDetail(post.id)\">\r\n          <view class=\"post-header\">\r\n            <view class=\"user-info\">\r\n              <image class=\"avatar\" :src=\"post.avatar || '/static/image/default_avatar.png'\" mode=\"aspectFill\" @tap.stop=\"navigateToUserDetail(post.userId)\"></image>\r\n              <view class=\"user-detail\">\r\n                <text class=\"username\">{{post.nickname}}</text>\r\n                <text class=\"school\">{{post.school}}</text>\r\n                <text class=\"major\">{{post.major}}</text>\r\n              </view>\r\n            </view>\r\n            <button class=\"follow-btn\" :class=\"{ followed: post.isFollowed }\" @tap.stop=\"toggleFollow(post)\">\r\n              {{post.isFollowed ? '已关注' : '关注'}}\r\n            </button>\r\n          </view>\r\n          \r\n          <view class=\"post-content\">\r\n            <text class=\"post-text\">{{post.content}}</text>\r\n          </view>\r\n          \r\n          <view class=\"post-footer\">\r\n            <view class=\"stat-item\">\r\n              <text class=\"stat-count\">{{post.viewCount}} · 浏览</text>\r\n            </view>\r\n            <view class=\"action-bar\">\r\n              <view class=\"action-item\" @tap.stop=\"likePost(post)\">\r\n                <image class=\"action-icon\" :src=\"post.isLiked ? '/static/image/like_filled.svg' : '/static/image/like.svg'\" mode=\"aspectFit\"></image>\r\n                <text class=\"action-count\">{{post.likeCount}}</text>\r\n              </view>\r\n              <view class=\"action-item\" @tap.stop=\"commentPost(post)\">\r\n                <image class=\"action-icon\" src=\"/static/image/comment.svg\" mode=\"aspectFit\"></image>\r\n                <text class=\"action-count\">{{post.commentCount}}</text>\r\n              </view>\r\n              <view class=\"action-item\" @tap.stop=\"collectPost(post)\">\r\n                <image class=\"action-icon\" :src=\"post.isCollected ? '/static/image/star_filled.svg' : '/static/image/star.svg'\" mode=\"aspectFit\"></image>\r\n                <text class=\"action-count\">{{post.collectCount}}</text>\r\n              </view>\r\n              <view class=\"action-item\" @tap.stop=\"sharePost(post)\">\r\n                <image class=\"action-icon\" src=\"/static/image/share.svg\" mode=\"aspectFit\"></image>\r\n                <text class=\"action-count\">{{post.shareCount}}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 加载中动画 -->\r\n        <view class=\"loading-container\" v-if=\"isLoading && posts.length > 0\">\r\n          <view class=\"loading-indicator\"></view>\r\n        </view>\r\n        \r\n        <!-- 无数据提示 -->\r\n        <view class=\"empty-tip\" v-if=\"posts.length === 0 && !isLoading\">\r\n          <text>暂无动态，快去发布吧</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 发布按钮 -->\r\n    <view class=\"publish-btn\" @tap=\"navigateToPublishEditor\">\r\n      <text class=\"plus-icon\">+</text>\r\n    </view>\r\n    \r\n    <!-- 底部导航栏 -->\r\n    <tab-bar pageName=\"publish\"></tab-bar>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  import TabBar from '../../components/tab-bar/tab-bar.uvue';\r\n  \r\n  export default {\r\n    components: {\r\n      TabBar\r\n    },\r\n    data() {\r\n      return {\r\n        posts: [],\r\n        filter: {\r\n          category: '专业课',\r\n          school: '',\r\n          major: '',\r\n          userType: 'all', // 'teacher', 'student', 'all'\r\n          sort: 'latest' // 'latest', 'popular'\r\n        },\r\n        currentPage: 1,\r\n        isLoading: false,\r\n        hasMore: true,\r\n        isRefreshing: false\r\n      }\r\n    },\r\n    onShow() {\r\n      // 确保系统tabBar被隐藏 - 修改这里以修复hideTabBar错误\r\n      try {\r\n        // 使用try-catch避免hideTabBar错误导致整个函数失败\r\n        uni.hideTabBar({\r\n          fail: (err) => {\r\n            uni.__f__('error','at pages/publish/publish.uvue:132','hideTabBar失败:', err);\r\n          }\r\n        });\r\n      } catch (e) {\r\n        uni.__f__('error','at pages/publish/publish.uvue:136','hideTabBar异常:', e);\r\n      }\r\n      \r\n      // 加载动态列表\r\n      this.loadPosts();\r\n    },\r\n    // 下拉刷新\r\n    onPullDownRefresh() {\r\n      this.currentPage = 1;\r\n      this.posts = [];\r\n      this.loadPosts(() => {\r\n        uni.stopPullDownRefresh();\r\n      });\r\n    },\r\n    // 上拉加载更多\r\n    onReachBottom() {\r\n      if (this.hasMore && !this.isLoading) {\r\n        this.loadMorePosts();\r\n      }\r\n    },\r\n    methods: {\r\n      /**\r\n       * @description 加载动态列表\r\n       * @param {Function} callback - 完成后的回调函数\r\n       */\r\n      loadPosts(callback) {\r\n        if (this.isLoading) return;\r\n        \r\n        this.isLoading = true;\r\n        \r\n        // 构建请求参数\r\n        const params = {\r\n          page: this.currentPage,\r\n          pageSize: 10,\r\n          category: this.filter.category,\r\n          school: this.filter.school,\r\n          major: this.filter.major,\r\n          userType: this.filter.userType,\r\n          sort: this.filter.sort\r\n        };\r\n        \r\n        // 修改为模拟数据以避免API错误\r\n        const mockPosts = this.getMockData();\r\n        this.posts = this.currentPage === 1 ? mockPosts : [...this.posts, ...mockPosts];\r\n        this.hasMore = this.currentPage < 3; // 模拟3页数据\r\n        \r\n        setTimeout(() => {\r\n          this.isLoading = false;\r\n          callback && callback();\r\n        }, 500);\r\n        \r\n        // 实际API调用（暂时注释，等待后端接口准备好后可以取消注释）\r\n        /*\r\n        uni.request({\r\n          url: 'YOUR_API_URL/posts',\r\n          data: params,\r\n          method: 'GET',\r\n          success: (res) => {\r\n            if (res.statusCode === 200 && res.data) {\r\n              if (this.currentPage === 1) {\r\n                this.posts = res.data.posts || [];\r\n              } else {\r\n                this.posts = [...this.posts, ...(res.data.posts || [])];\r\n              }\r\n              \r\n              this.hasMore = res.data.hasMore || false;\r\n              \r\n              // 如果没有数据但用户应用了筛选条件，尝试推荐相关内容\r\n              if (this.posts.length === 0 && this.hasFilter()) {\r\n                this.loadRelatedPosts();\r\n              }\r\n            } else {\r\n              uni.showToast({\r\n                title: '加载失败',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('error','at pages/publish/publish.uvue:215','请求失败:', err);\r\n            uni.showToast({\r\n              title: '网络异常',\r\n              icon: 'none'\r\n            });\r\n          },\r\n          complete: () => {\r\n            this.isLoading = false;\r\n            callback && callback();\r\n          }\r\n        });\r\n        */\r\n      },\r\n      \r\n      /**\r\n       * @description 判断是否应用了筛选条件\r\n       * @return {Boolean} 是否有筛选条件\r\n       */\r\n      hasFilter() {\r\n        return this.filter.school || \r\n               this.filter.major || \r\n               this.filter.userType !== 'all' || \r\n               this.filter.sort !== 'latest';\r\n      },\r\n      \r\n      /**\r\n       * @description 加载相关推荐内容\r\n       */\r\n      loadRelatedPosts() {\r\n        uni.showModal({\r\n          title: '暂无匹配内容',\r\n          content: '为您推荐相关内容',\r\n          showCancel: false,\r\n          success: () => {\r\n            // 放宽筛选条件\r\n            const tempFilter = {\r\n              category: this.filter.category,\r\n              major: this.filter.major, // 保留专业筛选\r\n              school: '', // 清空学校筛选\r\n              userType: 'all',\r\n              sort: 'latest'\r\n            };\r\n            \r\n            uni.request({\r\n              url: 'YOUR_API_URL/related-posts',\r\n              data: tempFilter,\r\n              method: 'GET',\r\n              success: (res) => {\r\n                if (res.statusCode === 200 && res.data) {\r\n                  this.posts = res.data.posts || [];\r\n                  \r\n                  if (this.posts.length === 0) {\r\n                    uni.showToast({\r\n                      title: '没有找到相关内容',\r\n                      icon: 'none'\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 加载更多动态\r\n       */\r\n      loadMorePosts() {\r\n        this.currentPage++;\r\n        this.loadPosts();\r\n      },\r\n      \r\n      /**\r\n       * @description 查看动态详情\r\n       * @param {Number} postId - 动态ID\r\n       */\r\n      viewPostDetail(postId) {\r\n        uni.navigateTo({\r\n          url: `/pages/post/detail?id=${postId}`\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 跳转到用户详情页\r\n       * @param {Number} userId - 用户ID\r\n       */\r\n      navigateToUserDetail(userId) {\r\n        // 判断用户类型并跳转到相应的详情页\r\n        // 这里简单处理，假设全部是老师类型\r\n        uni.navigateTo({\r\n          url: `/pages/teacher/profile?id=${userId}`\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 关注/取消关注用户\r\n       * @param {Object} post - 动态对象\r\n       */\r\n      toggleFollow(post) {\r\n        const action = post.isFollowed ? 'unfollow' : 'follow';\r\n        const userId = post.userId;\r\n        \r\n        uni.request({\r\n          url: `YOUR_API_URL/user/${action}`,\r\n          method: 'POST',\r\n          data: { userId },\r\n          success: (res) => {\r\n            if (res.statusCode === 200) {\r\n              post.isFollowed = !post.isFollowed;\r\n              uni.showToast({\r\n                title: post.isFollowed ? '已关注' : '已取消关注',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 点赞动态\r\n       * @param {Object} post - 动态对象\r\n       */\r\n      likePost(post) {\r\n        const action = post.isLiked ? 'unlike' : 'like';\r\n        \r\n        uni.request({\r\n          url: `YOUR_API_URL/post/${action}`,\r\n          method: 'POST',\r\n          data: { postId: post.id },\r\n          success: (res) => {\r\n            if (res.statusCode === 200) {\r\n              post.isLiked = !post.isLiked;\r\n              post.likeCount += post.isLiked ? 1 : -1;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 评论动态\r\n       * @param {Object} post - 动态对象\r\n       */\r\n      commentPost(post) {\r\n        uni.navigateTo({\r\n          url: `/pages/post/detail?id=${post.id}&showComment=true`\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 收藏动态\r\n       * @param {Object} post - 动态对象\r\n       */\r\n      collectPost(post) {\r\n        const action = post.isCollected ? 'uncollect' : 'collect';\r\n        \r\n        uni.request({\r\n          url: `YOUR_API_URL/post/${action}`,\r\n          method: 'POST',\r\n          data: { postId: post.id },\r\n          success: (res) => {\r\n            if (res.statusCode === 200) {\r\n              post.isCollected = !post.isCollected;\r\n              post.collectCount += post.isCollected ? 1 : -1;\r\n              \r\n              uni.showToast({\r\n                title: post.isCollected ? '已收藏' : '已取消收藏',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 分享动态\r\n       * @param {Object} post - 动态对象\r\n       */\r\n      sharePost(post) {\r\n        uni.showActionSheet({\r\n          itemList: ['分享给好友', '分享到微信好友', '分享到微信群聊', '分享到朋友圈'],\r\n          success: (res) => {\r\n            const index = res.tapIndex;\r\n            \r\n            // 根据选择执行不同的分享操作\r\n            switch(index) {\r\n              case 0: // 分享给好友\r\n                uni.navigateTo({\r\n                  url: `/pages/share/friends?postId=${post.id}`\r\n                });\r\n                break;\r\n              case 1: // 分享到微信好友\r\n              case 2: // 分享到微信群聊\r\n              case 3: // 分享到朋友圈\r\n                uni.share({\r\n                  provider: 'weixin',\r\n                  scene: index === 1 ? 'WXSceneSession' : (index === 2 ? 'WXSceneSession' : 'WXSceneTimeline'),\r\n                  type: 0,\r\n                  title: post.title || '分享内容',\r\n                  summary: post.content.substring(0, 50) + (post.content.length > 50 ? '...' : ''),\r\n                  imageUrl: post.images && post.images.length > 0 ? post.images[0] : '/static/image/share_default.png',\r\n                  href: `YOUR_SHARE_URL/post/${post.id}`,\r\n                  success: function() {\r\n                    uni.__f__('log','at pages/publish/publish.uvue:417','分享成功');\r\n                    // 更新分享计数\r\n                    post.shareCount++;\r\n                  },\r\n                  fail: function() {\r\n                    uni.__f__('log','at pages/publish/publish.uvue:422','分享失败');\r\n                  }\r\n                });\r\n                break;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 跳转到发布编辑页面\r\n       */\r\n      navigateToPublishEditor() {\r\n        uni.navigateTo({\r\n          url: '/pages/publish/editor'\r\n        });\r\n      },\r\n      \r\n      /**\r\n       * @description 获取模拟数据\r\n       * @return {Array} 模拟的动态数据\r\n       */\r\n      getMockData() {\r\n        return [\r\n          {\r\n            id: 1,\r\n            userId: 101,\r\n            nickname: '研究生活小助手',\r\n            avatar: '/static/image/default_avatar.png',\r\n            school: '北京大学',\r\n            major: '计算机科学',\r\n            content: '今天分享一下考研复习经验，希望对大家有帮助！数学部分要注重基础，多做真题。#考研# #复习经验#',\r\n            viewCount: 256,\r\n            likeCount: 42,\r\n            commentCount: 8,\r\n            collectCount: 15,\r\n            shareCount: 3,\r\n            isLiked: false,\r\n            isCollected: false,\r\n            isFollowed: false,\r\n            images: []\r\n          },\r\n          {\r\n            id: 2,\r\n            userId: 102,\r\n            nickname: '考研达人',\r\n            avatar: '/static/image/default_avatar.png',\r\n            school: '清华大学',\r\n            major: '电子工程',\r\n            content: '考研英语阅读理解技巧分享，掌握这些方法效率提升50%！长难句分析方法和常见词汇搭配整理。',\r\n            viewCount: 189,\r\n            likeCount: 36,\r\n            commentCount: 12,\r\n            collectCount: 20,\r\n            shareCount: 5,\r\n            isLiked: true,\r\n            isCollected: false,\r\n            isFollowed: true,\r\n            images: []\r\n          },\r\n          {\r\n            id: 3,\r\n            userId: 103,\r\n            nickname: '政治高分学姐',\r\n            avatar: '/static/image/default_avatar.png',\r\n            school: '复旦大学',\r\n            major: '政治学',\r\n            content: '考研政治复习时间规划，建议8月开始系统学习，10月开始真题训练，12月开始背诵考点。提供我整理的笔记供大家参考。',\r\n            viewCount: 320,\r\n            likeCount: 67,\r\n            commentCount: 23,\r\n            collectCount: 45,\r\n            shareCount: 12,\r\n            isLiked: false,\r\n            isCollected: true,\r\n            isFollowed: false,\r\n            images: []\r\n          }\r\n        ]\r\n      },\r\n      selectCategory(category) {\r\n        this.filter.category = category;\r\n        this.currentPage = 1;\r\n        this.posts = [];\r\n        this.loadPosts();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  /* 全局样式变量 */\r\n  page {\r\n    --primary-color: #1E90FF;\r\n    --primary-light: #87CEEB;\r\n    --primary-dark: #0073CF;\r\n    --gradient-blue: linear-gradient(135deg, #1E90FF, #00BFFF);\r\n    --gradient-blue-light: linear-gradient(135deg, #87CEEB, #48D1CC);\r\n    --text-primary: #333333;\r\n    --text-secondary: #666666;\r\n    --text-light: #999999;\r\n    --bg-color: #F5F9FC;\r\n    --card-shadow: 0 4px 12px rgba(30, 144, 255, 0.1);\r\n    font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\r\n  }\r\n\r\n  .container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 100vh;\r\n    padding-bottom: 100px; /* 增加底部padding以腾出tabBar空间 */\r\n    box-sizing: border-box;\r\n    background-color: var(--bg-color);\r\n    position: relative;\r\n  }\r\n  \r\n  .content {\r\n    flex: 1;\r\n    width: 100%;\r\n  }\r\n  \r\n  /* 筛选区域样式 */\r\n  .filter-section {\r\n    display: flex;\r\n    flex-direction: row;\r\n    padding: 12px 15px;\r\n    background-color: #ffffff;\r\n    margin: 15px 15px 10px;\r\n    border-radius: 15px;\r\n    overflow-x: auto;\r\n    white-space: nowrap;\r\n    box-shadow: var(--card-shadow);\r\n  }\r\n  \r\n  .filter-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 8px 18px;\r\n    margin-right: 12px;\r\n    border: 1px solid rgba(30, 144, 255, 0.2);\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    transition: all 0.3s ease;\r\n    color: var(--text-secondary);\r\n  }\r\n  \r\n  .filter-item.active {\r\n    border-color: transparent;\r\n    color: #ffffff;\r\n    background-image: var(--gradient-blue);\r\n    box-shadow: 0 3px 8px rgba(30, 144, 255, 0.2);\r\n  }\r\n  \r\n  .down-arrow {\r\n    width: 14px;\r\n    height: 14px;\r\n    margin-left: 5px;\r\n    opacity: 0.7;\r\n  }\r\n  \r\n  /* 动态列表样式 */\r\n  .post-list {\r\n    width: 100%;\r\n    padding-bottom: 20px;\r\n  }\r\n  \r\n  .post-card {\r\n    margin: 12px 15px;\r\n    background-color: #ffffff;\r\n    border-radius: 16px;\r\n    padding: 18px;\r\n    box-shadow: var(--card-shadow);\r\n    transition: transform 0.3s ease;\r\n  }\r\n  \r\n  .post-card:active {\r\n    transform: scale(0.98);\r\n  }\r\n  \r\n  .post-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .user-info {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .avatar {\r\n    width: 46px;\r\n    height: 46px;\r\n    border-radius: 23px;\r\n    margin-right: 12px;\r\n    border: 2px solid rgba(30, 144, 255, 0.2);\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .user-detail {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .username {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    margin-bottom: 3px;\r\n    color: var(--text-primary);\r\n  }\r\n  \r\n  .school, .major {\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    margin-bottom: 2px;\r\n  }\r\n  \r\n  .follow-btn {\r\n    padding: 6px 15px;\r\n    background-color: #ffffff;\r\n    border: 1px solid var(--primary-color);\r\n    border-radius: 18px;\r\n    color: var(--primary-color);\r\n    font-size: 13px;\r\n    line-height: 1.5;\r\n    min-width: 66px;\r\n    font-weight: 500;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .follow-btn.followed {\r\n    background-color: rgba(30, 144, 255, 0.08);\r\n    border-color: transparent;\r\n    color: var(--text-secondary);\r\n  }\r\n  \r\n  .post-content {\r\n    margin-bottom: 18px;\r\n  }\r\n  \r\n  .post-text {\r\n    font-size: 15px;\r\n    line-height: 1.7;\r\n    color: var(--text-primary);\r\n  }\r\n  \r\n  .post-footer {\r\n    display: flex;\r\n    flex-direction: column;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n    padding-top: 15px;\r\n    margin-top: 5px;\r\n  }\r\n  \r\n  .stat-item {\r\n    font-size: 12px;\r\n    color: var(--text-light);\r\n    margin-bottom: 12px;\r\n  }\r\n  \r\n  .action-bar {\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 100%;\r\n    background-color: #ffffff;\r\n    padding: 10px 0 0;\r\n    border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n    margin-top: 8px;\r\n    box-sizing: border-box;\r\n    justify-content: space-around;\r\n  }\r\n  \r\n  .action-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 25%;\r\n    padding: 8px 0;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .action-item:active {\r\n    transform: scale(0.95);\r\n    background-color: rgba(30, 144, 255, 0.05);\r\n    border-radius: 8px;\r\n  }\r\n  \r\n  .action-icon {\r\n    width: 22px;\r\n    height: 22px;\r\n    margin-bottom: 5px;\r\n    opacity: 0.8;\r\n  }\r\n  \r\n  .action-count {\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    text-align: center;\r\n  }\r\n  \r\n  /* 发布按钮样式 */\r\n  .publish-btn {\r\n    position: fixed;\r\n    right: 20px;\r\n    bottom: 80px;\r\n    width: 56px;\r\n    height: 56px;\r\n    border-radius: 28px;\r\n    background-image: var(--gradient-blue);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow: 0 4px 15px rgba(30, 144, 255, 0.4);\r\n    z-index: 100;\r\n    transition: all 0.3s ease;\r\n  }\r\n  \r\n  .publish-btn:active {\r\n    transform: scale(0.92);\r\n    box-shadow: 0 2px 8px rgba(30, 144, 255, 0.3);\r\n  }\r\n  \r\n  .plus-icon {\r\n    color: #ffffff;\r\n    font-size: 28px;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  /* 无数据提示 */\r\n  .empty-tip {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 300px;\r\n    color: var(--text-light);\r\n    font-size: 15px;\r\n  }\r\n  \r\n  .empty-tip::before {\r\n    content: '';\r\n    width: 80px;\r\n    height: 80px;\r\n    margin-bottom: 20px;\r\n    background-color: rgba(30, 144, 255, 0.1);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  \r\n  /* 加载中动画 */\r\n  .loading-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding: 20px 0;\r\n  }\r\n  \r\n  .loading-indicator {\r\n    width: 30px;\r\n    height: 30px;\r\n    border: 3px solid rgba(30, 144, 255, 0.2);\r\n    border-top-color: var(--primary-color);\r\n    border-radius: 50%;\r\n    animation: spin 0.8s linear infinite;\r\n  }\r\n  \r\n  @keyframes spin {\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  \r\n  /* 下拉刷新样式 */\r\n  .refresh-tip {\r\n    text-align: center;\r\n    padding: 15px 0;\r\n    color: var(--primary-color);\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n  }\r\n</style>","import MiniProgramPage from 'E:/yanshilu小程序前端/前端yanshilu/pages/publish/publish.uvue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","defineComponent","components","TabBar","data","posts","filter","UTSJSONObject","category","school","major","userType","sort","currentPage","isLoading","hasMore","isRefreshing","onShow","uni","hideTabBar","fail","err","index","__f__","e","this","loadPosts","onPullDownRefresh","stopPullDownRefresh","onReachBottom","loadMorePosts","methods","callback","page","pageSize","mockPosts","getMockData","setTimeout","hasFilter","loadRelatedPosts","showModal","title","content","showCancel","success","tempFilter","request","url","method","res","statusCode","length","showToast","icon","viewPostDetail","postId","navigateTo","navigateToUserDetail","userId","toggleFollow","post","action","isFollowed","likePost","isLiked","id","likeCount","commentPost","collectPost","isCollected","collectCount","sharePost","showActionSheet","itemList","tapIndex","share","provider","scene","type","summary","substring","imageUrl","images","href","shareCount","navigateToPublishEditor","nickname","avatar","viewCount","commentCount","selectCategory","wx","createPage","MiniProgramPage"],"mappings":"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"}